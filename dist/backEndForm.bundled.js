/**!
 * Sortable 1.15.0
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function ok(h,p){var v=Object.keys(h);if(Object.getOwnPropertySymbols){var C=Object.getOwnPropertySymbols(h);p&&(C=C.filter(function(k){return Object.getOwnPropertyDescriptor(h,k).enumerable})),v.push.apply(v,C)}return v}function Is(h){for(var p=1;p<arguments.length;p++){var v=arguments[p]!=null?arguments[p]:{};p%2?ok(Object(v),!0).forEach(function(C){I4(h,C,v[C])}):Object.getOwnPropertyDescriptors?Object.defineProperties(h,Object.getOwnPropertyDescriptors(v)):ok(Object(v)).forEach(function(C){Object.defineProperty(h,C,Object.getOwnPropertyDescriptor(v,C))})}return h}function hu(h){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?hu=function(p){return typeof p}:hu=function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p},hu(h)}function I4(h,p,v){return p in h?Object.defineProperty(h,p,{value:v,enumerable:!0,configurable:!0,writable:!0}):h[p]=v,h}function No(){return No=Object.assign||function(h){for(var p=1;p<arguments.length;p++){var v=arguments[p];for(var C in v)Object.prototype.hasOwnProperty.call(v,C)&&(h[C]=v[C])}return h},No.apply(this,arguments)}function L4(h,p){if(h==null)return{};var v={},C=Object.keys(h),k,B;for(B=0;B<C.length;B++)k=C[B],!(p.indexOf(k)>=0)&&(v[k]=h[k]);return v}function F4(h,p){if(h==null)return{};var v=L4(h,p),C,k;if(Object.getOwnPropertySymbols){var B=Object.getOwnPropertySymbols(h);for(k=0;k<B.length;k++)C=B[k],!(p.indexOf(C)>=0)&&Object.prototype.propertyIsEnumerable.call(h,C)&&(v[C]=h[C])}return v}var $4="1.15.0";function Qs(h){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(h)}var To=Qs(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),xu=Qs(/Edge/i),rk=Qs(/firefox/i),bu=Qs(/safari/i)&&!Qs(/chrome/i)&&!Qs(/android/i),pk=Qs(/iP(ad|od|hone)/i),gk=Qs(/chrome/i)&&Qs(/android/i),hk={capture:!1,passive:!1};function ct(h,p,v){h.addEventListener(p,v,!To&&hk)}function st(h,p,v){h.removeEventListener(p,v,!To&&hk)}function Eu(h,p){if(p){if(p[0]===">"&&(p=p.substring(1)),h)try{if(h.matches)return h.matches(p);if(h.msMatchesSelector)return h.msMatchesSelector(p);if(h.webkitMatchesSelector)return h.webkitMatchesSelector(p)}catch{return!1}return!1}}function M4(h){return h.host&&h!==document&&h.host.nodeType?h.host:h.parentNode}function Bs(h,p,v,C){if(h){v=v||document;do{if(p!=null&&(p[0]===">"?h.parentNode===v&&Eu(h,p):Eu(h,p))||C&&h===v)return h;if(h===v)break}while(h=M4(h))}return null}var ak=/\s+/g;function Wn(h,p,v){if(h&&p)if(h.classList)h.classList[v?"add":"remove"](p);else{var C=(" "+h.className+" ").replace(ak," ").replace(" "+p+" "," ");h.className=(C+(v?" "+p:"")).replace(ak," ")}}function De(h,p,v){var C=h&&h.style;if(C){if(v===void 0)return document.defaultView&&document.defaultView.getComputedStyle?v=document.defaultView.getComputedStyle(h,""):h.currentStyle&&(v=h.currentStyle),p===void 0?v:v[p];!(p in C)&&p.indexOf("webkit")===-1&&(p="-webkit-"+p),C[p]=v+(typeof v=="string"?"":"px")}}function va(h,p){var v="";if(typeof h=="string")v=h;else do{var C=De(h,"transform");C&&C!=="none"&&(v=C+" "+v)}while(!p&&(h=h.parentNode));var k=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return k&&new k(v)}function bk(h,p,v){if(h){var C=h.getElementsByTagName(p),k=0,B=C.length;if(v)for(;k<B;k++)v(C[k],k);return C}return[]}function ko(){var h=document.scrollingElement;return h||document.documentElement}function Gt(h,p,v,C,k){if(!(!h.getBoundingClientRect&&h!==window)){var B,M,G,X,se,ue,de;if(h!==window&&h.parentNode&&h!==ko()?(B=h.getBoundingClientRect(),M=B.top,G=B.left,X=B.bottom,se=B.right,ue=B.height,de=B.width):(M=0,G=0,X=window.innerHeight,se=window.innerWidth,ue=window.innerHeight,de=window.innerWidth),(p||v)&&h!==window&&(k=k||h.parentNode,!To))do if(k&&k.getBoundingClientRect&&(De(k,"transform")!=="none"||v&&De(k,"position")!=="static")){var we=k.getBoundingClientRect();M-=we.top+parseInt(De(k,"border-top-width")),G-=we.left+parseInt(De(k,"border-left-width")),X=M+B.height,se=G+B.width;break}while(k=k.parentNode);if(C&&h!==window){var Ve=va(k||h),$e=Ve&&Ve.a,Me=Ve&&Ve.d;Ve&&(M/=Me,G/=$e,de/=$e,ue/=Me,X=M+ue,se=G+de)}return{top:M,left:G,bottom:X,right:se,width:de,height:ue}}}function ik(h,p,v){for(var C=ck(h,!0),k=Gt(h)[p];C;){var B=Gt(C)[v],M=void 0;if(v==="top"||v==="left"?M=k>=B:M=k<=B,!M)return C;if(C===ko())break;C=ck(C,!1)}return!1}function Ca(h,p,v,C){for(var k=0,B=0,M=h.children;B<M.length;){if(M[B].style.display!=="none"&&M[B]!==Pe.ghost&&(C||M[B]!==Pe.dragged)&&Bs(M[B],v.draggable,h,!1)){if(k===p)return M[B];k++}B++}return null}function ag(h,p){for(var v=h.lastElementChild;v&&(v===Pe.ghost||De(v,"display")==="none"||p&&!Eu(v,p));)v=v.previousElementSibling;return v||null}function Zn(h,p){var v=0;if(!h||!h.parentNode)return-1;for(;h=h.previousElementSibling;)h.nodeName.toUpperCase()!=="TEMPLATE"&&h!==Pe.clone&&(!p||Eu(h,p))&&v++;return v}function lk(h){var p=0,v=0,C=ko();if(h)do{var k=va(h),B=k.a,M=k.d;p+=h.scrollLeft*B,v+=h.scrollTop*M}while(h!==C&&(h=h.parentNode));return[p,v]}function U4(h,p){for(var v in h)if(h.hasOwnProperty(v)){for(var C in p)if(p.hasOwnProperty(C)&&p[C]===h[v][C])return Number(v)}return-1}function ck(h,p){if(!h||!h.getBoundingClientRect)return ko();var v=h,C=!1;do if(v.clientWidth<v.scrollWidth||v.clientHeight<v.scrollHeight){var k=De(v);if(v.clientWidth<v.scrollWidth&&(k.overflowX=="auto"||k.overflowX=="scroll")||v.clientHeight<v.scrollHeight&&(k.overflowY=="auto"||k.overflowY=="scroll")){if(!v.getBoundingClientRect||v===document.body)return ko();if(C||p)return v;C=!0}}while(v=v.parentNode);return ko()}function z4(h,p){if(h&&p)for(var v in p)p.hasOwnProperty(v)&&(h[v]=p[v]);return h}function Xp(h,p){return Math.round(h.top)===Math.round(p.top)&&Math.round(h.left)===Math.round(p.left)&&Math.round(h.height)===Math.round(p.height)&&Math.round(h.width)===Math.round(p.width)}var Zp;function H4(h,p){return function(){if(!Zp){var v=arguments,C=this;v.length===1?h.call(C,v[0]):h.apply(C,v),Zp=setTimeout(function(){Zp=void 0},p)}}}function W4(h,p,v){h.scrollLeft+=p,h.scrollTop+=v}function vk(h){var p=window.Polymer,v=window.jQuery||window.Zepto;return p&&p.dom?p.dom(h).cloneNode(!0):v?v(h).clone(!0)[0]:h.cloneNode(!0)}var Qn="Sortable"+new Date().getTime();function V4(){var h=[],p;return{captureAnimationState:function(){if(h=[],!!this.options.animation){var C=[].slice.call(this.el.children);C.forEach(function(k){if(!(De(k,"display")==="none"||k===Pe.ghost)){h.push({target:k,rect:Gt(k)});var B=Is({},h[h.length-1].rect);if(k.thisAnimationDuration){var M=va(k,!0);M&&(B.top-=M.f,B.left-=M.e)}k.fromRect=B}})}},addAnimationState:function(C){h.push(C)},removeAnimationState:function(C){h.splice(U4(h,{target:C}),1)},animateAll:function(C){var k=this;if(!this.options.animation){clearTimeout(p),typeof C=="function"&&C();return}var B=!1,M=0;h.forEach(function(G){var X=0,se=G.target,ue=se.fromRect,de=Gt(se),we=se.prevFromRect,Ve=se.prevToRect,$e=G.rect,Me=va(se,!0);Me&&(de.top-=Me.f,de.left-=Me.e),se.toRect=de,se.thisAnimationDuration&&Xp(we,de)&&!Xp(ue,de)&&($e.top-de.top)/($e.left-de.left)===(ue.top-de.top)/(ue.left-de.left)&&(X=j4($e,we,Ve,k.options)),Xp(de,ue)||(se.prevFromRect=ue,se.prevToRect=de,X||(X=k.options.animation),k.animate(se,$e,de,X)),X&&(B=!0,M=Math.max(M,X),clearTimeout(se.animationResetTimer),se.animationResetTimer=setTimeout(function(){se.animationTime=0,se.prevFromRect=null,se.fromRect=null,se.prevToRect=null,se.thisAnimationDuration=null},X),se.thisAnimationDuration=X)}),clearTimeout(p),B?p=setTimeout(function(){typeof C=="function"&&C()},M):typeof C=="function"&&C(),h=[]},animate:function(C,k,B,M){if(M){De(C,"transition",""),De(C,"transform","");var G=va(this.el),X=G&&G.a,se=G&&G.d,ue=(k.left-B.left)/(X||1),de=(k.top-B.top)/(se||1);C.animatingX=!!ue,C.animatingY=!!de,De(C,"transform","translate3d("+ue+"px,"+de+"px,0)"),this.forRepaintDummy=q4(C),De(C,"transition","transform "+M+"ms"+(this.options.easing?" "+this.options.easing:"")),De(C,"transform","translate3d(0,0,0)"),typeof C.animated=="number"&&clearTimeout(C.animated),C.animated=setTimeout(function(){De(C,"transition",""),De(C,"transform",""),C.animated=!1,C.animatingX=!1,C.animatingY=!1},M)}}}}function q4(h){return h.offsetWidth}function j4(h,p,v,C){return Math.sqrt(Math.pow(p.top-h.top,2)+Math.pow(p.left-h.left,2))/Math.sqrt(Math.pow(p.top-v.top,2)+Math.pow(p.left-v.left,2))*C.animation}var pa=[],Qp={initializeByDefault:!0},Gi={mount:function(p){for(var v in Qp)Qp.hasOwnProperty(v)&&!(v in p)&&(p[v]=Qp[v]);pa.forEach(function(C){if(C.pluginName===p.pluginName)throw"Sortable: Cannot mount plugin ".concat(p.pluginName," more than once")}),pa.push(p)},pluginEvent:function(p,v,C){var k=this;this.eventCanceled=!1,C.cancel=function(){k.eventCanceled=!0};var B=p+"Global";pa.forEach(function(M){v[M.pluginName]&&(v[M.pluginName][B]&&v[M.pluginName][B](Is({sortable:v},C)),v.options[M.pluginName]&&v[M.pluginName][p]&&v[M.pluginName][p](Is({sortable:v},C)))})},initializePlugins:function(p,v,C,k){pa.forEach(function(G){var X=G.pluginName;if(!(!p.options[X]&&!G.initializeByDefault)){var se=new G(p,v,p.options);se.sortable=p,se.options=p.options,p[X]=se,No(C,se.defaults)}});for(var B in p.options)if(p.options.hasOwnProperty(B)){var M=this.modifyOption(p,B,p.options[B]);typeof M<"u"&&(p.options[B]=M)}},getEventProperties:function(p,v){var C={};return pa.forEach(function(k){typeof k.eventProperties=="function"&&No(C,k.eventProperties.call(v[k.pluginName],p))}),C},modifyOption:function(p,v,C){var k;return pa.forEach(function(B){p[B.pluginName]&&B.optionListeners&&typeof B.optionListeners[v]=="function"&&(k=B.optionListeners[v].call(p[B.pluginName],C))}),k}};function K4(h){var p=h.sortable,v=h.rootEl,C=h.name,k=h.targetEl,B=h.cloneEl,M=h.toEl,G=h.fromEl,X=h.oldIndex,se=h.newIndex,ue=h.oldDraggableIndex,de=h.newDraggableIndex,we=h.originalEvent,Ve=h.putSortable,$e=h.extraEventProperties;if(p=p||v&&v[Qn],!!p){var Me,kn=p.options,ps="on"+C.charAt(0).toUpperCase()+C.substr(1);window.CustomEvent&&!To&&!xu?Me=new CustomEvent(C,{bubbles:!0,cancelable:!0}):(Me=document.createEvent("Event"),Me.initEvent(C,!0,!0)),Me.to=M||v,Me.from=G||v,Me.item=k||v,Me.clone=B,Me.oldIndex=X,Me.newIndex=se,Me.oldDraggableIndex=ue,Me.newDraggableIndex=de,Me.originalEvent=we,Me.pullMode=Ve?Ve.lastPutMode:void 0;var Wt=Is(Is({},$e),Gi.getEventProperties(C,p));for(var le in Wt)Me[le]=Wt[le];v&&v.dispatchEvent(Me),kn[ps]&&kn[ps].call(p,Me)}}var G4=["evt"],xn=function(p,v){var C=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},k=C.evt,B=F4(C,G4);Gi.pluginEvent.bind(Pe)(p,v,Is({dragEl:ce,parentEl:Nt,ghostEl:Be,rootEl:Ct,nextEl:Er,lastDownEl:vu,cloneEl:Et,cloneHidden:xo,dragStarted:Vi,putSortable:nn,activeSortable:Pe.active,originalEvent:k,oldIndex:ba,oldDraggableIndex:qi,newIndex:Vn,newDraggableIndex:_o,hideGhostForTarget:Sk,unhideGhostForTarget:wk,cloneNowHidden:function(){xo=!0},cloneNowShown:function(){xo=!1},dispatchSortableEvent:function(G){bn({sortable:v,name:G,originalEvent:k})}},B))};function bn(h){K4(Is({putSortable:nn,cloneEl:Et,targetEl:ce,rootEl:Ct,oldIndex:ba,oldDraggableIndex:qi,newIndex:Vn,newDraggableIndex:_o},h))}var ce,Nt,Be,Ct,Er,vu,Et,xo,ba,Vn,qi,_o,du,nn,ha=!1,Su=!1,wu=[],Cr,ms,Jp,eg,uk,fk,Vi,ga,ji,Ki=!1,mu=!1,Cu,dn,tg=[],og=!1,_u=[],ku=typeof document<"u",pu=pk,dk=xu||To?"cssFloat":"float",Y4=ku&&!gk&&!pk&&"draggable"in document.createElement("div"),Ck=function(){if(ku){if(To)return!1;var h=document.createElement("x");return h.style.cssText="pointer-events:auto",h.style.pointerEvents==="auto"}}(),yk=function(p,v){var C=De(p),k=parseInt(C.width)-parseInt(C.paddingLeft)-parseInt(C.paddingRight)-parseInt(C.borderLeftWidth)-parseInt(C.borderRightWidth),B=Ca(p,0,v),M=Ca(p,1,v),G=B&&De(B),X=M&&De(M),se=G&&parseInt(G.marginLeft)+parseInt(G.marginRight)+Gt(B).width,ue=X&&parseInt(X.marginLeft)+parseInt(X.marginRight)+Gt(M).width;if(C.display==="flex")return C.flexDirection==="column"||C.flexDirection==="column-reverse"?"vertical":"horizontal";if(C.display==="grid")return C.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(B&&G.float&&G.float!=="none"){var de=G.float==="left"?"left":"right";return M&&(X.clear==="both"||X.clear===de)?"vertical":"horizontal"}return B&&(G.display==="block"||G.display==="flex"||G.display==="table"||G.display==="grid"||se>=k&&C[dk]==="none"||M&&C[dk]==="none"&&se+ue>k)?"vertical":"horizontal"},X4=function(p,v,C){var k=C?p.left:p.top,B=C?p.right:p.bottom,M=C?p.width:p.height,G=C?v.left:v.top,X=C?v.right:v.bottom,se=C?v.width:v.height;return k===G||B===X||k+M/2===G+se/2},Z4=function(p,v){var C;return wu.some(function(k){var B=k[Qn].options.emptyInsertThreshold;if(!(!B||ag(k))){var M=Gt(k),G=p>=M.left-B&&p<=M.right+B,X=v>=M.top-B&&v<=M.bottom+B;if(G&&X)return C=k}}),C},Ek=function(p){function v(B,M){return function(G,X,se,ue){var de=G.options.group.name&&X.options.group.name&&G.options.group.name===X.options.group.name;if(B==null&&(M||de))return!0;if(B==null||B===!1)return!1;if(M&&B==="clone")return B;if(typeof B=="function")return v(B(G,X,se,ue),M)(G,X,se,ue);var we=(M?G:X).options.group.name;return B===!0||typeof B=="string"&&B===we||B.join&&B.indexOf(we)>-1}}var C={},k=p.group;(!k||hu(k)!="object")&&(k={name:k}),C.name=k.name,C.checkPull=v(k.pull,!0),C.checkPut=v(k.put),C.revertClone=k.revertClone,p.group=C},Sk=function(){!Ck&&Be&&De(Be,"display","none")},wk=function(){!Ck&&Be&&De(Be,"display","")};ku&&!gk&&document.addEventListener("click",function(h){if(Su)return h.preventDefault(),h.stopPropagation&&h.stopPropagation(),h.stopImmediatePropagation&&h.stopImmediatePropagation(),Su=!1,!1},!0);var yr=function(p){if(ce){p=p.touches?p.touches[0]:p;var v=Z4(p.clientX,p.clientY);if(v){var C={};for(var k in p)p.hasOwnProperty(k)&&(C[k]=p[k]);C.target=C.rootEl=v,C.preventDefault=void 0,C.stopPropagation=void 0,v[Qn]._onDragOver(C)}}},Q4=function(p){ce&&ce.parentNode[Qn]._isOutsideThisEl(p.target)};function Pe(h,p){if(!(h&&h.nodeType&&h.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(h));this.el=h,this.options=p=No({},p),h[Qn]=this;var v={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(h.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return yk(h,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(M,G){M.setData("Text",G.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:Pe.supportPointer!==!1&&"PointerEvent"in window&&!bu,emptyInsertThreshold:5};Gi.initializePlugins(this,h,v);for(var C in v)!(C in p)&&(p[C]=v[C]);Ek(p);for(var k in this)k.charAt(0)==="_"&&typeof this[k]=="function"&&(this[k]=this[k].bind(this));this.nativeDraggable=p.forceFallback?!1:Y4,this.nativeDraggable&&(this.options.touchStartThreshold=1),p.supportPointer?ct(h,"pointerdown",this._onTapStart):(ct(h,"mousedown",this._onTapStart),ct(h,"touchstart",this._onTapStart)),this.nativeDraggable&&(ct(h,"dragover",this),ct(h,"dragenter",this)),wu.push(this.el),p.store&&p.store.get&&this.sort(p.store.get(this)||[]),No(this,V4())}Pe.prototype={constructor:Pe,_isOutsideThisEl:function(p){!this.el.contains(p)&&p!==this.el&&(ga=null)},_getDirection:function(p,v){return typeof this.options.direction=="function"?this.options.direction.call(this,p,v,ce):this.options.direction},_onTapStart:function(p){if(p.cancelable){var v=this,C=this.el,k=this.options,B=k.preventOnFilter,M=p.type,G=p.touches&&p.touches[0]||p.pointerType&&p.pointerType==="touch"&&p,X=(G||p).target,se=p.target.shadowRoot&&(p.path&&p.path[0]||p.composedPath&&p.composedPath()[0])||X,ue=k.filter;if(a7(C),!ce&&!(/mousedown|pointerdown/.test(M)&&p.button!==0||k.disabled)&&!se.isContentEditable&&!(!this.nativeDraggable&&bu&&X&&X.tagName.toUpperCase()==="SELECT")&&(X=Bs(X,k.draggable,C,!1),!(X&&X.animated)&&vu!==X)){if(ba=Zn(X),qi=Zn(X,k.draggable),typeof ue=="function"){if(ue.call(this,p,X,this)){bn({sortable:v,rootEl:se,name:"filter",targetEl:X,toEl:C,fromEl:C}),xn("filter",v,{evt:p}),B&&p.cancelable&&p.preventDefault();return}}else if(ue&&(ue=ue.split(",").some(function(de){if(de=Bs(se,de.trim(),C,!1),de)return bn({sortable:v,rootEl:de,name:"filter",targetEl:X,fromEl:C,toEl:C}),xn("filter",v,{evt:p}),!0}),ue)){B&&p.cancelable&&p.preventDefault();return}k.handle&&!Bs(se,k.handle,C,!1)||this._prepareDragStart(p,G,X)}}},_prepareDragStart:function(p,v,C){var k=this,B=k.el,M=k.options,G=B.ownerDocument,X;if(C&&!ce&&C.parentNode===B){var se=Gt(C);if(Ct=B,ce=C,Nt=ce.parentNode,Er=ce.nextSibling,vu=C,du=M.group,Pe.dragged=ce,Cr={target:ce,clientX:(v||p).clientX,clientY:(v||p).clientY},uk=Cr.clientX-se.left,fk=Cr.clientY-se.top,this._lastX=(v||p).clientX,this._lastY=(v||p).clientY,ce.style["will-change"]="all",X=function(){if(xn("delayEnded",k,{evt:p}),Pe.eventCanceled){k._onDrop();return}k._disableDelayedDragEvents(),!rk&&k.nativeDraggable&&(ce.draggable=!0),k._triggerDragStart(p,v),bn({sortable:k,name:"choose",originalEvent:p}),Wn(ce,M.chosenClass,!0)},M.ignore.split(",").forEach(function(ue){bk(ce,ue.trim(),ng)}),ct(G,"dragover",yr),ct(G,"mousemove",yr),ct(G,"touchmove",yr),ct(G,"mouseup",k._onDrop),ct(G,"touchend",k._onDrop),ct(G,"touchcancel",k._onDrop),rk&&this.nativeDraggable&&(this.options.touchStartThreshold=4,ce.draggable=!0),xn("delayStart",this,{evt:p}),M.delay&&(!M.delayOnTouchOnly||v)&&(!this.nativeDraggable||!(xu||To))){if(Pe.eventCanceled){this._onDrop();return}ct(G,"mouseup",k._disableDelayedDrag),ct(G,"touchend",k._disableDelayedDrag),ct(G,"touchcancel",k._disableDelayedDrag),ct(G,"mousemove",k._delayedDragTouchMoveHandler),ct(G,"touchmove",k._delayedDragTouchMoveHandler),M.supportPointer&&ct(G,"pointermove",k._delayedDragTouchMoveHandler),k._dragStartTimer=setTimeout(X,M.delay)}else X()}},_delayedDragTouchMoveHandler:function(p){var v=p.touches?p.touches[0]:p;Math.max(Math.abs(v.clientX-this._lastX),Math.abs(v.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){ce&&ng(ce),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var p=this.el.ownerDocument;st(p,"mouseup",this._disableDelayedDrag),st(p,"touchend",this._disableDelayedDrag),st(p,"touchcancel",this._disableDelayedDrag),st(p,"mousemove",this._delayedDragTouchMoveHandler),st(p,"touchmove",this._delayedDragTouchMoveHandler),st(p,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(p,v){v=v||p.pointerType=="touch"&&p,!this.nativeDraggable||v?this.options.supportPointer?ct(document,"pointermove",this._onTouchMove):v?ct(document,"touchmove",this._onTouchMove):ct(document,"mousemove",this._onTouchMove):(ct(ce,"dragend",this),ct(Ct,"dragstart",this._onDragStart));try{document.selection?yu(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(p,v){if(ha=!1,Ct&&ce){xn("dragStarted",this,{evt:v}),this.nativeDraggable&&ct(document,"dragover",Q4);var C=this.options;!p&&Wn(ce,C.dragClass,!1),Wn(ce,C.ghostClass,!0),Pe.active=this,p&&this._appendGhost(),bn({sortable:this,name:"start",originalEvent:v})}else this._nulling()},_emulateDragOver:function(){if(ms){this._lastX=ms.clientX,this._lastY=ms.clientY,Sk();for(var p=document.elementFromPoint(ms.clientX,ms.clientY),v=p;p&&p.shadowRoot&&(p=p.shadowRoot.elementFromPoint(ms.clientX,ms.clientY),p!==v);)v=p;if(ce.parentNode[Qn]._isOutsideThisEl(p),v)do{if(v[Qn]){var C=void 0;if(C=v[Qn]._onDragOver({clientX:ms.clientX,clientY:ms.clientY,target:p,rootEl:v}),C&&!this.options.dragoverBubble)break}p=v}while(v=v.parentNode);wk()}},_onTouchMove:function(p){if(Cr){var v=this.options,C=v.fallbackTolerance,k=v.fallbackOffset,B=p.touches?p.touches[0]:p,M=Be&&va(Be,!0),G=Be&&M&&M.a,X=Be&&M&&M.d,se=pu&&dn&&lk(dn),ue=(B.clientX-Cr.clientX+k.x)/(G||1)+(se?se[0]-tg[0]:0)/(G||1),de=(B.clientY-Cr.clientY+k.y)/(X||1)+(se?se[1]-tg[1]:0)/(X||1);if(!Pe.active&&!ha){if(C&&Math.max(Math.abs(B.clientX-this._lastX),Math.abs(B.clientY-this._lastY))<C)return;this._onDragStart(p,!0)}if(Be){M?(M.e+=ue-(Jp||0),M.f+=de-(eg||0)):M={a:1,b:0,c:0,d:1,e:ue,f:de};var we="matrix(".concat(M.a,",").concat(M.b,",").concat(M.c,",").concat(M.d,",").concat(M.e,",").concat(M.f,")");De(Be,"webkitTransform",we),De(Be,"mozTransform",we),De(Be,"msTransform",we),De(Be,"transform",we),Jp=ue,eg=de,ms=B}p.cancelable&&p.preventDefault()}},_appendGhost:function(){if(!Be){var p=this.options.fallbackOnBody?document.body:Ct,v=Gt(ce,!0,pu,!0,p),C=this.options;if(pu){for(dn=p;De(dn,"position")==="static"&&De(dn,"transform")==="none"&&dn!==document;)dn=dn.parentNode;dn!==document.body&&dn!==document.documentElement?(dn===document&&(dn=ko()),v.top+=dn.scrollTop,v.left+=dn.scrollLeft):dn=ko(),tg=lk(dn)}Be=ce.cloneNode(!0),Wn(Be,C.ghostClass,!1),Wn(Be,C.fallbackClass,!0),Wn(Be,C.dragClass,!0),De(Be,"transition",""),De(Be,"transform",""),De(Be,"box-sizing","border-box"),De(Be,"margin",0),De(Be,"top",v.top),De(Be,"left",v.left),De(Be,"width",v.width),De(Be,"height",v.height),De(Be,"opacity","0.8"),De(Be,"position",pu?"absolute":"fixed"),De(Be,"zIndex","100000"),De(Be,"pointerEvents","none"),Pe.ghost=Be,p.appendChild(Be),De(Be,"transform-origin",uk/parseInt(Be.style.width)*100+"% "+fk/parseInt(Be.style.height)*100+"%")}},_onDragStart:function(p,v){var C=this,k=p.dataTransfer,B=C.options;if(xn("dragStart",this,{evt:p}),Pe.eventCanceled){this._onDrop();return}xn("setupClone",this),Pe.eventCanceled||(Et=vk(ce),Et.removeAttribute("id"),Et.draggable=!1,Et.style["will-change"]="",this._hideClone(),Wn(Et,this.options.chosenClass,!1),Pe.clone=Et),C.cloneId=yu(function(){xn("clone",C),!Pe.eventCanceled&&(C.options.removeCloneOnHide||Ct.insertBefore(Et,ce),C._hideClone(),bn({sortable:C,name:"clone"}))}),!v&&Wn(ce,B.dragClass,!0),v?(Su=!0,C._loopId=setInterval(C._emulateDragOver,50)):(st(document,"mouseup",C._onDrop),st(document,"touchend",C._onDrop),st(document,"touchcancel",C._onDrop),k&&(k.effectAllowed="move",B.setData&&B.setData.call(C,k,ce)),ct(document,"drop",C),De(ce,"transform","translateZ(0)")),ha=!0,C._dragStartId=yu(C._dragStarted.bind(C,v,p)),ct(document,"selectstart",C),Vi=!0,bu&&De(document.body,"user-select","none")},_onDragOver:function(p){var v=this.el,C=p.target,k,B,M,G=this.options,X=G.group,se=Pe.active,ue=du===X,de=G.sort,we=nn||se,Ve,$e=this,Me=!1;if(og)return;function kn(Y,Vt){xn(Y,$e,Is({evt:p,isOwner:ue,axis:Ve?"vertical":"horizontal",revert:M,dragRect:k,targetRect:B,canSort:de,fromSortable:we,target:C,completed:Wt,onMove:function(te,wr){return gu(Ct,v,ce,k,te,Gt(te),p,wr)},changed:le},Vt))}function ps(){kn("dragOverAnimationCapture"),$e.captureAnimationState(),$e!==we&&we.captureAnimationState()}function Wt(Y){return kn("dragOverCompleted",{insertion:Y}),Y&&(ue?se._hideClone():se._showClone($e),$e!==we&&(Wn(ce,nn?nn.options.ghostClass:se.options.ghostClass,!1),Wn(ce,G.ghostClass,!0)),nn!==$e&&$e!==Pe.active?nn=$e:$e===Pe.active&&nn&&(nn=null),we===$e&&($e._ignoreWhileAnimating=C),$e.animateAll(function(){kn("dragOverAnimationComplete"),$e._ignoreWhileAnimating=null}),$e!==we&&(we.animateAll(),we._ignoreWhileAnimating=null)),(C===ce&&!ce.animated||C===v&&!C.animated)&&(ga=null),!G.dragoverBubble&&!p.rootEl&&C!==document&&(ce.parentNode[Qn]._isOutsideThisEl(p.target),!Y&&yr(p)),!G.dragoverBubble&&p.stopPropagation&&p.stopPropagation(),Me=!0}function le(){Vn=Zn(ce),_o=Zn(ce,G.draggable),bn({sortable:$e,name:"change",toEl:v,newIndex:Vn,newDraggableIndex:_o,originalEvent:p})}if(p.preventDefault!==void 0&&p.cancelable&&p.preventDefault(),C=Bs(C,G.draggable,v,!0),kn("dragOver"),Pe.eventCanceled)return Me;if(ce.contains(p.target)||C.animated&&C.animatingX&&C.animatingY||$e._ignoreWhileAnimating===C)return Wt(!1);if(Su=!1,se&&!G.disabled&&(ue?de||(M=Nt!==Ct):nn===this||(this.lastPutMode=du.checkPull(this,se,ce,p))&&X.checkPut(this,se,ce,p))){if(Ve=this._getDirection(p,C)==="vertical",k=Gt(ce),kn("dragOverValid"),Pe.eventCanceled)return Me;if(M)return Nt=Ct,ps(),this._hideClone(),kn("revert"),Pe.eventCanceled||(Er?Ct.insertBefore(ce,Er):Ct.appendChild(ce)),Wt(!0);var it=ag(v,G.draggable);if(!it||n7(p,Ve,this)&&!it.animated){if(it===ce)return Wt(!1);if(it&&v===p.target&&(C=it),C&&(B=Gt(C)),gu(Ct,v,ce,k,C,B,p,!!C)!==!1)return ps(),it&&it.nextSibling?v.insertBefore(ce,it.nextSibling):v.appendChild(ce),Nt=v,le(),Wt(!0)}else if(it&&t7(p,Ve,this)){var Sr=Ca(v,0,G,!0);if(Sr===ce)return Wt(!1);if(C=Sr,B=Gt(C),gu(Ct,v,ce,k,C,B,p,!1)!==!1)return ps(),v.insertBefore(ce,Sr),Nt=v,le(),Wt(!0)}else if(C.parentNode===v){B=Gt(C);var et=0,Lt,Ls=ce.parentNode!==v,St=!X4(ce.animated&&ce.toRect||k,C.animated&&C.toRect||B,Ve),ut=Ve?"top":"left",K=ik(C,"top","top")||ik(ce,"top","top"),Ie=K?K.scrollTop:void 0;ga!==C&&(Lt=B[ut],Ki=!1,mu=!St&&G.invertSwap||Ls),et=s7(p,C,B,Ve,St?1:G.swapThreshold,G.invertedSwapThreshold==null?G.swapThreshold:G.invertedSwapThreshold,mu,ga===C);var Yt;if(et!==0){var Fs=Zn(ce);do Fs-=et,Yt=Nt.children[Fs];while(Yt&&(De(Yt,"display")==="none"||Yt===Be))}if(et===0||Yt===C)return Wt(!1);ga=C,ji=et;var Se=C.nextElementSibling,Nn=!1;Nn=et===1;var Ao=gu(Ct,v,ce,k,C,B,p,Nn);if(Ao!==!1)return(Ao===1||Ao===-1)&&(Nn=Ao===1),og=!0,setTimeout(e7,30),ps(),Nn&&!Se?v.appendChild(ce):C.parentNode.insertBefore(ce,Nn?Se:C),K&&W4(K,0,Ie-K.scrollTop),Nt=ce.parentNode,Lt!==void 0&&!mu&&(Cu=Math.abs(Lt-Gt(C)[ut])),le(),Wt(!0)}if(v.contains(ce))return Wt(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){st(document,"mousemove",this._onTouchMove),st(document,"touchmove",this._onTouchMove),st(document,"pointermove",this._onTouchMove),st(document,"dragover",yr),st(document,"mousemove",yr),st(document,"touchmove",yr)},_offUpEvents:function(){var p=this.el.ownerDocument;st(p,"mouseup",this._onDrop),st(p,"touchend",this._onDrop),st(p,"pointerup",this._onDrop),st(p,"touchcancel",this._onDrop),st(document,"selectstart",this)},_onDrop:function(p){var v=this.el,C=this.options;if(Vn=Zn(ce),_o=Zn(ce,C.draggable),xn("drop",this,{evt:p}),Nt=ce&&ce.parentNode,Vn=Zn(ce),_o=Zn(ce,C.draggable),Pe.eventCanceled){this._nulling();return}ha=!1,mu=!1,Ki=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),rg(this.cloneId),rg(this._dragStartId),this.nativeDraggable&&(st(document,"drop",this),st(v,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),bu&&De(document.body,"user-select",""),De(ce,"transform",""),p&&(Vi&&(p.cancelable&&p.preventDefault(),!C.dropBubble&&p.stopPropagation()),Be&&Be.parentNode&&Be.parentNode.removeChild(Be),(Ct===Nt||nn&&nn.lastPutMode!=="clone")&&Et&&Et.parentNode&&Et.parentNode.removeChild(Et),ce&&(this.nativeDraggable&&st(ce,"dragend",this),ng(ce),ce.style["will-change"]="",Vi&&!ha&&Wn(ce,nn?nn.options.ghostClass:this.options.ghostClass,!1),Wn(ce,this.options.chosenClass,!1),bn({sortable:this,name:"unchoose",toEl:Nt,newIndex:null,newDraggableIndex:null,originalEvent:p}),Ct!==Nt?(Vn>=0&&(bn({rootEl:Nt,name:"add",toEl:Nt,fromEl:Ct,originalEvent:p}),bn({sortable:this,name:"remove",toEl:Nt,originalEvent:p}),bn({rootEl:Nt,name:"sort",toEl:Nt,fromEl:Ct,originalEvent:p}),bn({sortable:this,name:"sort",toEl:Nt,originalEvent:p})),nn&&nn.save()):Vn!==ba&&Vn>=0&&(bn({sortable:this,name:"update",toEl:Nt,originalEvent:p}),bn({sortable:this,name:"sort",toEl:Nt,originalEvent:p})),Pe.active&&((Vn==null||Vn===-1)&&(Vn=ba,_o=qi),bn({sortable:this,name:"end",toEl:Nt,originalEvent:p}),this.save()))),this._nulling()},_nulling:function(){xn("nulling",this),Ct=ce=Nt=Be=Er=Et=vu=xo=Cr=ms=Vi=Vn=_o=ba=qi=ga=ji=nn=du=Pe.dragged=Pe.ghost=Pe.clone=Pe.active=null,_u.forEach(function(p){p.checked=!0}),_u.length=Jp=eg=0},handleEvent:function(p){switch(p.type){case"drop":case"dragend":this._onDrop(p);break;case"dragenter":case"dragover":ce&&(this._onDragOver(p),J4(p));break;case"selectstart":p.preventDefault();break}},toArray:function(){for(var p=[],v,C=this.el.children,k=0,B=C.length,M=this.options;k<B;k++)v=C[k],Bs(v,M.draggable,this.el,!1)&&p.push(v.getAttribute(M.dataIdAttr)||r7(v));return p},sort:function(p,v){var C={},k=this.el;this.toArray().forEach(function(B,M){var G=k.children[M];Bs(G,this.options.draggable,k,!1)&&(C[B]=G)},this),v&&this.captureAnimationState(),p.forEach(function(B){C[B]&&(k.removeChild(C[B]),k.appendChild(C[B]))}),v&&this.animateAll()},save:function(){var p=this.options.store;p&&p.set&&p.set(this)},closest:function(p,v){return Bs(p,v||this.options.draggable,this.el,!1)},option:function(p,v){var C=this.options;if(v===void 0)return C[p];var k=Gi.modifyOption(this,p,v);typeof k<"u"?C[p]=k:C[p]=v,p==="group"&&Ek(C)},destroy:function(){xn("destroy",this);var p=this.el;p[Qn]=null,st(p,"mousedown",this._onTapStart),st(p,"touchstart",this._onTapStart),st(p,"pointerdown",this._onTapStart),this.nativeDraggable&&(st(p,"dragover",this),st(p,"dragenter",this)),Array.prototype.forEach.call(p.querySelectorAll("[draggable]"),function(v){v.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),wu.splice(wu.indexOf(this.el),1),this.el=p=null},_hideClone:function(){if(!xo){if(xn("hideClone",this),Pe.eventCanceled)return;De(Et,"display","none"),this.options.removeCloneOnHide&&Et.parentNode&&Et.parentNode.removeChild(Et),xo=!0}},_showClone:function(p){if(p.lastPutMode!=="clone"){this._hideClone();return}if(xo){if(xn("showClone",this),Pe.eventCanceled)return;ce.parentNode==Ct&&!this.options.group.revertClone?Ct.insertBefore(Et,ce):Er?Ct.insertBefore(Et,Er):Ct.appendChild(Et),this.options.group.revertClone&&this.animate(ce,Et),De(Et,"display",""),xo=!1}}};function J4(h){h.dataTransfer&&(h.dataTransfer.dropEffect="move"),h.cancelable&&h.preventDefault()}function gu(h,p,v,C,k,B,M,G){var X,se=h[Qn],ue=se.options.onMove,de;return window.CustomEvent&&!To&&!xu?X=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(X=document.createEvent("Event"),X.initEvent("move",!0,!0)),X.to=p,X.from=h,X.dragged=v,X.draggedRect=C,X.related=k||p,X.relatedRect=B||Gt(p),X.willInsertAfter=G,X.originalEvent=M,h.dispatchEvent(X),ue&&(de=ue.call(se,X,M)),de}function ng(h){h.draggable=!1}function e7(){og=!1}function t7(h,p,v){var C=Gt(Ca(v.el,0,v.options,!0)),k=10;return p?h.clientX<C.left-k||h.clientY<C.top&&h.clientX<C.right:h.clientY<C.top-k||h.clientY<C.bottom&&h.clientX<C.left}function n7(h,p,v){var C=Gt(ag(v.el,v.options.draggable)),k=10;return p?h.clientX>C.right+k||h.clientX<=C.right&&h.clientY>C.bottom&&h.clientX>=C.left:h.clientX>C.right&&h.clientY>C.top||h.clientX<=C.right&&h.clientY>C.bottom+k}function s7(h,p,v,C,k,B,M,G){var X=C?h.clientY:h.clientX,se=C?v.height:v.width,ue=C?v.top:v.left,de=C?v.bottom:v.right,we=!1;if(!M){if(G&&Cu<se*k){if(!Ki&&(ji===1?X>ue+se*B/2:X<de-se*B/2)&&(Ki=!0),Ki)we=!0;else if(ji===1?X<ue+Cu:X>de-Cu)return-ji}else if(X>ue+se*(1-k)/2&&X<de-se*(1-k)/2)return o7(p)}return we=we||M,we&&(X<ue+se*B/2||X>de-se*B/2)?X>ue+se/2?1:-1:0}function o7(h){return Zn(ce)<Zn(h)?1:-1}function r7(h){for(var p=h.tagName+h.className+h.src+h.href+h.textContent,v=p.length,C=0;v--;)C+=p.charCodeAt(v);return C.toString(36)}function a7(h){_u.length=0;for(var p=h.getElementsByTagName("input"),v=p.length;v--;){var C=p[v];C.checked&&_u.push(C)}}function yu(h){return setTimeout(h,0)}function rg(h){return clearTimeout(h)}ku&&ct(document,"touchmove",function(h){(Pe.active||ha)&&h.cancelable&&h.preventDefault()});Pe.utils={on:ct,off:st,css:De,find:bk,is:function(p,v){return!!Bs(p,v,p,!1)},extend:z4,throttle:H4,closest:Bs,toggleClass:Wn,clone:vk,index:Zn,nextTick:yu,cancelNextTick:rg,detectDirection:yk,getChild:Ca};Pe.get=function(h){return h[Qn]};Pe.mount=function(){for(var h=arguments.length,p=new Array(h),v=0;v<h;v++)p[v]=arguments[v];p[0].constructor===Array&&(p=p[0]),p.forEach(function(C){if(!C.prototype||!C.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(C));C.utils&&(Pe.utils=Is(Is({},Pe.utils),C.utils)),Gi.mount(C)})};Pe.create=function(h,p){return new Pe(h,p)};Pe.version=$4;var _k=function(p){var v=p.originalEvent,C=p.putSortable,k=p.dragEl,B=p.activeSortable,M=p.dispatchSortableEvent,G=p.hideGhostForTarget,X=p.unhideGhostForTarget;if(v){var se=C||B;G();var ue=v.changedTouches&&v.changedTouches.length?v.changedTouches[0]:v,de=document.elementFromPoint(ue.clientX,ue.clientY);X(),se&&!se.el.contains(de)&&(M("spill"),this.onSpill({dragEl:k,putSortable:C}))}};function xk(){}xk.prototype={startIndex:null,dragStart:function(p){var v=p.oldDraggableIndex;this.startIndex=v},onSpill:function(p){var v=p.dragEl,C=p.putSortable;this.sortable.captureAnimationState(),C&&C.captureAnimationState();var k=Ca(this.sortable.el,this.startIndex,this.options);k?this.sortable.el.insertBefore(v,k):this.sortable.el.appendChild(v),this.sortable.animateAll(),C&&C.animateAll()},drop:_k};No(xk,{pluginName:"revertOnSpill"});function kk(){}kk.prototype={onSpill:function(p){var v=p.dragEl,C=p.putSortable,k=C||this.sortable;k.captureAnimationState(),v.parentNode&&v.parentNode.removeChild(v),k.animateAll()},drop:_k};No(kk,{pluginName:"removeOnSpill"});function i7(h){return h&&h.__esModule&&Object.prototype.hasOwnProperty.call(h,"default")?h.default:h}var Nk={exports:{}};(function(h){(function(){var p=function(e){if(e===null)return"null";if(e===void 0)return"undefined";var t=typeof e;return t==="object"&&(Array.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="Array")?"array":t==="object"&&(String.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="String")?"string":t},v=function(e){return["undefined","boolean","number","string","function","xml","null"].indexOf(e)!==-1},C=function(e,t){var n=Array.prototype.slice.call(e);return n.sort(t)},k=function(e,t){return B(function(n,s){return e.eq(t(n),t(s))})},B=function(e){return{eq:e}},M=B(function(e,t){return e===t}),G=M,X=function(e){return B(function(t,n){if(t.length!==n.length)return!1;for(var s=t.length,o=0;o<s;o++)if(!e.eq(t[o],n[o]))return!1;return!0})},se=function(e,t){return k(X(e),function(n){return C(n,t)})},ue=function(e){return B(function(t,n){var s=Object.keys(t),o=Object.keys(n);if(!se(G).eq(s,o))return!1;for(var r=s.length,a=0;a<r;a++){var i=s[a];if(!e.eq(t[i],n[i]))return!1}return!0})},de=B(function(e,t){if(e===t)return!0;var n=p(e),s=p(t);return n!==s?!1:v(n)?e===t:n==="array"?X(de).eq(e,t):n==="object"?ue(de).eq(e,t):!1});const we=Object.getPrototypeOf,Ve=(e,t,n)=>{var s;return n(e,t.prototype)?!0:((s=e.constructor)===null||s===void 0?void 0:s.name)===t.name},$e=e=>{const t=typeof e;return e===null?"null":t==="object"&&Array.isArray(e)?"array":t==="object"&&Ve(e,String,(n,s)=>s.isPrototypeOf(n))?"string":t},Me=e=>t=>$e(t)===e,kn=e=>t=>typeof t===e,ps=e=>t=>e===t,Wt=(e,t)=>it(e)&&Ve(e,t,(n,s)=>we(n)===s),le=Me("string"),it=Me("object"),Sr=e=>Wt(e,Object),et=Me("array"),Lt=ps(null),Ls=kn("boolean"),St=ps(void 0),ut=e=>e==null,K=e=>!ut(e),Ie=kn("function"),Yt=kn("number"),Fs=(e,t)=>{if(et(e)){for(let n=0,s=e.length;n<s;++n)if(!t(e[n]))return!1;return!0}return!1},Se=()=>{},Nn=(e,t)=>(...n)=>e(t.apply(null,n)),Ao=(e,t)=>n=>e(t(n)),Y=e=>()=>e,Vt=e=>e,lg=(e,t)=>e===t;function te(e,...t){return(...n)=>{const s=t.concat(n);return e.apply(null,s)}}const wr=e=>t=>!e(t),cg=e=>()=>{throw new Error(e)},Nu=e=>e(),ya=e=>{e()},ot=Y(!1),yt=Y(!0);class m{constructor(t,n){this.tag=t,this.value=n}static some(t){return new m(!0,t)}static none(){return m.singletonNone}fold(t,n){return this.tag?n(this.value):t()}isSome(){return this.tag}isNone(){return!this.tag}map(t){return this.tag?m.some(t(this.value)):m.none()}bind(t){return this.tag?t(this.value):m.none()}exists(t){return this.tag&&t(this.value)}forall(t){return!this.tag||t(this.value)}filter(t){return!this.tag||t(this.value)?this:m.none()}getOr(t){return this.tag?this.value:t}or(t){return this.tag?this:t}getOrThunk(t){return this.tag?this.value:t()}orThunk(t){return this.tag?this:t()}getOrDie(t){if(this.tag)return this.value;throw new Error(t??"Called getOrDie on None")}static from(t){return K(t)?m.some(t):m.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(t){this.tag&&t(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}m.singletonNone=new m(!1);const Tu=Array.prototype.slice,Dk=Array.prototype.indexOf,Rk=Array.prototype.push,ug=(e,t)=>Dk.call(e,t),Pk=(e,t)=>{const n=ug(e,t);return n===-1?m.none():m.some(n)},We=(e,t)=>ug(e,t)>-1,gt=(e,t)=>{for(let n=0,s=e.length;n<s;n++){const o=e[n];if(t(o,n))return!0}return!1},Fe=(e,t)=>{const n=e.length,s=new Array(n);for(let o=0;o<n;o++){const r=e[o];s[o]=t(r,o)}return s},$=(e,t)=>{for(let n=0,s=e.length;n<s;n++){const o=e[n];t(o,n)}},fg=(e,t)=>{for(let n=e.length-1;n>=0;n--){const s=e[n];t(s,n)}},Ea=(e,t)=>{const n=[],s=[];for(let o=0,r=e.length;o<r;o++){const a=e[o];(t(a,o)?n:s).push(a)}return{pass:n,fail:s}},ve=(e,t)=>{const n=[];for(let s=0,o=e.length;s<o;s++){const r=e[s];t(r,s)&&n.push(r)}return n},Sa=(e,t,n)=>(fg(e,(s,o)=>{n=t(n,s,o)}),n),vn=(e,t,n)=>($(e,(s,o)=>{n=t(n,s,o)}),n),dg=(e,t,n)=>{for(let s=0,o=e.length;s<o;s++){const r=e[s];if(t(r,s))return m.some(r);if(n(r,s))break}return m.none()},wt=(e,t)=>dg(e,t,ot),wa=(e,t)=>{for(let n=0,s=e.length;n<s;n++){const o=e[n];if(t(o,n))return m.some(n)}return m.none()},mg=e=>{const t=[];for(let n=0,s=e.length;n<s;++n){if(!et(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);Rk.apply(t,e[n])}return t},gs=(e,t)=>mg(Fe(e,t)),Js=(e,t)=>{for(let n=0,s=e.length;n<s;++n){const o=e[n];if(t(o,n)!==!0)return!1}return!0},_a=e=>{const t=Tu.call(e,0);return t.reverse(),t},Xi=(e,t)=>ve(e,n=>!We(t,n)),Au=(e,t)=>{const n={};for(let s=0,o=e.length;s<o;s++){const r=e[s];n[String(r)]=t(r,s)}return n},Do=(e,t)=>{const n=Tu.call(e,0);return n.sort(t),n},Zi=(e,t)=>t>=0&&t<e.length?m.some(e[t]):m.none(),mn=e=>Zi(e,0),Ro=e=>Zi(e,e.length-1),sn=Ie(Array.from)?Array.from:e=>Tu.call(e),_r=(e,t)=>{for(let n=0;n<e.length;n++){const s=t(e[n],n);if(s.isSome())return s}return m.none()},Ok=(e,t)=>{const n=[],s=Ie(t)?o=>gt(n,r=>t(r,o)):o=>We(n,o);for(let o=0,r=e.length;o<r;o++){const a=e[o];s(a)||n.push(a)}return n},Cn=Object.keys,Bk=Object.hasOwnProperty,Ye=(e,t)=>{const n=Cn(e);for(let s=0,o=n.length;s<o;s++){const r=n[s],a=e[r];t(a,r)}},Qi=(e,t)=>Ik(e,(n,s)=>({k:s,v:t(n,s)})),Ik=(e,t)=>{const n={};return Ye(e,(s,o)=>{const r=t(s,o);n[r.k]=r.v}),n},Du=e=>(t,n)=>{e[n]=t},pg=(e,t,n,s)=>{Ye(e,(o,r)=>{(t(o,r)?n:s)(o,r)})},Lk=(e,t)=>{const n={},s={};return pg(e,t,Du(n),Du(s)),{t:n,f:s}},xa=(e,t)=>{const n={};return pg(e,t,Du(n),Se),n},Ru=(e,t)=>{const n=[];return Ye(e,(s,o)=>{n.push(t(s,o))}),n},Pu=e=>Ru(e,Vt),Qe=(e,t)=>ye(e,t)?m.from(e[t]):m.none(),ye=(e,t)=>Bk.call(e,t),xr=(e,t)=>ye(e,t)&&e[t]!==void 0&&e[t]!==null,Fk=(e,t,n=de)=>ue(n).eq(e,t),gg=e=>{const t={};return $(e,n=>{t[n]={}}),Cn(t)},hg=e=>e.length!==void 0,Ou=Array.isArray,$k=e=>{if(Ou(e))return e;{const t=[];for(let n=0,s=e.length;n<s;n++)t[n]=e[n];return t}},Ji=(e,t,n)=>{if(!e)return!1;if(n=n||e,hg(e)){for(let s=0,o=e.length;s<o;s++)if(t.call(n,e[s],s,e)===!1)return!1}else for(const s in e)if(ye(e,s)&&t.call(n,e[s],s,e)===!1)return!1;return!0},Bu=(e,t)=>{const n=[];return Ji(e,(s,o)=>{n.push(t(s,o,e))}),n},ka=(e,t)=>{const n=[];return Ji(e,(s,o)=>{(!t||t(s,o,e))&&n.push(s)}),n},Mk=(e,t)=>{if(e){for(let n=0,s=e.length;n<s;n++)if(e[n]===t)return n}return-1},el=(e,t,n,s)=>{let o=St(n)?e[0]:n;for(let r=0;r<e.length;r++)o=t.call(s,o,e[r],r);return o},bg=(e,t,n)=>{for(let s=0,o=e.length;s<o;s++)if(t.call(n,e[s],s,e))return s;return-1},Po=e=>e[e.length-1],Oo=e=>{let t=!1,n;return(...s)=>(t||(t=!0,n=e.apply(null,s)),n)},Uk=(e,t,n,s)=>{const o=e.isiOS()&&/ipad/i.test(n)===!0,r=e.isiOS()&&!o,a=e.isiOS()||e.isAndroid(),i=a||s("(pointer:coarse)"),l=o||!r&&a&&s("(min-device-width:768px)"),c=r||a&&!l,f=t.isSafari()&&e.isiOS()&&/safari/i.test(n)===!1,u=!c&&!l&&!f;return{isiPad:Y(o),isiPhone:Y(r),isTablet:Y(l),isPhone:Y(c),isTouch:Y(i),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:Y(f),isDesktop:Y(u)}},zk=(e,t)=>{for(let n=0;n<e.length;n++){const s=e[n];if(s.test(t))return s}},Hk=(e,t)=>{const n=zk(e,t);if(!n)return{major:0,minor:0};const s=o=>Number(t.replace(n,"$"+o));return Iu(s(1),s(2))},Wk=(e,t)=>{const n=String(t).toLowerCase();return e.length===0?vg():Hk(e,n)},vg=()=>Iu(0,0),Iu=(e,t)=>({major:e,minor:t}),Na={nu:Iu,detect:Wk,unknown:vg},Vk=(e,t)=>_r(t.brands,n=>{const s=n.brand.toLowerCase();return wt(e,o=>{var r;return s===((r=o.brand)===null||r===void 0?void 0:r.toLowerCase())}).map(o=>({current:o.name,version:Na.nu(parseInt(n.version,10),0)}))}),Cg=(e,t)=>{const n=String(t).toLowerCase();return wt(e,s=>s.search(n))},qk=(e,t)=>Cg(e,t).map(n=>{const s=Na.detect(n.versionRegexes,t);return{current:n.name,version:s}}),jk=(e,t)=>Cg(e,t).map(n=>{const s=Na.detect(n.versionRegexes,t);return{current:n.name,version:s}}),Kk=(e,t)=>e.substring(t),yg=(e,t,n)=>t===""||e.length>=t.length&&e.substr(n,n+t.length)===t,Eg=(e,t)=>Ft(e,t)?Kk(e,t.length):e,qt=(e,t,n=0,s)=>{const o=e.indexOf(t,n);return o!==-1?St(s)?!0:o+t.length<=s:!1},Ft=(e,t)=>yg(e,t,0),Lu=(e,t)=>yg(e,t,e.length-t.length),Fu=e=>t=>t.replace(e,""),kr=Fu(/^\s+|\s+$/g),Gk=Fu(/^\s+/g),Sg=Fu(/\s+$/g),hs=e=>e.length>0,Ta=e=>!hs(e),Yk=(e,t)=>t<=0?"":new Array(t+1).join(e),tl=(e,t=10)=>{const n=parseInt(e,t);return isNaN(n)?m.none():m.some(n)},$u=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,$s=e=>t=>qt(t,e),Xk=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:e=>qt(e,"edge/")&&qt(e,"chrome")&&qt(e,"safari")&&qt(e,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,$u],search:e=>qt(e,"chrome")&&!qt(e,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:e=>qt(e,"msie")||qt(e,"trident")},{name:"Opera",versionRegexes:[$u,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:$s("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:$s("firefox")},{name:"Safari",versionRegexes:[$u,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:e=>(qt(e,"safari")||qt(e,"mobile/"))&&qt(e,"applewebkit")}],Zk=[{name:"Windows",search:$s("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:e=>qt(e,"iphone")||qt(e,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:$s("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:$s("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:$s("linux"),versionRegexes:[]},{name:"Solaris",search:$s("sunos"),versionRegexes:[]},{name:"FreeBSD",search:$s("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:$s("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],wg={browsers:Y(Xk),oses:Y(Zk)},_g="Edge",xg="Chromium",kg="IE",Ng="Opera",Tg="Firefox",Ag="Safari",Qk=()=>Dg({current:void 0,version:Na.unknown()}),Dg=e=>{const t=e.current,n=e.version,s=o=>()=>t===o;return{current:t,version:n,isEdge:s(_g),isChromium:s(xg),isIE:s(kg),isOpera:s(Ng),isFirefox:s(Tg),isSafari:s(Ag)}},Rg={unknown:Qk,nu:Dg,edge:Y(_g),chromium:Y(xg),ie:Y(kg),opera:Y(Ng),firefox:Y(Tg),safari:Y(Ag)},Pg="Windows",Og="iOS",Bg="Android",Ig="Linux",Lg="macOS",Fg="Solaris",$g="FreeBSD",Mg="ChromeOS",Jk=()=>Ug({current:void 0,version:Na.unknown()}),Ug=e=>{const t=e.current,n=e.version,s=o=>()=>t===o;return{current:t,version:n,isWindows:s(Pg),isiOS:s(Og),isAndroid:s(Bg),isMacOS:s(Lg),isLinux:s(Ig),isSolaris:s(Fg),isFreeBSD:s($g),isChromeOS:s(Mg)}},zg={unknown:Jk,nu:Ug,windows:Y(Pg),ios:Y(Og),android:Y(Bg),linux:Y(Ig),macos:Y(Lg),solaris:Y(Fg),freebsd:Y($g),chromeos:Y(Mg)},eN={detect:(e,t,n)=>{const s=wg.browsers(),o=wg.oses(),r=t.bind(l=>Vk(s,l)).orThunk(()=>qk(s,e)).fold(Rg.unknown,Rg.nu),a=jk(o,e).fold(zg.unknown,zg.nu),i=Uk(a,r,e,n);return{browser:r,os:a,deviceType:i}}},tN=e=>window.matchMedia(e).matches;let nN=Oo(()=>eN.detect(navigator.userAgent,m.from(navigator.userAgentData),tN));const bs=()=>nN(),sN=navigator.userAgent,Mu=bs(),vs=Mu.browser,Cs=Mu.os,Bo=Mu.deviceType,oN=sN.indexOf("Windows Phone")!==-1,Oe={transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",documentMode:vs.isIE()?document.documentMode||7:10,cacheSuffix:null,container:null,canHaveCSP:!vs.isIE(),windowsPhone:oN,browser:{current:vs.current,version:vs.version,isChromium:vs.isChromium,isEdge:vs.isEdge,isFirefox:vs.isFirefox,isIE:vs.isIE,isOpera:vs.isOpera,isSafari:vs.isSafari},os:{current:Cs.current,version:Cs.version,isAndroid:Cs.isAndroid,isChromeOS:Cs.isChromeOS,isFreeBSD:Cs.isFreeBSD,isiOS:Cs.isiOS,isLinux:Cs.isLinux,isMacOS:Cs.isMacOS,isSolaris:Cs.isSolaris,isWindows:Cs.isWindows},deviceType:{isDesktop:Bo.isDesktop,isiPad:Bo.isiPad,isiPhone:Bo.isiPhone,isPhone:Bo.isPhone,isTablet:Bo.isTablet,isTouch:Bo.isTouch,isWebView:Bo.isWebView}},rN=/^\s*|\s*$/g,Hg=e=>ut(e)?"":(""+e).replace(rN,""),aN=(e,t)=>t?t==="array"&&Ou(e)?!0:typeof e===t:e!==void 0,iN=(e,t,n={})=>{const s=le(e)?e.split(t||","):e||[];let o=s.length;for(;o--;)n[s[o]]={};return n},lN=ye,cN=(e,...t)=>{for(let n=0;n<t.length;n++){const s=t[n];for(const o in s)if(ye(s,o)){const r=s[o];r!==void 0&&(e[o]=r)}}return e},Wg=function(e,t,n,s){s=s||this,e&&(n&&(e=e[n]),Ji(e,(o,r)=>t.call(s,o,r,n)===!1?!1:(Wg(o,t,n,s),!0)))},V={trim:Hg,isArray:Ou,is:aN,toArray:$k,makeMap:iN,each:Ji,map:Bu,grep:ka,inArray:Mk,hasOwn:lN,extend:cN,walk:Wg,resolve:(e,t=window)=>{const n=e.split(".");for(let s=0,o=n.length;s<o&&(t=t[n[s]],!!t);s++);return t},explode:(e,t)=>et(e)?e:e===""?[]:Bu(e.split(t||","),Hg),_addCacheSuffix:e=>{const t=Oe.cacheSuffix;return t&&(e+=(e.indexOf("?")===-1?"?":"&")+t),e}},Nr=(e,t,n=lg)=>e.exists(s=>n(s,t)),uN=e=>{const t=[],n=s=>{t.push(s)};for(let s=0;s<e.length;s++)e[s].each(n);return t},on=(e,t,n)=>e.isSome()&&t.isSome()?m.some(n(e.getOrDie(),t.getOrDie())):m.none(),fN=(e,t,n,s)=>e.isSome()&&t.isSome()&&n.isSome()?m.some(s(e.getOrDie(),t.getOrDie(),n.getOrDie())):m.none(),Tr=(e,t)=>e?m.some(t):m.none(),dN=typeof window<"u"?window:Function("return this;")(),mN=(e,t)=>{let n=t??dN;for(let s=0;s<e.length&&n!==void 0&&n!==null;++s)n=n[e[s]];return n},Vg=(e,t)=>{const n=e.split(".");return mN(n,t)},pN=(e,t)=>Vg(e,t),gN=(e,t)=>{const n=pN(e,t);if(n==null)throw new Error(e+" not available on this browser");return n},hN=Object.getPrototypeOf,bN=e=>gN("HTMLElement",e),vN=e=>{const t=Vg("ownerDocument.defaultView",e);return it(e)&&(bN(t).prototype.isPrototypeOf(e)||/^HTML\w*Element$/.test(hN(e).constructor.name))},qg=8,jg=9,Kg=11,Aa=1,Gg=3,Xe=e=>e.dom.nodeName.toLowerCase(),Yg=e=>e.dom.nodeType,nl=e=>t=>Yg(t)===e,CN=e=>Yg(e)===qg||Xe(e)==="#comment",Uu=e=>pn(e)&&vN(e.dom),pn=nl(Aa),Tn=nl(Gg),yN=nl(jg),EN=nl(Kg),zu=e=>t=>pn(t)&&Xe(t)===e,Xg=(e,t,n)=>{if(le(n)||Ls(n)||Yt(n))e.setAttribute(t,n+"");else throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",n,":: Element ",e),new Error("Attribute value was not simple")},Pt=(e,t,n)=>{Xg(e.dom,t,n)},eo=(e,t)=>{const n=e.dom;Ye(t,(s,o)=>{Xg(n,o,s)})},An=(e,t)=>{const n=e.dom.getAttribute(t);return n===null?void 0:n},Ms=(e,t)=>m.from(An(e,t)),sl=(e,t)=>{const n=e.dom;return n&&n.hasAttribute?n.hasAttribute(t):!1},$t=(e,t)=>{e.dom.removeAttribute(t)},SN=e=>{const t=e.dom.attributes;return t==null||t.length===0},Zg=e=>vn(e.dom.attributes,(t,n)=>(t[n.name]=n.value,t),{}),Hu=(e,t)=>{const n=An(e,t);return n===void 0||n===""?[]:n.split(" ")},wN=(e,t,n)=>{const o=Hu(e,t).concat([n]);return Pt(e,t,o.join(" ")),!0},_N=(e,t,n)=>{const s=ve(Hu(e,t),o=>o!==n);return s.length>0?Pt(e,t,s.join(" ")):$t(e,t),!1},Da=e=>e.dom.classList!==void 0,Qg=e=>Hu(e,"class"),Jg=(e,t)=>wN(e,"class",t),eh=(e,t)=>_N(e,"class",t),xN=(e,t)=>We(Qg(e),t)?eh(e,t):Jg(e,t),Ar=(e,t)=>{Da(e)?e.dom.classList.add(t):Jg(e,t)},th=e=>{(Da(e)?e.dom.classList:Qg(e)).length===0&&$t(e,"class")},Dr=(e,t)=>{Da(e)?e.dom.classList.remove(t):eh(e,t),th(e)},kN=(e,t)=>{const n=Da(e)?e.dom.classList.toggle(t):xN(e,t);return th(e),n},Wu=(e,t)=>Da(e)&&e.dom.classList.contains(t),NN=(e,t)=>{const s=(t||document).createElement("div");if(s.innerHTML=e,!s.hasChildNodes()||s.childNodes.length>1){const o="HTML does not have a single root node";throw console.error(o,e),new Error(o)}return Ra(s.childNodes[0])},TN=(e,t)=>{const s=(t||document).createElement(e);return Ra(s)},AN=(e,t)=>{const s=(t||document).createTextNode(e);return Ra(s)},Ra=e=>{if(e==null)throw new Error("Node cannot be null or undefined");return{dom:e}},S={fromHtml:NN,fromTag:TN,fromText:AN,fromDom:Ra,fromPoint:(e,t,n)=>m.from(e.dom.elementFromPoint(t,n)).map(Ra)},nh=(e,t)=>{const n=[],s=r=>(n.push(r),t(r));let o=t(e);do o=o.bind(s);while(o.isSome());return n},Jn=(e,t)=>{const n=e.dom;if(n.nodeType!==Aa)return!1;{const s=n;if(s.matches!==void 0)return s.matches(t);if(s.msMatchesSelector!==void 0)return s.msMatchesSelector(t);if(s.webkitMatchesSelector!==void 0)return s.webkitMatchesSelector(t);if(s.mozMatchesSelector!==void 0)return s.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")}},sh=e=>e.nodeType!==Aa&&e.nodeType!==jg&&e.nodeType!==Kg||e.childElementCount===0,DN=(e,t)=>{const n=t===void 0?document:t.dom;return sh(n)?[]:Fe(n.querySelectorAll(e),S.fromDom)},RN=(e,t)=>{const n=t===void 0?document:t.dom;return sh(n)?m.none():m.from(n.querySelector(e)).map(S.fromDom)},Ue=(e,t)=>e.dom===t.dom,Us=(e,t)=>{const n=e.dom,s=t.dom;return n===s?!1:n.contains(s)},oh=e=>S.fromDom(e.dom.ownerDocument),zs=e=>yN(e)?e:oh(e),PN=e=>S.fromDom(zs(e).dom.documentElement),Pa=e=>S.fromDom(zs(e).dom.defaultView),qn=e=>m.from(e.dom.parentNode).map(S.fromDom),Vu=e=>m.from(e.dom.parentElement).map(S.fromDom),rh=(e,t)=>{const n=Ie(t)?t:ot;let s=e.dom;const o=[];for(;s.parentNode!==null&&s.parentNode!==void 0;){const r=s.parentNode,a=S.fromDom(r);if(o.push(a),n(a)===!0)break;s=r}return o},ON=e=>{const t=n=>ve(n,s=>!Ue(e,s));return qn(e).map(Mt).map(t).getOr([])},Io=e=>m.from(e.dom.previousSibling).map(S.fromDom),Oa=e=>m.from(e.dom.nextSibling).map(S.fromDom),ah=e=>_a(nh(e,Io)),ih=e=>nh(e,Oa),Mt=e=>Fe(e.dom.childNodes,S.fromDom),Rr=(e,t)=>{const n=e.dom.childNodes;return m.from(n[t]).map(S.fromDom)},qu=e=>Rr(e,0),ju=e=>Rr(e,e.dom.childNodes.length-1),Ku=e=>e.dom.childNodes.length,BN=e=>e.dom.hasChildNodes(),IN=e=>{const t=e.dom.head;if(t==null)throw new Error("Head is not available yet");return S.fromDom(t)},Gu=e=>EN(e)&&K(e.dom.host),lh=Ie(Element.prototype.attachShadow)&&Ie(Node.prototype.getRootNode),LN=Y(lh),to=lh?e=>S.fromDom(e.dom.getRootNode()):zs,Yu=e=>Gu(e)?e:IN(zs(e)),FN=e=>Gu(e)?e:S.fromDom(zs(e).dom.body),$N=e=>{const t=to(e);return Gu(t)?m.some(t):m.none()},MN=e=>S.fromDom(e.dom.host),ch=e=>{if(LN()&&K(e.target)){const t=S.fromDom(e.target);if(pn(t)&&UN(t)&&e.composed&&e.composedPath){const n=e.composedPath();if(n)return mn(n)}}return m.from(e.target)},UN=e=>K(e.dom.shadowRoot),Pr=e=>{const t=Tn(e)?e.dom.parentNode:e.dom;if(t==null||t.ownerDocument===null)return!1;const n=t.ownerDocument;return $N(S.fromDom(t)).fold(()=>n.body.contains(t),Ao(Pr,MN))};var uh=(e,t,n,s,o)=>e(n,s)?m.some(n):Ie(o)&&o(n)?m.none():t(n,s,o);const Hs=(e,t,n)=>{let s=e.dom;const o=Ie(n)?n:ot;for(;s.parentNode;){s=s.parentNode;const r=S.fromDom(s);if(t(r))return m.some(r);if(o(r))break}return m.none()},Lo=(e,t,n)=>uh((o,r)=>r(o),Hs,e,t,n),zN=(e,t)=>{const n=e.dom;return n.parentNode?HN(S.fromDom(n.parentNode),s=>!Ue(e,s)&&t(s)):m.none()},HN=(e,t)=>{const n=o=>t(S.fromDom(o));return wt(e.dom.childNodes,n).map(S.fromDom)},WN=(e,t)=>{const n=s=>{for(let o=0;o<s.childNodes.length;o++){const r=S.fromDom(s.childNodes[o]);if(t(r))return m.some(r);const a=n(s.childNodes[o]);if(a.isSome())return a}return m.none()};return n(e.dom)},Ba=(e,t,n)=>Hs(e,s=>Jn(s,t),n),Ia=(e,t)=>RN(t,e),Fo=(e,t,n)=>uh((o,r)=>Jn(o,r),Ba,e,t,n),VN=e=>Fo(e,"[contenteditable]"),Or=(e,t=!1)=>Pr(e)?e.dom.isContentEditable:VN(e).fold(Y(t),n=>qN(n)==="true"),qN=e=>e.dom.contentEditable,La=e=>e.style!==void 0&&Ie(e.style.getPropertyValue),fh=(e,t,n)=>{if(!le(n))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",n,":: Element ",e),new Error("CSS value must be a string: "+n);La(e)&&e.style.setProperty(t,n)},jN=(e,t)=>{La(e)&&e.style.removeProperty(t)},dh=(e,t,n)=>{const s=e.dom;fh(s,t,n)},ol=(e,t)=>{const n=e.dom;Ye(t,(s,o)=>{fh(n,o,s)})},ys=(e,t)=>{const n=e.dom,o=window.getComputedStyle(n).getPropertyValue(t);return o===""&&!Pr(e)?mh(n,t):o},mh=(e,t)=>La(e)?e.style.getPropertyValue(t):"",rl=(e,t)=>{const n=e.dom,s=mh(n,t);return m.from(s).filter(o=>o.length>0)},ph=e=>{const t={},n=e.dom;if(La(n))for(let s=0;s<n.style.length;s++){const o=n.style.item(s);t[o]=n.style[o]}return t},gh=(e,t)=>{const n=e.dom;jN(n,t),Nr(Ms(e,"style").map(kr),"")&&$t(e,"style")},KN=e=>e.dom.offsetWidth,yn=(e,t)=>{qn(e).each(s=>{s.dom.insertBefore(t.dom,e.dom)})},no=(e,t)=>{Oa(e).fold(()=>{qn(e).each(o=>{ht(o,t)})},s=>{yn(s,t)})},hh=(e,t)=>{qu(e).fold(()=>{ht(e,t)},s=>{e.dom.insertBefore(t.dom,s.dom)})},ht=(e,t)=>{e.dom.appendChild(t.dom)},bh=(e,t)=>{yn(e,t),ht(t,e)},GN=(e,t)=>{$(t,(n,s)=>{const o=s===0?e:t[s-1];no(o,n)})},$o=(e,t)=>{$(t,n=>{ht(e,n)})},Br=e=>{e.dom.textContent="",$(Mt(e),t=>{tt(t)})},tt=e=>{const t=e.dom;t.parentNode!==null&&t.parentNode.removeChild(t)},Ws=e=>{const t=Mt(e);t.length>0&&GN(e,t),tt(e)},YN=(e,t)=>{const s=(t||document).createElement("div");return s.innerHTML=e,Mt(S.fromDom(s))},Xu=e=>Fe(e,S.fromDom),vh=e=>e.dom.innerHTML,al=(e,t)=>{const s=oh(e).dom,o=S.fromDom(s.createDocumentFragment()),r=YN(t,s);$o(o,r),Br(e),ht(e,o)},XN=e=>{const t=S.fromTag("div"),n=S.fromDom(e.dom.cloneNode(!0));return ht(t,n),vh(t)},ZN=(e,t,n,s,o,r,a)=>({target:e,x:t,y:n,stop:s,prevent:o,kill:r,raw:a}),QN=e=>{const t=S.fromDom(ch(e).getOr(e.target)),n=()=>e.stopPropagation(),s=()=>e.preventDefault(),o=Nn(s,n);return ZN(t,e.clientX,e.clientY,n,s,o,e)},JN=(e,t)=>n=>{e(n)&&t(QN(n))},eT=(e,t,n,s,o)=>{const r=JN(n,s);return e.dom.addEventListener(t,r,o),{unbind:te(nT,e,t,r,o)}},tT=(e,t,n,s)=>eT(e,t,n,s,!1),nT=(e,t,n,s)=>{e.dom.removeEventListener(t,n,s)},Ch=(e,t)=>({left:e,top:t,translate:(s,o)=>Ch(e+s,t+o)}),Ir=Ch,sT=e=>{const t=e.getBoundingClientRect();return Ir(t.left,t.top)},il=(e,t)=>e!==void 0?e:t!==void 0?t:0,oT=e=>{const t=e.dom.ownerDocument,n=t.body,s=t.defaultView,o=t.documentElement;if(n===e.dom)return Ir(n.offsetLeft,n.offsetTop);const r=il(s==null?void 0:s.pageYOffset,o.scrollTop),a=il(s==null?void 0:s.pageXOffset,o.scrollLeft),i=il(o.clientTop,n.clientTop),l=il(o.clientLeft,n.clientLeft);return Zu(e).translate(a-l,r-i)},Zu=e=>{const t=e.dom,s=t.ownerDocument.body;return s===t?Ir(s.offsetLeft,s.offsetTop):Pr(e)?sT(t):Ir(0,0)},Qu=e=>{const t=e!==void 0?e.dom:document,n=t.body.scrollLeft||t.documentElement.scrollLeft,s=t.body.scrollTop||t.documentElement.scrollTop;return Ir(n,s)},yh=(e,t)=>{bs().browser.isSafari()&&Ie(e.dom.scrollIntoViewIfNeeded)?e.dom.scrollIntoViewIfNeeded(!1):e.dom.scrollIntoView(t)},rT=e=>{const t=e===void 0?window:e;return bs().browser.isFirefox()?m.none():m.from(t.visualViewport)},Eh=(e,t,n,s)=>({x:e,y:t,width:n,height:s,right:e+n,bottom:t+s}),Sh=e=>{const t=e===void 0?window:e,n=t.document,s=Qu(S.fromDom(n));return rT(t).fold(()=>{const o=t.document.documentElement,r=o.clientWidth,a=o.clientHeight;return Eh(s.left,s.top,r,a)},o=>Eh(Math.max(o.pageLeft,s.left),Math.max(o.pageTop,s.top),o.width,o.height))},aT=(e,t)=>ve(Mt(e),t),wh=(e,t)=>{let n=[];return $(Mt(e),s=>{t(s)&&(n=n.concat([s])),n=n.concat(wh(s,t))}),n},jt=(e,t)=>DN(t,e),_h=(e,t,n)=>Ba(e,t,n).isSome();class _t{constructor(t,n){this.node=t,this.rootNode=n,this.current=this.current.bind(this),this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.prev2=this.prev2.bind(this)}current(){return this.node}next(t){return this.node=this.findSibling(this.node,"firstChild","nextSibling",t),this.node}prev(t){return this.node=this.findSibling(this.node,"lastChild","previousSibling",t),this.node}prev2(t){return this.node=this.findPreviousNode(this.node,t),this.node}findSibling(t,n,s,o){if(t){if(!o&&t[n])return t[n];if(t!==this.rootNode){let r=t[s];if(r)return r;for(let a=t.parentNode;a&&a!==this.rootNode;a=a.parentNode)if(r=a[s],r)return r}}}findPreviousNode(t,n){if(t){const s=t.previousSibling;if(this.rootNode&&s===this.rootNode)return;if(s){if(!n){for(let r=s.lastChild;r;r=r.lastChild)if(!r.lastChild)return r}return s}const o=t.parentNode;if(o&&o!==this.rootNode)return o}}}const Mo=e=>t=>!!t&&t.nodeType===e,ll=e=>!!e&&!Object.getPrototypeOf(e),Z=Mo(1),Fa=e=>{const t=e.toLowerCase();return n=>K(n)&&n.nodeName.toLowerCase()===t},es=e=>{const t=e.map(n=>n.toLowerCase());return n=>{if(n&&n.nodeName){const s=n.nodeName.toLowerCase();return We(t,s)}return!1}},cl=(e,t)=>{const n=t.toLowerCase().split(" ");return s=>{if(Z(s)){const o=s.ownerDocument.defaultView;if(o)for(let r=0;r<n.length;r++){const a=o.getComputedStyle(s,null);if((a?a.getPropertyValue(e):null)===n[r])return!0}}return!1}},xh=e=>t=>Z(t)&&t.hasAttribute(e),iT=(e,t)=>n=>Z(n)&&n.getAttribute(e)===t,Uo=e=>Z(e)&&e.hasAttribute("data-mce-bogus"),lT=e=>Z(e)&&e.getAttribute("data-mce-bogus")==="all",Vs=e=>Z(e)&&e.tagName==="TABLE",kh=e=>t=>!!(Z(t)&&(t.contentEditable===e||t.getAttribute("data-mce-contenteditable")===e)),Ju=es(["textarea","input"]),z=Mo(3),cT=Mo(4),uT=Mo(7),so=Mo(8),$a=Mo(9),ef=Mo(11),ft=Fa("br"),Nh=Fa("img"),ts=kh("true"),Ze=kh("false"),ul=es(["td","th"]),fT=es(["td","th","caption"]),Es=es(["video","audio","object","embed"]),dT=Fa("li"),Th=Fa("details"),mT=Fa("summary"),Lr="\uFEFF",Tt=" ",tf=e=>e===Lr,pT=e=>e.replace(/\uFEFF/g,""),nf=((e,t)=>{const n=r=>{if(!e(r))throw new Error("Can only get "+t+" value of a "+t+" node");return s(r).getOr("")},s=r=>e(r)?m.from(r.dom.nodeValue):m.none();return{get:n,getOption:s,set:(r,a)=>{if(!e(r))throw new Error("Can only set raw "+t+" value of a "+t+" node");r.dom.nodeValue=a}}})(Tn,"text"),fl=e=>nf.get(e),Ah=e=>nf.getOption(e),gT=(e,t)=>nf.set(e,t),hT=["article","aside","details","div","dt","figcaption","footer","form","fieldset","header","hgroup","html","main","nav","section","summary","body","p","dl","multicol","dd","figure","address","center","blockquote","h1","h2","h3","h4","h5","h6","listing","xmp","pre","plaintext","menu","dir","ul","ol","li","hr","table","tbody","thead","tfoot","th","tr","td","caption"],bT=["td","th"],vT=["thead","tbody","tfoot"],CT=["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"],yT=["h1","h2","h3","h4","h5","h6"],ET=["li","dd","dt"],ST=["ul","ol","dl"],wT=["pre","script","textarea","style"],_T=["pre"].concat(yT),oo=e=>{let t;return n=>(t=t||Au(e,yt),ye(t,Xe(n)))},Dn=oo(hT),xT=e=>Xe(e)==="table",dl=e=>pn(e)&&!Dn(e),zo=e=>pn(e)&&Xe(e)==="br",Dh=oo(CT),sf=oo(ST),Ma=oo(ET),kT=oo(vT),Ua=oo(bT),ml=oo(wT),NT=oo(_T),TT=e=>NT(e)||dl(e),AT=e=>{const t=[];let n=e.dom;for(;n;)t.push(S.fromDom(n)),n=n.lastChild;return t},DT=e=>{const t=jt(e,"br"),n=ve(AT(e).slice(-1),zo);t.length===n.length&&$(n,tt)},pl=()=>{const e=S.fromTag("br");return Pt(e,"data-mce-bogus","1"),e},ro=e=>{Br(e),ht(e,pl())},RT=e=>{ju(e).each(t=>{Io(t).each(n=>{Dn(e)&&zo(t)&&Dn(n)&&tt(t)})})},Ut=Lr,gl=tf,qs=pT,PT=Z,Fr=z,$r=e=>(Fr(e)&&(e=e.parentNode),PT(e)&&e.hasAttribute("data-mce-caret")),ao=e=>Fr(e)&&gl(e.data),Rn=e=>$r(e)||ao(e),Rh=e=>e.firstChild!==e.lastChild||!ft(e.firstChild),OT=(e,t)=>{var n;const o=((n=e.ownerDocument)!==null&&n!==void 0?n:document).createTextNode(Ut),r=e.parentNode;if(t){const a=e.previousSibling;if(Fr(a)){if(Rn(a))return a;if(bl(a))return a.splitText(a.data.length-1)}r==null||r.insertBefore(o,e)}else{const a=e.nextSibling;if(Fr(a)){if(Rn(a))return a;if(hl(a))return a.splitText(1),a}e.nextSibling?r==null||r.insertBefore(o,e.nextSibling):r==null||r.appendChild(o)}return o},of=e=>{const t=e.container();return z(t)?t.data.charAt(e.offset())===Ut||e.isAtStart()&&ao(t.previousSibling):!1},rf=e=>{const t=e.container();return z(t)?t.data.charAt(e.offset()-1)===Ut||e.isAtEnd()&&ao(t.nextSibling):!1},BT=(e,t,n)=>{var s;const r=((s=t.ownerDocument)!==null&&s!==void 0?s:document).createElement(e);r.setAttribute("data-mce-caret",n?"before":"after"),r.setAttribute("data-mce-bogus","all"),r.appendChild(pl().dom);const a=t.parentNode;return n?a==null||a.insertBefore(r,t):t.nextSibling?a==null||a.insertBefore(r,t.nextSibling):a==null||a.appendChild(r),r},hl=e=>Fr(e)&&e.data[0]===Ut,bl=e=>Fr(e)&&e.data[e.data.length-1]===Ut,IT=e=>{var t;const n=e.getElementsByTagName("br"),s=n[n.length-1];Uo(s)&&((t=s.parentNode)===null||t===void 0||t.removeChild(s))},af=e=>e&&e.hasAttribute("data-mce-caret")?(IT(e),e.removeAttribute("data-mce-caret"),e.removeAttribute("data-mce-bogus"),e.removeAttribute("style"),e.removeAttribute("data-mce-style"),e.removeAttribute("_moz_abspos"),e):null,Ph=e=>$r(e.startContainer),Oh=ts,LT=Ze,FT=ft,$T=z,MT=es(["script","style","textarea"]),Bh=es(["img","input","textarea","hr","iframe","video","audio","object","embed"]),UT=es(["table"]),zT=Rn,jn=e=>zT(e)?!1:$T(e)?!MT(e.parentNode):Bh(e)||FT(e)||UT(e)||lf(e),HT=e=>Z(e)&&e.getAttribute("unselectable")==="true",lf=e=>!HT(e)&&LT(e),WT=(e,t)=>{for(let n=e.parentNode;n&&n!==t;n=n.parentNode){if(lf(n))return!1;if(Oh(n))return!0}return!0},VT=e=>lf(e)?!vn(sn(e.getElementsByTagName("*")),(t,n)=>t||Oh(n),!1):!1,qT=e=>Bh(e)||VT(e),Ih=(e,t)=>jn(e)&&WT(e,t),jT=/^[ \t\r\n]*$/,Ho=e=>jT.test(e),KT=e=>{for(const t of e)if(!tf(t))return!1;return!0},GT=e=>" \f	\v".indexOf(e)!==-1,Lh=e=>e===`
`||e==="\r",YT=(e,t)=>t<e.length&&t>=0?Lh(e[t]):!1,Fh=(e,t=4,n=!0,s=!0)=>{const o=Yk(" ",t),r=e.replace(/\t/g,o);return vn(r,(i,l)=>GT(l)||l===Tt?i.pcIsSpace||i.str===""&&n||i.str.length===r.length-1&&s||YT(r,i.str.length+1)?{pcIsSpace:!1,str:i.str+Tt}:{pcIsSpace:!0,str:i.str+" "}:{pcIsSpace:Lh(l),str:i.str+l},{pcIsSpace:!1,str:""}).str},XT=(e,t)=>{const n=S.fromDom(t),s=S.fromDom(e);return _h(s,"pre,code",te(Ue,n))},ZT=(e,t)=>z(e)&&Ho(e.data)&&!XT(e,t),QT=e=>Z(e)&&e.nodeName==="A"&&!e.hasAttribute("href")&&(e.hasAttribute("name")||e.hasAttribute("id")),vl=(e,t)=>jn(e)&&!ZT(e,t)||QT(e)||JT(e),JT=xh("data-mce-bookmark"),eA=xh("data-mce-bogus"),tA=iT("data-mce-bogus","all"),nA=(e,t)=>{let n=0;if(vl(e,e))return!1;{let s=e.firstChild;if(!s)return!0;const o=new _t(s,e);do{if(t){if(tA(s)){s=o.next(!0);continue}if(eA(s)){s=o.next();continue}}if(ft(s)){n++,s=o.next();continue}if(vl(s,e))return!1;s=o.next()}while(s);return n<=1}},bt=(e,t=!0)=>nA(e.dom,t),za="data-mce-block",sA=e=>ve(Cn(e),t=>!/[A-Z]/.test(t)),cf=e=>sA(e).join(","),$h=(e,t)=>K(t.querySelector(e))?(t.setAttribute(za,"true"),t.getAttribute("data-mce-selected")==="inline-boundary"&&t.removeAttribute("data-mce-selected"),!0):(t.removeAttribute(za),!1),Mh=(e,t)=>{const n=cf(e.getTransparentElements()),s=cf(e.getBlockElements());return ve(t.querySelectorAll(n),o=>$h(s,o))},Uh=(e,t)=>{var n;const s=t?"lastChild":"firstChild";for(let o=e[s];o;o=o[s])if(bt(S.fromDom(o))){(n=o.parentNode)===null||n===void 0||n.removeChild(o);return}},oA=(e,t)=>{const n=document.createRange(),s=e.parentNode;if(s){n.setStartBefore(e),n.setEndBefore(t);const o=n.extractContents();Uh(o,!0),n.setStartAfter(t),n.setEndAfter(e);const r=n.extractContents();Uh(r,!1),bt(S.fromDom(o))||s.insertBefore(o,e),bt(S.fromDom(t))||s.insertBefore(t,e),bt(S.fromDom(r))||s.insertBefore(r,e),s.removeChild(e)}},rA=(e,t,n)=>{const s=e.getBlockElements(),o=S.fromDom(t),r=i=>Xe(i)in s,a=i=>Ue(i,o);$(Xu(n),i=>{Hs(i,r,a).each(l=>{const c=aT(i,f=>r(f)&&!e.isValidChild(Xe(l),Xe(f)));if(c.length>0){const f=Vu(l);$(c,u=>{Hs(u,r,a).each(d=>{oA(d.dom,u.dom)})}),f.each(u=>Mh(e,u.dom))}})})},aA=(e,t,n)=>{$([...n,...Wo(e,t)?[t]:[]],s=>$(jt(S.fromDom(s),s.nodeName.toLowerCase()),o=>{cA(e,o.dom)&&Ws(o)}))},uf=(e,t)=>{const n=Mh(e,t);rA(e,t,n),aA(e,t,n)},iA=(e,t)=>{if(df(e,t)){const n=cf(e.getBlockElements());$h(n,t)}},lA=(e,t,n)=>{const s=r=>Ue(r,S.fromDom(t)),o=rh(S.fromDom(n),s);Zi(o,o.length-2).filter(pn).fold(()=>uf(e,t),r=>uf(e,r.dom))},ff=e=>e.hasAttribute(za),Cl=(e,t)=>ye(e.getTransparentElements(),t),df=(e,t)=>Z(t)&&Cl(e,t.nodeName),Wo=(e,t)=>df(e,t)&&ff(t),cA=(e,t)=>df(e,t)&&!ff(t),zh=(e,t)=>t.type===1&&Cl(e,t.name)&&le(t.attr(za)),uA=(e,t)=>t.type===1&&Cl(e,t.name)&&St(t.attr(za)),fA=bs().browser,Hh=e=>wt(e,pn),dA=e=>fA.isFirefox()&&Xe(e)==="table"?Hh(Mt(e)).filter(t=>Xe(t)==="caption").bind(t=>Hh(ih(t)).map(n=>{const s=n.dom.offsetTop,o=t.dom.offsetTop,r=t.dom.offsetHeight;return s<=o?-r:0})).getOr(0):0,Wh=(e,t)=>e.children&&We(e.children,t),mA=(e,t,n)=>{let s=0,o=0;const r=e.ownerDocument;if(n=n||e,t){if(n===e&&t.getBoundingClientRect&&ys(S.fromDom(e),"position")==="static"){const i=t.getBoundingClientRect();return s=i.left+(r.documentElement.scrollLeft||e.scrollLeft)-r.documentElement.clientLeft,o=i.top+(r.documentElement.scrollTop||e.scrollTop)-r.documentElement.clientTop,{x:s,y:o}}let a=t;for(;a&&a!==n&&a.nodeType&&!Wh(a,n);){const i=a;s+=i.offsetLeft||0,o+=i.offsetTop||0,a=i.offsetParent}for(a=t.parentNode;a&&a!==n&&a.nodeType&&!Wh(a,n);)s-=a.scrollLeft||0,o-=a.scrollTop||0,a=a.parentNode;o+=dA(S.fromDom(t))}return{x:s,y:o}},Vh=(e,t={})=>{let n=0;const s={},o=S.fromDom(e),r=zs(o),a=g=>{t.referrerPolicy=g},i=g=>{t.contentCssCors=g},l=g=>{ht(Yu(o),g)},c=g=>{const y=Yu(o);Ia(y,"#"+g).each(tt)},f=g=>Qe(s,g).getOrThunk(()=>({id:"mce-u"+n++,passed:[],failed:[],count:0})),u=g=>new Promise((y,w)=>{let _;const x=V._addCacheSuffix(g),N=f(x);s[x]=N,N.count++;const I=(O,q)=>{$(O,ya),N.status=q,N.passed=[],N.failed=[],_&&(_.onload=null,_.onerror=null,_=null)},oe=()=>I(N.passed,2),L=()=>I(N.failed,3);if(y&&N.passed.push(y),w&&N.failed.push(w),N.status===1)return;if(N.status===2){oe();return}if(N.status===3){L();return}N.status=1;const D=S.fromTag("link",r.dom);eo(D,{rel:"stylesheet",type:"text/css",id:N.id}),t.contentCssCors&&Pt(D,"crossOrigin","anonymous"),t.referrerPolicy&&Pt(D,"referrerpolicy",t.referrerPolicy),_=D.dom,_.onload=oe,_.onerror=L,l(D),Pt(D,"href",x)}),d=g=>Promise.allSettled(Fe(g,w=>u(w).then(Y(w)))).then(w=>{const _=Ea(w,x=>x.status==="fulfilled");return _.fail.length>0?Promise.reject(Fe(_.fail,x=>x.reason)):Fe(_.pass,x=>x.value)}),b=g=>{const y=V._addCacheSuffix(g);Qe(s,y).each(w=>{--w.count===0&&(delete s[y],c(w.id))})};return{load:u,loadAll:d,unload:b,unloadAll:g=>{$(g,y=>{b(y)})},_setReferrerPolicy:a,_setContentCssCors:i}},qh=(()=>{const e=new WeakMap;return{forElement:(n,s)=>{const r=to(n).dom;return m.from(e.get(r)).getOrThunk(()=>{const a=Vh(r,s);return e.set(r,a),a})}}})(),pA=e=>e.nodeName.toLowerCase()==="span",jh=(e,t)=>K(e)&&(vl(e,t)||dl(S.fromDom(e))),gA=(e,t)=>{const n=new _t(e,t).prev(!1),s=new _t(e,t).next(!1),o=St(n)||jh(n,t),r=St(s)||jh(s,t);return o&&r},Kh=e=>pA(e)&&e.getAttribute("data-mce-type")==="bookmark",hA=(e,t)=>z(e)&&e.data.length>0&&gA(e,t),bA=e=>Z(e)?e.childNodes.length>0:!1,vA=e=>ef(e)||$a(e),mf=(e,t,n)=>{var s;const o=n||t;if(Z(t)&&Kh(t))return t;const r=t.childNodes;for(let a=r.length-1;a>=0;a--)mf(e,r[a],o);if(Z(t)){const a=t.childNodes;a.length===1&&Kh(a[0])&&((s=t.parentNode)===null||s===void 0||s.insertBefore(a[0],t))}return!vA(t)&&!vl(t,o)&&!bA(t)&&!hA(t,o)&&e.remove(t),t},CA=V.makeMap,yl=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,El=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,yA=/[<>&\"\']/g,EA=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,SA={128:"€",130:"‚",131:"ƒ",132:"„",133:"…",134:"†",135:"‡",136:"ˆ",137:"‰",138:"Š",139:"‹",140:"Œ",142:"Ž",145:"‘",146:"’",147:"“",148:"”",149:"•",150:"–",151:"—",152:"˜",153:"™",154:"š",155:"›",156:"œ",158:"ž",159:"Ÿ"},Vo={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},wA={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},_A=e=>{const t=S.fromTag("div").dom;return t.innerHTML=e,t.textContent||t.innerText||e},Gh=(e,t)=>{const n={};if(e){const s=e.split(",");t=t||10;for(let o=0;o<s.length;o+=2){const r=String.fromCharCode(parseInt(s[o],t));if(!Vo[r]){const a="&"+s[o+1]+";";n[r]=a,n[a]=r}}return n}else return},pf=Gh("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),Yh=(e,t)=>e.replace(t?yl:El,n=>Vo[n]||n),xA=e=>(""+e).replace(yA,t=>Vo[t]||t),Xh=(e,t)=>e.replace(t?yl:El,n=>n.length>1?"&#"+((n.charCodeAt(0)-55296)*1024+(n.charCodeAt(1)-56320)+65536)+";":Vo[n]||"&#"+n.charCodeAt(0)+";"),gf=(e,t,n)=>{const s=n||pf;return e.replace(t?yl:El,o=>Vo[o]||s[o]||o)},io={encodeRaw:Yh,encodeAllRaw:xA,encodeNumeric:Xh,encodeNamed:gf,getEncodeFunc:(e,t)=>{const n=Gh(t)||pf,s=(a,i)=>a.replace(i?yl:El,l=>Vo[l]!==void 0?Vo[l]:n[l]!==void 0?n[l]:l.length>1?"&#"+((l.charCodeAt(0)-55296)*1024+(l.charCodeAt(1)-56320)+65536)+";":"&#"+l.charCodeAt(0)+";"),o=(a,i)=>gf(a,i,n),r=CA(e.replace(/\+/g,","));return r.named&&r.numeric?s:r.named?t?o:gf:r.numeric?Xh:Yh},decode:e=>e.replace(EA,(t,n)=>n?(n.charAt(0).toLowerCase()==="x"?n=parseInt(n.substr(1),16):n=parseInt(n,10),n>65535?(n-=65536,String.fromCharCode(55296+(n>>10),56320+(n&1023))):SA[n]||String.fromCharCode(n)):wA[t]||pf[t]||_A(t))},Sl={},wl={},kA={},Mr=V.makeMap,Kt=V.each,hf=V.extend,Zh=V.explode,NA=V.inArray,zt=(e,t)=>(e=V.trim(e),e?e.split(t||" "):[]),Qh=(e,t={})=>{const n=Mr(e," ",Mr(e.toUpperCase()," "));return hf(n,t)},Jh=e=>Qh("td th li dt dd figcaption caption details summary",e.getTextBlockElements()),TA=e=>{const t={};let n,s,o,r;const a=(l,c="",f="")=>{const u=zt(f),d=zt(l);let b=d.length;for(;b--;){const E=zt([n,c].join(" "));t[d[b]]={attributes:Au(E,()=>({})),attributesOrder:E,children:Au(u,Y(kA))}}},i=(l,c)=>{const f=zt(l),u=zt(c);let d=f.length;for(;d--;){const b=t[f[d]];for(let E=0,g=u.length;E<g;E++)b.attributes[u[E]]={},b.attributesOrder.push(u[E])}};if(Sl[e])return Sl[e];if(n="id accesskey class dir lang style tabindex title role",s="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",o="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment",e!=="html4"){const l="a ins del canvas map";n+=" contenteditable contextmenu draggable dropzone hidden spellcheck translate",s+=" article aside details dialog figure main header footer hgroup section nav "+l,o+=" audio canvas command datalist mark meter output picture progress time wbr video ruby bdi keygen"}if(e!=="html5-strict"){n+=" xml:lang";const l="acronym applet basefont big font strike tt";o=[o,l].join(" "),Kt(zt(l),f=>{a(f,"",o)});const c="center dir isindex noframes";s=[s,c].join(" "),r=[s,o].join(" "),Kt(zt(c),f=>{a(f,"",r)})}return r=r||[s,o].join(" "),a("html","manifest","head body"),a("head","","base command link meta noscript script style title"),a("title hr noscript br"),a("base","href target"),a("link","href rel media hreflang type sizes hreflang"),a("meta","name http-equiv content charset"),a("style","media type scoped"),a("script","src async defer type charset"),a("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",r),a("dd div","",r),a("address dt caption","",e==="html4"?o:r),a("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",o),a("blockquote","cite",r),a("ol","reversed start type","li"),a("ul","","li"),a("li","value",r),a("dl","","dt dd"),a("a","href target rel media hreflang type",e==="html4"?o:r),a("q","cite",o),a("ins del","cite datetime",r),a("img","src sizes srcset alt usemap ismap width height"),a("iframe","src name width height",r),a("embed","src type width height"),a("object","data type typemustmatch name usemap form width height",[r,"param"].join(" ")),a("param","name value"),a("map","name",[r,"area"].join(" ")),a("area","alt coords shape href target rel media hreflang type"),a("table","border","caption colgroup thead tfoot tbody tr"+(e==="html4"?" col":"")),a("colgroup","span","col"),a("col","span"),a("tbody thead tfoot","","tr"),a("tr","","td th"),a("td","colspan rowspan headers",r),a("th","colspan rowspan headers scope abbr",r),a("form","accept-charset action autocomplete enctype method name novalidate target",r),a("fieldset","disabled form name",[r,"legend"].join(" ")),a("label","form for",o),a("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),a("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value",e==="html4"?r:o),a("select","disabled form multiple name required size","option optgroup"),a("optgroup","disabled label","option"),a("option","disabled label selected value"),a("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),a("menu","type label",[r,"li"].join(" ")),a("noscript","",r),e!=="html4"&&(a("wbr"),a("ruby","",[o,"rt rp"].join(" ")),a("figcaption","",r),a("mark rt rp summary bdi","",o),a("canvas","width height",r),a("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[r,"track source"].join(" ")),a("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[r,"track source"].join(" ")),a("picture","","img source"),a("source","src srcset type media sizes"),a("track","kind src srclang label default"),a("datalist","",[o,"option"].join(" ")),a("article section nav aside main header footer","",r),a("hgroup","","h1 h2 h3 h4 h5 h6"),a("figure","",[r,"figcaption"].join(" ")),a("time","datetime",o),a("dialog","open",r),a("command","type label icon disabled checked radiogroup command"),a("output","for form name",o),a("progress","value max",o),a("meter","value min max low high optimum",o),a("details","open",[r,"summary"].join(" ")),a("keygen","autofocus challenge disabled form keytype name")),e!=="html5-strict"&&(i("script","language xml:space"),i("style","xml:space"),i("object","declare classid code codebase codetype archive standby align border hspace vspace"),i("embed","align name hspace vspace"),i("param","valuetype type"),i("a","charset name rev shape coords"),i("br","clear"),i("applet","codebase archive code object alt name width height align hspace vspace"),i("img","name longdesc align border hspace vspace"),i("iframe","longdesc frameborder marginwidth marginheight scrolling align"),i("font basefont","size color face"),i("input","usemap align"),i("select"),i("textarea"),i("h1 h2 h3 h4 h5 h6 div p legend caption","align"),i("ul","type compact"),i("li","type"),i("ol dl menu dir","compact"),i("pre","width xml:space"),i("hr","align noshade size width"),i("isindex","prompt"),i("table","summary width frame rules cellspacing cellpadding align bgcolor"),i("col","width align char charoff valign"),i("colgroup","width align char charoff valign"),i("thead","align char charoff valign"),i("tr","align char charoff valign bgcolor"),i("th","axis align char charoff valign nowrap bgcolor width height"),i("form","accept"),i("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),i("tfoot","align char charoff valign"),i("tbody","align char charoff valign"),i("area","nohref"),i("body","background bgcolor text link vlink alink")),e!=="html4"&&(i("input button select textarea","autofocus"),i("input textarea","placeholder"),i("a","download"),i("link script img","crossorigin"),i("img","loading"),i("iframe","sandbox seamless allow allowfullscreen loading")),e!=="html4"&&$([t.video,t.audio],l=>{delete l.children.audio,delete l.children.video}),Kt(zt("a form meter progress dfn"),l=>{t[l]&&delete t[l].children[l]}),delete t.caption.children.table,delete t.script,Sl[e]=t,t},bf=(e,t)=>{if(e){const n={};return le(e)&&(e={"*":e}),Kt(e,(s,o)=>{n[o]=n[o.toUpperCase()]=t==="map"?Mr(s,/[, ]/):Zh(s,/[, ]/)}),n}else return},lo=(e={})=>{var t;const n={},s={};let o=[];const r={},a={},i=(he,Ae,lt)=>{const He=e[he];if(He)return Mr(He,/[, ]/,Mr(He.toUpperCase(),/[, ]/));{let Je=wl[he];return Je||(Je=Qh(Ae,lt),wl[he]=Je),Je}},l=(t=e.schema)!==null&&t!==void 0?t:"html5",c=TA(l);e.verify_html===!1&&(e.valid_elements="*[*]");const f=bf(e.valid_styles),u=bf(e.invalid_styles,"map"),d=bf(e.valid_classes,"map"),b=i("whitespace_elements","pre script noscript style textarea video audio iframe object code"),E=i("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),g=i("void_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),y=i("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls allowfullscreen"),w="td th iframe video audio object script code",_=i("non_empty_elements",w+" pre",g),x=i("move_caret_before_on_enter_elements",w+" table",g),N=i("text_block_elements","h1 h2 h3 h4 h5 h6 p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),I=i("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary",N),oe=i("text_inline_elements","span strong b em i font s strike u var cite dfn code mark q sup sub samp"),L=i("transparent_elements","a ins del canvas map");Kt("script noscript iframe noframes noembed title style textarea xmp plaintext".split(" "),he=>{a[he]=new RegExp("</"+he+"[^>]*>","gi")});const D=he=>new RegExp("^"+he.replace(/([?+*])/g,".$1")+"$"),O=he=>{const Ae=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/,lt=/^([!\-])?(\w+[\\:]:\w+|[^=~<]+)?(?:([=~<])(.*))?$/,He=/[*?+]/;if(he){const Je=zt(he,",");let rt,Ge;n["@"]&&(rt=n["@"].attributes,Ge=n["@"].attributesOrder);for(let dt=0,Mn=Je.length;dt<Mn;dt++){let It=Ae.exec(Je[dt]);if(It){const cs=It[1],wn=It[2],br=It[3],vr=It[5],us={},Yn=[],pt={attributes:us,attributesOrder:Yn};if(cs==="#"&&(pt.paddEmpty=!0),cs==="-"&&(pt.removeEmpty=!0),It[4]==="!"&&(pt.removeEmptyAttrs=!0),rt&&(Ye(rt,(Un,fs)=>{us[fs]=Un}),Ge&&Yn.push(...Ge)),vr){const Un=zt(vr,"|");for(let fs=0,zn=Un.length;fs<zn;fs++)if(It=lt.exec(Un[fs]),It){const Hn={},Ps=It[1],Ht=It[2].replace(/[\\:]:/g,":"),Zs=It[3],Os=It[4];if(Ps==="!"&&(pt.attributesRequired=pt.attributesRequired||[],pt.attributesRequired.push(Ht),Hn.required=!0),Ps==="-"){delete us[Ht],Yn.splice(NA(Yn,Ht),1);continue}if(Zs&&(Zs==="="&&(pt.attributesDefault=pt.attributesDefault||[],pt.attributesDefault.push({name:Ht,value:Os}),Hn.defaultValue=Os),Zs==="~"&&(pt.attributesForced=pt.attributesForced||[],pt.attributesForced.push({name:Ht,value:Os}),Hn.forcedValue=Os),Zs==="<"&&(Hn.validValues=Mr(Os,"?"))),He.test(Ht)){const Xn=Hn;pt.attributePatterns=pt.attributePatterns||[],Xn.pattern=D(Ht),pt.attributePatterns.push(Xn)}else us[Ht]||Yn.push(Ht),us[Ht]=Hn}}if(!rt&&wn==="@"&&(rt=us,Ge=Yn),br&&(pt.outputName=wn,n[br]=pt),He.test(wn)){const Un=pt;Un.pattern=D(wn),o.push(Un)}else n[wn]=pt}}}},q=he=>{o=[],$(Cn(n),Ae=>{delete n[Ae]}),O(he),Kt(c,(Ae,lt)=>{s[lt]=Ae.children})},j=he=>{const Ae=/^(~)?(.+)$/;he&&(delete wl.text_block_elements,delete wl.block_elements,Kt(zt(he,","),lt=>{const He=Ae.exec(lt);if(He){const Je=He[1]==="~",rt=Je?"span":"div",Ge=He[2];if(s[Ge]=s[rt],r[Ge]=rt,_[Ge.toUpperCase()]={},_[Ge]={},Je||(I[Ge.toUpperCase()]={},I[Ge]={}),!n[Ge]){let dt=n[rt];dt=hf({},dt),delete dt.removeEmptyAttrs,delete dt.removeEmpty,n[Ge]=dt}Kt(s,(dt,Mn)=>{dt[rt]&&(s[Mn]=dt=hf({},s[Mn]),dt[Ge]=dt[rt])})}}))},J=he=>{const Ae=/^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;delete Sl[l],he&&Kt(zt(he,","),lt=>{const He=Ae.exec(lt);if(He){const Je=He[1];let rt;Je?rt=s[He[2]]:rt=s[He[2]]={"#comment":{}},rt=s[He[2]],Kt(zt(He[3],"|"),Ge=>{Je==="-"?delete rt[Ge]:rt[Ge]={}})}})},ge=he=>{const Ae=n[he];if(Ae)return Ae;let lt=o.length;for(;lt--;){const He=o[lt];if(He.pattern.test(he))return He}};e.valid_elements?q(e.valid_elements):(Kt(c,(he,Ae)=>{n[Ae]={attributes:he.attributes,attributesOrder:he.attributesOrder},s[Ae]=he.children}),Kt(zt("strong/b em/i"),he=>{const Ae=zt(he,"/");n[Ae[1]].outputName=Ae[0]}),Kt(oe,(he,Ae)=>{n[Ae]&&(e.padd_empty_block_inline_children&&(n[Ae].paddInEmptyBlock=!0),n[Ae].removeEmpty=!0)}),Kt(zt("ol ul blockquote a table tbody"),he=>{n[he]&&(n[he].removeEmpty=!0)}),Kt(zt("p h1 h2 h3 h4 h5 h6 th td pre div address caption li summary"),he=>{n[he]&&(n[he].paddEmpty=!0)}),Kt(zt("span"),he=>{n[he].removeEmptyAttrs=!0})),j(e.custom_elements),J(e.valid_children),O(e.extended_valid_elements),J("+ol[ul|ol],+ul[ul|ol]"),Kt({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},(he,Ae)=>{n[Ae]&&(n[Ae].parentsRequired=zt(he))}),e.invalid_elements&&Kt(Zh(e.invalid_elements),he=>{n[he]&&delete n[he]}),ge("span")||O("span[!data-mce-type|*]");const me=Y(f),Ne=Y(u),Re=Y(d),nt=Y(y),Bt=Y(I),vt=Y(N),H=Y(oe),re=Y(Object.seal(g)),Te=Y(E),xe=Y(_),ae=Y(x),ie=Y(b),U=Y(L),pe=Y(Object.seal(a)),_e=(he,Ae)=>{const lt=s[he.toLowerCase()];return!!(lt&&lt[Ae.toLowerCase()])},Le=(he,Ae)=>{const lt=ge(he);if(lt)if(Ae){if(lt.attributes[Ae])return!0;const He=lt.attributePatterns;if(He){let Je=He.length;for(;Je--;)if(He[Je].pattern.test(Ae))return!0}}else return!0;return!1},je=Y(r);return{type:l,children:s,elements:n,getValidStyles:me,getValidClasses:Re,getBlockElements:Bt,getInvalidStyles:Ne,getVoidElements:re,getTextBlockElements:vt,getTextInlineElements:H,getBoolAttrs:nt,getElementRule:ge,getSelfClosingElements:Te,getNonEmptyElements:xe,getMoveCaretBeforeOnEnterElements:ae,getWhitespaceElements:ie,getTransparentElements:U,getSpecialElements:pe,isValidChild:_e,isValid:Le,getCustomElements:je,addValidElements:O,setValidElements:q,addCustomElements:j,addValidChildren:J}},vf=(e={},t)=>{const n=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,s=/\s*([^:]+):\s*([^;]+);?/g,o=/\s+$/,r={};let a,i;const l=Lr;t&&(a=t.getValidStyles(),i=t.getInvalidStyles());const c=(`\\" \\' \\; \\: ; : `+l).split(" ");for(let u=0;u<c.length;u++)r[c[u]]=l+u,r[l+u]=c[u];const f={parse:u=>{const d={};let b=!1;const E=e.url_converter,g=e.url_converter_scope||f,y=(D,O,q)=>{const j=d[D+"-top"+O];if(!j)return;const J=d[D+"-right"+O];if(!J)return;const ge=d[D+"-bottom"+O];if(!ge)return;const me=d[D+"-left"+O];if(!me)return;const Ne=[j,J,ge,me];let Re=Ne.length-1;for(;Re--&&Ne[Re]===Ne[Re+1];);Re>-1&&q||(d[D+O]=Re===-1?Ne[0]:Ne.join(" "),delete d[D+"-top"+O],delete d[D+"-right"+O],delete d[D+"-bottom"+O],delete d[D+"-left"+O])},w=D=>{const O=d[D];if(!O)return;const q=O.split(" ");let j=q.length;for(;j--;)if(q[j]!==q[0])return!1;return d[D]=q[0],!0},_=(D,O,q,j)=>{w(O)&&w(q)&&w(j)&&(d[D]=d[O]+" "+d[q]+" "+d[j],delete d[O],delete d[q],delete d[j])},x=D=>(b=!0,r[D]),N=(D,O)=>(b&&(D=D.replace(/\uFEFF[0-9]/g,q=>r[q])),O||(D=D.replace(/\\([\'\";:])/g,"$1")),D),I=D=>String.fromCharCode(parseInt(D.slice(1),16)),oe=D=>D.replace(/\\[0-9a-f]+/gi,I),L=(D,O,q,j,J,ge)=>{if(J=J||ge,J)return J=N(J),"'"+J.replace(/\'/g,"\\'")+"'";if(O=N(O||q||j||""),!e.allow_script_urls){const me=O.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(me)||!e.allow_svg_data_urls&&/^data:image\/svg/i.test(me))return""}return E&&(O=E.call(g,O,"style")),"url('"+O.replace(/\'/g,"\\'")+"')"};if(u){u=u.replace(/[\u0000-\u001F]/g,""),u=u.replace(/\\[\"\';:\uFEFF]/g,x).replace(/\"[^\"]+\"|\'[^\']+\'/g,O=>O.replace(/[;:]/g,x));let D;for(;D=s.exec(u);){s.lastIndex=D.index+D[0].length;let O=D[1].replace(o,"").toLowerCase(),q=D[2].replace(o,"");if(O&&q){if(O=oe(O),q=oe(q),O.indexOf(l)!==-1||O.indexOf('"')!==-1||!e.allow_script_urls&&(O==="behavior"||/expression\s*\(|\/\*|\*\//.test(q)))continue;O==="font-weight"&&q==="700"?q="bold":(O==="color"||O==="background-color")&&(q=q.toLowerCase()),q=q.replace(n,L),d[O]=b?N(q,!0):q}}y("border","",!0),y("border","-width"),y("border","-color"),y("border","-style"),y("padding",""),y("margin",""),_("border","border-width","border-style","border-color"),d.border==="medium none"&&delete d.border,d["border-image"]==="none"&&delete d["border-image"]}return d},serialize:(u,d)=>{let b="";const E=(y,w)=>{const _=w[y];if(_)for(let x=0,N=_.length;x<N;x++){const I=_[x],oe=u[I];oe&&(b+=(b.length>0?" ":"")+I+": "+oe+";")}},g=(y,w)=>{if(!i||!w)return!0;let _=i["*"];return _&&_[y]?!1:(_=i[w],!(_&&_[y]))};return d&&a?(E("*",a),E(d,a)):Ye(u,(y,w)=>{y&&g(w,d)&&(b+=(b.length>0?" ":"")+w+": "+y+";")}),b}};return f},AA={keyLocation:!0,layerX:!0,layerY:!0,returnValue:!0,webkitMovementX:!0,webkitMovementY:!0,keyIdentifier:!0,mozPressure:!0},DA=e=>e instanceof Event||Ie(e.initEvent),RA=e=>e.isDefaultPrevented===yt||e.isDefaultPrevented===ot,PA=e=>ut(e.preventDefault)||DA(e),eb=(e,t)=>{const n=t??{};for(const s in e)ye(AA,s)||(n[s]=e[s]);return K(e.composedPath)&&(n.composedPath=()=>e.composedPath()),n},Cf=(e,t,n,s)=>{var o;const r=eb(t,s);return r.type=e,ut(r.target)&&(r.target=(o=r.srcElement)!==null&&o!==void 0?o:n),PA(t)&&(r.preventDefault=()=>{r.defaultPrevented=!0,r.isDefaultPrevented=yt,Ie(t.preventDefault)&&t.preventDefault()},r.stopPropagation=()=>{r.cancelBubble=!0,r.isPropagationStopped=yt,Ie(t.stopPropagation)&&t.stopPropagation()},r.stopImmediatePropagation=()=>{r.isImmediatePropagationStopped=yt,r.stopPropagation()},RA(r)||(r.isDefaultPrevented=r.defaultPrevented===!0?yt:ot,r.isPropagationStopped=r.cancelBubble===!0?yt:ot,r.isImmediatePropagationStopped=ot)),r},OA="mce-data-",BA=/^(?:mouse|contextmenu)|click/,yf=(e,t,n,s)=>{e.addEventListener(t,n,s||!1)},_l=(e,t,n,s)=>{e.removeEventListener(t,n,s||!1)},IA=e=>K(e)&&BA.test(e.type),Ha=(e,t)=>{const n=Cf(e.type,e,document,t);if(IA(e)&&St(e.pageX)&&!St(e.clientX)){const s=n.target.ownerDocument||document,o=s.documentElement,r=s.body,a=n;a.pageX=e.clientX+(o&&o.scrollLeft||r&&r.scrollLeft||0)-(o&&o.clientLeft||r&&r.clientLeft||0),a.pageY=e.clientY+(o&&o.scrollTop||r&&r.scrollTop||0)-(o&&o.clientTop||r&&r.clientTop||0)}return n},LA=(e,t,n)=>{const s=e.document,o={type:"ready"};if(n.domLoaded){t(o);return}const r=()=>s.readyState==="complete"||s.readyState==="interactive"&&s.body,a=()=>{_l(e,"DOMContentLoaded",a),_l(e,"load",a),n.domLoaded||(n.domLoaded=!0,t(o)),e=null};r()?a():yf(e,"DOMContentLoaded",a),n.domLoaded||yf(e,"load",a)};class qo{constructor(){this.domLoaded=!1,this.events={},this.count=1,this.expando=OA+(+new Date).toString(32),this.hasFocusIn="onfocusin"in document.documentElement,this.count=1}bind(t,n,s,o){const r=this;let a;const i=window,l=d=>{r.executeHandlers(Ha(d||i.event),c)};if(!t||z(t)||so(t))return s;let c;t[r.expando]?c=t[r.expando]:(c=r.count++,t[r.expando]=c,r.events[c]={}),o=o||t;const f=n.split(" ");let u=f.length;for(;u--;){let d=f[u],b=l,E=!1,g=!1;if(d==="DOMContentLoaded"&&(d="ready"),r.domLoaded&&d==="ready"&&t.readyState==="complete"){s.call(o,Ha({type:d}));continue}!r.hasFocusIn&&(d==="focusin"||d==="focusout")&&(E=!0,g=d==="focusin"?"focus":"blur",b=y=>{const w=Ha(y||i.event);w.type=w.type==="focus"?"focusin":"focusout",r.executeHandlers(w,c)}),a=r.events[c][d],a?d==="ready"&&r.domLoaded?s(Ha({type:d})):a.push({func:s,scope:o}):(r.events[c][d]=a=[{func:s,scope:o}],a.fakeName=g,a.capture=E,a.nativeHandler=b,d==="ready"?LA(t,b,r):yf(t,g||d,b,E))}return t=a=null,s}unbind(t,n,s){if(!t||z(t)||so(t))return this;const o=t[this.expando];if(o){let r=this.events[o];if(n){const a=n.split(" ");let i=a.length;for(;i--;){const l=a[i],c=r[l];if(c){if(s){let f=c.length;for(;f--;)if(c[f].func===s){const u=c.nativeHandler,d=c.fakeName,b=c.capture,E=c.slice(0,f).concat(c.slice(f+1));E.nativeHandler=u,E.fakeName=d,E.capture=b,r[l]=E}}(!s||c.length===0)&&(delete r[l],_l(t,c.fakeName||l,c.nativeHandler,c.capture))}}}else Ye(r,(a,i)=>{_l(t,a.fakeName||i,a.nativeHandler,a.capture)}),r={};for(const a in r)if(ye(r,a))return this;delete this.events[o];try{delete t[this.expando]}catch{t[this.expando]=null}}return this}fire(t,n,s){return this.dispatch(t,n,s)}dispatch(t,n,s){if(!t||z(t)||so(t))return this;const o=Ha({type:n,target:t},s);do{const r=t[this.expando];r&&this.executeHandlers(o,r),t=t.parentNode||t.ownerDocument||t.defaultView||t.parentWindow}while(t&&!o.isPropagationStopped());return this}clean(t){if(!t||z(t)||so(t))return this;if(t[this.expando]&&this.unbind(t),t.getElementsByTagName||(t=t.document),t&&t.getElementsByTagName){this.unbind(t);const n=t.getElementsByTagName("*");let s=n.length;for(;s--;)t=n[s],t[this.expando]&&this.unbind(t)}return this}destroy(){this.events={}}cancel(t){return t&&(t.preventDefault(),t.stopImmediatePropagation()),!1}executeHandlers(t,n){const s=this.events[n],o=s&&s[t.type];if(o)for(let r=0,a=o.length;r<a;r++){const i=o[r];if(i&&i.func.call(i.scope,t)===!1&&t.preventDefault(),t.isImmediatePropagationStopped())return}}}qo.Event=new qo;const Ef=V.each,FA=V.grep,Sf="data-mce-style",$A=V.makeMap("fill-opacity font-weight line-height opacity orphans widows z-index zoom"," "),Wa=(e,t,n)=>{ut(n)||n===""?$t(e,t):Pt(e,t,n)},tb=e=>e.replace(/[A-Z]/g,t=>"-"+t.toLowerCase()),Ur=(e,t)=>{let n=0;if(e)for(let s=e.nodeType,o=e.previousSibling;o;o=o.previousSibling){const r=o.nodeType;t&&z(o)&&(r===s||!o.data.length)||(n++,s=r)}return n},nb=(e,t)=>{const n=An(t,"style"),s=e.serialize(e.parse(n),Xe(t));Wa(t,Sf,s)},MA=(e,t)=>Yt(e)?ye($A,t)?e+"":e+"px":e,sb=(e,t,n)=>{const s=tb(t);ut(n)||n===""?gh(e,s):dh(e,s,MA(n,s))},UA=(e,t,n)=>{const s=t.keep_values,o={set:(a,i,l)=>{const c=S.fromDom(a);Ie(t.url_converter)&&K(i)&&(i=t.url_converter.call(t.url_converter_scope||n(),String(i),l,a));const f="data-mce-"+l;Wa(c,f,i),Wa(c,l,i)},get:(a,i)=>{const l=S.fromDom(a);return An(l,"data-mce-"+i)||An(l,i)}},r={style:{set:(a,i)=>{const l=S.fromDom(a);s&&Wa(l,Sf,i),$t(l,"style"),le(i)&&ol(l,e.parse(i))},get:a=>{const i=S.fromDom(a),l=An(i,Sf)||An(i,"style");return e.serialize(e.parse(l),Xe(i))}}};return s&&(r.href=r.src=o),r},qe=(e,t={})=>{const n={},s=window,o={};let r=0;const a=!0,i=!0,l=qh.forElement(S.fromDom(e),{contentCssCors:t.contentCssCors,referrerPolicy:t.referrerPolicy}),c=[],f=t.schema?t.schema:lo({}),u=vf({url_converter:t.url_converter,url_converter_scope:t.url_converter_scope},t.schema),d=t.ownEvents?new qo:qo.Event,b=f.getBlockElements(),E=T=>le(T)?ye(b,T):Z(T)&&(ye(b,T.nodeName)||Wo(f,T)),g=T=>T&&e&&le(T)?e.getElementById(T):T,y=T=>{const A=g(T);return K(A)?S.fromDom(A):null},w=(T,A,W="")=>{let F;const fe=y(T);if(K(fe)&&pn(fe)){const ke=ma[A];ke&&ke.get?F=ke.get(fe.dom,A):F=An(fe,A)}return K(F)?F:W},_=T=>{const A=g(T);return ut(A)?[]:A.attributes},x=(T,A,W)=>{re(T,F=>{if(Z(F)){const fe=S.fromDom(F),ke=W===""?null:W,Ke=An(fe,A),kt=ma[A];kt&&kt.set?kt.set(fe.dom,ke,A):Wa(fe,A,ke),Ke!==ke&&t.onSetAttrib&&t.onSetAttrib({attrElm:fe.dom,attrName:A,attrValue:ke})}})},N=(T,A)=>T.cloneNode(A),I=()=>t.root_element||e.body,oe=T=>{const A=Sh(T);return{x:A.x,y:A.y,w:A.width,h:A.height}},L=(T,A)=>mA(e.body,g(T),A),D=(T,A,W)=>{re(T,F=>{const fe=S.fromDom(F);sb(fe,A,W),t.update_styles&&nb(u,fe)})},O=(T,A)=>{re(T,W=>{const F=S.fromDom(W);Ye(A,(fe,ke)=>{sb(F,ke,fe)}),t.update_styles&&nb(u,F)})},q=(T,A,W)=>{const F=g(T);if(!(ut(F)||!Z(F)))return W?ys(S.fromDom(F),tb(A)):(A=A.replace(/-(\D)/g,(fe,ke)=>ke.toUpperCase()),A==="float"&&(A="cssFloat"),F.style?F.style[A]:void 0)},j=T=>{const A=g(T);if(!A)return{w:0,h:0};let W=q(A,"width"),F=q(A,"height");return(!W||W.indexOf("px")===-1)&&(W="0"),(!F||F.indexOf("px")===-1)&&(F="0"),{w:parseInt(W,10)||A.offsetWidth||A.clientWidth,h:parseInt(F,10)||A.offsetHeight||A.clientHeight}},J=T=>{const A=g(T),W=L(A),F=j(A);return{x:W.x,y:W.y,w:F.w,h:F.h}},ge=(T,A)=>{if(!T)return!1;const W=et(T)?T:[T];return gt(W,F=>Jn(S.fromDom(F),A))},me=(T,A,W,F)=>{const fe=[];let ke=g(T);F=F===void 0;const Ke=W||(I().nodeName!=="BODY"?I().parentNode:null);if(le(A))if(A==="*")A=Z;else{const kt=A;A=Rt=>ge(Rt,kt)}for(;ke&&!(ke===Ke||ut(ke.nodeType)||$a(ke)||ef(ke));){if(!A||A(ke))if(F)fe.push(ke);else return[ke];ke=ke.parentNode}return F?fe:null},Ne=(T,A,W)=>{const F=me(T,A,W,!1);return F&&F.length>0?F[0]:null},Re=(T,A,W)=>{let F=A;if(T){le(A)&&(F=fe=>ge(fe,A));for(let fe=T[W];fe;fe=fe[W])if(Ie(F)&&F(fe))return fe}return null},nt=(T,A)=>Re(T,A,"nextSibling"),Bt=(T,A)=>Re(T,A,"previousSibling"),vt=T=>Ie(T.querySelectorAll),H=(T,A)=>{var W,F;const fe=(F=(W=g(A))!==null&&W!==void 0?W:t.root_element)!==null&&F!==void 0?F:e;return vt(fe)?sn(fe.querySelectorAll(T)):[]},re=function(T,A,W){const F=W??this;if(et(T)){const fe=[];return Ef(T,(ke,Ke)=>{const kt=g(ke);kt&&fe.push(A.call(F,kt,Ke))}),fe}else{const fe=g(T);return fe?A.call(F,fe):!1}},Te=(T,A)=>{re(T,W=>{Ye(A,(F,fe)=>{x(W,fe,F)})})},xe=(T,A)=>{re(T,W=>{const F=S.fromDom(W);al(F,A)})},ae=(T,A,W,F,fe)=>re(T,ke=>{const Ke=le(A)?e.createElement(A):A;return K(W)&&Te(Ke,W),F&&(!le(F)&&F.nodeType?Ke.appendChild(F):le(F)&&xe(Ke,F)),fe?Ke:ke.appendChild(Ke)}),ie=(T,A,W)=>ae(e.createElement(T),T,A,W,!0),U=io.decode,pe=io.encodeAllRaw,_e=(T,A,W="")=>{let F="<"+T;for(const fe in A)xr(A,fe)&&(F+=" "+fe+'="'+pe(A[fe])+'"');return Ta(W)&&ye(f.getVoidElements(),T)?F+" />":F+">"+W+"</"+T+">"},Le=T=>{const A=e.createElement("div"),W=e.createDocumentFragment();W.appendChild(A),T&&(A.innerHTML=T);let F;for(;F=A.firstChild;)W.appendChild(F);return W.removeChild(A),W},je=(T,A)=>re(T,W=>{const F=S.fromDom(W);return A&&$(Mt(F),fe=>{Tn(fe)&&fe.dom.length===0?tt(fe):yn(F,fe)}),tt(F),F.dom}),he=T=>re(T,A=>{const W=A.attributes;for(let F=W.length-1;F>=0;F--)A.removeAttributeNode(W.item(F))}),Ae=T=>u.parse(T),lt=(T,A)=>u.serialize(T,A),He=T=>{if(ds!==qe.DOM&&e===document){if(n[T])return;n[T]=!0}let A=e.getElementById("mceDefaultStyles");if(!A){A=e.createElement("style"),A.id="mceDefaultStyles",A.type="text/css";const W=e.head;W.firstChild?W.insertBefore(A,W.firstChild):W.appendChild(A)}A.styleSheet?A.styleSheet.cssText+=T:A.appendChild(e.createTextNode(T))},Je=T=>{T||(T=""),$(T.split(","),A=>{o[A]=!0,l.load(A).catch(Se)})},rt=(T,A,W)=>{re(T,F=>{if(Z(F)){const fe=S.fromDom(F),ke=A.split(" ");$(ke,Ke=>{K(W)?(W?Ar:Dr)(fe,Ke):kN(fe,Ke)})}})},Ge=(T,A)=>{rt(T,A,!0)},dt=(T,A)=>{rt(T,A,!1)},Mn=(T,A)=>{const W=y(T),F=A.split(" ");return K(W)&&Js(F,fe=>Wu(W,fe))},It=T=>{re(T,A=>gh(S.fromDom(A),"display"))},cs=T=>{re(T,A=>dh(S.fromDom(A),"display","none"))},wn=T=>{const A=y(T);return K(A)&&Nr(rl(A,"display"),"none")},br=T=>(T||"mce_")+r++,vr=T=>{const A=y(T);return K(A)?Z(A.dom)?A.dom.outerHTML:XN(A):""},us=(T,A)=>{re(T,W=>{Z(W)&&(W.outerHTML=A)})},Yn=(T,A)=>{const W=g(A);return re(T,F=>{const fe=W==null?void 0:W.parentNode,ke=W==null?void 0:W.nextSibling;return fe&&(ke?fe.insertBefore(F,ke):fe.appendChild(F)),F})},pt=(T,A,W)=>re(A,F=>{var fe;const ke=et(A)?T.cloneNode(!0):T;return W&&Ef(FA(F.childNodes),Ke=>{ke.appendChild(Ke)}),(fe=F.parentNode)===null||fe===void 0||fe.replaceChild(ke,F),F}),Un=(T,A)=>{if(T.nodeName!==A.toUpperCase()){const W=ie(A);return Ef(_(T),F=>{x(W,F.nodeName,w(T,F.nodeName))}),pt(W,T,!0),W}else return T},fs=(T,A)=>{let W=T;for(;W;){let F=A;for(;F&&W!==F;)F=F.parentNode;if(W===F)break;W=W.parentNode}return!W&&T.ownerDocument?T.ownerDocument.documentElement:W},zn=T=>{if(Z(T)){const A=T.nodeName.toLowerCase()==="a"&&!w(T,"href")&&w(T,"id");if(w(T,"name")||w(T,"data-mce-bookmark")||A)return!0}return!1},Hn=(T,A,W)=>{let F=0;if(zn(T))return!1;const fe=T.firstChild;if(fe){const ke=new _t(fe,T),Ke=f?f.getWhitespaceElements():{},kt=A||(f?f.getNonEmptyElements():null);let Rt=fe;do{if(Z(Rt)){const Hi=Rt.getAttribute("data-mce-bogus");if(Hi){Rt=ke.next(Hi==="all");continue}const Wi=Rt.nodeName.toLowerCase();if(kt&&kt[Wi]){if(Wi==="br"){F++,Rt=ke.next();continue}return!1}if(zn(Rt))return!1}if(so(Rt)||z(Rt)&&!Ho(Rt.data)&&(!(W!=null&&W.includeZwsp)||!KT(Rt.data))||z(Rt)&&Rt.parentNode&&Ke[Rt.parentNode.nodeName]&&Ho(Rt.data))return!1;Rt=ke.next()}while(Rt)}return F<=1},Ps=()=>e.createRange(),Ht=(T,A,W)=>{let F=Ps(),fe,ke;if(T&&A&&T.parentNode&&A.parentNode){const Ke=T.parentNode;return F.setStart(Ke,Ur(T)),F.setEnd(A.parentNode,Ur(A)),fe=F.extractContents(),F=Ps(),F.setStart(A.parentNode,Ur(A)+1),F.setEnd(Ke,Ur(T)+1),ke=F.extractContents(),Ke.insertBefore(mf(ds,fe),T),W?Ke.insertBefore(W,T):Ke.insertBefore(A,T),Ke.insertBefore(mf(ds,ke),T),je(T),W||A}else return},Zs=(T,A,W,F)=>{if(et(T)){let fe=T.length;const ke=[];for(;fe--;)ke[fe]=Zs(T[fe],A,W,F);return ke}else return t.collect&&(T===e||T===s)&&c.push([T,A,W,F]),d.bind(T,A,W,F||ds)},Os=(T,A,W)=>{if(et(T)){let F=T.length;const fe=[];for(;F--;)fe[F]=Os(T[F],A,W);return fe}else{if(c.length>0&&(T===e||T===s)){let F=c.length;for(;F--;){const[fe,ke,Ke]=c[F];T===fe&&(!A||A===ke)&&(!W||W===Ke)&&d.unbind(fe,ke,Ke)}}return d.unbind(T,A,W)}},Xn=(T,A,W)=>d.dispatch(T,A,W),wo=(T,A,W)=>d.dispatch(T,A,W),cu=T=>{if(T&&Z(T)){const A=T.getAttribute("data-mce-contenteditable");return A&&A!=="inherit"?A:T.contentEditable!=="inherit"?T.contentEditable:null}else return null},ds={doc:e,settings:t,win:s,files:o,stdMode:a,boxModel:i,styleSheetLoader:l,boundEvents:c,styles:u,schema:f,events:d,isBlock:E,root:null,clone:N,getRoot:I,getViewPort:oe,getRect:J,getSize:j,getParent:Ne,getParents:me,get:g,getNext:nt,getPrev:Bt,select:H,is:ge,add:ae,create:ie,createHTML:_e,createFragment:Le,remove:je,setStyle:D,getStyle:q,setStyles:O,removeAllAttribs:he,setAttrib:x,setAttribs:Te,getAttrib:w,getPos:L,parseStyle:Ae,serializeStyle:lt,addStyle:He,loadCSS:Je,addClass:Ge,removeClass:dt,hasClass:Mn,toggleClass:rt,show:It,hide:cs,isHidden:wn,uniqueId:br,setHTML:xe,getOuterHTML:vr,setOuterHTML:us,decode:U,encode:pe,insertAfter:Yn,replace:pt,rename:Un,findCommonAncestor:fs,run:re,getAttribs:_,isEmpty:Hn,createRng:Ps,nodeIndex:Ur,split:Ht,bind:Zs,unbind:Os,fire:wo,dispatch:Xn,getContentEditable:cu,getContentEditableParent:T=>{const A=I();let W=null;for(let F=T;F&&F!==A&&(W=cu(F),W===null);F=F.parentNode);return W},isEditable:T=>{if(K(T)){const A=Z(T)?T:T.parentElement;return K(A)&&Or(S.fromDom(A))}else return!1},destroy:()=>{if(c.length>0){let T=c.length;for(;T--;){const[A,W,F]=c[T];d.unbind(A,W,F)}}Ye(o,(T,A)=>{l.unload(A),delete o[A]})},isChildOf:(T,A)=>T===A||A.contains(T),dumpRng:T=>"startContainer: "+T.startContainer.nodeName+", startOffset: "+T.startOffset+", endContainer: "+T.endContainer.nodeName+", endOffset: "+T.endOffset},ma=UA(u,t,Y(ds));return ds};qe.DOM=qe(document),qe.nodeIndex=Ur;const zA=qe.DOM,HA=0,WA=1,xl=2,ob=3;class js{constructor(t={}){this.states={},this.queue=[],this.scriptLoadedCallbacks={},this.queueLoadedCallbacks=[],this.loading=!1,this.settings=t}_setReferrerPolicy(t){this.settings.referrerPolicy=t}loadScript(t){return new Promise((n,s)=>{const o=zA;let r;const a=()=>{o.remove(c),r&&(r.onerror=r.onload=r=null)},i=()=>{a(),n()},l=()=>{a(),s("Failed to load script: "+t)},c=o.uniqueId();r=document.createElement("script"),r.id=c,r.type="text/javascript",r.src=V._addCacheSuffix(t),this.settings.referrerPolicy&&o.setAttrib(r,"referrerpolicy",this.settings.referrerPolicy),r.onload=i,r.onerror=l,(document.getElementsByTagName("head")[0]||document.body).appendChild(r)})}isDone(t){return this.states[t]===xl}markDone(t){this.states[t]=xl}add(t){const n=this;return n.queue.push(t),n.states[t]===void 0&&(n.states[t]=HA),new Promise((o,r)=>{n.scriptLoadedCallbacks[t]||(n.scriptLoadedCallbacks[t]=[]),n.scriptLoadedCallbacks[t].push({resolve:o,reject:r})})}load(t){return this.add(t)}remove(t){delete this.states[t],delete this.scriptLoadedCallbacks[t]}loadQueue(){const t=this.queue;return this.queue=[],this.loadScripts(t)}loadScripts(t){const n=this,s=(l,c)=>{Qe(n.scriptLoadedCallbacks,c).each(f=>{$(f,u=>u[l](c))}),delete n.scriptLoadedCallbacks[c]},o=l=>{const c=ve(l,f=>f.status==="rejected");return c.length>0?Promise.reject(gs(c,({reason:f})=>et(f)?f:[f])):Promise.resolve()},r=l=>Promise.allSettled(Fe(l,c=>n.states[c]===xl?(s("resolve",c),Promise.resolve()):n.states[c]===ob?(s("reject",c),Promise.reject(c)):(n.states[c]=WA,n.loadScript(c).then(()=>{n.states[c]=xl,s("resolve",c);const f=n.queue;return f.length>0?(n.queue=[],r(f).then(o)):Promise.resolve()},()=>(n.states[c]=ob,s("reject",c),Promise.reject(c)))))),a=l=>(n.loading=!0,r(l).then(c=>{n.loading=!1;const f=n.queueLoadedCallbacks.shift();return m.from(f).each(ya),o(c)})),i=gg(t);return n.loading?new Promise((l,c)=>{n.queueLoadedCallbacks.push(()=>{a(i).then(l,c)})}):a(i)}}js.ScriptLoader=new js;const At=e=>{let t=e;return{get:()=>t,set:o=>{t=o}}},VA=e=>it(e)&&ye(e,"raw"),qA=e=>et(e)&&e.length>1,Va={},wf=At("en"),rb=()=>Qe(Va,wf.get()),ns={getData:()=>Qi(Va,e=>({...e})),setCode:e=>{e&&wf.set(e)},getCode:()=>wf.get(),add:(e,t)=>{let n=Va[e];n||(Va[e]=n={}),Ye(t,(s,o)=>{n[o.toLowerCase()]=s})},translate:e=>{const t=rb().getOr({}),n=a=>Ie(a)?Object.prototype.toString.call(a):s(a)?"":""+a,s=a=>a===""||a===null||a===void 0,o=a=>{const i=n(a);return Qe(t,i.toLowerCase()).map(n).getOr(i)},r=a=>a.replace(/{context:\w+}$/,"");if(s(e))return"";if(VA(e))return n(e.raw);if(qA(e)){const a=e.slice(1),i=o(e[0]).replace(/\{([0-9]+)\}/g,(l,c)=>ye(a,c)?n(a[c]):l);return r(i)}return r(o(e))},isRtl:()=>rb().bind(e=>Qe(e,"_dir")).exists(e=>e==="rtl"),hasCode:e=>ye(Va,e)},Xt=()=>{const e=[],t={},n={},s=[],o=(g,y)=>{const w=ve(s,_=>_.name===g&&_.state===y);$(w,_=>_.resolve())},r=g=>ye(t,g),a=g=>ye(n,g),i=g=>{if(n[g])return n[g].instance},l=(g,y)=>{const w=ns.getCode(),_=","+(y||"")+",";!w||y&&_.indexOf(","+w+",")===-1||js.ScriptLoader.add(t[g]+"/langs/"+w+".js")},c=(g,y)=>{Xt.languageLoad!==!1&&(r(g)?l(g,y):E(g,"loaded").then(()=>l(g,y)))},f=(g,y)=>(e.push(y),n[g]={instance:y},o(g,"added"),y),u=g=>{delete t[g],delete n[g]},d=(g,y)=>le(y)?le(g)?{prefix:"",resource:y,suffix:""}:{prefix:g.prefix,resource:y,suffix:g.suffix}:y,b=(g,y)=>{if(t[g])return Promise.resolve();let w=le(y)?y:y.prefix+y.resource+y.suffix;w.indexOf("/")!==0&&w.indexOf("://")===-1&&(w=Xt.baseURL+"/"+w),t[g]=w.substring(0,w.lastIndexOf("/"));const _=()=>(o(g,"loaded"),Promise.resolve());return n[g]?_():js.ScriptLoader.add(w).then(_)},E=(g,y="added")=>y==="added"&&a(g)||y==="loaded"&&r(g)?Promise.resolve():new Promise(w=>{s.push({name:g,state:y,resolve:w})});return{items:e,urls:t,lookup:n,get:i,requireLangPack:c,add:f,remove:u,createUrl:d,load:b,waitFor:E}};Xt.languageLoad=!0,Xt.baseURL="",Xt.PluginManager=Xt(),Xt.ThemeManager=Xt(),Xt.ModelManager=Xt();const jA=e=>{const t=At(m.none()),n=()=>t.get().each(e);return{clear:()=>{n(),t.set(m.none())},isSet:()=>t.get().isSome(),get:()=>t.get(),set:i=>{n(),t.set(m.some(i))}}},KA=e=>{const t=At(m.none()),n=()=>t.get().each(i=>clearInterval(i));return{clear:()=>{n(),t.set(m.none())},isSet:()=>t.get().isSome(),get:()=>t.get(),set:i=>{n(),t.set(m.some(setInterval(i,e)))}}},co=()=>{const e=jA(Se);return{...e,on:n=>e.get().each(n)}},kl=(e,t)=>{let n=null;return{cancel:()=>{Lt(n)||(clearTimeout(n),n=null)},throttle:(...r)=>{Lt(n)&&(n=setTimeout(()=>{n=null,e.apply(null,r)},t))}}},_f=(e,t)=>{let n=null;const s=()=>{Lt(n)||(clearTimeout(n),n=null)};return{cancel:s,throttle:(...r)=>{s(),n=setTimeout(()=>{n=null,e.apply(null,r)},t)}}},qa=Y("mce-annotation"),jo=Y("data-mce-annotation"),zr=Y("data-mce-annotation-uid"),ja=Y("data-mce-annotation-active"),Ka=Y("data-mce-annotation-classes"),Ga=Y("data-mce-annotation-attrs"),ab=e=>t=>Ue(t,e),ib=(e,t)=>{const n=e.selection.getRng(),s=S.fromDom(n.startContainer),o=S.fromDom(e.getBody()),r=t.fold(()=>"."+qa(),l=>`[${jo()}="${l}"]`),a=Rr(s,n.startOffset).getOr(s);return Fo(a,r,ab(o)).bind(l=>Ms(l,`${zr()}`).bind(c=>Ms(l,`${jo()}`).map(f=>{const u=cb(e,c);return{uid:c,name:f,elements:u}})))},GA=e=>pn(e)&&Wu(e,qa()),lb=(e,t)=>sl(e,"data-mce-bogus")||_h(e,'[data-mce-bogus="all"]',ab(t)),cb=(e,t)=>{const n=S.fromDom(e.getBody()),s=jt(n,`[${zr()}="${t}"]`);return ve(s,o=>!lb(o,n))},ub=(e,t)=>{const n=S.fromDom(e.getBody()),s=jt(n,`[${jo()}="${t}"]`),o={};return $(s,r=>{if(!lb(r,n)){const a=An(r,zr()),i=Qe(o,a).getOr([]);o[a]=i.concat([r])}}),o},YA=(e,t)=>{const n=At({}),s=()=>({listeners:[],previous:co()}),o=(u,d)=>{r(u,b=>(d(b),b))},r=(u,d)=>{const b=n.get(),E=Qe(b,u).getOrThunk(s),g=d(E);b[u]=g,n.set(b)},a=(u,d,b)=>{o(u,E=>{$(E.listeners,g=>g(!0,u,{uid:d,nodes:Fe(b,y=>y.dom)}))})},i=u=>{o(u,d=>{$(d.listeners,b=>b(!1,u))})},l=(u,d)=>{$(cb(e,u),b=>{d?Pt(b,ja(),"true"):$t(b,ja())})},c=_f(()=>{const u=Do(t.getNames());$(u,d=>{r(d,b=>{const E=b.previous.get();return ib(e,m.some(d)).fold(()=>{E.each(g=>{i(d),b.previous.clear(),l(g,!1)})},({uid:g,name:y,elements:w})=>{Nr(E,g)||(E.each(_=>l(_,!1)),a(y,g,w),b.previous.set(g),l(g,!0))}),{previous:b.previous,listeners:b.listeners}})})},30);return e.on("remove",()=>{c.cancel()}),e.on("NodeChange",()=>{c.throttle()}),{addListener:(u,d)=>{r(u,b=>({previous:b.previous,listeners:b.listeners.concat([d])}))}}},XA=(e,t)=>{const n=jo(),s=r=>m.from(r.attr(n)).bind(t.lookup),o=r=>{var a,i;r.attr(zr(),null),r.attr(jo(),null),r.attr(ja(),null);const l=m.from(r.attr(Ga())).map(d=>d.split(",")).getOr([]),c=m.from(r.attr(Ka())).map(d=>d.split(",")).getOr([]);$(l,d=>r.attr(d,null));const f=(i=(a=r.attr("class"))===null||a===void 0?void 0:a.split(" "))!==null&&i!==void 0?i:[],u=Xi(f,[qa()].concat(c));r.attr("class",u.length>0?u.join(" "):null),r.attr(Ka(),null),r.attr(Ga(),null)};e.serializer.addTempAttr(ja()),e.serializer.addAttributeFilter(n,r=>{for(const a of r)s(a).each(i=>{i.persistent===!1&&(a.name==="span"?a.unwrap():o(a))})})},ZA=()=>{const e={};return{register:(o,r)=>{e[o]={name:o,settings:r}},lookup:o=>Qe(e,o).map(r=>r.settings),getNames:()=>Cn(e)}};let fb=0;const Ya=e=>{const n=new Date().getTime(),s=Math.floor(Math.random()*1e9);return fb++,e+"_"+s+fb+String(n)},QA=(e,t)=>{$(t,n=>{Ar(e,n)})},JA=(e,t)=>{$(t,n=>{Dr(e,n)})},db=(e,t)=>S.fromDom(e.dom.cloneNode(t)),Ko=e=>db(e,!1),mb=e=>db(e,!0),eD=(e,t)=>{const n=S.fromTag(t),s=Zg(e);return eo(n,s),n},pb=(e,t)=>{const n=eD(e,t);no(e,n);const s=Mt(e);return $o(n,s),tt(e),n},gb=(e,t,n=ot)=>{const s=new _t(e,t),o=r=>{let a;do a=s[r]();while(a&&!z(a)&&!n(a));return m.from(a).filter(z)};return{current:()=>m.from(s.current()).filter(z),next:()=>o("next"),prev:()=>o("prev"),prev2:()=>o("prev2")}},Go=(e,t)=>{const n=t||(a=>e.isBlock(a)||ft(a)||Ze(a)),s=(a,i,l,c)=>{if(z(a)){const f=c(a,i,a.data);if(f!==-1)return m.some({container:a,offset:f})}return l().bind(f=>s(f.container,f.offset,l,c))};return{backwards:(a,i,l,c)=>{const f=gb(a,c??e.getRoot(),n);return s(a,i,()=>f.prev().map(u=>({container:u,offset:u.length})),l).getOrNull()},forwards:(a,i,l,c)=>{const f=gb(a,c??e.getRoot(),n);return s(a,i,()=>f.next().map(u=>({container:u,offset:0})),l).getOrNull()}}},Hr=Math.round,Yo=e=>e?{left:Hr(e.left),top:Hr(e.top),bottom:Hr(e.bottom),right:Hr(e.right),width:Hr(e.width),height:Hr(e.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0},hb=(e,t)=>(e=Yo(e),t||(e.left=e.left+e.width),e.right=e.left,e.width=0,e),tD=(e,t)=>e.left===t.left&&e.top===t.top&&e.bottom===t.bottom&&e.right===t.right,bb=(e,t,n)=>e>=0&&e<=Math.min(t.height,n.height)/2,Xa=(e,t)=>{const n=Math.min(t.height/2,e.height/2);return e.bottom-n<t.top?!0:e.top>t.bottom?!1:bb(t.top-e.bottom,e,t)},Za=(e,t)=>e.top>t.bottom?!0:e.bottom<t.top?!1:bb(t.bottom-e.top,e,t),nD=(e,t,n)=>t>=e.left&&t<=e.right&&n>=e.top&&n<=e.bottom,sD=e=>vn(e,(t,n)=>t.fold(()=>m.some(n),s=>{const o=Math.min(n.left,s.left),r=Math.min(n.top,s.top),a=Math.max(n.right,s.right),i=Math.max(n.bottom,s.bottom);return m.some({top:r,right:a,bottom:i,left:o,width:a-o,height:i-r})}),m.none()),vb=(e,t,n)=>{const s=Math.max(Math.min(t,e.left+e.width),e.left),o=Math.max(Math.min(n,e.top+e.height),e.top);return Math.sqrt((t-s)*(t-s)+(n-o)*(n-o))},oD=(e,t)=>Math.max(0,Math.min(e.bottom,t.bottom)-Math.max(e.top,t.top)),rD=(e,t,n)=>Math.min(Math.max(e,t),n),Nl=e=>{const t=e.startContainer,n=e.startOffset;return t===e.endContainer&&t.hasChildNodes()&&e.endOffset===n+1?t.childNodes[n]:null},uo=(e,t)=>{if(Z(e)&&e.hasChildNodes()){const n=e.childNodes,s=rD(t,0,n.length-1);return n[s]}else return e},aD=(e,t)=>{if(!(t<0&&Z(e)&&e.hasChildNodes()))return uo(e,t)},iD=new RegExp("[̀-ͯ҃-҇҈-҉֑-ֽֿׁ-ׂׄ-ׇׅؐ-ًؚ-ٰٟۖ-ۜ۟-ۤۧ-۪ۨ-ܑۭܰ-݊ަ-ް߫-߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ࣣ-ंऺ़ु-ै्॑-ॗॢ-ॣঁ়াু-ৄ্ৗৢ-ৣਁ-ਂ਼ੁ-ੂੇ-ੈੋ-੍ੑੰ-ੱੵઁ-ં઼ુ-ૅે-ૈ્ૢ-ૣଁ଼ାିୁ-ୄ୍ୖୗୢ-ୣஂாீ்ௗఀా-ీె-ైొ-్ౕ-ౖౢ-ౣಁ಼ಿೂೆೌ-್ೕ-ೖೢ-ೣഁാു-ൄ്ൗൢ-ൣ්ාි-ුූෟัิ-ฺ็-๎ັິ-ູົ-ຼ່-ໍ༘-ཱ༹༙༵༷-ཾྀ-྄྆-྇ྍ-ྗྙ-ྼ࿆ိ-ူဲ-့္-်ွ-ှၘ-ၙၞ-ၠၱ-ၴႂႅ-ႆႍႝ፝-፟ᜒ-᜔ᜲ-᜴ᝒ-ᝓᝲ-ᝳ឴-឵ិ-ួំ៉-៓៝᠋-᠍ᢩᤠ-ᤢᤧ-ᤨᤲ᤹-᤻ᨗ-ᨘᨛᩖᩘ-ᩞ᩠ᩢᩥ-ᩬᩳ-᩿᩼᪰-᪽᪾ᬀ-ᬃ᬴ᬶ-ᬺᬼᭂ᭫-᭳ᮀ-ᮁᮢ-ᮥᮨ-ᮩ᮫-ᮭ᯦ᯨ-ᯩᯭᯯ-ᯱᰬ-ᰳᰶ-᰷᳐-᳔᳒-᳢᳠-᳨᳭᳴᳸-᳹᷀-᷵᷼-᷿‌-‍⃐-⃜⃝-⃠⃡⃢-⃤⃥-⃰⳯-⵿⳱ⷠ-〪ⷿ-〭〮-゙〯-゚꙯꙰-꙲ꙴ-꙽ꚞ-ꚟ꛰-꛱ꠂ꠆ꠋꠥ-ꠦ꣄꣠-꣱ꤦ-꤭ꥇ-ꥑꦀ-ꦂ꦳ꦶ-ꦹꦼꧥꨩ-ꨮꨱ-ꨲꨵ-ꨶꩃꩌꩼꪰꪲ-ꪴꪷ-ꪸꪾ-꪿꫁ꫬ-ꫭ꫶ꯥꯨ꯭ﬞ︀-️︠-︯ﾞ-ﾟ]"),Cb=e=>le(e)&&e.charCodeAt(0)>=768&&iD.test(e),lD=(...e)=>t=>{for(let n=0;n<e.length;n++)if(e[n](t))return!0;return!1},cD=(...e)=>t=>{for(let n=0;n<e.length;n++)if(!e[n](t))return!1;return!0},yb=Z,uD=jn,Eb=cl("display","block table"),fD=cl("float","left right"),Qa=cD(yb,uD,wr(fD)),dD=wr(cl("white-space","pre pre-line pre-wrap")),Ja=z,xf=ft,Sb=qe.nodeIndex,Tl=aD,kf=e=>e?e.createRange():qe.DOM.createRng(),Nf=e=>le(e)&&/[\r\n\t ]/.test(e),wb=e=>!!e.setStart&&!!e.setEnd,Tf=e=>{const t=e.startContainer,n=e.startOffset;if(Nf(e.toString())&&dD(t.parentNode)&&z(t)){const s=t.data;if(Nf(s[n-1])||Nf(s[n+1]))return!0}return!1},mD=e=>{const t=e.ownerDocument,n=kf(t),s=t.createTextNode(Tt),o=e.parentNode;o.insertBefore(s,e),n.setStart(s,0),n.setEnd(s,1);const r=Yo(n.getBoundingClientRect());return o.removeChild(s),r},pD=e=>{const t=e.startContainer,n=e.endContainer,s=e.startOffset,o=e.endOffset;if(t===n&&z(n)&&s===0&&o===1){const r=e.cloneRange();return r.setEndAfter(n),fo(r)}else return null},_b=e=>e.left===0&&e.right===0&&e.top===0&&e.bottom===0,fo=e=>{var t;let n;const s=e.getClientRects();return s.length>0?n=Yo(s[0]):n=Yo(e.getBoundingClientRect()),!wb(e)&&xf(e)&&_b(n)?mD(e):_b(n)&&wb(e)&&(t=pD(e))!==null&&t!==void 0?t:n},Xo=(e,t)=>{const n=hb(e,t);return n.width=1,n.right=n.left+1,n},gD=e=>{const t=[],n=a=>{a.height!==0&&(t.length>0&&tD(a,t[t.length-1])||t.push(a))},s=(a,i)=>{const l=kf(a.ownerDocument);if(i<a.data.length){if(Cb(a.data[i]))return;if(Cb(a.data[i-1])&&(l.setStart(a,i),l.setEnd(a,i+1),!Tf(l))){n(Xo(fo(l),!1));return}}i>0&&(l.setStart(a,i-1),l.setEnd(a,i),Tf(l)||n(Xo(fo(l),!1))),i<a.data.length&&(l.setStart(a,i),l.setEnd(a,i+1),Tf(l)||n(Xo(fo(l),!0)))},o=e.container(),r=e.offset();if(Ja(o))return s(o,r),t;if(yb(o))if(e.isAtEnd()){const a=Tl(o,r);Ja(a)&&s(a,a.data.length),Qa(a)&&!xf(a)&&n(Xo(fo(a),!1))}else{const a=Tl(o,r);if(Ja(a)&&s(a,0),Qa(a)&&e.isAtEnd())return n(Xo(fo(a),!1)),t;const i=Tl(e.container(),e.offset()-1);Qa(i)&&!xf(i)&&(Eb(i)||Eb(a)||!Qa(a))&&n(Xo(fo(i),!1)),Qa(a)&&n(Xo(fo(a),!0))}return t},P=(e,t,n)=>{const s=()=>(Ja(e),t===0),o=()=>Ja(e)?t>=e.data.length:t>=e.childNodes.length,r=()=>{const f=kf(e.ownerDocument);return f.setStart(e,t),f.setEnd(e,t),f},a=()=>(n||(n=gD(P(e,t))),n),i=()=>a().length>0,l=f=>f&&e===f.container()&&t===f.offset(),c=f=>Tl(e,f?t-1:t);return{container:Y(e),offset:Y(t),toRange:r,getClientRects:a,isVisible:i,isAtStart:s,isAtEnd:o,isEqual:l,getNode:c}};P.fromRangeStart=e=>P(e.startContainer,e.startOffset),P.fromRangeEnd=e=>P(e.endContainer,e.endOffset),P.after=e=>P(e.parentNode,Sb(e)+1),P.before=e=>P(e.parentNode,Sb(e)),P.isAbove=(e,t)=>on(mn(t.getClientRects()),Ro(e.getClientRects()),Xa).getOr(!1),P.isBelow=(e,t)=>on(Ro(t.getClientRects()),mn(e.getClientRects()),Za).getOr(!1),P.isAtStart=e=>e?e.isAtStart():!1,P.isAtEnd=e=>e?e.isAtEnd():!1,P.isTextPosition=e=>e?z(e.container()):!1,P.isElementPosition=e=>!P.isTextPosition(e);const Al=(e,t)=>{z(t)&&t.data.length===0&&e.remove(t)},hD=(e,t,n)=>{t.insertNode(n),Al(e,n.previousSibling),Al(e,n.nextSibling)},bD=(e,t,n)=>{const s=m.from(n.firstChild),o=m.from(n.lastChild);t.insertNode(n),s.each(r=>Al(e,r.previousSibling)),o.each(r=>Al(e,r.nextSibling))},Af=(e,t,n)=>{ef(n)?bD(e,t,n):hD(e,t,n)},ss=z,xb=Uo,kb=qe.nodeIndex,Nb=e=>{const t=e.parentNode;return xb(t)?Nb(t):t},Df=e=>e?el(e.childNodes,(t,n)=>(xb(n)&&n.nodeName!=="BR"?t=t.concat(Df(n)):t.push(n),t),[]):[],vD=(e,t)=>{let n=e;for(;(n=n.previousSibling)&&ss(n);)t+=n.data.length;return t},Tb=e=>t=>e===t,CD=e=>{let t,n;t=Df(Nb(e)),n=bg(t,Tb(e),e),t=t.slice(0,n+1);const s=el(t,(o,r,a)=>(ss(r)&&ss(t[a-1])&&o++,o),0);return t=ka(t,es([e.nodeName])),n=bg(t,Tb(e),e),n-s},Ab=e=>(ss(e)?"text()":e.nodeName.toLowerCase())+"["+CD(e)+"]",yD=(e,t,n)=>{const s=[];for(let o=t.parentNode;o&&o!==e&&!(n&&n(o));o=o.parentNode)s.push(o);return s},Db=(e,t)=>{let n=[],s=t.container(),o=t.offset(),r;if(ss(s))r=vD(s,o);else{const i=s.childNodes;o>=i.length?(r="after",o=i.length-1):r="before",s=i[o]}n.push(Ab(s));let a=yD(e,s);return a=ka(a,wr(Uo)),n=n.concat(Bu(a,i=>Ab(i))),n.reverse().join("/")+","+r},ED=(e,t,n)=>{let s=Df(e);return s=ka(s,(o,r)=>!ss(o)||!ss(s[r-1])),s=ka(s,es([t])),s[n]},SD=(e,t)=>{let n=e,s=0;for(;ss(n);){const o=n.data.length;if(t>=s&&t<=s+o){e=n,t=t-s;break}if(!ss(n.nextSibling)){e=n,t=o;break}s+=o,n=n.nextSibling}return ss(e)&&t>e.data.length&&(t=e.data.length),P(e,t)},Rb=(e,t)=>{if(!t)return null;const n=t.split(","),s=n[0].split("/"),o=n.length>1?n[1]:"before",r=el(s,(a,i)=>{const l=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(i);return l?(l[1]==="text()"&&(l[1]="#text"),ED(a,l[1],parseInt(l[2],10))):null},e);if(!r)return null;if(!ss(r)&&r.parentNode){let a;return o==="after"?a=kb(r)+1:a=kb(r),P(r.parentNode,a)}return SD(r,parseInt(o,10))},Dl=Ze,wD=(e,t,n)=>{let s=e(t.data.slice(0,n)).length;for(let o=t.previousSibling;o&&z(o);o=o.previousSibling)s+=e(o.data).length;return s},Pb=(e,t,n,s,o)=>{const r=o?s.startContainer:s.endContainer;let a=o?s.startOffset:s.endOffset;const i=[],l=e.getRoot();if(z(r))i.push(n?wD(t,r,a):a);else{let c=0;const f=r.childNodes;a>=f.length&&f.length&&(c=1,a=Math.max(0,f.length-1)),i.push(e.nodeIndex(f[a],n)+c)}for(let c=r;c&&c!==l;c=c.parentNode)i.push(e.nodeIndex(c,n));return i},_D=(e,t,n,s)=>{const o=t.dom,r=Pb(o,e,n,s,!0),a=t.isForward(),i=Ph(s)?{isFakeCaret:!0}:{};if(t.isCollapsed())return{start:r,forward:a,...i};{const l=Pb(o,e,n,s,!1);return{start:r,end:l,forward:a,...i}}},Rf=(e,t,n)=>{let s=0;return V.each(e.select(t),o=>{if(o.getAttribute("data-mce-bogus")!=="all"){if(o===n)return!1;s++;return}}),s},Ob=(e,t)=>{let n=t?e.startContainer:e.endContainer,s=t?e.startOffset:e.endOffset;if(Z(n)&&n.nodeName==="TR"){const o=n.childNodes;n=o[Math.min(t?s:s-1,o.length-1)],n&&(s=t?0:n.childNodes.length,t?e.setStart(n,s):e.setEnd(n,s))}},Bb=e=>(Ob(e,!0),Ob(e,!1),e),Ib=(e,t)=>{if(Z(e)&&(e=uo(e,t),Dl(e)))return e;if(Rn(e)){z(e)&&$r(e)&&(e=e.parentNode);let n=e.previousSibling;if(Dl(n)||(n=e.nextSibling,Dl(n)))return n}},xD=e=>Ib(e.startContainer,e.startOffset)||Ib(e.endContainer,e.endOffset),Lb=(e,t,n)=>{const s=n.getNode(),o=n.getRng();if(s.nodeName==="IMG"||Dl(s)){const a=s.nodeName;return{name:a,index:Rf(n.dom,a,s)}}const r=xD(o);if(r){const a=r.tagName;return{name:a,index:Rf(n.dom,a,r)}}return _D(e,n,t,o)},kD=e=>{const t=e.getRng();return{start:Db(e.dom.getRoot(),P.fromRangeStart(t)),end:Db(e.dom.getRoot(),P.fromRangeEnd(t)),forward:e.isForward()}},ND=e=>({rng:e.getRng(),forward:e.isForward()}),Fb=(e,t,n)=>{const s={"data-mce-type":"bookmark",id:t,style:"overflow:hidden;line-height:0px"};return n?e.create("span",s,"&#xFEFF;"):e.create("span",s)},$b=(e,t)=>{const n=e.dom;let s=e.getRng();const o=n.uniqueId(),r=e.isCollapsed(),a=e.getNode(),i=a.nodeName,l=e.isForward();if(i==="IMG")return{name:i,index:Rf(n,i,a)};const c=Bb(s.cloneRange());if(!r){c.collapse(!1);const u=Fb(n,o+"_end",t);Af(n,c,u)}s=Bb(s),s.collapse(!0);const f=Fb(n,o+"_start",t);return Af(n,s,f),e.moveToBookmark({id:o,keep:!0,forward:l}),{id:o,forward:l}},TD=(e,t,n=!1)=>t===2?Lb(qs,n,e):t===3?kD(e):t?ND(e):$b(e,!1),Pf=te(Lb,Vt,!0),Mb=e=>{const t=r=>r(e),n=Y(e),s=()=>o,o={tag:!0,inner:e,fold:(r,a)=>a(e),isValue:yt,isError:ot,map:r=>rn.value(r(e)),mapError:s,bind:t,exists:t,forall:t,getOr:n,or:s,getOrThunk:n,orThunk:s,getOrDie:n,each:r=>{r(e)},toOptional:()=>m.some(e)};return o},Ub=e=>{const t=()=>n,n={tag:!1,inner:e,fold:(s,o)=>s(e),isValue:ot,isError:yt,map:t,mapError:s=>rn.error(s(e)),bind:t,exists:ot,forall:yt,getOr:Vt,or:Vt,getOrThunk:Nu,orThunk:Nu,getOrDie:cg(String(e)),each:Se,toOptional:m.none};return n},rn={value:Mb,error:Ub,fromOption:(e,t)=>e.fold(()=>Ub(t),Mb)},Ss={generate:e=>{if(!et(e))throw new Error("cases must be an array");if(e.length===0)throw new Error("there must be at least one case");const t=[],n={};return $(e,(s,o)=>{const r=Cn(s);if(r.length!==1)throw new Error("one and only one name per case");const a=r[0],i=s[a];if(n[a]!==void 0)throw new Error("duplicate key detected:"+a);if(a==="cata")throw new Error("cannot have a case named cata (sorry)");if(!et(i))throw new Error("case arguments must be an array");t.push(a),n[a]=(...l)=>{const c=l.length;if(c!==i.length)throw new Error("Wrong number of arguments to case "+a+". Expected "+i.length+" ("+i+"), got "+c);return{fold:(...u)=>{if(u.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+u.length);return u[o].apply(null,l)},match:u=>{const d=Cn(u);if(t.length!==d.length)throw new Error("Wrong number of arguments to match. Expected: "+t.join(",")+`
Actual: `+d.join(","));if(!Js(t,E=>We(d,E)))throw new Error("Not all branches were specified when using match. Specified: "+d.join(", ")+`
Required: `+t.join(", "));return u[a].apply(null,l)},log:u=>{console.log(u,{constructors:t,constructor:a,params:l})}}}}),n}};Ss.generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const AD=e=>{const t=[],n=[];return $(e,s=>{s.fold(o=>{t.push(o)},o=>{n.push(o)})}),{errors:t,values:n}},DD=e=>e.type==="inline-command"||e.type==="inline-format",RD=e=>e.type==="block-command"||e.type==="block-format",PD=e=>{const t=s=>rn.error({message:s,pattern:e}),n=(s,o,r)=>{if(e.format!==void 0){let a;if(et(e.format)){if(!Js(e.format,le))return t(s+" pattern has non-string items in the `format` array");a=e.format}else if(le(e.format))a=[e.format];else return t(s+" pattern has non-string `format` parameter");return rn.value(o(a))}else return e.cmd!==void 0?le(e.cmd)?rn.value(r(e.cmd,e.value)):t(s+" pattern has non-string `cmd` parameter"):t(s+" pattern is missing both `format` and `cmd` parameters")};if(!it(e))return t("Raw pattern is not an object");if(!le(e.start))return t("Raw pattern is missing `start` parameter");if(e.end!==void 0){if(!le(e.end))return t("Inline pattern has non-string `end` parameter");if(e.start.length===0&&e.end.length===0)return t("Inline pattern has empty `start` and `end` parameters");let s=e.start,o=e.end;return o.length===0&&(o=s,s=""),n("Inline",r=>({type:"inline-format",start:s,end:o,format:r}),(r,a)=>({type:"inline-command",start:s,end:o,cmd:r,value:a}))}else return e.replacement!==void 0?le(e.replacement)?e.start.length===0?t("Replacement pattern has empty `start` parameter"):rn.value({type:"inline-command",start:"",end:e.start,cmd:"mceInsertContent",value:e.replacement}):t("Replacement pattern has non-string `replacement` parameter"):e.start.length===0?t("Block pattern has empty `start` parameter"):n("Block",s=>({type:"block-format",start:e.start,format:s[0]}),(s,o)=>({type:"block-command",start:e.start,cmd:s,value:o}))},zb=e=>ve(e,RD),Hb=e=>ve(e,DD),OD=(e,t)=>({inlinePatterns:Hb(e),blockPatterns:zb(e),dynamicPatternsLookup:t}),Wb=e=>{const t=AD(Fe(e,PD));return $(t.errors,n=>console.error(n.message,n.pattern)),t.values},BD=e=>t=>{const n=e(t);return Wb(n)},Of=bs().deviceType,ID=Of.isTouch(),LD=qe.DOM,FD=e=>{const t=e.indexOf("=")>0?e.split(/[;,](?![^=;,]*(?:[;,]|$))/):e.split(",");return vn(t,(n,s)=>{const o=s.split("="),r=o[0],a=o.length>1?o[1]:r;return n[kr(r)]=kr(a),n},{})},Vb=e=>Wt(e,RegExp),Q=e=>t=>t.options.get(e),Bf=e=>le(e)||it(e),qb=(e,t="")=>n=>{const s=le(n);if(s)if(n.indexOf("=")!==-1){const o=FD(n);return{value:Qe(o,e.id).getOr(t),valid:s}}else return{value:n,valid:s};else return{valid:!1,message:"Must be a string."}},$D=e=>{const t=e.options.register;t("id",{processor:"string",default:e.id}),t("selector",{processor:"string"}),t("target",{processor:"object"}),t("suffix",{processor:"string"}),t("cache_suffix",{processor:"string"}),t("base_url",{processor:"string"}),t("referrer_policy",{processor:"string",default:""}),t("language_load",{processor:"boolean",default:!0}),t("inline",{processor:"boolean",default:!1}),t("iframe_attrs",{processor:"object",default:{}}),t("doctype",{processor:"string",default:"<!DOCTYPE html>"}),t("document_base_url",{processor:"string",default:e.documentBaseUrl}),t("body_id",{processor:qb(e,"tinymce"),default:"tinymce"}),t("body_class",{processor:qb(e),default:""}),t("content_security_policy",{processor:"string",default:""}),t("br_in_pre",{processor:"boolean",default:!0}),t("forced_root_block",{processor:n=>{const s=le(n)&&hs(n);return s?{value:n,valid:s}:{valid:!1,message:"Must be a non-empty string."}},default:"p"}),t("forced_root_block_attrs",{processor:"object",default:{}}),t("newline_behavior",{processor:n=>{const s=We(["block","linebreak","invert","default"],n);return s?{value:n,valid:s}:{valid:!1,message:"Must be one of: block, linebreak, invert or default."}},default:"default"}),t("br_newline_selector",{processor:"string",default:".mce-toc h2,figcaption,caption"}),t("no_newline_selector",{processor:"string",default:""}),t("keep_styles",{processor:"boolean",default:!0}),t("end_container_on_empty_block",{processor:n=>Ls(n)?{valid:!0,value:n}:le(n)?{valid:!0,value:n}:{valid:!1,message:"Must be boolean or a string"},default:"blockquote"}),t("font_size_style_values",{processor:"string",default:"xx-small,x-small,small,medium,large,x-large,xx-large"}),t("font_size_legacy_values",{processor:"string",default:"xx-small,small,medium,large,x-large,xx-large,300%"}),t("font_size_classes",{processor:"string",default:""}),t("automatic_uploads",{processor:"boolean",default:!0}),t("images_reuse_filename",{processor:"boolean",default:!1}),t("images_replace_blob_uris",{processor:"boolean",default:!0}),t("icons",{processor:"string",default:""}),t("icons_url",{processor:"string",default:""}),t("images_upload_url",{processor:"string",default:""}),t("images_upload_base_path",{processor:"string",default:""}),t("images_upload_credentials",{processor:"boolean",default:!1}),t("images_upload_handler",{processor:"function"}),t("language",{processor:"string",default:"en"}),t("language_url",{processor:"string",default:""}),t("entity_encoding",{processor:"string",default:"named"}),t("indent",{processor:"boolean",default:!0}),t("indent_before",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),t("indent_after",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),t("indent_use_margin",{processor:"boolean",default:!1}),t("indentation",{processor:"string",default:"40px"}),t("content_css",{processor:n=>{const s=n===!1||le(n)||Fs(n,le);return s?le(n)?{value:Fe(n.split(","),kr),valid:s}:et(n)?{value:n,valid:s}:n===!1?{value:[],valid:s}:{value:n,valid:s}:{valid:!1,message:"Must be false, a string or an array of strings."}},default:Ff(e)?[]:["default"]}),t("content_style",{processor:"string"}),t("content_css_cors",{processor:"boolean",default:!1}),t("font_css",{processor:n=>{const s=le(n)||Fs(n,le);return s?{value:et(n)?n:Fe(n.split(","),kr),valid:s}:{valid:!1,message:"Must be a string or an array of strings."}},default:[]}),t("inline_boundaries",{processor:"boolean",default:!0}),t("inline_boundaries_selector",{processor:"string",default:"a[href],code,span.mce-annotation"}),t("object_resizing",{processor:n=>{const s=Ls(n)||le(n);return s?n===!1||Of.isiPhone()||Of.isiPad()?{value:"",valid:s}:{value:n===!0?"table,img,figure.image,div,video,iframe":n,valid:s}:{valid:!1,message:"Must be boolean or a string"}},default:!ID}),t("resize_img_proportional",{processor:"boolean",default:!0}),t("event_root",{processor:"object"}),t("service_message",{processor:"string"}),t("theme",{processor:n=>n===!1||le(n)||Ie(n),default:"silver"}),t("theme_url",{processor:"string"}),t("formats",{processor:"object"}),t("format_empty_lines",{processor:"boolean",default:!1}),t("format_noneditable_selector",{processor:"string",default:""}),t("preview_styles",{processor:n=>{const s=n===!1||le(n);return s?{value:n===!1?"":n,valid:s}:{valid:!1,message:"Must be false or a string"}},default:"font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"}),t("custom_ui_selector",{processor:"string",default:""}),t("hidden_input",{processor:"boolean",default:!0}),t("submit_patch",{processor:"boolean",default:!0}),t("encoding",{processor:"string"}),t("add_form_submit_trigger",{processor:"boolean",default:!0}),t("add_unload_trigger",{processor:"boolean",default:!0}),t("custom_undo_redo_levels",{processor:"number",default:0}),t("disable_nodechange",{processor:"boolean",default:!1}),t("readonly",{processor:"boolean",default:!1}),t("editable_root",{processor:"boolean",default:!0}),t("plugins",{processor:"string[]",default:[]}),t("external_plugins",{processor:"object"}),t("forced_plugins",{processor:"string[]"}),t("model",{processor:"string",default:e.hasPlugin("rtc")?"plugin":"dom"}),t("model_url",{processor:"string"}),t("block_unsupported_drop",{processor:"boolean",default:!0}),t("visual",{processor:"boolean",default:!0}),t("visual_table_class",{processor:"string",default:"mce-item-table"}),t("visual_anchor_class",{processor:"string",default:"mce-item-anchor"}),t("iframe_aria_text",{processor:"string",default:"Rich Text Area. Press ALT-0 for help."}),t("setup",{processor:"function"}),t("init_instance_callback",{processor:"function"}),t("url_converter",{processor:"function",default:e.convertURL}),t("url_converter_scope",{processor:"object",default:e}),t("urlconverter_callback",{processor:"function"}),t("allow_conditional_comments",{processor:"boolean",default:!1}),t("allow_html_data_urls",{processor:"boolean",default:!1}),t("allow_svg_data_urls",{processor:"boolean"}),t("allow_html_in_named_anchor",{processor:"boolean",default:!1}),t("allow_script_urls",{processor:"boolean",default:!1}),t("allow_unsafe_link_target",{processor:"boolean",default:!1}),t("convert_fonts_to_spans",{processor:"boolean",default:!0,deprecated:!0}),t("fix_list_elements",{processor:"boolean",default:!1}),t("preserve_cdata",{processor:"boolean",default:!1}),t("remove_trailing_brs",{processor:"boolean",default:!0}),t("inline_styles",{processor:"boolean",default:!0,deprecated:!0}),t("element_format",{processor:"string",default:"html"}),t("entities",{processor:"string"}),t("schema",{processor:"string",default:"html5"}),t("convert_urls",{processor:"boolean",default:!0}),t("relative_urls",{processor:"boolean",default:!0}),t("remove_script_host",{processor:"boolean",default:!0}),t("custom_elements",{processor:"string"}),t("extended_valid_elements",{processor:"string"}),t("invalid_elements",{processor:"string"}),t("invalid_styles",{processor:Bf}),t("valid_children",{processor:"string"}),t("valid_classes",{processor:Bf}),t("valid_elements",{processor:"string"}),t("valid_styles",{processor:Bf}),t("verify_html",{processor:"boolean",default:!0}),t("auto_focus",{processor:n=>le(n)||n===!0}),t("browser_spellcheck",{processor:"boolean",default:!1}),t("protect",{processor:"array"}),t("images_file_types",{processor:"string",default:"jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp"}),t("deprecation_warnings",{processor:"boolean",default:!0}),t("a11y_advanced_options",{processor:"boolean",default:!1}),t("api_key",{processor:"string"}),t("paste_block_drop",{processor:"boolean",default:!1}),t("paste_data_images",{processor:"boolean",default:!0}),t("paste_preprocess",{processor:"function"}),t("paste_postprocess",{processor:"function"}),t("paste_webkit_styles",{processor:"string",default:"none"}),t("paste_remove_styles_if_webkit",{processor:"boolean",default:!0}),t("paste_merge_formats",{processor:"boolean",default:!0}),t("smart_paste",{processor:"boolean",default:!0}),t("paste_as_text",{processor:"boolean",default:!1}),t("paste_tab_spaces",{processor:"number",default:4}),t("text_patterns",{processor:n=>Fs(n,it)||n===!1?{value:Wb(n===!1?[]:n),valid:!0}:{valid:!1,message:"Must be an array of objects or false."},default:[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1"},{start:"##",format:"h2"},{start:"###",format:"h3"},{start:"####",format:"h4"},{start:"#####",format:"h5"},{start:"######",format:"h6"},{start:"1. ",cmd:"InsertOrderedList"},{start:"* ",cmd:"InsertUnorderedList"},{start:"- ",cmd:"InsertUnorderedList"}]}),t("text_patterns_lookup",{processor:n=>Ie(n)?{value:BD(n),valid:!0}:{valid:!1,message:"Must be a single function"},default:n=>[]}),t("noneditable_class",{processor:"string",default:"mceNonEditable"}),t("editable_class",{processor:"string",default:"mceEditable"}),t("noneditable_regexp",{processor:n=>Fs(n,Vb)?{value:n,valid:!0}:Vb(n)?{value:[n],valid:!0}:{valid:!1,message:"Must be a RegExp or an array of RegExp."},default:[]}),t("table_tab_navigation",{processor:"boolean",default:!0}),t("highlight_on_focus",{processor:"boolean",default:!1}),t("xss_sanitization",{processor:"boolean",default:!0}),t("details_initial_state",{processor:n=>{const s=We(["inherited","collapsed","expanded"],n);return s?{value:n,valid:s}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),t("details_serialized_state",{processor:n=>{const s=We(["inherited","collapsed","expanded"],n);return s?{value:n,valid:s}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),t("init_content_sync",{processor:"boolean",default:!1}),t("newdocument_content",{processor:"string",default:""}),e.on("ScriptsLoaded",()=>{t("directionality",{processor:"string",default:ns.isRtl()?"rtl":void 0}),t("placeholder",{processor:"string",default:LD.getAttrib(e.getElement(),"placeholder")})})},MD=Q("iframe_attrs"),UD=Q("doctype"),jb=Q("document_base_url"),zD=Q("body_id"),HD=Q("body_class"),Kb=Q("content_security_policy"),WD=Q("br_in_pre"),an=Q("forced_root_block"),ei=Q("forced_root_block_attrs"),VD=Q("newline_behavior"),qD=Q("br_newline_selector"),jD=Q("no_newline_selector"),KD=Q("keep_styles"),GD=Q("end_container_on_empty_block"),Gb=Q("automatic_uploads"),Yb=Q("images_reuse_filename"),YD=Q("images_replace_blob_uris"),Xb=Q("icons"),XD=Q("icons_url"),ZD=Q("images_upload_url"),QD=Q("images_upload_base_path"),JD=Q("images_upload_credentials"),eR=Q("images_upload_handler"),tR=Q("content_css_cors"),If=Q("referrer_policy"),Zb=Q("language"),nR=Q("language_url"),Qb=Q("indent_use_margin"),sR=Q("indentation"),oR=Q("content_css"),rR=Q("content_style"),Jb=Q("font_css"),aR=Q("directionality"),iR=Q("inline_boundaries_selector"),ev=Q("object_resizing"),lR=Q("resize_img_proportional"),cR=Q("placeholder"),tv=Q("event_root"),uR=Q("service_message"),Wr=Q("theme"),fR=Q("theme_url"),Lf=Q("model"),dR=Q("model_url"),ti=Q("inline_boundaries"),mR=Q("formats"),pR=Q("preview_styles"),gR=Q("format_empty_lines"),hR=Q("format_noneditable_selector"),bR=Q("custom_ui_selector"),Ff=Q("inline"),vR=Q("hidden_input"),CR=Q("submit_patch"),yR=Q("add_form_submit_trigger"),ER=Q("add_unload_trigger"),SR=Q("custom_undo_redo_levels"),wR=Q("disable_nodechange"),nv=Q("readonly"),_R=Q("editable_root"),sv=Q("content_css_cors"),Rl=Q("plugins"),xR=Q("external_plugins"),kR=Q("block_unsupported_drop"),NR=Q("visual"),TR=Q("visual_table_class"),ov=Q("visual_anchor_class"),AR=Q("iframe_aria_text"),DR=Q("setup"),RR=Q("init_instance_callback"),PR=Q("urlconverter_callback"),OR=Q("auto_focus"),BR=Q("browser_spellcheck"),IR=Q("protect"),LR=Q("paste_block_drop"),Pl=Q("paste_data_images"),FR=Q("paste_preprocess"),$R=Q("paste_postprocess"),MR=Q("newdocument_content"),UR=Q("paste_webkit_styles"),zR=Q("paste_remove_styles_if_webkit"),HR=Q("paste_merge_formats"),WR=Q("smart_paste"),VR=Q("paste_as_text"),qR=Q("paste_tab_spaces"),jR=Q("allow_html_data_urls"),KR=Q("text_patterns"),GR=Q("text_patterns_lookup"),rv=Q("noneditable_class"),YR=Q("editable_class"),XR=Q("noneditable_regexp"),ZR=Q("preserve_cdata"),QR=Q("highlight_on_focus"),$f=Q("xss_sanitization"),JR=Q("init_content_sync"),e1=e=>e.options.isSet("text_patterns_lookup"),t1=e=>V.explode(e.options.get("font_size_style_values")),n1=e=>V.explode(e.options.get("font_size_classes")),s1=e=>e.options.get("encoding")==="xml",av=e=>V.explode(e.options.get("images_file_types")),o1=Q("table_tab_navigation"),r1=Q("details_initial_state"),a1=Q("details_serialized_state"),i1=Z,iv=z,lv=e=>{const t=e.parentNode;t&&t.removeChild(e)},cv=e=>{const t=qs(e);return{count:e.length-t.length,text:t}},uv=e=>{let t;for(;(t=e.data.lastIndexOf(Ut))!==-1;)e.deleteData(t,1)},fv=(e,t)=>(Zo(e),t),l1=(e,t)=>{const n=cv(e.data.substr(0,t.offset())),s=cv(e.data.substr(t.offset()));return(n.text+s.text).length>0?(uv(e),P(e,t.offset()-n.count)):t},c1=(e,t)=>{const n=t.container(),s=Pk(sn(n.childNodes),e).map(o=>o<t.offset()?P(n,t.offset()-1):t).getOr(t);return Zo(e),s},u1=(e,t)=>iv(e)&&t.container()===e?l1(e,t):fv(e,t),f1=(e,t)=>t.container()===e.parentNode?c1(e,t):fv(e,t),d1=(e,t)=>P.isTextPosition(t)?u1(e,t):f1(e,t),Zo=e=>{i1(e)&&Rn(e)&&(Rh(e)?e.removeAttribute("data-mce-caret"):lv(e)),iv(e)&&(uv(e),e.data.length===0&&lv(e))},m1=Ze,p1=Es,g1=ul,h1="*[contentEditable=false],video,audio,embed,object",dv=(e,t,n)=>{const s=hb(t.getBoundingClientRect(),n);let o,r;if(e.tagName==="BODY"){const i=e.ownerDocument.documentElement;o=e.scrollLeft||i.scrollLeft,r=e.scrollTop||i.scrollTop}else{const i=e.getBoundingClientRect();o=e.scrollLeft-i.left,r=e.scrollTop-i.top}s.left+=o,s.right+=o,s.top+=r,s.bottom+=r,s.width=1;let a=t.offsetWidth-t.clientWidth;return a>0&&(n&&(a*=-1),s.left+=a,s.right+=a),s},b1=e=>{var t,n;const s=jt(S.fromDom(e),h1);for(let o=0;o<s.length;o++){const r=s[o].dom;let a=r.previousSibling;if(bl(a)){const i=a.data;i.length===1?(t=a.parentNode)===null||t===void 0||t.removeChild(a):a.deleteData(i.length-1,1)}a=r.nextSibling,hl(a)&&(a.data.length===1?(n=a.parentNode)===null||n===void 0||n.removeChild(a):a.deleteData(0,1))}},v1=(e,t,n,s)=>{const o=co();let r,a;const i=an(e),l=e.dom,c=(g,y)=>{let w;if(f(),g1(y))return null;if(n(y)){const _=BT(i,y,g),x=dv(t,y,g);l.setStyle(_,"top",x.top),a=_;const N=l.create("div",{class:"mce-visual-caret","data-mce-bogus":"all"});l.setStyles(N,{...x}),l.add(t,N),o.set({caret:N,element:y,before:g}),g&&l.addClass(N,"mce-visual-caret-before"),u(),w=y.ownerDocument.createRange(),w.setStart(_,0),w.setEnd(_,0)}else return a=OT(y,g),w=y.ownerDocument.createRange(),ni(a.nextSibling)?(w.setStart(a,0),w.setEnd(a,0)):(w.setStart(a,1),w.setEnd(a,1)),w;return w},f=()=>{b1(t),a&&(Zo(a),a=null),o.on(g=>{l.remove(g.caret),o.clear()}),r&&(clearInterval(r),r=void 0)},u=()=>{r=setInterval(()=>{o.on(g=>{s()?l.toggleClass(g.caret,"mce-visual-caret-hidden"):l.addClass(g.caret,"mce-visual-caret-hidden")})},500)};return{show:c,hide:f,getCss:()=>".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}",reposition:()=>{o.on(g=>{const y=dv(t,g.element,g.before);l.setStyles(g.caret,{...y})})},destroy:()=>clearInterval(r)}},mv=()=>Oe.browser.isFirefox(),ni=e=>m1(e)||p1(e),si=e=>(ni(e)||Vs(e)&&mv())&&Vu(S.fromDom(e)).exists(Or),C1=ts,Mf=Ze,y1=Es,pv=cl("display","block table table-cell table-caption list-item"),gv=Rn,hv=$r,E1=Z,S1=z,w1=jn,Vr=e=>e>0,Qo=e=>e<0,Ol=(e,t)=>{let n;for(;n=e(t);)if(!hv(n))return n;return null},oi=(e,t,n,s,o)=>{const r=new _t(e,s),a=Mf(e)||hv(e);let i;if(Qo(t)){if(a&&(i=Ol(r.prev.bind(r),!0),n(i)))return i;for(;i=Ol(r.prev.bind(r),o);)if(n(i))return i}if(Vr(t)){if(a&&(i=Ol(r.next.bind(r),!0),n(i)))return i;for(;i=Ol(r.next.bind(r),o);)if(n(i))return i}return null},_1=(e,t)=>{const n=o=>C1(o.dom),s=o=>o.dom===t;return Hs(S.fromDom(e),n,s).map(o=>o.dom).getOr(t)},mo=(e,t)=>{for(;e&&e!==t;){if(pv(e))return e;e=e.parentNode}return null},ws=(e,t,n)=>mo(e.container(),n)===mo(t.container(),n),Uf=(e,t)=>{if(!t)return m.none();const n=t.container(),s=t.offset();return E1(n)?m.from(n.childNodes[s+e]):m.none()},bv=(e,t)=>{var n;const o=((n=t.ownerDocument)!==null&&n!==void 0?n:document).createRange();return e?(o.setStartBefore(t),o.setEndBefore(t)):(o.setStartAfter(t),o.setEndAfter(t)),o},x1=(e,t,n)=>mo(t,e)===mo(n,e),vv=(e,t,n)=>{const s=e?"previousSibling":"nextSibling";let o=n;for(;o&&o!==t;){let r=o[s];if(r&&gv(r)&&(r=r[s]),Mf(r)||y1(r)){if(x1(t,r,o))return r;break}if(w1(r))break;o=o.parentNode}return null},ri=te(bv,!0),ai=te(bv,!1),zf=(e,t,n)=>{let s;const o=te(vv,!0,t),r=te(vv,!1,t),a=n.startContainer,i=n.startOffset;if($r(a)){const l=S1(a)?a.parentNode:a,c=l.getAttribute("data-mce-caret");if(c==="before"&&(s=l.nextSibling,si(s)))return ri(s);if(c==="after"&&(s=l.previousSibling,si(s)))return ai(s)}if(!n.collapsed)return n;if(z(a)){if(gv(a)){if(e===1){if(s=r(a),s)return ri(s);if(s=o(a),s)return ai(s)}if(e===-1){if(s=o(a),s)return ai(s);if(s=r(a),s)return ri(s)}return n}if(bl(a)&&i>=a.data.length-1)return e===1&&(s=r(a),s)?ri(s):n;if(hl(a)&&i<=1)return e===-1&&(s=o(a),s)?ai(s):n;if(i===a.data.length)return s=r(a),s?ri(s):n;if(i===0)return s=o(a),s?ai(s):n}return n},Cv=(e,t)=>Uf(e?0:-1,t).filter(Mf),ii=(e,t,n)=>{const s=zf(e,t,n);return e===-1?P.fromRangeStart(s):P.fromRangeEnd(s)},Bl=e=>m.from(e.getNode()).map(S.fromDom),k1=e=>m.from(e.getNode(!0)).map(S.fromDom),Hf=(e,t)=>{let n=t;for(;n=e(n);)if(n.isVisible())return n;return n},Il=(e,t)=>{const n=ws(e,t);return!n&&ft(e.getNode())?!0:n};var Dt;(function(e){e[e.Backwards=-1]="Backwards",e[e.Forwards=1]="Forwards"})(Dt||(Dt={}));const N1=Ze,_s=z,yv=Z,Wf=ft,qr=jn,Ev=qT,Ll=Ih,T1=(e,t)=>{const n=[];let s=e;for(;s&&s!==t;)n.push(s),s=s.parentNode;return n},Sv=(e,t)=>e.hasChildNodes()&&t<e.childNodes.length?e.childNodes[t]:null,wv=(e,t)=>{if(Vr(e)){if(qr(t.previousSibling)&&!_s(t.previousSibling))return P.before(t);if(_s(t))return P(t,0)}if(Qo(e)){if(qr(t.nextSibling)&&!_s(t.nextSibling))return P.after(t);if(_s(t))return P(t,t.data.length)}return Qo(e)?Wf(t)?P.before(t):P.after(t):P.before(t)},A1=(e,t)=>{const n=t.nextSibling;return n&&qr(n)?_s(n)?P(n,0):P.before(n):Vf(Dt.Forwards,P.after(t),e)},Vf=(e,t,n)=>{let s,o,r,a;if(!yv(n)||!t)return null;if(t.isEqual(P.after(n))&&n.lastChild){if(a=P.after(n.lastChild),Qo(e)&&qr(n.lastChild)&&yv(n.lastChild))return Wf(n.lastChild)?P.before(n.lastChild):a}else a=t;const i=a.container();let l=a.offset();if(_s(i)){if(Qo(e)&&l>0)return P(i,--l);if(Vr(e)&&l<i.length)return P(i,++l);s=i}else{if(Qo(e)&&l>0&&(o=Sv(i,l-1),qr(o)))return!Ev(o)&&(r=oi(o,e,Ll,o),r)?_s(r)?P(r,r.data.length):P.after(r):_s(o)?P(o,o.data.length):P.before(o);if(Vr(e)&&l<i.childNodes.length&&(o=Sv(i,l),qr(o)))return Wf(o)?A1(n,o):!Ev(o)&&(r=oi(o,e,Ll,o),r)?_s(r)?P(r,0):P.before(r):_s(o)?P(o,0):P.after(o);s=o||a.getNode()}if(s&&(Vr(e)&&a.isAtEnd()||Qo(e)&&a.isAtStart())&&(s=oi(s,e,yt,n,!0),Ll(s,n)))return wv(e,s);o=s&&oi(s,e,Ll,n);const c=Po(ve(T1(i,n),N1));return c&&(!o||!c.contains(o))?(Vr(e)?a=P.after(c):a=P.before(c),a):o?wv(e,o):null},xs=e=>({next:t=>Vf(Dt.Forwards,t,e),prev:t=>Vf(Dt.Backwards,t,e)}),D1=(e,t,n)=>{const s=e?P.before(n):P.after(n);return Pn(e,t,s)},R1=e=>ft(e)?P.before(e):P.after(e),_v=e=>P.isTextPosition(e)?e.offset()===0:jn(e.getNode()),xv=e=>{if(P.isTextPosition(e)){const t=e.container();return e.offset()===t.data.length}else return jn(e.getNode(!0))},kv=(e,t)=>!P.isTextPosition(e)&&!P.isTextPosition(t)&&e.getNode()===t.getNode(!0),P1=e=>!P.isTextPosition(e)&&ft(e.getNode()),O1=(e,t,n)=>e?!kv(t,n)&&!P1(t)&&xv(t)&&_v(n):!kv(n,t)&&_v(t)&&xv(n),Pn=(e,t,n)=>{const s=xs(t);return m.from(e?s.next(n):s.prev(n))},li=(e,t,n)=>Pn(e,t,n).bind(s=>ws(n,s,t)&&O1(e,n,s)?Pn(e,t,s):m.some(s)),Nv=(e,t,n,s)=>li(e,t,n).bind(o=>s(o)?Nv(e,t,o,s):m.some(o)),jr=(e,t)=>{const n=e?t.firstChild:t.lastChild;return z(n)?m.some(P(n,e?0:n.data.length)):n?jn(n)?m.some(e?P.before(n):R1(n)):D1(e,t,n):m.none()},Zt=te(Pn,!0),ln=te(Pn,!1),Qt=te(jr,!0),Kn=te(jr,!1),qf="_mce_caret",Gn=e=>Z(e)&&e.id===qf,Jo=(e,t)=>{let n=t;for(;n&&n!==e;){if(Gn(n))return n;n=n.parentNode}return null},B1=e=>le(e.start),I1=e=>ye(e,"rng"),L1=e=>ye(e,"id"),Tv=e=>ye(e,"name"),Av=e=>V.isArray(e.start),Fl=e=>!Tv(e)&&Ls(e.forward)?e.forward:!0,Dv=(e,t)=>(Z(t)&&e.isBlock(t)&&!t.innerHTML&&(t.innerHTML='<br data-mce-bogus="1" />'),t),F1=(e,t)=>{const n=m.from(Rb(e.getRoot(),t.start)),s=m.from(Rb(e.getRoot(),t.end));return on(n,s,(o,r)=>{const a=e.createRng();return a.setStart(o.container(),o.offset()),a.setEnd(r.container(),r.offset()),{range:a,forward:Fl(t)}})},$1=(e,t)=>{var n;const o=((n=e.ownerDocument)!==null&&n!==void 0?n:document).createTextNode(Ut);e.appendChild(o),t.setStart(o,0),t.setEnd(o,0)},M1=e=>!e.hasChildNodes(),U1=(e,t)=>Kn(e).fold(ot,n=>(t.setStart(n.container(),n.offset()),t.setEnd(n.container(),n.offset()),!0)),Rv=(e,t,n)=>M1(t)&&Jo(e,t)?($1(t,n),!0):!1,Pv=(e,t,n,s)=>{const o=n[t?"start":"end"],r=e.getRoot();if(o){let a=r,i=o[0];for(let l=o.length-1;a&&l>=1;l--){const c=a.childNodes;if(Rv(r,a,s))return!0;if(o[l]>c.length-1)return Rv(r,a,s)?!0:U1(a,s);a=c[o[l]]}z(a)&&(i=Math.min(o[0],a.data.length)),Z(a)&&(i=Math.min(o[0],a.childNodes.length)),t?s.setStart(a,i):s.setEnd(a,i)}return!0},jf=e=>z(e)&&e.data.length>0,Ov=(e,t,n)=>{const s=e.get(n.id+"_"+t),o=s==null?void 0:s.parentNode,r=n.keep;if(s&&o){let a,i;if(t==="start"?r?s.hasChildNodes()?(a=s.firstChild,i=1):jf(s.nextSibling)?(a=s.nextSibling,i=0):jf(s.previousSibling)?(a=s.previousSibling,i=s.previousSibling.data.length):(a=o,i=e.nodeIndex(s)+1):(a=o,i=e.nodeIndex(s)):r?s.hasChildNodes()?(a=s.firstChild,i=1):jf(s.previousSibling)?(a=s.previousSibling,i=s.previousSibling.data.length):(a=o,i=e.nodeIndex(s)):(a=o,i=e.nodeIndex(s)),!r){const l=s.previousSibling,c=s.nextSibling;V.each(V.grep(s.childNodes),u=>{z(u)&&(u.data=u.data.replace(/\uFEFF/g,""))});let f;for(;f=e.get(n.id+"_"+t);)e.remove(f,!0);if(z(c)&&z(l)&&!Oe.browser.isOpera()){const u=l.data.length;l.appendData(c.data),e.remove(c),a=l,i=u}}return m.some(P(a,i))}else return m.none()},z1=(e,t)=>{const n=e.createRng();return Pv(e,!0,t,n)&&Pv(e,!1,t,n)?m.some({range:n,forward:Fl(t)}):m.none()},H1=(e,t)=>{const n=Ov(e,"start",t),s=Ov(e,"end",t);return on(n,s.or(n),(o,r)=>{const a=e.createRng();return a.setStart(Dv(e,o.container()),o.offset()),a.setEnd(Dv(e,r.container()),r.offset()),{range:a,forward:Fl(t)}})},W1=(e,t)=>m.from(e.select(t.name)[t.index]).map(n=>{const s=e.createRng();return s.selectNode(n),{range:s,forward:!0}}),V1=(e,t)=>{const n=e.dom;if(t){if(Av(t))return z1(n,t);if(B1(t))return F1(n,t);if(L1(t))return H1(n,t);if(Tv(t))return W1(n,t);if(I1(t))return m.some({range:t.rng,forward:Fl(t)})}return m.none()},q1=(e,t,n)=>TD(e,t,n),j1=(e,t)=>{V1(e,t).each(({range:n,forward:s})=>{e.setRng(n,s)})},On=e=>Z(e)&&e.tagName==="SPAN"&&e.getAttribute("data-mce-type")==="bookmark",$l=(e=>t=>e===t)(Tt),Kr=e=>e!==""&&` \f
\r	\v`.indexOf(e)!==-1,Kf=e=>!Kr(e)&&!$l(e)&&!tf(e),K1=e=>({value:G1(e)}),G1=e=>Eg(e,"#").toUpperCase(),Gf=e=>{const t=e.toString(16);return(t.length===1?"0"+t:t).toUpperCase()},Y1=e=>{const t=Gf(e.red)+Gf(e.green)+Gf(e.blue);return K1(t)},X1=/^\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i,Z1=/^\s*rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?(?:\.\d+)?)\s*\)\s*$/i,Bv=(e,t,n,s)=>({red:e,green:t,blue:n,alpha:s}),Iv=(e,t,n,s)=>{const o=parseInt(e,10),r=parseInt(t,10),a=parseInt(n,10),i=parseFloat(s);return Bv(o,r,a,i)},Q1=e=>{if(e==="transparent")return m.some(Bv(0,0,0,0));const t=X1.exec(e);if(t!==null)return m.some(Iv(t[1],t[2],t[3],"1"));const n=Z1.exec(e);return n!==null?m.some(Iv(n[1],n[2],n[3],n[4])):m.none()},Ml=e=>Q1(e).map(Y1).map(t=>"#"+t.value).getOr(e),Yf=e=>{const t=[];if(e)for(let n=0;n<e.rangeCount;n++)t.push(e.getRangeAt(n));return t},J1=e=>gs(e,t=>{const n=Nl(t);return n?[S.fromDom(n)]:[]}),eP=e=>Yf(e).length>1,tP=e=>ve(J1(e),Ua),nP=e=>jt(e,"td[data-mce-selected],th[data-mce-selected]"),Lv=(e,t)=>{const n=nP(t);return n.length>0?n:tP(e)},Gr=e=>Lv(Yf(e.selection.getSel()),S.fromDom(e.getBody())),ci=(e,t)=>Ba(e,"table",t),sP=e=>{const t=e.startContainer,n=e.startOffset;return z(t)?n===0?m.some(S.fromDom(t)):m.none():m.from(t.childNodes[n]).map(S.fromDom)},oP=e=>{const t=e.endContainer,n=e.endOffset;return z(t)?n===t.data.length?m.some(S.fromDom(t)):m.none():m.from(t.childNodes[n-1]).map(S.fromDom)},Fv=e=>qu(e).fold(Y([e]),t=>[e].concat(Fv(t))),Xf=e=>ju(e).fold(Y([e]),t=>Xe(t)==="br"?Io(t).map(n=>[e].concat(Xf(n))).getOr([]):[e].concat(Xf(t))),Zf=(e,t)=>on(sP(t),oP(t),(n,s)=>{const o=wt(Fv(e),te(Ue,n)),r=wt(Xf(e),te(Ue,s));return o.isSome()&&r.isSome()}).getOr(!1),Qf=(e,t,n,s)=>{const o=n,r=new _t(n,o),a=xa(e.schema.getMoveCaretBeforeOnEnterElements(),(l,c)=>!We(["td","th","table"],c.toLowerCase()));let i=n;do{if(z(i)&&V.trim(i.data).length!==0){s?t.setStart(i,0):t.setEnd(i,i.data.length);return}if(a[i.nodeName]){s?t.setStartBefore(i):i.nodeName==="BR"?t.setEndBefore(i):t.setEndAfter(i);return}}while(i=s?r.next():r.prev());o.nodeName==="BODY"&&(s?t.setStart(o,0):t.setEnd(o,o.childNodes.length))},Ul=e=>{const t=e.selection.getSel();return K(t)&&t.rangeCount>0},Jf=(e,t)=>{const n=Gr(e);n.length>0?$(n,s=>{const o=s.dom,r=e.dom.createRng();r.setStartBefore(o),r.setEndAfter(o),t(r,!0)}):t(e.selection.getRng(),!1)},$v=(e,t,n)=>{const s=$b(e,t);n(s),e.moveToBookmark(s)},ui=e=>Yt(e==null?void 0:e.nodeType),ed=e=>Z(e)&&!On(e)&&!Gn(e)&&!Uo(e),rP=(e,t)=>{if(ed(t)&&!/^(TD|TH)$/.test(t.nodeName)){const n=e.getAttrib(t,"data-mce-selected"),s=parseInt(n,10);return!isNaN(s)&&s>0}else return!1},er=e=>e.isContentEditable===!0,Mv=(e,t,n)=>{const{selection:s,dom:o}=e,r=s.getNode(),a=Ze(r);$v(s,!0,()=>{t()}),a&&Ze(r)&&o.isChildOf(r,e.getBody())?e.selection.select(r):n(s.getStart())&&aP(o,s)},aP=(e,t)=>{var n,s;const o=t.getRng(),{startContainer:r,startOffset:a}=o,i=t.getNode();if(!rP(e,i)&&Z(r)){const l=r.childNodes,c=e.getRoot();let f;if(a<l.length){const u=l[a];f=new _t(u,(n=e.getParent(u,e.isBlock))!==null&&n!==void 0?n:c)}else{const u=l[l.length-1];f=new _t(u,(s=e.getParent(u,e.isBlock))!==null&&s!==void 0?s:c),f.next(!0)}for(let u=f.current();u;u=f.next()){if(e.getContentEditable(u)==="false")return;if(z(u)&&!nd(u)){o.setStart(u,0),t.setRng(o);return}}}},Uv=(e,t,n)=>{if(e){const s=t?"nextSibling":"previousSibling";for(e=n?e:e[s];e;e=e[s])if(Z(e)||!nd(e))return e}},td=(e,t)=>!!e.getTextBlockElements()[t.nodeName.toLowerCase()]||Wo(e,t),Yr=(e,t,n)=>e.schema.isValidChild(t,n),nd=(e,t=!1)=>{if(K(e)&&z(e)){const n=t?e.data.replace(/ /g," "):e.data;return Ho(n)}else return!1},iP=e=>K(e)&&z(e)&&e.length===0,lP=(e,t)=>{const n="[data-mce-cef-wrappable]",s=hR(e),o=Ta(s)?n:`${n},${s}`;return Jn(S.fromDom(t),o)},zv=(e,t)=>{const n=e.dom;return ed(t)&&n.getContentEditable(t)==="false"&&lP(e,t)&&n.select('[contenteditable="true"]',t).length===0},po=(e,t)=>Ie(e)?e(t):(K(t)&&(e=e.replace(/%(\w+)/g,(n,s)=>t[s]||n)),e),sd=(e,t)=>(e=e||"",t=t||"",e=""+(e.nodeName||e),t=""+(t.nodeName||t),e.toLowerCase()===t.toLowerCase()),od=(e,t)=>{if(ut(e))return null;{let n=String(e);return(t==="color"||t==="backgroundColor")&&(n=Ml(n)),t==="fontWeight"&&e===700&&(n="bold"),t==="fontFamily"&&(n=n.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),n}},zl=(e,t,n)=>{const s=e.getStyle(t,n);return od(s,n)},Hv=(e,t)=>{let n;return e.getParent(t,s=>Z(s)?(n=e.getStyle(s,"text-decoration"),!!n&&n!=="none"):!1),n},Hl=(e,t,n)=>e.getParents(t,n,e.getRoot()),rd=(e,t,n)=>{const s=e.formatter.get(t);return K(s)&&gt(s,n)},cP=(e,t)=>rd(e,t,s=>{const o=r=>Ie(r)||r.length>1&&r.charAt(0)==="%";return gt(["styles","attributes"],r=>Qe(s,r).exists(a=>{const i=et(a)?a:Pu(a);return gt(i,o)}))}),uP=(e,t,n)=>{const s=["inline","block","selector","attributes","styles","classes"],o=r=>xa(r,(a,i)=>gt(s,l=>l===i));return rd(e,t,r=>{const a=o(r);return rd(e,n,i=>{const l=o(i);return Fk(a,l)})})},ks=e=>xr(e,"block"),fP=e=>ks(e)&&e.wrapper===!0,dP=e=>ks(e)&&e.wrapper!==!0,Bn=e=>xr(e,"selector"),xt=e=>xr(e,"inline"),mP=e=>Bn(e)&&xt(e)&&Nr(Qe(e,"mixed"),!0),ad=e=>Bn(e)&&e.expand!==!1&&!xt(e),Xr=On,Wv=Hl,Vv=nd,pP=td,gP=e=>ft(e)&&e.getAttribute("data-mce-bogus")&&!e.nextSibling,qv=(e,t)=>{let n=t;for(;n;){if(Z(n)&&e.getContentEditable(n))return e.getContentEditable(n)==="false"?n:t;n=n.parentNode}return t},jv=(e,t,n,s)=>{const o=t.data;if(e){for(let r=n;r>0;r--)if(s(o.charAt(r-1)))return r}else for(let r=n;r<o.length;r++)if(s(o.charAt(r)))return r;return-1},hP=(e,t,n)=>jv(e,t,n,s=>$l(s)||Kr(s)),bP=(e,t,n)=>jv(e,t,n,Kf),Kv=(e,t,n,s,o,r)=>{let a;const i=e.getParent(n,e.isBlock)||t,l=(f,u,d)=>{const b=Go(e),E=o?b.backwards:b.forwards;return m.from(E(f,u,(g,y)=>Xr(g.parentNode)?-1:(a=g,d(o,g,y)),i))};return l(n,s,hP).bind(f=>r?l(f.container,f.offset+(o?-1:0),bP):m.some(f)).orThunk(()=>a?m.some({container:a,offset:o?0:a.length}):m.none())},Gv=(e,t,n,s,o)=>{const r=s[o];z(s)&&Ta(s.data)&&r&&(s=r);const a=Wv(e,s);for(let i=0;i<a.length;i++)for(let l=0;l<t.length;l++){const c=t[l];if(!(K(c.collapsed)&&c.collapsed!==n.collapsed)&&Bn(c)&&e.is(a[i],c.selector))return a[i]}return s},Yv=(e,t,n,s)=>{var o;let r=n;const a=e.getRoot(),i=t[0];if(ks(i)&&(r=i.wrapper?null:e.getParent(n,i.block,a)),!r){const l=(o=e.getParent(n,"LI,TD,TH"))!==null&&o!==void 0?o:a;r=e.getParent(z(n)?n.parentNode:n,c=>c!==a&&pP(e.schema,c),l)}if(r&&ks(i)&&i.wrapper&&(r=Wv(e,r,"ul,ol").reverse()[0]||r),!r)for(r=n;r&&r[s]&&!e.isBlock(r[s])&&(r=r[s],!sd(r,"br")););return r||n},Xv=(e,t,n,s)=>{const o=n.parentNode;return K(n[s])?!1:o===t||ut(o)||e.isBlock(o)?!0:Xv(e,t,o,s)},Wl=(e,t,n,s,o)=>{let r=n;const a=o?"previousSibling":"nextSibling",i=e.getRoot();if(z(n)&&!Vv(n)&&(o?s>0:s<n.data.length))return n;for(;r;){if(!t[0].block_expand&&e.isBlock(r))return r;for(let l=r[a];l;l=l[a]){const c=z(l)&&!Xv(e,i,l,a);if(!Xr(l)&&!gP(l)&&!Vv(l,c))return r}if(r===i||r.parentNode===i){n=r;break}r=r.parentNode}return n},Zv=e=>Xr(e.parentNode)||Xr(e),tr=(e,t,n,s=!1)=>{let{startContainer:o,startOffset:r,endContainer:a,endOffset:i}=t;const l=n[0];return Z(o)&&o.hasChildNodes()&&(o=uo(o,r),z(o)&&(r=0)),Z(a)&&a.hasChildNodes()&&(a=uo(a,t.collapsed?i:i-1),z(a)&&(i=a.data.length)),o=qv(e,o),a=qv(e,a),Zv(o)&&(o=Xr(o)?o:o.parentNode,t.collapsed?o=o.previousSibling||o:o=o.nextSibling||o,z(o)&&(r=t.collapsed?o.length:0)),Zv(a)&&(a=Xr(a)?a:a.parentNode,t.collapsed?a=a.nextSibling||a:a=a.previousSibling||a,z(a)&&(i=t.collapsed?0:a.length)),t.collapsed&&(Kv(e,e.getRoot(),o,r,!0,s).each(({container:u,offset:d})=>{o=u,r=d}),Kv(e,e.getRoot(),a,i,!1,s).each(({container:u,offset:d})=>{a=u,i=d})),(xt(l)||l.block_expand)&&((!xt(l)||!z(o)||r===0)&&(o=Wl(e,n,o,r,!0)),(!xt(l)||!z(a)||i===a.data.length)&&(a=Wl(e,n,a,i,!1))),ad(l)&&(o=Gv(e,n,t,o,"previousSibling"),a=Gv(e,n,t,a,"nextSibling")),(ks(l)||Bn(l))&&(o=Yv(e,n,o,"previousSibling"),a=Yv(e,n,a,"nextSibling"),ks(l)&&(e.isBlock(o)||(o=Wl(e,n,o,r,!0)),e.isBlock(a)||(a=Wl(e,n,a,i,!1)))),Z(o)&&o.parentNode&&(r=e.nodeIndex(o),o=o.parentNode),Z(a)&&a.parentNode&&(i=e.nodeIndex(a)+1,a=a.parentNode),{startContainer:o,startOffset:r,endContainer:a,endOffset:i}},fi=(e,t,n)=>{var s;const o=t.startOffset,r=uo(t.startContainer,o),a=t.endOffset,i=uo(t.endContainer,a-1),l=y=>{const w=y[0];z(w)&&w===r&&o>=w.data.length&&y.splice(0,1);const _=y[y.length-1];return a===0&&y.length>0&&_===i&&z(_)&&y.splice(y.length-1,1),y},c=(y,w,_)=>{const x=[];for(;y&&y!==_;y=y[w])x.push(y);return x},f=(y,w)=>e.getParent(y,_=>_.parentNode===w,w),u=(y,w,_)=>{const x=_?"nextSibling":"previousSibling";for(let N=y,I=N.parentNode;N&&N!==w;N=I){I=N.parentNode;const oe=c(N===y?N:N[x],x);oe.length&&(_||oe.reverse(),n(l(oe)))}};if(r===i)return n(l([r]));const d=(s=e.findCommonAncestor(r,i))!==null&&s!==void 0?s:e.getRoot();if(e.isChildOf(r,i))return u(r,d,!0);if(e.isChildOf(i,r))return u(i,d);const b=f(r,d)||r,E=f(i,d)||i;u(r,b,!0);const g=c(b===r?b:b.nextSibling,"nextSibling",E===i?E.nextSibling:E);g.length&&n(l(g)),u(i,E)},vP=['pre[class*=language-][contenteditable="false"]',"figure.image","div[data-ephox-embed-iri]","div.tiny-pageembed","div.mce-toc","div[data-mce-toc]"],CP=e=>Tn(e)&&fl(e)===Ut,yP=(e,t,n,s)=>qn(t).fold(()=>"skipping",o=>s==="br"||CP(t)?"valid":GA(t)?"existing":Gn(t.dom)?"caret":gt(vP,r=>Jn(t,r))?"valid-block":!Yr(e,n,s)||!Yr(e,Xe(o),n)?"invalid-child":"valid"),EP=(e,t)=>{const n=tr(e.dom,t,[{inline:"span"}]);t.setStart(n.startContainer,n.startOffset),t.setEnd(n.endContainer,n.endOffset),e.selection.setRng(t)},Qv=(e,t,n,s,o,r)=>{const{uid:a=t,...i}=n;Ar(e,qa()),Pt(e,`${zr()}`,a),Pt(e,`${jo()}`,s);const{attributes:l={},classes:c=[]}=o(a,i);if(eo(e,l),QA(e,c),r){c.length>0&&Pt(e,`${Ka()}`,c.join(","));const f=Cn(l);f.length>0&&Pt(e,`${Ga()}`,f.join(","))}},SP=e=>{Dr(e,qa()),$t(e,`${zr()}`),$t(e,`${jo()}`),$t(e,`${ja()}`);const t=Ms(e,`${Ga()}`).map(s=>s.split(",")).getOr([]),n=Ms(e,`${Ka()}`).map(s=>s.split(",")).getOr([]);$(t,s=>$t(e,s)),JA(e,n),$t(e,`${Ka()}`),$t(e,`${Ga()}`)},Jv=(e,t,n,s,o)=>{const r=S.fromTag("span",e);return Qv(r,t,n,s,o,!1),r},wP=(e,t,n,s,o,r)=>{const a=[],i=Jv(e.getDoc(),n,r,s,o),l=co(),c=()=>{l.clear()},f=()=>l.get().getOrThunk(()=>{const E=Ko(i);return a.push(E),l.set(E),E}),u=E=>{$(E,d)},d=E=>{switch(yP(e,E,"span",Xe(E))){case"invalid-child":{c();const y=Mt(E);u(y),c();break}case"valid-block":{c(),Qv(E,n,r,s,o,!0);break}case"valid":{const y=f();bh(E,y);break}}},b=E=>{const g=Fe(E,S.fromDom);u(g)};return fi(e.dom,t,E=>{c(),b(E)}),a},_P=(e,t,n,s)=>{e.undoManager.transact(()=>{const o=e.selection,r=o.getRng(),a=Gr(e).length>0,i=Ya("mce-annotation");if(r.collapsed&&!a&&EP(e,r),o.getRng().collapsed&&!a){const l=Jv(e.getDoc(),i,s,t,n.decorate);al(l,Tt),o.getRng().insertNode(l.dom),o.select(l.dom)}else $v(o,!1,()=>{Jf(e,l=>{wP(e,l,i,t,n.decorate,s)})})})},eC=e=>{const t=ZA();XA(e,t);const n=YA(e,t),s=zu("span"),o=r=>{$(r,a=>{s(a)?Ws(a):SP(a)})};return{register:(r,a)=>{t.register(r,a)},annotate:(r,a)=>{t.lookup(r).each(i=>{_P(e,r,i,a)})},annotationChanged:(r,a)=>{n.addListener(r,a)},remove:r=>{ib(e,m.some(r)).each(({elements:a})=>{const i=e.selection.getBookmark();o(a),e.selection.moveToBookmark(i)})},removeAll:r=>{const a=e.selection.getBookmark();Ye(ub(e,r),(i,l)=>{o(i)}),e.selection.moveToBookmark(a)},getAll:r=>{const a=ub(e,r);return Qi(a,i=>Fe(i,l=>l.dom))}}},di=e=>({getBookmark:te(q1,e),moveToBookmark:te(j1,e)});di.isBookmarkNode=On;const tC=(e,t,n)=>n.collapsed?!1:gt(n.getClientRects(),s=>nD(s,e,t)),xP=(e,t)=>e.dispatch("PreProcess",t),kP=(e,t)=>e.dispatch("PostProcess",t),NP=e=>{e.dispatch("remove")},TP=e=>{e.dispatch("detach")},AP=(e,t)=>{e.dispatch("SwitchMode",{mode:t})},DP=(e,t,n,s,o)=>{e.dispatch("ObjectResizeStart",{target:t,width:n,height:s,origin:o})},RP=(e,t,n,s,o)=>{e.dispatch("ObjectResized",{target:t,width:n,height:s,origin:o})},PP=e=>{e.dispatch("PreInit")},OP=e=>{e.dispatch("PostRender")},BP=e=>{e.dispatch("Init")},IP=(e,t)=>{e.dispatch("PlaceholderToggle",{state:t})},nC=(e,t,n)=>{e.dispatch(t,n)},sC=(e,t,n,s)=>{e.dispatch("FormatApply",{format:t,node:n,vars:s})},oC=(e,t,n,s)=>{e.dispatch("FormatRemove",{format:t,node:n,vars:s})},LP=(e,t)=>e.dispatch("BeforeSetContent",t),rC=(e,t)=>e.dispatch("SetContent",t),FP=(e,t)=>e.dispatch("BeforeGetContent",t),aC=(e,t)=>e.dispatch("GetContent",t),$P=(e,t)=>{e.dispatch("AutocompleterStart",t)},MP=(e,t)=>{e.dispatch("AutocompleterUpdate",t)},UP=e=>{e.dispatch("AutocompleterEnd")},zP=(e,t,n)=>e.dispatch("PastePreProcess",{content:t,internal:n}),HP=(e,t,n)=>e.dispatch("PastePostProcess",{node:t,internal:n}),iC=(e,t)=>e.dispatch("PastePlainTextToggle",{state:t}),WP=(e,t)=>e.dispatch("EditableRootStateChange",{state:t}),ee={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:e=>e.shiftKey||e.ctrlKey||e.altKey||ee.metaKeyPressed(e),metaKeyPressed:e=>Oe.os.isMacOS()||Oe.os.isiOS()?e.metaKey:e.ctrlKey&&!e.altKey},nr="data-mce-selected",VP="table,img,figure.image,hr,video,span.mce-preview-object,details",lC=Math.abs,Vl=Math.round,id={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},qP=e=>e.type==="longpress"||e.type.indexOf("touch")===0,cC=(e,t)=>{const n=t.dom,s=t.getDoc(),o=document,r=t.getBody();let a,i,l,c,f,u,d,b,E,g,y,w,_,x,N,I,oe;const L=U=>K(U)&&(Nh(U)||n.is(U,"figure.image")),D=U=>Es(U)||n.hasClass(U,"mce-preview-object"),O=(U,pe)=>{if(qP(U)){const _e=U.touches[0];return L(U.target)&&!tC(_e.clientX,_e.clientY,pe)}else return L(U.target)&&!tC(U.clientX,U.clientY,pe)},q=U=>{const pe=U.target;O(U,t.selection.getRng())&&!U.isDefaultPrevented()&&t.selection.select(pe)},j=U=>n.hasClass(U,"mce-preview-object")&&K(U.firstElementChild)?[U,U.firstElementChild]:n.is(U,"figure.image")?[U.querySelector("img")]:[U],J=U=>{const pe=ev(t);return!pe||U.getAttribute("data-mce-resize")==="false"||U===t.getBody()?!1:n.hasClass(U,"mce-preview-object")&&K(U.firstElementChild)?Jn(S.fromDom(U.firstElementChild),pe):Jn(S.fromDom(U),pe)},ge=U=>D(U)?n.create("img",{src:Oe.transparentSrc}):U.cloneNode(!0),me=(U,pe,_e)=>{if(K(_e)){const Le=j(U);$(Le,je=>{je.style[pe]||!t.schema.isValid(je.nodeName.toLowerCase(),pe)?n.setStyle(je,pe,_e):n.setAttrib(je,pe,""+_e)})}},Ne=(U,pe,_e)=>{me(U,"width",pe),me(U,"height",_e)},Re=U=>{let pe,_e,Le,je,he;pe=U.screenX-u,_e=U.screenY-d,x=pe*c[2]+g,N=_e*c[3]+y,x=x<5?5:x,N=N<5?5:N,(L(a)||D(a))&&lR(t)!==!1?Le=!ee.modifierPressed(U):Le=ee.modifierPressed(U),Le&&(lC(pe)>lC(_e)?(N=Vl(x*w),x=Vl(N/w)):(x=Vl(N/w),N=Vl(x*w))),Ne(i,x,N),je=c.startPos.x+pe,he=c.startPos.y+_e,je=je>0?je:0,he=he>0?he:0,n.setStyles(l,{left:je,top:he,display:"block"}),l.innerHTML=x+" &times; "+N,c[2]<0&&i.clientWidth<=x&&n.setStyle(i,"left",b+(g-x)),c[3]<0&&i.clientHeight<=N&&n.setStyle(i,"top",E+(y-N)),pe=r.scrollWidth-I,_e=r.scrollHeight-oe,pe+_e!==0&&n.setStyles(l,{left:je-pe,top:he-_e}),_||(DP(t,a,g,y,"corner-"+c.name),_=!0)},nt=()=>{const U=_;_=!1,U&&(me(a,"width",x),me(a,"height",N)),n.unbind(s,"mousemove",Re),n.unbind(s,"mouseup",nt),o!==s&&(n.unbind(o,"mousemove",Re),n.unbind(o,"mouseup",nt)),n.remove(i),n.remove(l),n.remove(f),Bt(a),U&&(RP(t,a,x,N,"corner-"+c.name),n.setAttrib(a,"style",n.getAttrib(a,"style"))),t.nodeChanged()},Bt=U=>{xe();const pe=n.getPos(U,r),_e=pe.x,Le=pe.y,je=U.getBoundingClientRect(),he=je.width||je.right-je.left,Ae=je.height||je.bottom-je.top;a!==U&&(H(),a=U,x=N=0);const lt=t.dispatch("ObjectSelected",{target:U});J(U)&&!lt.isDefaultPrevented()?Ye(id,(He,Je)=>{const rt=dt=>{const Mn=j(a)[0];u=dt.screenX,d=dt.screenY,g=Mn.clientWidth,y=Mn.clientHeight,w=y/g,c=He,c.name=Je,c.startPos={x:he*He[0]+_e,y:Ae*He[1]+Le},I=r.scrollWidth,oe=r.scrollHeight,f=n.add(r,"div",{class:"mce-resize-backdrop","data-mce-bogus":"all"}),n.setStyles(f,{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"}),i=ge(a),n.addClass(i,"mce-clonedresizable"),n.setAttrib(i,"data-mce-bogus","all"),i.contentEditable="false",n.setStyles(i,{left:_e,top:Le,margin:0}),Ne(i,he,Ae),i.removeAttribute(nr),r.appendChild(i),n.bind(s,"mousemove",Re),n.bind(s,"mouseup",nt),o!==s&&(n.bind(o,"mousemove",Re),n.bind(o,"mouseup",nt)),l=n.add(r,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},g+" &times; "+y)};let Ge=n.get("mceResizeHandle"+Je);Ge&&n.remove(Ge),Ge=n.add(r,"div",{id:"mceResizeHandle"+Je,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+Je+"-resize; margin:0; padding:0"}),n.bind(Ge,"mousedown",dt=>{dt.stopImmediatePropagation(),dt.preventDefault(),rt(dt)}),He.elm=Ge,n.setStyles(Ge,{left:he*He[0]+_e-Ge.offsetWidth/2,top:Ae*He[1]+Le-Ge.offsetHeight/2})}):H(!1)},vt=kl(Bt,0),H=(U=!0)=>{vt.cancel(),xe(),a&&U&&a.removeAttribute(nr),Ye(id,(pe,_e)=>{const Le=n.get("mceResizeHandle"+_e);Le&&(n.unbind(Le),n.remove(Le))})},re=(U,pe)=>n.isChildOf(U,pe),Te=U=>{if(_||t.removed||t.composing)return;const pe=U.type==="mousedown"?U.target:e.getNode(),_e=Fo(S.fromDom(pe),VP).map(je=>je.dom).filter(je=>n.isEditable(je.parentElement)).getOrUndefined(),Le=K(_e)?n.getAttrib(_e,nr,"1"):"1";if($(n.select(`img[${nr}],hr[${nr}]`),je=>{je.removeAttribute(nr)}),K(_e)&&re(_e,r)&&t.hasFocus()){ae();const je=e.getStart(!0);if(re(je,_e)&&re(e.getEnd(!0),_e)){n.setAttrib(_e,nr,Le),vt.throttle(_e);return}}H()},xe=()=>{Ye(id,U=>{U.elm&&(n.unbind(U.elm),delete U.elm)})},ae=()=>{try{t.getDoc().execCommand("enableObjectResizing",!1,"false")}catch{}};return t.on("init",()=>{ae(),t.on("NodeChange ResizeEditor ResizeWindow ResizeContent drop",Te),t.on("keyup compositionend",U=>{a&&a.nodeName==="TABLE"&&Te(U)}),t.on("hide blur",H),t.on("contextmenu longpress",q,!0)}),t.on("remove",xe),{isResizable:J,showResizeRect:Bt,hideResizeRect:H,updateResizeRect:Te,destroy:()=>{vt.cancel(),a=i=f=null}}},jP=(e,t)=>{t.fold(n=>{e.setStartBefore(n.dom)},(n,s)=>{e.setStart(n.dom,s)},n=>{e.setStartAfter(n.dom)})},KP=(e,t)=>{t.fold(n=>{e.setEndBefore(n.dom)},(n,s)=>{e.setEnd(n.dom,s)},n=>{e.setEndAfter(n.dom)})},uC=(e,t,n)=>{const s=e.document.createRange();return jP(s,t),KP(s,n),s},ld=(e,t,n,s,o)=>{const r=e.document.createRange();return r.setStart(t.dom,n),r.setEnd(s.dom,o),r},mi=Ss.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),fC=(e,t,n)=>t(S.fromDom(n.startContainer),n.startOffset,S.fromDom(n.endContainer),n.endOffset),GP=(e,t)=>t.match({domRange:n=>({ltr:Y(n),rtl:m.none}),relative:(n,s)=>({ltr:Oo(()=>uC(e,n,s)),rtl:Oo(()=>m.some(uC(e,s,n)))}),exact:(n,s,o,r)=>({ltr:Oo(()=>ld(e,n,s,o,r)),rtl:Oo(()=>m.some(ld(e,o,r,n,s)))})}),YP=(e,t)=>{const n=t.ltr();return n.collapsed?t.rtl().filter(o=>o.collapsed===!1).map(o=>mi.rtl(S.fromDom(o.endContainer),o.endOffset,S.fromDom(o.startContainer),o.startOffset)).getOrThunk(()=>fC(e,mi.ltr,n)):fC(e,mi.ltr,n)},XP=(e,t)=>{const n=GP(e,t);return YP(e,n)};mi.ltr,mi.rtl;const dC={create:(e,t,n,s)=>({start:e,soffset:t,finish:n,foffset:s})},ZP=(e,t,n)=>{var s,o;return m.from((o=(s=e.dom).caretPositionFromPoint)===null||o===void 0?void 0:o.call(s,t,n)).bind(r=>{if(r.offsetNode===null)return m.none();const a=e.dom.createRange();return a.setStart(r.offsetNode,r.offset),a.collapse(),m.some(a)})},QP=(e,t,n)=>{var s,o;return m.from((o=(s=e.dom).caretRangeFromPoint)===null||o===void 0?void 0:o.call(s,t,n))},JP=(()=>document.caretPositionFromPoint?ZP:document.caretRangeFromPoint?QP:m.none)(),eO=(e,t,n)=>{const s=S.fromDom(e.document);return JP(s,t,n).map(o=>dC.create(S.fromDom(o.startContainer),o.startOffset,S.fromDom(o.endContainer),o.endOffset))},cd=Ss.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),tO=(e,t,n,s)=>e.fold(t,n,s),nO=e=>e.fold(Vt,Vt,Vt),sO=cd.before,oO=cd.on,rO=cd.after,Ks={before:sO,on:oO,after:rO,cata:tO,getStart:nO},ql=Ss.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),aO=e=>ql.exact(e.start,e.soffset,e.finish,e.foffset),iO=e=>e.match({domRange:t=>S.fromDom(t.startContainer),relative:(t,n)=>Ks.getStart(t),exact:(t,n,s,o)=>t}),lO=ql.domRange,cO=ql.relative,uO=ql.exact,fO=e=>{const t=iO(e);return Pa(t)},dO=dC.create,Zr={domRange:lO,relative:cO,exact:uO,exactFromRange:aO,getWin:fO,range:dO},jl=(e,t)=>{const n=Xe(e);return n==="input"?Ks.after(e):We(["br","img"],n)?t===0?Ks.before(e):Ks.after(e):Ks.on(e,t)},mO=(e,t)=>{const n=e.fold(Ks.before,jl,Ks.after),s=t.fold(Ks.before,jl,Ks.after);return Zr.relative(n,s)},mC=(e,t,n,s)=>{const o=jl(e,t),r=jl(n,s);return Zr.relative(o,r)},pO=e=>e.match({domRange:t=>{const n=S.fromDom(t.startContainer),s=S.fromDom(t.endContainer);return mC(n,t.startOffset,s,t.endOffset)},relative:mO,exact:mC}),ud=(e,t)=>{const s=(t||document).createDocumentFragment();return $(e,o=>{s.appendChild(o.dom)}),S.fromDom(s)},gO=e=>{const t=Zr.getWin(e).dom,n=(o,r,a,i)=>ld(t,o,r,a,i),s=pO(e);return XP(t,s).match({ltr:n,rtl:n})},hO=(e,t,n)=>eO(e,t,n),pC=(e,t,n)=>{const s=Pa(S.fromDom(n));return hO(s.dom,e,t).map(o=>{const r=n.createRange();return r.setStart(o.start.dom,o.soffset),r.setEnd(o.finish.dom,o.foffset),r}).getOrUndefined()},fd=(e,t)=>K(e)&&K(t)&&e.startContainer===t.startContainer&&e.startOffset===t.startOffset&&e.endContainer===t.endContainer&&e.endOffset===t.endOffset,bO=(e,t,n)=>{let s=e;for(;s&&s!==t;){if(n(s))return s;s=s.parentNode}return null},gC=(e,t,n)=>bO(e,t,n)!==null,vO=(e,t,n)=>gC(e,t,s=>s.nodeName===n),CO=(e,t)=>Rn(e)&&!gC(e,t,Gn),hC=(e,t,n)=>{const s=t.parentNode;if(s){const o=new _t(t,e.getParent(s,e.isBlock)||e.getRoot());let r;for(;r=o[n?"prev":"next"]();)if(ft(r))return!0}return!1},yO=(e,t)=>{var n;return((n=e.previousSibling)===null||n===void 0?void 0:n.nodeName)===t},EO=(e,t)=>{let n=t;for(;n&&n!==e;){if(Ze(n))return!0;n=n.parentNode}return!1},dd=(e,t,n,s,o)=>{const r=e.getRoot(),a=e.schema.getNonEmptyElements(),i=o.parentNode;let l,c;if(!i)return m.none();const f=e.getParent(i,e.isBlock)||r;if(s&&ft(o)&&t&&e.isEmpty(f))return m.some(P(i,e.nodeIndex(o)));const u=new _t(o,f);for(;c=u[s?"prev":"next"]();){if(e.getContentEditableParent(c)==="false"||CO(c,r))return m.none();if(z(c)&&c.data.length>0)return vO(c,r,"A")?m.none():m.some(P(c,s?c.data.length:0));if(e.isBlock(c)||a[c.nodeName.toLowerCase()])return m.none();l=c}return so(l)?m.none():n&&l?m.some(P(l,0)):m.none()},bC=(e,t,n,s)=>{const o=e.getRoot();let r,a=!1,i=n?s.startContainer:s.endContainer,l=n?s.startOffset:s.endOffset;const c=Z(i)&&l===i.childNodes.length,f=e.schema.getNonEmptyElements();let u=n;if(Rn(i))return m.none();if(Z(i)&&l>i.childNodes.length-1&&(u=!1),$a(i)&&(i=o,l=0),i===o){if(u&&(r=i.childNodes[l>0?l-1:0],r&&(Rn(r)||f[r.nodeName]||Vs(r))))return m.none();if(i.hasChildNodes()){if(l=Math.min(!u&&l>0?l-1:l,i.childNodes.length-1),i=i.childNodes[l],l=z(i)&&c?i.data.length:0,!t&&i===o.lastChild&&Vs(i)||EO(o,i)||Rn(i))return m.none();if(i.hasChildNodes()&&!Vs(i)){r=i;const d=new _t(i,o);do{if(Ze(r)||Rn(r)){a=!1;break}if(z(r)&&r.data.length>0){l=u?0:r.data.length,i=r,a=!0;break}if(f[r.nodeName.toLowerCase()]&&!fT(r)){l=e.nodeIndex(r),i=r.parentNode,u||l++,a=!0;break}}while(r=u?d.next():d.prev())}}}return t&&(z(i)&&l===0&&dd(e,c,t,!0,i).each(d=>{i=d.container(),l=d.offset(),a=!0}),Z(i)&&(r=i.childNodes[l],r||(r=i.childNodes[l-1]),r&&ft(r)&&!yO(r,"A")&&!hC(e,r,!1)&&!hC(e,r,!0)&&dd(e,c,t,!0,r).each(d=>{i=d.container(),l=d.offset(),a=!0}))),u&&!t&&z(i)&&l===i.data.length&&dd(e,c,t,!1,i).each(d=>{i=d.container(),l=d.offset(),a=!0}),a&&i?m.some(P(i,l)):m.none()},Kl=(e,t)=>{const n=t.collapsed,s=t.cloneRange(),o=P.fromRangeStart(t);return bC(e,n,!0,s).each(r=>{(!n||!P.isAbove(o,r))&&s.setStart(r.container(),r.offset())}),n||bC(e,n,!1,s).each(r=>{s.setEnd(r.container(),r.offset())}),n&&s.collapse(!0),fd(t,s)?m.none():m.some(s)},Gl=(e,t)=>e.splitText(t),Yl=e=>{let t=e.startContainer,n=e.startOffset,s=e.endContainer,o=e.endOffset;if(t===s&&z(t)){if(n>0&&n<t.data.length)if(s=Gl(t,n),t=s.previousSibling,o>n){o=o-n;const r=Gl(s,o).previousSibling;t=s=r,o=r.data.length,n=0}else o=0}else if(z(t)&&n>0&&n<t.data.length&&(t=Gl(t,n),n=0),z(s)&&o>0&&o<s.data.length){const r=Gl(s,o).previousSibling;s=r,o=r.data.length}return{startContainer:t,startOffset:n,endContainer:s,endOffset:o}},sr=e=>({walk:(r,a)=>fi(e,r,a),split:Yl,expand:(r,a={type:"word"})=>{if(a.type==="word"){const i=tr(e,r,[{inline:"span"}]),l=e.createRng();return l.setStart(i.startContainer,i.startOffset),l.setEnd(i.endContainer,i.endOffset),l}return r},normalize:r=>Kl(e,r).fold(ot,a=>(r.setStart(a.startContainer,a.startOffset),r.setEnd(a.endContainer,a.endOffset),!0))});sr.compareRanges=fd,sr.getCaretRangeFromPoint=pC,sr.getSelectedNode=Nl,sr.getNode=uo;const SO=((e,t)=>{const n=(i,l)=>{if(!Yt(l)&&!l.match(/^[0-9]+$/))throw new Error(e+".set accepts only positive integer values. Value was "+l);const c=i.dom;La(c)&&(c.style[e]=l+"px")},s=i=>{const l=t(i);if(l<=0||l===null){const c=ys(i,e);return parseFloat(c)||0}return l},o=s,r=(i,l)=>vn(l,(c,f)=>{const u=ys(i,f),d=u===void 0?0:parseInt(u,10);return isNaN(d)?c:c+d},0);return{set:n,get:s,getOuter:o,aggregate:r,max:(i,l,c)=>{const f=r(i,c);return l>f?l-f:0}}})("height",e=>{const t=e.dom;return Pr(e)?t.getBoundingClientRect().height:t.offsetHeight}),wO=e=>SO.get(e),vC=()=>S.fromDom(document),CC=(e,t)=>e.view(t).fold(Y([]),s=>{const o=e.owner(s),r=CC(e,o);return[s].concat(r)}),_O=(e,t)=>{const n=t.owner(e);return CC(t,n)};var xO=Object.freeze({__proto__:null,view:e=>{var t;return(e.dom===document?m.none():m.from((t=e.dom.defaultView)===null||t===void 0?void 0:t.frameElement)).map(S.fromDom)},owner:e=>zs(e)});const kO=e=>{const t=vC(),n=Qu(t),s=_O(e,xO),o=Zu(e),r=Sa(s,(a,i)=>{const l=Zu(i);return{left:a.left+l.left,top:a.top+l.top}},{left:0,top:0});return Ir(r.left+o.left+n.left,r.top+o.top+n.top)},md=e=>Xe(e)==="textarea",NO=(e,t)=>e.dispatch("ScrollIntoView",t).isDefaultPrevented(),TO=(e,t)=>{e.dispatch("AfterScrollIntoView",t)},AO=(e,t)=>{const n=Mt(e);if(n.length===0||md(e))return{element:e,offset:t};if(t<n.length&&!md(n[t]))return{element:n[t],offset:0};{const s=n[n.length-1];return md(s)?{element:e,offset:t}:Xe(s)==="img"?{element:s,offset:1}:Tn(s)?{element:s,offset:fl(s).length}:{element:s,offset:Mt(s).length}}},yC=(e,t)=>{const n=oT(e),s=wO(e);return{element:e,bottom:n.top+s,height:s,pos:n,cleanup:t}},DO=(e,t)=>{const n=AO(e,t),s=S.fromHtml('<span data-mce-bogus="all" style="display: inline-block;">'+Ut+"</span>");return yn(n.element,s),yC(s,()=>tt(s))},RO=e=>yC(S.fromDom(e),Se),EC=(e,t,n,s)=>{OO(e,(o,r)=>PO(e,t,n,s),n)},SC=(e,t,n,s,o)=>{const r={elm:s.element.dom,alignToTop:o};if(NO(e,r))return;const a=Qu(t).top;n(t,a,s,o),TO(e,r)},PO=(e,t,n,s)=>{const o=S.fromDom(e.getBody()),r=S.fromDom(e.getDoc());KN(o);const a=DO(S.fromDom(n.startContainer),n.startOffset);SC(e,r,t,a,s),a.cleanup()},wC=(e,t,n,s)=>{const o=S.fromDom(e.getDoc());SC(e,o,n,RO(t),s)},OO=(e,t,n)=>{const s=n.startContainer,o=n.startOffset,r=n.endContainer,a=n.endOffset;t(S.fromDom(s),S.fromDom(r));const i=e.dom.createRng();i.setStart(s,o),i.setEnd(r,a),e.selection.setRng(n)},pd=(e,t)=>e.element.dom.scrollIntoView({block:t?"start":"end"}),_C=(e,t,n,s)=>{const o=t+e,r=n.pos.top,a=n.bottom,i=a-r>=t;r<e?pd(n,s!==!1):r>o?pd(n,i?s!==!1:s===!0):a>o&&!i&&pd(n,s===!0)},xC=(e,t,n,s)=>{const o=Pa(e).dom.innerHeight;_C(t,o,n,s)},kC=(e,t,n,s)=>{const o=Pa(e).dom.innerHeight;_C(t,o,n,s);const r=kO(n.element),a=Sh(window);r.top<a.y?yh(n.element,s!==!1):r.top>a.bottom&&yh(n.element,s===!0)},BO=(e,t,n)=>EC(e,xC,t,n),IO=(e,t,n)=>wC(e,t,xC,n),LO=(e,t,n)=>EC(e,kC,t,n),FO=(e,t,n)=>wC(e,t,kC,n),$O=(e,t,n)=>{(e.inline?IO:FO)(e,t,n)},pi=(e,t,n)=>{(e.inline?BO:LO)(e,t,n)},NC=e=>e.dom.focus(),TC=e=>{const t=to(e).dom;return e.dom===t.activeElement},gd=(e=vC())=>m.from(e.dom.activeElement).map(S.fromDom),MO=e=>gd(to(e)).filter(t=>e.dom.contains(t.dom)),AC=(e,t)=>{const n=Tn(t)?fl(t).length:Mt(t).length+1;return e>n?n:e<0?0:e},UO=e=>Zr.range(e.start,AC(e.soffset,e.start),e.finish,AC(e.foffset,e.finish)),DC=(e,t)=>!ll(t.dom)&&(Us(e,t)||Ue(e,t)),RC=e=>t=>DC(e,t.start)&&DC(e,t.finish),zO=e=>e.inline||Oe.browser.isFirefox(),HO=e=>Zr.range(S.fromDom(e.startContainer),e.startOffset,S.fromDom(e.endContainer),e.endOffset),WO=e=>{const t=e.getSelection();return(!t||t.rangeCount===0?m.none():m.from(t.getRangeAt(0))).map(HO)},VO=e=>{const t=Pa(e);return WO(t.dom).filter(RC(e))},qO=(e,t)=>m.from(t).filter(RC(e)).map(UO),jO=e=>{const t=document.createRange();try{return t.setStart(e.start.dom,e.soffset),t.setEnd(e.finish.dom,e.foffset),m.some(t)}catch{return m.none()}},hd=e=>{const t=zO(e)?VO(S.fromDom(e.getBody())):m.none();e.bookmark=t.isSome()?t:e.bookmark},bd=e=>(e.bookmark?e.bookmark:m.none()).bind(n=>qO(S.fromDom(e.getBody()),n)).bind(jO),KO=e=>{bd(e).each(t=>e.selection.setRng(t))},PC={isEditorUIElement:e=>{const t=e.className.toString();return t.indexOf("tox-")!==-1||t.indexOf("mce-")!==-1}},GO=(e,t)=>(Yt(t)||(t=0),setTimeout(e,t)),YO=(e,t)=>(Yt(t)||(t=0),setInterval(e,t)),In={setEditorTimeout:(e,t,n)=>GO(()=>{e.removed||t()},n),setEditorInterval:(e,t,n)=>{const s=YO(()=>{e.removed?clearInterval(s):t()},n);return s}},XO=e=>e.type==="nodechange"&&e.selectionChange,ZO=(e,t)=>{const n=()=>{t.throttle()};qe.DOM.bind(document,"mouseup",n),e.on("remove",()=>{qe.DOM.unbind(document,"mouseup",n)})},QO=(e,t)=>{e.on("mouseup touchend",n=>{t.throttle()})},JO=(e,t)=>{QO(e,t),e.on("keyup NodeChange AfterSetSelectionRange",n=>{XO(n)||hd(e)})},eB=e=>{const t=kl(()=>{hd(e)},0);e.on("init",()=>{e.inline&&ZO(e,t),JO(e,t)}),e.on("remove",()=>{t.cancel()})};let Qr;const vd=qe.DOM,tB=e=>Z(e)&&PC.isEditorUIElement(e),Cd=e=>{const t=e.classList;return t!==void 0?t.contains("tox-edit-area")||t.contains("tox-edit-area__iframe")||t.contains("mce-content-body"):!1},Xl=(e,t)=>{const n=bR(e);return vd.getParent(t,o=>tB(o)||(n?e.dom.is(o,n):!1))!==null},yd=e=>{try{const t=to(S.fromDom(e.getElement()));return gd(t).fold(()=>document.body,n=>n.dom)}catch{return document.body}},nB=(e,t)=>{const n=t.editor;eB(n);const s=(o,r)=>{if(QR(o)&&o.inline!==!0){const a=S.fromDom(o.getContainer());r(a,"tox-edit-focus")}};n.on("focusin",()=>{const o=e.focusedEditor;Cd(yd(n))&&s(n,Ar),o!==n&&(o&&o.dispatch("blur",{focusedEditor:n}),e.setActive(n),e.focusedEditor=n,n.dispatch("focus",{blurredEditor:o}),n.focus(!0))}),n.on("focusout",()=>{In.setEditorTimeout(n,()=>{const o=e.focusedEditor;(!Cd(yd(n))||o!==n)&&s(n,Dr),!Xl(n,yd(n))&&o===n&&(n.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)})}),Qr||(Qr=o=>{const r=e.activeEditor;r&&ch(o).each(a=>{const i=a;i.ownerDocument===document&&i!==document.body&&!Xl(r,i)&&e.focusedEditor===r&&(r.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)})},vd.bind(document,"focusin",Qr))},sB=(e,t)=>{e.focusedEditor===t.editor&&(e.focusedEditor=null),!e.activeEditor&&Qr&&(vd.unbind(document,"focusin",Qr),Qr=null)},oB=e=>{e.on("AddEditor",te(nB,e)),e.on("RemoveEditor",te(sB,e))},rB=(e,t)=>e.dom.getParent(t,n=>e.dom.getContentEditable(n)==="true"),aB=e=>e.collapsed?m.from(uo(e.startContainer,e.startOffset)).map(S.fromDom):m.none(),iB=(e,t)=>aB(t).bind(n=>kT(n)?m.some(n):Us(e,n)?m.none():m.some(e)),OC=(e,t)=>{iB(S.fromDom(e.getBody()),t).bind(n=>Qt(n.dom)).fold(()=>{e.selection.normalize()},n=>e.selection.setRng(n.toRange()))},Ed=e=>{if(e.setActive)try{e.setActive()}catch{e.focus()}else e.focus()},lB=e=>TC(e)||MO(e).isSome(),cB=e=>K(e.iframeElement)&&TC(S.fromDom(e.iframeElement)),uB=e=>{const t=e.getBody();return t&&lB(S.fromDom(t))},fB=e=>{const t=to(S.fromDom(e.getElement()));return gd(t).filter(n=>!Cd(n.dom)&&Xl(e,n.dom)).isSome()},or=e=>e.inline?uB(e):cB(e),dB=e=>or(e)||fB(e),mB=e=>{const t=e.selection,n=e.getBody();let s=t.getRng();e.quirks.refreshContentEditable(),K(e.bookmark)&&!or(e)&&bd(e).each(r=>{e.selection.setRng(r),s=r});const o=rB(e,t.getNode());if(o&&e.dom.isChildOf(o,n)){Ed(o),OC(e,s),Sd(e);return}e.inline||(Oe.browser.isOpera()||Ed(n),e.getWin().focus()),(Oe.browser.isFirefox()||e.inline)&&(Ed(n),OC(e,s)),Sd(e)},Sd=e=>e.editorManager.setActive(e),pB=(e,t)=>{e.removed||(t?Sd(e):mB(e))},BC=(e,t,n,s,o)=>{const r=n?t.startContainer:t.endContainer,a=n?t.startOffset:t.endOffset;return m.from(r).map(S.fromDom).map(i=>!s||!t.collapsed?Rr(i,o(i,a)).getOr(i):i).bind(i=>pn(i)?m.some(i):qn(i).filter(pn)).map(i=>i.dom).getOr(e)},IC=(e,t,n=!1)=>BC(e,t,!0,n,(s,o)=>Math.min(Ku(s),o)),LC=(e,t,n=!1)=>BC(e,t,!1,n,(s,o)=>o>0?o-1:o),FC=(e,t)=>{const n=e;for(;e&&z(e)&&e.length===0;)e=t?e.nextSibling:e.previousSibling;return e||n},gB=(e,t)=>{if(!t)return e;let n=t.startContainer,s=t.endContainer;const o=t.startOffset,r=t.endOffset;let a=t.commonAncestorContainer;t.collapsed||(n===s&&r-o<2&&n.hasChildNodes()&&(a=n.childNodes[o]),z(n)&&z(s)&&(n.length===o?n=FC(n.nextSibling,!0):n=n.parentNode,r===0?s=FC(s.previousSibling,!1):s=s.parentNode,n&&n===s&&(a=n)));const i=z(a)?a.parentNode:a;return Z(i)?i:e},hB=(e,t,n,s)=>{const o=[],r=e.getRoot(),a=e.getParent(n||IC(r,t,t.collapsed),e.isBlock),i=e.getParent(s||LC(r,t,t.collapsed),e.isBlock);if(a&&a!==r&&o.push(a),a&&i&&a!==i){let l;const c=new _t(a,r);for(;(l=c.next())&&l!==i;)e.isBlock(l)&&o.push(l)}return i&&a!==i&&i!==r&&o.push(i),o},bB=(e,t,n)=>m.from(t).bind(s=>m.from(s.parentNode).map(o=>{const r=e.nodeIndex(s),a=e.createRng();return a.setStart(o,r),a.setEnd(o,r+1),n&&(Qf(e,a,s,!0),Qf(e,a,s,!1)),a})),wd=(e,t)=>Fe(t,n=>{const s=e.dispatch("GetSelectionRange",{range:n});return s.range!==n?s.range:n}),vB=e=>Xe(e)==="img"?1:Ah(e).fold(()=>Mt(e).length,t=>t.length),CB=e=>Ah(e).filter(t=>t.trim().length!==0||t.indexOf(Tt)>-1).isSome(),yB=e=>Uu(e)&&An(e,"contenteditable")==="false",EB=["img","br"],$C=e=>CB(e)||We(EB,Xe(e))||yB(e),SB=e=>WN(e,$C),wB=e=>_B(e,$C),_B=(e,t)=>{const n=s=>{const o=Mt(s);for(let r=o.length-1;r>=0;r--){const a=o[r];if(t(a))return m.some(a);const i=n(a);if(i.isSome())return i}return m.none()};return n(e)},MC="[data-mce-autocompleter]",xB=(e,t)=>{if(UC(S.fromDom(e.getBody())).isNone()){const n=S.fromHtml('<span data-mce-autocompleter="1" data-mce-bogus="1"></span>',e.getDoc());ht(n,S.fromDom(t.extractContents())),t.insertNode(n.dom),qn(n).each(s=>s.dom.normalize()),wB(n).map(s=>{e.selection.setCursorLocation(s.dom,vB(s))})}},kB=e=>Fo(e,MC),UC=e=>Ia(e,MC),NB=(e,t)=>UC(t).each(n=>{const s=e.selection.getBookmark();Ws(n),e.selection.moveToBookmark(s)}),TB={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},Zl=(e,t,n)=>{const s=n?"lastChild":"firstChild",o=n?"prev":"next";if(e[s])return e[s];if(e!==t){let r=e[o];if(r)return r;for(let a=e.parent;a&&a!==t;a=a.parent)if(r=a[o],r)return r}},AB=e=>{var t;const n=(t=e.value)!==null&&t!==void 0?t:"";if(!Ho(n))return!1;const s=e.parent;return!(s&&(s.name!=="span"||s.attr("style"))&&/^[ ]+$/.test(n))},zC=e=>{const t=e.name==="a"&&!e.attr("href")&&e.attr("id");return e.attr("name")||e.attr("id")&&!e.firstChild||e.attr("data-mce-bookmark")||t};class cn{static create(t,n){const s=new cn(t,TB[t]||1);return n&&Ye(n,(o,r)=>{s.attr(r,o)}),s}constructor(t,n){this.name=t,this.type=n,n===1&&(this.attributes=[],this.attributes.map={})}replace(t){const n=this;return t.parent&&t.remove(),n.insert(t,n),n.remove(),n}attr(t,n){const s=this;if(!le(t))return K(t)&&Ye(t,(r,a)=>{s.attr(a,r)}),s;const o=s.attributes;if(o){if(n!==void 0){if(n===null){if(t in o.map){delete o.map[t];let r=o.length;for(;r--;)if(o[r].name===t)return o.splice(r,1),s}return s}if(t in o.map){let r=o.length;for(;r--;)if(o[r].name===t){o[r].value=n;break}}else o.push({name:t,value:n});return o.map[t]=n,s}return o.map[t]}}clone(){const t=this,n=new cn(t.name,t.type),s=t.attributes;if(s){const o=[];o.map={};for(let r=0,a=s.length;r<a;r++){const i=s[r];i.name!=="id"&&(o[o.length]={name:i.name,value:i.value},o.map[i.name]=i.value)}n.attributes=o}return n.value=t.value,n}wrap(t){const n=this;return n.parent&&(n.parent.insert(t,n),t.append(n)),n}unwrap(){const t=this;for(let n=t.firstChild;n;){const s=n.next;t.insert(n,t,!0),n=s}t.remove()}remove(){const t=this,n=t.parent,s=t.next,o=t.prev;return n&&(n.firstChild===t?(n.firstChild=s,s&&(s.prev=null)):o&&(o.next=s),n.lastChild===t?(n.lastChild=o,o&&(o.next=null)):s&&(s.prev=o),t.parent=t.next=t.prev=null),t}append(t){const n=this;t.parent&&t.remove();const s=n.lastChild;return s?(s.next=t,t.prev=s,n.lastChild=t):n.lastChild=n.firstChild=t,t.parent=n,t}insert(t,n,s){t.parent&&t.remove();const o=n.parent||this;return s?(n===o.firstChild?o.firstChild=t:n.prev&&(n.prev.next=t),t.prev=n.prev,t.next=n,n.prev=t):(n===o.lastChild?o.lastChild=t:n.next&&(n.next.prev=t),t.next=n.next,t.prev=n,n.next=t),t.parent=o,t}getAll(t){const n=this,s=[];for(let o=n.firstChild;o;o=Zl(o,n))o.name===t&&s.push(o);return s}children(){const t=this,n=[];for(let s=t.firstChild;s;s=s.next)n.push(s);return n}empty(){const t=this;if(t.firstChild){const n=[];for(let o=t.firstChild;o;o=Zl(o,t))n.push(o);let s=n.length;for(;s--;){const o=n[s];o.parent=o.firstChild=o.lastChild=o.next=o.prev=null}}return t.firstChild=t.lastChild=null,t}isEmpty(t,n={},s){var o;const r=this;let a=r.firstChild;if(zC(r))return!1;if(a)do{if(a.type===1){if(a.attr("data-mce-bogus"))continue;if(t[a.name]||zC(a))return!1}if(a.type===8||a.type===3&&!AB(a)||a.type===3&&a.parent&&n[a.parent.name]&&Ho((o=a.value)!==null&&o!==void 0?o:"")||s&&s(a))return!1}while(a=Zl(a,r));return!0}walk(t){return Zl(this,null,t)}}const DB=(e,t)=>/^\s*\[if [\w\W]+\]>.*<!\[endif\](--!?)?>/.test(e.substr(t)),HC=(e,t,n=0)=>{const s=e.toLowerCase();if(s.indexOf("[if ",n)!==-1&&DB(s,n)){const o=s.indexOf("[endif]",n);return s.indexOf(">",o)}else if(t){const o=s.indexOf(">",n);return o!==-1?o:s.length}else{const o=/--!?>/g;o.lastIndex=n;const r=o.exec(e);return r?r.index+r[0].length:s.length}},RB=(e,t,n)=>{const s=/<([!?\/])?([A-Za-z0-9\-_:.]+)/g,o=/(?:\s(?:[^'">]+(?:"[^"]*"|'[^']*'))*[^"'>]*(?:"[^">]*|'[^'>]*)?|\s*|\/)>/g,r=e.getVoidElements();let a=1,i=n;for(;a!==0;)for(s.lastIndex=i;;){const l=s.exec(t);if(l===null)return i;if(l[1]==="!"){Ft(l[2],"--")?i=HC(t,!1,l.index+3):i=HC(t,!0,l.index+1);break}else{o.lastIndex=s.lastIndex;const c=o.exec(t);if(Lt(c)||c.index!==s.lastIndex)continue;l[1]==="/"?a-=1:ye(r,l[2])||(a+=1),i=s.lastIndex+c[0].length;break}}return i},PB=(e,t)=>{const n=new RegExp(["\\s?("+e.join("|")+')="[^"]+"'].join("|"),"gi");return t.replace(n,"")},WC=(e,t)=>{const n=/<(\w+) [^>]*data-mce-bogus="all"[^>]*>/g,s=e.schema;let o=PB(e.getTempAttrs(),t);const r=s.getVoidElements();let a;for(;a=n.exec(o);){const i=n.lastIndex,l=a[0].length;let c;r[a[1]]?c=i:c=RB(s,o,i),o=o.substring(0,i-l)+o.substring(c),n.lastIndex=i-l}return qs(o)},OB=WC,VC=e=>{const t=jt(e,"[data-mce-bogus]");$(t,n=>{An(n,"data-mce-bogus")==="all"?tt(n):zo(n)?(yn(n,S.fromText(Lr)),tt(n)):Ws(n)})},qC=e=>{const t=jt(e,"input");$(t,n=>{$t(n,"name")})},BB=(e,t)=>{const n=an(e),s=new RegExp(`^(<${n}[^>]*>(&nbsp;|&#160;|\\s| |<br \\/>|)<\\/${n}>[\r
]*|<br \\/>[\r
]*)$`);return t.replace(s,"")},IB=(e,t)=>{const n=e.getDoc(),s=to(S.fromDom(e.getBody())),o=S.fromTag("div",n);Pt(o,"data-mce-bogus","all"),ol(o,{position:"fixed",left:"-9999999px",top:"0"}),al(o,t.innerHTML),VC(o),qC(o);const r=FN(s);ht(r,o);const a=qs(o.dom.innerText);return tt(o),a},LB=(e,t,n)=>{let s;return t.format==="raw"?s=V.trim(OB(e.serializer,n.innerHTML)):t.format==="text"?s=IB(e,n):t.format==="tree"?s=e.serializer.serialize(n,t):s=BB(e,e.serializer.serialize(n,t)),t.format!=="text"&&!ml(S.fromDom(n))&&le(s)?V.trim(s):s},FB=(e,t)=>m.from(e.getBody()).fold(Y(t.format==="tree"?new cn("body",11):""),n=>LB(e,t,n)),jC=V.makeMap,KC=e=>{const t=[];e=e||{};const n=e.indent,s=jC(e.indent_before||""),o=jC(e.indent_after||""),r=io.getEncodeFunc(e.entity_encoding||"raw",e.entities),a=e.element_format!=="xhtml";return{start:(i,l,c)=>{if(n&&s[i]&&t.length>0){const f=t[t.length-1];f.length>0&&f!==`
`&&t.push(`
`)}if(t.push("<",i),l)for(let f=0,u=l.length;f<u;f++){const d=l[f];t.push(" ",d.name,'="',r(d.value,!0),'"')}if(!c||a?t[t.length]=">":t[t.length]=" />",c&&n&&o[i]&&t.length>0){const f=t[t.length-1];f.length>0&&f!==`
`&&t.push(`
`)}},end:i=>{let l;t.push("</",i,">"),n&&o[i]&&t.length>0&&(l=t[t.length-1],l.length>0&&l!==`
`&&t.push(`
`))},text:(i,l)=>{i.length>0&&(t[t.length]=l?i:r(i))},cdata:i=>{t.push("<![CDATA[",i,"]]>")},comment:i=>{t.push("<!--",i,"-->")},pi:(i,l)=>{l?t.push("<?",i," ",r(l),"?>"):t.push("<?",i,"?>"),n&&t.push(`
`)},doctype:i=>{t.push("<!DOCTYPE",i,">",n?`
`:"")},reset:()=>{t.length=0},getContent:()=>t.join("").replace(/\n$/,"")}},go=(e={},t=lo())=>{const n=KC(e);return e.validate="validate"in e?e.validate:!0,{serialize:o=>{const r=e.validate,a={3:l=>{var c;n.text((c=l.value)!==null&&c!==void 0?c:"",l.raw)},8:l=>{var c;n.comment((c=l.value)!==null&&c!==void 0?c:"")},7:l=>{n.pi(l.name,l.value)},10:l=>{var c;n.doctype((c=l.value)!==null&&c!==void 0?c:"")},4:l=>{var c;n.cdata((c=l.value)!==null&&c!==void 0?c:"")},11:l=>{let c=l;if(c=c.firstChild)do i(c);while(c=c.next)}};n.reset();const i=l=>{var c;const f=a[l.type];if(f)f(l);else{const u=l.name,d=u in t.getVoidElements();let b=l.attributes;if(r&&b&&b.length>1){const E=[];E.map={};const g=t.getElementRule(l.name);if(g){for(let y=0,w=g.attributesOrder.length;y<w;y++){const _=g.attributesOrder[y];if(_ in b.map){const x=b.map[_];E.map[_]=x,E.push({name:_,value:x})}}for(let y=0,w=b.length;y<w;y++){const _=b[y].name;if(!(_ in E.map)){const x=b.map[_];E.map[_]=x,E.push({name:_,value:x})}}b=E}}if(n.start(u,b,d),!d){let E=l.firstChild;if(E){(u==="pre"||u==="textarea")&&E.type===3&&((c=E.value)===null||c===void 0?void 0:c[0])===`
`&&n.text(`
`,!0);do i(E);while(E=E.next)}n.end(u)}}};return o.type===1&&!e.inner?i(o):o.type===3?a[3](o):a[11](o),n.getContent()}}},GC=new Set;$(["margin","margin-left","margin-right","margin-top","margin-bottom","padding","padding-left","padding-right","padding-top","padding-bottom","border","border-width","border-style","border-color","background","background-attachment","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","float","position","left","right","top","bottom","z-index","display","transform","width","max-width","min-width","height","max-height","min-height","overflow","overflow-x","overflow-y","text-overflow","vertical-align","transition","transition-delay","transition-duration","transition-property","transition-timing-function"],t=>{GC.add(t)});const YC=["font","text-decoration","text-emphasis"],_d=(e,t)=>Cn(e.parseStyle(e.getAttrib(t,"style"))),$B=e=>GC.has(e),MB=(e,t)=>Js(_d(e,t),n=>!$B(n)),UB=e=>ve(e,t=>gt(YC,n=>Ft(t,n))),zB=(e,t,n)=>{const s=_d(e,t),o=_d(e,n),r=a=>{var i,l;const c=(i=e.getStyle(t,a))!==null&&i!==void 0?i:"",f=(l=e.getStyle(n,a))!==null&&l!==void 0?l:"";return hs(c)&&hs(f)&&c!==f};return gt(s,a=>{const i=l=>gt(l,c=>c===a);if(!i(o)&&i(YC)){const l=UB(o);return gt(l,r)}else return r(a)})},XC=(e,t,n)=>m.from(n.container()).filter(z).exists(s=>{const o=e?0:-1;return t(s.data.charAt(n.offset()+o))}),xd=te(XC,!0,Kr),kd=te(XC,!1,Kr),HB=e=>{const t=e.container();return z(t)&&(t.data.length===0||gl(t.data)&&di.isBookmarkNode(t.parentNode))},ho=(e,t)=>n=>Uf(e?0:-1,n).filter(t).isSome(),ZC=e=>Nh(e)&&ys(S.fromDom(e),"display")==="block",QC=e=>Ze(e)&&!lT(e),WB=ho(!0,ZC),VB=ho(!1,ZC),gi=ho(!0,Es),hi=ho(!1,Es),JC=ho(!0,Vs),ey=ho(!1,Vs),bo=ho(!0,QC),vo=ho(!1,QC),qB=e=>e.slice(0,-1),jB=(e,t,n)=>Us(t,e)?qB(rh(e,s=>n(s)||Ue(s,t))):[],ty=(e,t)=>jB(e,t,ot),Gs=(e,t)=>[e].concat(ty(e,t)),Nd=(e,t,n)=>Nv(e,t,n,HB),ny=(e,t)=>wt(Gs(S.fromDom(t.container()),e),Dn),sy=(e,t,n)=>Nd(e,t.dom,n).forall(s=>ny(t,n).fold(()=>!ws(s,n,t.dom),o=>!ws(s,n,t.dom)&&Us(o,S.fromDom(s.container())))),oy=(e,t,n)=>ny(t,n).fold(()=>Nd(e,t.dom,n).forall(s=>!ws(s,n,t.dom)),s=>Nd(e,s.dom,n).isNone()),Td=te(oy,!1),ry=te(oy,!0),KB=te(sy,!1),GB=te(sy,!0),YB=e=>Bl(e).exists(zo),Ql=(e,t,n)=>{const s=ve(Gs(S.fromDom(n.container()),t),Dn),o=mn(s).getOr(t);return Pn(e,o.dom,n).filter(YB)},Ad=(e,t)=>Bl(t).exists(zo)||Ql(!0,e,t).isSome(),Dd=(e,t)=>k1(t).exists(zo)||Ql(!1,e,t).isSome(),XB=te(Ql,!1),ZB=te(Ql,!0),ay=e=>P.isTextPosition(e)&&!e.isAtStart()&&!e.isAtEnd(),iy=(e,t)=>{const n=ve(Gs(S.fromDom(t.container()),e),Dn);return mn(n).getOr(e)},ly=(e,t)=>ay(t)?kd(t):kd(t)||ln(iy(e,t).dom,t).exists(kd),cy=(e,t)=>ay(t)?xd(t):xd(t)||Zt(iy(e,t).dom,t).exists(xd),QB=e=>We(["pre","pre-wrap"],e),Rd=e=>Bl(e).bind(t=>Lo(t,pn)).exists(t=>QB(ys(t,"white-space"))),JB=(e,t)=>ln(e.dom,t).isNone(),eI=(e,t)=>Zt(e.dom,t).isNone(),tI=(e,t)=>JB(e,t)||eI(e,t)||Td(e,t)||ry(e,t)||Dd(e,t)||Ad(e,t),nI=e=>K(e)&&Ze(e)&&pv(e),uy=(e,t)=>n=>nI(new _t(n,e)[t]()),sI=(e,t)=>{const n=Zt(e.dom,t).getOr(t),s=uy(e.dom,"next");return t.isAtEnd()&&(s(t.container())||s(n.container()))},oI=(e,t)=>{const n=ln(e.dom,t).getOr(t),s=uy(e.dom,"prev");return t.isAtStart()&&(s(t.container())||s(n.container()))},fy=(e,t)=>Rd(t)?!1:tI(e,t)||ly(e,t)||cy(e,t),bi=(e,t)=>Rd(t)?!1:Td(e,t)||KB(e,t)||Dd(e,t)||ly(e,t)||oI(e,t),rI=e=>{const t=e.container(),n=e.offset();return z(t)&&n<t.data.length?P(t,n+1):e},vi=(e,t)=>Rd(t)?!1:ry(e,t)||GB(e,t)||Ad(e,t)||cy(e,t)||sI(e,t),Pd=(e,t)=>bi(e,t)||vi(e,rI(t)),dy=(e,t)=>$l(e.charAt(t)),my=(e,t)=>Kr(e.charAt(t)),aI=e=>{const t=e.container();return z(t)&&qt(t.data,Tt)},iI=e=>{const t=e.split("");return Fe(t,(n,s)=>$l(n)&&s>0&&s<t.length-1&&Kf(t[s-1])&&Kf(t[s+1])?" ":n).join("")},py=(e,t,n)=>{const s=t.data,o=P(t,0);return!n&&dy(s,0)&&!Pd(e,o)?(t.data=" "+s.slice(1),!0):n&&my(s,0)&&bi(e,o)?(t.data=Tt+s.slice(1),!0):!1},lI=e=>{const t=e.data,n=iI(t);return n!==t?(e.data=n,!0):!1},gy=(e,t,n)=>{const s=t.data,o=P(t,s.length-1);return!n&&dy(s,s.length-1)&&!Pd(e,o)?(t.data=s.slice(0,-1)+" ",!0):n&&my(s,s.length-1)&&vi(e,o)?(t.data=s.slice(0,-1)+Tt,!0):!1},cI=(e,t)=>{const n=t.container();if(!z(n))return m.none();if(aI(t)){const s=py(e,n,!1)||lI(n)||gy(e,n,!1);return Tr(s,t)}else if(Pd(e,t)){const s=py(e,n,!0)||gy(e,n,!0);return Tr(s,t)}else return m.none()},uI=e=>{const t=S.fromDom(e.getBody());e.selection.isCollapsed()&&cI(t,P.fromRangeStart(e.selection.getRng())).each(n=>{e.selection.setRng(n.toRange())})},hy=(e,t,n)=>{if(n===0)return;const s=S.fromDom(e),o=Hs(s,Dn).getOr(s),r=e.data.slice(t,t+n),a=t+n>=e.data.length&&vi(o,P(e,e.data.length)),i=t===0&&bi(o,P(e,0));e.replaceData(t,n,Fh(r,4,i,a))},Jl=(e,t)=>{const n=e.data.slice(t),s=n.length-Gk(n).length;hy(e,t,s)},Od=(e,t)=>{const n=e.data.slice(0,t),s=n.length-Sg(n).length;hy(e,t-s,s)},Bd=(e,t,n,s=!0)=>{const o=Sg(e.data).length,r=s?e:t,a=s?t:e;return s?r.appendData(a.data):r.insertData(0,a.data),tt(S.fromDom(a)),n&&Jl(r,o),r},fI=(e,t)=>{const n=e.container(),s=e.offset();return!P.isTextPosition(e)&&n===t.parentNode&&s>P.before(t).offset()},dI=(e,t)=>fI(t,e)?P(t.container(),t.offset()-1):t,mI=e=>z(e)?P(e,0):P.before(e),pI=e=>z(e)?P(e,e.data.length):P.after(e),by=e=>jn(e.previousSibling)?m.some(pI(e.previousSibling)):e.previousSibling?Kn(e.previousSibling):m.none(),vy=e=>jn(e.nextSibling)?m.some(mI(e.nextSibling)):e.nextSibling?Qt(e.nextSibling):m.none(),gI=(e,t)=>m.from(t.previousSibling?t.previousSibling:t.parentNode).bind(n=>ln(e,P.before(n))).orThunk(()=>Zt(e,P.after(t))),hI=(e,t)=>Zt(e,P.after(t)).orThunk(()=>ln(e,P.before(t))),bI=(e,t)=>by(t).orThunk(()=>vy(t)).orThunk(()=>gI(e,t)),vI=(e,t)=>vy(t).orThunk(()=>by(t)).orThunk(()=>hI(e,t)),CI=(e,t,n)=>e?vI(t,n):bI(t,n),yI=(e,t,n)=>CI(e,t,n).map(te(dI,n)),Cy=(e,t,n)=>{n.fold(()=>{e.focus()},s=>{e.selection.setRng(s.toRange(),t)})},EI=e=>t=>t.dom===e,SI=(e,t)=>t&&ye(e.schema.getBlockElements(),Xe(t)),wI=e=>{if(bt(e)){const t=S.fromHtml('<br data-mce-bogus="1">');return Br(e),ht(e,t),m.some(P.before(t.dom))}else return m.none()},_I=(e,t,n)=>{const s=Io(e).filter(Tn),o=Oa(e).filter(Tn);return tt(e),fN(s,o,t,(r,a,i)=>{const l=r.dom,c=a.dom,f=l.data.length;return Bd(l,c,n),i.container()===c?P(l,f):i}).orThunk(()=>(n&&(s.each(r=>Od(r.dom,r.dom.length)),o.each(r=>Jl(r.dom,0))),t))},xI=(e,t)=>ye(e.schema.getTextInlineElements(),Xe(t)),rr=(e,t,n,s=!0)=>{const o=yI(t,e.getBody(),n.dom),r=Hs(n,te(SI,e),EI(e.getBody())),a=_I(n,o,xI(e,n));e.dom.isEmpty(e.getBody())?(e.setContent(""),e.selection.setCursorLocation()):r.bind(wI).fold(()=>{s&&Cy(e,t,a)},i=>{s&&Cy(e,t,m.some(i))})},kI=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,NI=e=>kI.test(e),ar=(e,t)=>Jn(S.fromDom(t),iR(e))&&!Wo(e.schema,t)&&e.dom.isEditable(t),yy=e=>{var t;return qe.DOM.getStyle(e,"direction",!0)==="rtl"||NI((t=e.textContent)!==null&&t!==void 0?t:"")},TI=(e,t,n)=>ve(qe.DOM.getParents(n.container(),"*",t),e),Co=(e,t,n)=>{const s=TI(e,t,n);return m.from(s[s.length-1])},AI=(e,t,n)=>{const s=mo(t,e),o=mo(n,e);return K(s)&&s===o},DI=e=>of(e)||rf(e),Ln=(e,t)=>{const n=t.container(),s=t.offset();return e?ao(n)?z(n.nextSibling)?P(n.nextSibling,0):P.after(n):of(t)?P(n,s+1):t:ao(n)?z(n.previousSibling)?P(n.previousSibling,n.previousSibling.data.length):P.before(n):rf(t)?P(n,s-1):t},Ey=te(Ln,!0),Sy=te(Ln,!1),wy=(e,t)=>{const n=s=>s.stopImmediatePropagation();e.on("beforeinput input",n,!0),e.getDoc().execCommand(t),e.off("beforeinput input",n)},RI=e=>{e.execCommand("delete")},Id=e=>wy(e,"Delete"),PI=e=>wy(e,"ForwardDelete"),OI=e=>t=>Nr(qn(t),e,Ue),BI=e=>Dh(e)||Ma(e),ec=(e,t)=>Us(e,t)?Lo(t,BI,OI(e)):m.none(),Ld=(e,t=!0)=>{e.dom.isEmpty(e.getBody())&&e.setContent("",{no_selection:!t})},_y=(e,t,n)=>on(Qt(n),Kn(n),(s,o)=>{const r=Ln(!0,s),a=Ln(!1,o),i=Ln(!1,t);return e?Zt(n,i).exists(l=>l.isEqual(a)&&t.isEqual(r)):ln(n,i).exists(l=>l.isEqual(r)&&t.isEqual(a))}).getOr(!0),xy=e=>(CN(e)?Io(e):ju(e)).bind(xy).orThunk(()=>m.some(e)),ky=(e,t,n,s=!0)=>{var o;t.deleteContents();const r=xy(n).getOr(n),a=S.fromDom((o=e.dom.getParent(r.dom,e.dom.isBlock))!==null&&o!==void 0?o:n.dom);if(a.dom===e.getBody()?Ld(e,s):bt(a)&&(ro(a),s&&e.selection.setCursorLocation(a.dom,0)),!Ue(n,a)){const i=Nr(qn(a),n)?[]:ON(a);$(i.concat(Mt(n)),l=>{!Ue(l,a)&&!Us(l,a)&&bt(l)&&tt(l)})}},II=e=>t=>Ue(e,t),Fd=e=>jt(e,"td,th"),LI=(e,t)=>{const n=c=>ci(S.fromDom(c),t),s=n(e.startContainer),o=n(e.endContainer),r=s.isSome(),a=o.isSome(),i=on(s,o,Ue).getOr(!1);return{startTable:s,endTable:o,isStartInTable:r,isEndInTable:a,isSameTable:i,isMultiTable:!i&&r&&a}},$d=(e,t)=>({start:e,end:t}),FI=(e,t,n)=>({rng:e,table:t,cells:n}),Ci=Ss.generate([{singleCellTable:["rng","cell"]},{fullTable:["table"]},{partialTable:["cells","outsideDetails"]},{multiTable:["startTableCells","endTableCells","betweenRng"]}]),tc=(e,t)=>Fo(S.fromDom(e),"td,th",t),Ny=e=>!Ue(e.start,e.end),Ty=(e,t)=>ci(e.start,t).bind(n=>ci(e.end,t).bind(s=>Tr(Ue(n,s),n))),$I=(e,t)=>!Ny(e)&&Ty(e,t).exists(n=>{const s=n.dom.rows;return s.length===1&&s[0].cells.length===1}),MI=(e,t)=>{const n=tc(e.startContainer,t),s=tc(e.endContainer,t);return on(n,s,$d)},UI=e=>t=>ci(t,e).bind(n=>Ro(Fd(n)).map(s=>$d(t,s))),zI=e=>t=>ci(t,e).bind(n=>mn(Fd(n)).map(s=>$d(s,t))),Md=e=>t=>Ty(t,e).map(n=>FI(t,n,Fd(n))),Ay=(e,t,n,s)=>{if(n.collapsed||!e.forall(Ny))return m.none();if(t.isSameTable){const o=e.bind(Md(s));return m.some({start:o,end:o})}else{const o=tc(n.startContainer,s),r=tc(n.endContainer,s),a=o.bind(UI(s)).bind(Md(s)),i=r.bind(zI(s)).bind(Md(s));return m.some({start:a,end:i})}},Dy=(e,t)=>wa(e,n=>Ue(n,t)),Ud=e=>on(Dy(e.cells,e.rng.start),Dy(e.cells,e.rng.end),(t,n)=>e.cells.slice(t,n+1)),HI=(e,t,n)=>e.exists(s=>$I(s,n)&&Zf(s.start,t)),Ry=(e,t)=>{const{startTable:n,endTable:s}=t,o=e.cloneRange();return n.each(r=>o.setStartAfter(r.dom)),s.each(r=>o.setEndBefore(r.dom)),o},WI=(e,t,n,s)=>Ay(e,t,n,s).bind(({start:o,end:r})=>o.or(r)).bind(o=>{const{isSameTable:r}=t,a=Ud(o).getOr([]);if(r&&o.cells.length===a.length)return m.some(Ci.fullTable(o.table));if(a.length>0){if(r)return m.some(Ci.partialTable(a,m.none()));{const i=Ry(n,t);return m.some(Ci.partialTable(a,m.some({...t,rng:i})))}}else return m.none()}),VI=(e,t,n,s)=>Ay(e,t,n,s).bind(({start:o,end:r})=>{const a=o.bind(Ud).getOr([]),i=r.bind(Ud).getOr([]);if(a.length>0&&i.length>0){const l=Ry(n,t);return m.some(Ci.multiTable(a,i,l))}else return m.none()}),qI=(e,t)=>{const n=II(e),s=MI(t,n),o=LI(t,n);return HI(s,t,n)?s.map(r=>Ci.singleCellTable(t,r.start)):o.isMultiTable?VI(s,o,t,n):WI(s,o,t,n)},Py=e=>$(e,t=>{$t(t,"contenteditable"),ro(t)}),jI=(e,t)=>m.from(e.dom.getParent(t,e.dom.isBlock)).map(S.fromDom),KI=(e,t,n)=>{n.each(s=>{t?tt(s):(ro(s),e.selection.setCursorLocation(s.dom,0))})},zd=(e,t,n,s)=>{const o=n.cloneRange();s?(o.setStart(n.startContainer,n.startOffset),o.setEndAfter(t.dom.lastChild)):(o.setStartBefore(t.dom.firstChild),o.setEnd(n.endContainer,n.endOffset)),Hd(e,o,t,!1).each(r=>r())},Oy=e=>{const t=Gr(e),n=S.fromDom(e.selection.getNode());ul(n.dom)&&bt(n)?e.selection.setCursorLocation(n.dom,0):e.selection.collapse(!0),t.length>1&&gt(t,s=>Ue(s,n))&&Pt(n,"data-mce-selected","1")},By=(e,t,n)=>m.some(()=>{const s=e.selection.getRng(),o=n.bind(({rng:r,isStartInTable:a})=>{const i=jI(e,a?r.endContainer:r.startContainer);r.deleteContents(),KI(e,a,i.filter(bt));const l=a?t[0]:t[t.length-1];return zd(e,l,s,a),bt(l)?m.none():m.some(a?t.slice(1):t.slice(0,-1))}).getOr(t);Py(o),Oy(e)}),GI=(e,t,n,s)=>m.some(()=>{const o=e.selection.getRng(),r=t[0],a=n[n.length-1];zd(e,r,o,!0),zd(e,a,o,!1);const i=bt(r)?t:t.slice(1),l=bt(a)?n:n.slice(0,-1);Py(i.concat(l)),s.deleteContents(),Oy(e)}),Hd=(e,t,n,s=!0)=>m.some(()=>{ky(e,t,n,s)}),YI=(e,t)=>m.some(()=>rr(e,!1,t)),XI=(e,t,n)=>qI(t,n).bind(s=>s.fold(te(Hd,e),te(YI,e),te(By,e),te(GI,e))),ZI=(e,t)=>nc(e,t),QI=(e,t,n,s)=>Wd(t,s).fold(()=>XI(e,t,n),o=>ZI(e,o)),JI=(e,t,n)=>{const s=S.fromDom(e.getBody()),o=e.selection.getRng();return n.length!==0?By(e,n,m.none()):QI(e,s,o,t)},Iy=(e,t)=>wt(Gs(t,e),Ua),Wd=(e,t)=>wt(Gs(t,e),zu("caption")),eL=(e,t,n,s,o)=>li(n,e.getBody(),o).bind(r=>Iy(t,S.fromDom(r.getNode())).bind(a=>Ue(a,s)?m.none():m.some(Se))),nc=(e,t)=>m.some(()=>{ro(t),e.selection.setCursorLocation(t.dom,0)}),tL=(e,t,n,s)=>Qt(e.dom).bind(o=>Kn(e.dom).map(r=>t?n.isEqual(o)&&s.isEqual(r):n.isEqual(r)&&s.isEqual(o))).getOr(!0),nL=(e,t)=>nc(e,t),sL=(e,t,n)=>Wd(e,S.fromDom(n.getNode())).fold(()=>m.some(Se),s=>Tr(!Ue(s,t),Se)),oL=(e,t,n,s,o)=>li(n,e.getBody(),o).fold(()=>m.some(Se),r=>tL(s,n,o,r)?nL(e,s):sL(t,s,r)),rL=(e,t,n,s)=>{const o=P.fromRangeStart(e.selection.getRng());return Iy(n,s).bind(r=>bt(r)?nc(e,r):eL(e,n,t,r,o))},aL=(e,t,n,s)=>{const o=P.fromRangeStart(e.selection.getRng());return bt(s)?nc(e,s):oL(e,n,t,s,o)},Ly=(e,t)=>e?JC(t):ey(t),iL=(e,t)=>{const n=P.fromRangeStart(e.selection.getRng());return Ly(t,n)||Pn(t,e.getBody(),n).exists(s=>Ly(t,s))},lL=(e,t,n)=>{const s=S.fromDom(e.getBody());return Wd(s,n).fold(()=>rL(e,t,s,n).orThunk(()=>Tr(iL(e,t),Se)),o=>aL(e,t,s,o))},Vd=(e,t)=>{const n=S.fromDom(e.selection.getStart(!0)),s=Gr(e);return e.selection.isCollapsed()&&s.length===0?lL(e,t,n):JI(e,n,s)},ir=(e,t)=>{let n=t;for(;n&&n!==e;){if(ts(n)||Ze(n))return n;n=n.parentNode}return null},cL=["data-ephox-","data-mce-","data-alloy-","data-snooker-","_"],uL=V.each,qd=e=>{const t=e.dom,n=new Set(e.serializer.getTempAttrs()),s=(r,a)=>{if(r.nodeName!==a.nodeName||r.nodeType!==a.nodeType)return!1;const i=c=>{const f={};return uL(t.getAttribs(c),u=>{const d=u.nodeName.toLowerCase();d!=="style"&&!o(d)&&(f[d]=t.getAttrib(c,d))}),f},l=(c,f)=>{for(const u in c)if(ye(c,u)){const d=f[u];if(St(d)||c[u]!==d)return!1;delete f[u]}for(const u in f)if(ye(f,u))return!1;return!0};return Z(r)&&Z(a)&&(!l(i(r),i(a))||!l(t.parseStyle(t.getAttrib(r,"style")),t.parseStyle(t.getAttrib(a,"style"))))?!1:!On(r)&&!On(a)},o=r=>gt(cL,a=>Ft(r,a))||n.has(r);return{compare:s,isAttributeInternal:o}},fL=(e,t)=>{let n=e;for(;n=n.walk();)t(n)},Fy=(e,t,n,s)=>{const o=n.name;for(let r=0,a=e.length;r<a;r++){const i=e[r];if(i.name===o){const l=s.nodes[o];l?l.nodes.push(n):s.nodes[o]={filter:i,nodes:[n]}}}if(n.attributes)for(let r=0,a=t.length;r<a;r++){const i=t[r],l=i.name;if(l in n.attributes.map){const c=s.attributes[l];c?c.nodes.push(n):s.attributes[l]={filter:i,nodes:[n]}}}},dL=(e,t,n)=>{const s={nodes:{},attributes:{}};return n.firstChild&&fL(n,o=>{Fy(e,t,o,s)}),s},$y=(e,t)=>{const n=(s,o)=>{Ye(s,r=>{const a=sn(r.nodes);$(r.filter.callbacks,i=>{for(let l=a.length-1;l>=0;l--){const c=a[l];(!(o?c.attr(r.filter.name)!==void 0:c.name===r.filter.name)||ut(c.parent))&&a.splice(l,1)}a.length>0&&i(a,r.filter.name,t)})})};n(e.nodes,!1),n(e.attributes,!0)},My=(e,t,n,s={})=>{const o=dL(e,t,n);$y(o,s)},jd=(e,t,n)=>{if(e.insert&&t(n)){const s=new cn("br",1);s.attr("data-mce-bogus","1"),n.empty().append(s)}else n.empty().append(new cn("#text",3)).value=Tt},mL=e=>{var t;return Uy(e,"#text")&&((t=e==null?void 0:e.firstChild)===null||t===void 0?void 0:t.value)===Tt},Uy=(e,t)=>{const n=e==null?void 0:e.firstChild;return K(n)&&n===e.lastChild&&n.name===t},pL=(e,t)=>{const n=e.getElementRule(t.name);return(n==null?void 0:n.paddEmpty)===!0},yi=(e,t,n,s)=>s.isEmpty(t,n,o=>pL(e,o)),gL=(e,t)=>K(e)&&(t(e)||e.name==="br"),hL=e=>{let t;for(let n=e;n;n=n.parent){const s=n.attr("contenteditable");if(s==="false")break;s==="true"&&(t=n)}return m.from(t)},Kd=(e,t,n=e.parent)=>{if(t.getSpecialElements()[e.name])e.empty().remove();else{const s=e.children();for(const o of s)n&&!t.isValidChild(n.name,o.name)&&Kd(o,t,n);e.unwrap()}},Gd=(e,t,n,s=Se)=>{const o=t.getTextBlockElements(),r=t.getNonEmptyElements(),a=t.getWhitespaceElements(),i=V.makeMap("tr,td,th,tbody,thead,tfoot,table"),l=new Set,c=f=>f!==n&&!i[f.name];for(let f=0;f<e.length;f++){const u=e[f];let d,b,E;if(!u.parent||l.has(u))continue;if(o[u.name]&&u.parent.name==="li"){let y=u.next;for(;y&&o[y.name];){y.name="li",l.add(y),u.parent.insert(y,u.parent);y=y.next}u.unwrap();continue}const g=[u];for(d=u.parent;d&&!t.isValidChild(d.name,u.name)&&c(d);d=d.parent)g.push(d);if(d&&g.length>1)if(t.isValidChild(d.name,u.name)){g.reverse(),b=g[0].clone(),s(b);let y=b;for(let w=0;w<g.length-1;w++){t.isValidChild(y.name,g[w].name)&&w>0?(E=g[w].clone(),s(E),y.append(E)):E=y;for(let _=g[w].firstChild;_&&_!==g[w+1];){const x=_.next;E.append(_),_=x}y=E}yi(t,r,a,b)?d.insert(u,g[0],!0):(d.insert(b,g[0],!0),d.insert(u,b)),d=g[0],(yi(t,r,a,d)||Uy(d,"br"))&&d.empty().remove()}else Kd(u,t);else if(u.parent){if(u.name==="li"){let y=u.prev;if(y&&(y.name==="ul"||y.name==="ol")){y.append(u);continue}if(y=u.next,y&&(y.name==="ul"||y.name==="ol")&&y.firstChild){y.insert(u,y.firstChild,!0);continue}const w=new cn("ul",1);s(w),u.wrap(w);continue}if(t.isValidChild(u.parent.name,"div")&&t.isValidChild("div",u.name)){const y=new cn("div",1);s(y),u.wrap(y)}else Kd(u,t)}}},bL=(e,t)=>{let n=e;for(;n;){if(n.name===t)return!0;n=n.parent}return!1},zy=(e,t,n=t.parent)=>n&&e.children[t.name]&&!e.isValidChild(n.name,t.name)?!0:!!(n&&t.name==="a"&&bL(n,"a")),vL=(e,t,n,s)=>{const o=document.createRange();return o.setStart(e,t),o.setEnd(n,s),o},CL=e=>{const t=P.fromRangeStart(e),n=P.fromRangeEnd(e),s=e.commonAncestorContainer;return Pn(!1,s,n).map(o=>!ws(t,n,s)&&ws(t,o,s)?vL(t.container(),t.offset(),o.container(),o.offset()):e).getOr(e)},Yd=e=>e.collapsed?e:CL(e),yL=e=>K(e.firstChild)&&e.firstChild===e.lastChild,EL=e=>e.name==="br"||e.value===Tt,SL=(e,t)=>e.getBlockElements()[t.name]&&yL(t)&&EL(t.firstChild),wL=(e,t)=>{const n=e.getNonEmptyElements();return K(t)&&(t.isEmpty(n)||SL(e,t))},_L=(e,t)=>{let n=t.firstChild,s=t.lastChild;return n&&n.name==="meta"&&(n=n.next),s&&s.attr("id")==="mce_marker"&&(s=s.prev),wL(e,s)&&(s=s==null?void 0:s.prev),!n||n!==s?!1:n.name==="ul"||n.name==="ol"},xL=e=>{var t,n;const s=e.firstChild,o=e.lastChild;return s&&s.nodeName==="META"&&((t=s.parentNode)===null||t===void 0||t.removeChild(s)),o&&o.id==="mce_marker"&&((n=o.parentNode)===null||n===void 0||n.removeChild(o)),e},kL=(e,t,n)=>{const s=t.serialize(n),o=e.createFragment(s);return xL(o)},NL=e=>{var t;return ve((t=e==null?void 0:e.childNodes)!==null&&t!==void 0?t:[],n=>n.nodeName==="LI")},TL=e=>e.data===Tt||ft(e),AL=e=>K(e==null?void 0:e.firstChild)&&e.firstChild===e.lastChild&&TL(e.firstChild),DL=e=>!e.firstChild||AL(e),RL=e=>e.length>0&&DL(e[e.length-1])?e.slice(0,-1):e,Xd=(e,t)=>{const n=e.getParent(t,e.isBlock);return n&&n.nodeName==="LI"?n:null},PL=(e,t)=>!!Xd(e,t),OL=(e,t)=>{const n=t.cloneRange(),s=t.cloneRange();return n.setStartBefore(e),s.setEndAfter(e),[n.cloneContents(),s.cloneContents()]},BL=(e,t)=>{const n=P.before(e),o=xs(t).next(n);return o?o.toRange():null},Hy=(e,t)=>{const n=P.after(e),o=xs(t).prev(n);return o?o.toRange():null},IL=(e,t,n,s)=>{const o=OL(e,s),r=e.parentNode;return r&&(r.insertBefore(o[0],e),V.each(t,a=>{r.insertBefore(a,e)}),r.insertBefore(o[1],e),r.removeChild(e)),Hy(t[t.length-1],n)},LL=(e,t,n)=>{const s=e.parentNode;return s&&V.each(t,o=>{s.insertBefore(o,e)}),BL(e,n)},FL=(e,t,n,s)=>(s.insertAfter(t.reverse(),e),Hy(t[0],n)),$L=(e,t,n,s)=>{const o=kL(t,e,s),r=Xd(t,n.startContainer),a=RL(NL(o.firstChild)),i=1,l=2,c=t.getRoot(),f=u=>{const d=P.fromRangeStart(n),b=xs(t.getRoot()),E=u===i?b.prev(d):b.next(d),g=E==null?void 0:E.getNode();return g?Xd(t,g)!==r:!0};return r?f(i)?LL(r,a,c):f(l)?FL(r,a,c,t):IL(r,a,c,n):null},ML=["pre"],UL=(e,t,n,s)=>{var o;const r=t.firstChild,a=t.lastChild,i=a.attr("data-mce-type")==="bookmark"?a.prev:a,l=r===i,c=We(ML,r.name);if(l&&c){const f=r.attr("contenteditable")!=="false",u=((o=e.getParent(n,e.isBlock))===null||o===void 0?void 0:o.nodeName.toLowerCase())===r.name,d=m.from(ir(s,n)).forall(ts);return f&&u&&d}else return!1},Zd=ul,zL=(e,t,n)=>{if(K(n)){const s=e.getParent(t.endContainer,Zd);return n===s&&Zf(S.fromDom(n),t)}else return!1},HL=(e,t,n)=>{var s;if(n.getAttribute("data-mce-bogus")==="all")(s=n.parentNode)===null||s===void 0||s.insertBefore(e.dom.createFragment(t),n);else{const o=n.firstChild,r=n.lastChild;!o||o===r&&o.nodeName==="BR"?e.dom.setHTML(n,t):e.selection.setContent(t,{no_events:!0})}},WL=(e,t)=>{m.from(e.getParent(t,"td,th")).map(S.fromDom).each(RT)},VL=(e,t)=>{const n=e.schema.getTextInlineElements(),s=e.dom;if(t){const o=e.getBody(),r=qd(e);V.each(s.select("*[data-mce-fragment]"),a=>{if(K(n[a.nodeName.toLowerCase()])&&MB(s,a)){for(let l=a.parentElement;K(l)&&l!==o&&!zB(s,a,l);l=l.parentElement)if(r.compare(l,a)){s.remove(a,!0);break}}})}},qL=e=>{let t=e;for(;t=t.walk();)t.type===1&&t.attr("data-mce-fragment","1")},jL=e=>{V.each(e.getElementsByTagName("*"),t=>{t.removeAttribute("data-mce-fragment")})},KL=e=>!!e.getAttribute("data-mce-fragment"),GL=(e,t)=>K(t)&&!e.schema.getVoidElements()[t.nodeName],YL=(e,t)=>{var n,s,o;let r;const a=e.dom,i=e.selection;if(!t)return;i.scrollIntoView(t);const l=ir(e.getBody(),t);if(l&&a.getContentEditable(l)==="false"){a.remove(t),i.select(l);return}let c=a.createRng();const f=t.previousSibling;if(z(f)){c.setStart(f,(s=(n=f.nodeValue)===null||n===void 0?void 0:n.length)!==null&&s!==void 0?s:0);const b=t.nextSibling;z(b)&&(f.appendData(b.data),(o=b.parentNode)===null||o===void 0||o.removeChild(b))}else c.setStartBefore(t),c.setEndBefore(t);const u=b=>{let E=P.fromRangeStart(b);return E=xs(e.getBody()).next(E),E==null?void 0:E.toRange()},d=a.getParent(t,a.isBlock);a.remove(t),d&&a.isEmpty(d)&&(Br(S.fromDom(d)),c.setStart(d,0),c.setEnd(d,0),!Zd(d)&&!KL(d)&&(r=u(c))?(c=r,a.remove(d)):a.add(d,a.create("br",{"data-mce-bogus":"1"}))),i.setRng(c)},XL=e=>{const t=e.dom,n=Yd(e.selection.getRng());e.selection.setRng(n);const s=t.getParent(n.startContainer,Zd);zL(t,n,s)?Hd(e,n,S.fromDom(s)):n.startContainer===n.endContainer&&n.endOffset-n.startOffset===1&&z(n.startContainer.childNodes[n.startOffset])?n.deleteContents():e.getDoc().execCommand("Delete",!1)},ZL=e=>{for(let t=e;t;t=t.walk())if(t.attr("id")==="mce_marker")return m.some(t);return m.none()},QL=e=>{$(sn(e.getBody().querySelectorAll("details")),t=>{const n=ve(sn(t.children),s=>s.nodeName==="SUMMARY");n.length>1&&$(n.slice(1),s=>{const o=S.fromDom(s);Dr(o,"mce-accordion-summary"),pb(o,"p")})})},JL=(e,t,n)=>{var s,o;const r=e.selection,a=e.dom,i=e.parser,l=n.merge,c=go({validate:!0},e.schema),f='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>';t.indexOf("{$caret}")===-1&&(t+="{$caret}"),t=t.replace(/\{\$caret\}/,f);let u=r.getRng();const d=u.startContainer,b=e.getBody();d===b&&r.isCollapsed()&&a.isBlock(b.firstChild)&&GL(e,b.firstChild)&&a.isEmpty(b.firstChild)&&(u=a.createRng(),u.setStart(b.firstChild,0),u.setEnd(b.firstChild,0),r.setRng(u)),r.isCollapsed()||XL(e);const E=r.getNode(),g={context:E.nodeName.toLowerCase(),data:n.data,insert:!0},y=i.parse(t,g);if(n.paste===!0&&_L(e.schema,y)&&PL(a,E))return u=$L(c,a,r.getRng(),y),u&&r.setRng(u),t;n.paste===!0&&UL(a,y,E,e.getBody())&&((s=y.firstChild)===null||s===void 0||s.unwrap()),qL(y);let w=y.lastChild;if(w&&w.attr("id")==="mce_marker"){const _=w;for(w=w.prev;w;w=w.walk(!0))if(w.type===3||!a.isBlock(w.name)){w.parent&&e.schema.isValidChild(w.parent.name,"span")&&w.parent.insert(_,w,w.name==="br");break}}if(e._selectionOverrides.showBlockCaretContainer(E),!g.invalid)t=c.serialize(y),HL(e,t,E);else{e.selection.setContent(f);let _=r.getNode(),x;const N=e.getBody();for($a(_)?_=x=N:x=_;x&&x!==N;)_=x,x=x.parentNode;t=_===N?N.innerHTML:a.getOuterHTML(_);const I=i.parse(t),oe=ZL(I),L=oe.bind(hL).getOr(I);oe.each(j=>j.replace(y));const D=y.children(),O=(o=y.parent)!==null&&o!==void 0?o:I;y.unwrap();const q=ve(D,j=>zy(e.schema,j,O));Gd(q,e.schema,L),My(i.getNodeFilters(),i.getAttributeFilters(),I),t=c.serialize(I),_===N?a.setHTML(N,t):a.setOuterHTML(_,t)}return VL(e,l),YL(e,a.get("mce_marker")),jL(e.getBody()),WL(a,r.getStart()),QL(e),lA(e.schema,e.getBody(),r.getStart()),t},sc=e=>e instanceof cn,eF=e=>{or(e)&&Qt(e.getBody()).each(t=>{const n=t.getNode(),s=Vs(n)?Qt(n).getOr(t):t;e.selection.setRng(s.toRange())})},Qd=(e,t,n)=>{e.dom.setHTML(e.getBody(),t),n!==!0&&eF(e)},tF=(e,t,n,s)=>{if(n.length===0||/^\s+$/.test(n)){const o='<br data-mce-bogus="1">';t.nodeName==="TABLE"?n="<tr><td>"+o+"</td></tr>":/^(UL|OL)$/.test(t.nodeName)&&(n="<li>"+o+"</li>");const r=an(e);return e.schema.isValidChild(t.nodeName.toLowerCase(),r.toLowerCase())?(n=o,n=e.dom.createHTML(r,ei(e),n)):n||(n=o),Qd(e,n,s.no_selection),{content:n,html:n}}else{s.format!=="raw"&&(n=go({validate:!1},e.schema).serialize(e.parser.parse(n,{isRootContent:!0,insert:!0})));const o=ml(S.fromDom(t))?n:V.trim(n);return Qd(e,o,s.no_selection),{content:o,html:o}}},nF=(e,t,n,s)=>{My(e.parser.getNodeFilters(),e.parser.getAttributeFilters(),n);const o=go({validate:!1},e.schema).serialize(n),r=ml(S.fromDom(t))?o:V.trim(o);return Qd(e,r,s.no_selection),{content:n,html:r}},sF=(e,t,n)=>m.from(e.getBody()).map(s=>sc(t)?nF(e,s,t,n):tF(e,s,t,n)).getOr({content:t,html:sc(n.content)?"":n.content}),oF=(e,t,n)=>Hs(e,t,n).isSome(),rF=(e,t)=>zN(e,t).isSome(),Wy=e=>Ie(e)?e:ot,aF=(e,t,n)=>{let s=e.dom;const o=Wy(n);for(;s.parentNode;){s=s.parentNode;const r=S.fromDom(s),a=t(r);if(a.isSome())return a;if(o(r))break}return m.none()},Jd=(e,t,n)=>{const s=t(e),o=Wy(n);return s.orThunk(()=>o(e)?m.none():aF(e,t,o))},em=sd,Vy=(e,t,n)=>{const s=e.formatter.get(n);if(s)for(let o=0;o<s.length;o++){const r=s[o];if(Bn(r)&&r.inherit===!1&&e.dom.is(t,r.selector))return!0}return!1},tm=(e,t,n,s,o)=>{const r=e.dom.getRoot();if(t===r)return!1;const a=e.dom.getParent(t,i=>Vy(e,i,n)?!0:i.parentNode===r||!!Ns(e,i,n,s,!0));return!!Ns(e,a,n,s,o)},oc=(e,t,n)=>xt(n)&&em(t,n.inline)||ks(n)&&em(t,n.block)?!0:Bn(n)?Z(t)&&e.is(t,n.selector):!1,qy=(e,t,n,s,o,r)=>{const a=n[s],i=s==="attributes";if(Ie(n.onmatch))return n.onmatch(t,n,s);if(a){if(hg(a)){for(let l=0;l<a.length;l++)if(i?e.getAttrib(t,a[l]):zl(e,t,a[l]))return!0}else for(const l in a)if(ye(a,l)){const c=i?e.getAttrib(t,l):zl(e,t,l),f=po(a[l],r),u=ut(c)||Ta(c);if(u&&ut(f))continue;if(o&&u&&!n.exact||(!o||n.exact)&&!em(c,od(f,l)))return!1}}return!0},Ns=(e,t,n,s,o)=>{const r=e.formatter.get(n),a=e.dom;if(r&&Z(t))for(let i=0;i<r.length;i++){const l=r[i];if(oc(e.dom,t,l)&&qy(a,t,l,"attributes",o,s)&&qy(a,t,l,"styles",o,s)){const c=l.classes;if(c){for(let f=0;f<c.length;f++)if(!e.dom.hasClass(t,po(c[f],s)))return}return l}}},nm=(e,t,n,s,o)=>{if(s)return tm(e,s,t,n,o);if(s=e.selection.getNode(),tm(e,s,t,n,o))return!0;const r=e.selection.getStart();return!!(r!==s&&tm(e,r,t,n,o))},iF=(e,t,n)=>{const s=[],o={},r=e.selection.getStart();return e.dom.getParent(r,a=>{for(let i=0;i<t.length;i++){const l=t[i];!o[l]&&Ns(e,a,l,n)&&(o[l]=!0,s.push(l))}},e.dom.getRoot()),s},lF=(e,t)=>{const n=o=>Ue(o,S.fromDom(e.getBody())),s=(o,r)=>Ns(e,o.dom,r)?m.some(r):m.none();return m.from(e.selection.getStart(!0)).bind(o=>Jd(S.fromDom(o),r=>_r(t,a=>s(r,a)),n)).getOrNull()},cF=(e,t)=>{const n=e.formatter.get(t),s=e.dom;if(n&&e.selection.isEditable()){const o=e.selection.getStart(),r=Hl(s,o);for(let a=n.length-1;a>=0;a--){const i=n[a];if(!Bn(i))return!0;for(let l=r.length-1;l>=0;l--)if(s.is(r[l],i.selector))return!0}}return!1},uF=(e,t,n)=>vn(n,(s,o)=>{const r=cP(e,o);return e.formatter.matchNode(t,o,{},r)?s.concat([o]):s},[]),Jr=Ut,fF=(e,t)=>e.importNode(t,!0),dF=e=>{const t=[];let n=e;for(;n;){if(z(n)&&n.data!==Jr||n.childNodes.length>1)return[];Z(n)&&t.push(n),n=n.firstChild}return t},jy=e=>dF(e).length>0,Ky=e=>{if(e){const t=new _t(e,e);for(let n=t.current();n;n=t.next())if(z(n))return n}return null},sm=e=>{const t=S.fromTag("span");return eo(t,{id:qf,"data-mce-bogus":"1","data-mce-type":"format-caret"}),e&&ht(t,S.fromText(Jr)),t},mF=e=>{const t=Ky(e);return t&&t.data.charAt(0)===Jr&&t.deleteData(0,1),t},om=(e,t,n=!0)=>{const s=e.dom,o=e.selection;if(jy(t))rr(e,!1,S.fromDom(t),n);else{const r=o.getRng(),a=s.getParent(t,s.isBlock),i=r.startContainer,l=r.startOffset,c=r.endContainer,f=r.endOffset,u=mF(t);s.remove(t,!0),i===u&&l>0&&r.setStart(u,l-1),c===u&&f>0&&r.setEnd(u,f-1),a&&s.isEmpty(a)&&ro(S.fromDom(a)),o.setRng(r)}},rm=(e,t,n=!0)=>{const s=e.dom,o=e.selection;if(t)om(e,t,n);else if(t=Jo(e.getBody(),o.getStart()),!t)for(;t=s.get(qf);)om(e,t,n)},pF=(e,t,n)=>{var s,o;const r=e.dom,a=r.getParent(n,te(td,e.schema));a&&r.isEmpty(a)?(s=n.parentNode)===null||s===void 0||s.replaceChild(t,n):(DT(S.fromDom(n)),r.isEmpty(n)?(o=n.parentNode)===null||o===void 0||o.replaceChild(t,n):r.insertAfter(t,n))},Gy=(e,t)=>(e.appendChild(t),t),Yy=(e,t)=>{var n;const s=Sa(e,(r,a)=>Gy(r,a.cloneNode(!1)),t),o=(n=s.ownerDocument)!==null&&n!==void 0?n:document;return Gy(s,o.createTextNode(Jr))},gF=(e,t,n,s,o,r)=>{const a=e.formatter,i=e.dom,l=ve(Cn(a.get()),u=>u!==s&&!qt(u,"removeformat")),c=uF(e,n,l);if(ve(c,u=>!uP(e,u,s)).length>0){const u=n.cloneNode(!1);return i.add(t,u),a.remove(s,o,u,r),i.remove(u),m.some(u)}else return m.none()},hF=(e,t,n)=>{let s;const o=e.selection,r=e.formatter.get(t);if(!r)return;const a=o.getRng();let i=a.startOffset;const c=a.startContainer.nodeValue;s=Jo(e.getBody(),o.getStart());const f=/[^\s\u00a0\u00ad\u200b\ufeff]/;if(c&&i>0&&i<c.length&&f.test(c.charAt(i))&&f.test(c.charAt(i-1))){const u=o.getBookmark();a.collapse(!0);let d=tr(e.dom,a,r);d=Yl(d),e.formatter.apply(t,n,d),o.moveToBookmark(u)}else{let u=s?Ky(s):null;(!s||(u==null?void 0:u.data)!==Jr)&&(s=fF(e.getDoc(),sm(!0).dom),u=s.firstChild,a.insertNode(s),i=1),e.formatter.apply(t,n,s),o.setCursorLocation(u,i)}},bF=(e,t,n,s)=>{const o=e.dom,r=e.selection;let a=!1;const i=e.formatter.get(t);if(!i)return;const l=r.getRng(),c=l.startContainer,f=l.startOffset;let u=c;z(c)&&(f!==c.data.length&&(a=!0),u=u.parentNode);const d=[];let b;for(;u;){if(Ns(e,u,t,n,s)){b=u;break}u.nextSibling&&(a=!0),d.push(u),u=u.parentNode}if(b)if(a){const E=r.getBookmark();l.collapse(!0);let g=tr(o,l,i,!0);g=Yl(g),e.formatter.remove(t,n,g,s),r.moveToBookmark(E)}else{const E=Jo(e.getBody(),b),g=sm(!1).dom;pF(e,g,E??b);const y=gF(e,g,b,t,n,s),w=Yy(d.concat(y.toArray()),g);E&&om(e,E,!1),r.setCursorLocation(w,1),o.isEmpty(b)&&o.remove(b)}},vF=(e,t,n)=>{const s=e.selection,o=e.getBody();rm(e,null,n),(t===8||t===46)&&s.isCollapsed()&&s.getStart().innerHTML===Jr&&rm(e,Jo(o,s.getStart())),(t===37||t===39)&&rm(e,Jo(o,s.getStart()))},CF=e=>z(e)&&Lu(e.data,Tt),yF=e=>{e.on("mouseup keydown",t=>{vF(e,t.keyCode,CF(e.selection.getRng().endContainer))})},Xy=e=>{const t=sm(!1),n=Yy(e,t.dom);return{caretContainer:t,caretPosition:P(n,0)}},Zy=(e,t)=>{const{caretContainer:n,caretPosition:s}=Xy(t);return yn(S.fromDom(e),n),tt(S.fromDom(e)),s},EF=(e,t)=>{const{caretContainer:n,caretPosition:s}=Xy(t);return e.insertNode(n.dom),s},Qy=(e,t)=>{const n=e.schema.getTextInlineElements();return ye(n,Xe(t))&&!Gn(t.dom)&&!Uo(t.dom)},Jy=e=>Gn(e.dom)&&jy(e.dom),Ei={},eE=es(["pre"]),SF=(e,t)=>{Ei[e]||(Ei[e]=[]),Ei[e].push(t)},wF=(e,t)=>{ye(Ei,e)&&$(Ei[e],n=>{n(t)})};SF("pre",e=>{const t=e.selection.getRng(),n=o=>r=>{const a=r.previousSibling;return eE(a)&&We(o,a)},s=(o,r)=>{const a=S.fromDom(r),i=zs(a).dom;tt(a),$o(S.fromDom(o),[S.fromTag("br",i),S.fromTag("br",i),...Mt(a)])};if(!t.collapsed){const o=e.selection.getSelectedBlocks(),r=ve(ve(o,eE),n(o));$(r,a=>{s(a.previousSibling,a)})}});const tE=["fontWeight","fontStyle","color","fontSize","fontFamily"],_F=e=>it(e.styles)&&gt(Cn(e.styles),t=>We(tE,t)),xF=e=>wt(e,t=>xt(t)&&t.inline==="span"&&_F(t)),nE=(e,t)=>{const n=e.get(t);return et(n)?xF(n):m.none()},sE=(e,t)=>ln(t,P.fromRangeStart(e)).isNone(),oE=(e,t)=>Zt(t,P.fromRangeEnd(e)).exists(n=>!ft(n.getNode())||Zt(t,n).isSome())===!1,rE=e=>t=>dT(t)&&e.isEditable(t),kF=e=>{const t=e.getSelectedBlocks(),n=e.getRng();if(e.isCollapsed())return[];if(t.length===1)return sE(n,t[0])&&oE(n,t[0])?t:[];{const s=mn(t).filter(a=>sE(n,a)).toArray(),o=Ro(t).filter(a=>oE(n,a)).toArray(),r=t.slice(1,-1);return s.concat(r).concat(o)}},NF=e=>ve(kF(e),rE(e.dom)),aE=e=>ve(e.getSelectedBlocks(),rE(e.dom)),am=V.each,im=e=>Z(e)&&!On(e)&&!Gn(e)&&!Uo(e),iE=(e,t)=>{for(let n=e;n;n=n[t]){if(z(n)&&hs(n.data))return e;if(Z(n)&&!On(n))return n}return e},lE=(e,t,n)=>{const s=qd(e),o=Z(t)&&er(t),r=Z(n)&&er(n);if(o&&r){const a=iE(t,"previousSibling"),i=iE(n,"nextSibling");if(s.compare(a,i)){for(let l=a.nextSibling;l&&l!==i;){const c=l;l=l.nextSibling,a.appendChild(c)}return e.dom.remove(i),V.each(V.grep(i.childNodes),l=>{a.appendChild(l)}),a}}return n},cE=(e,t,n,s)=>{var o;if(s&&t.merge_siblings!==!1){const r=(o=lE(e,Uv(s),s))!==null&&o!==void 0?o:s;lE(e,r,Uv(r,!0))}},TF=(e,t,n)=>{if(t.clear_child_styles){const s=t.links?"*:not(a)":"*";am(e.select(s,n),o=>{im(o)&&er(o)&&am(t.styles,(r,a)=>{e.setStyle(o,a,"")})})}},lm=(e,t,n)=>{am(e.childNodes,s=>{im(s)&&(t(s)&&n(s),s.hasChildNodes()&&lm(s,t,n))})},AF=(e,t)=>{t.nodeName==="SPAN"&&e.getAttribs(t).length===0&&e.remove(t,!0)},uE=(e,t)=>n=>!!(n&&zl(e,n,t)),fE=(e,t,n)=>s=>{e.setStyle(s,t,n),s.getAttribute("style")===""&&s.removeAttribute("style"),AF(e,s)},lr=Ss.generate([{keep:[]},{rename:["name"]},{removed:[]}]),DF=/^(src|href|style)$/,cm=V.each,rc=sd,RF=e=>/^(TR|TH|TD)$/.test(e.nodeName),dE=(e,t,n)=>e.isChildOf(t,n)&&t!==n&&!e.isBlock(n),mE=(e,t,n)=>{let s=t[n?"startContainer":"endContainer"],o=t[n?"startOffset":"endOffset"];if(Z(s)){const r=s.childNodes.length-1;!n&&o&&o--,s=s.childNodes[o>r?r:o]}return z(s)&&n&&o>=s.data.length&&(s=new _t(s,e.getBody()).next()||s),z(s)&&!n&&o===0&&(s=new _t(s,e.getBody()).prev()||s),s},pE=(e,t)=>{const n=t?"firstChild":"lastChild",s=e[n];return RF(e)&&s?e.nodeName==="TR"&&s[n]||s:e},um=(e,t,n,s)=>{var o;const r=e.create(n,s);return(o=t.parentNode)===null||o===void 0||o.insertBefore(r,t),r.appendChild(t),r},gE=(e,t,n,s,o)=>{const r=S.fromDom(t),a=S.fromDom(e.create(s,o)),i=n?ih(r):ah(r);return $o(a,i),n?(yn(r,a),hh(a,r)):(no(r,a),ht(a,r)),a.dom},PF=(e,t)=>t.links&&e.nodeName==="A",hE=(e,t,n)=>{const s=t.parentNode;let o;const r=e.dom,a=an(e);ks(n)&&s===r.getRoot()&&(!n.list_block||!rc(t,n.list_block))&&$(sn(t.childNodes),i=>{Yr(e,a,i.nodeName.toLowerCase())?o?o.appendChild(i):(o=um(r,i,a),r.setAttribs(o,ei(e))):o=null}),!(mP(n)&&!rc(n.inline,t))&&r.remove(t,!0)},bE=(e,t,n)=>Yt(e)?{name:t,value:null}:{name:e,value:po(t,n)},vE=(e,t)=>{e.getAttrib(t,"style")===""&&(t.removeAttribute("style"),t.removeAttribute("data-mce-style"))},CE=(e,t,n,s,o)=>{let r=!1;cm(n.styles,(a,i)=>{const{name:l,value:c}=bE(i,a,s),f=od(c,l);(n.remove_similar||Lt(c)||!Z(o)||rc(zl(e,o,l),f))&&e.setStyle(t,l,""),r=!0}),r&&vE(e,t)},OF=(e,t,n)=>{t==="removeformat"?$(aE(e.selection),s=>{$(tE,o=>e.dom.setStyle(s,o,"")),vE(e.dom,s)}):nE(e.formatter,t).each(s=>{$(aE(e.selection),o=>CE(e.dom,o,s,n,null))})},yE=(e,t,n,s,o)=>{const r=e.dom,a=qd(e),i=e.schema;if(xt(t)&&Cl(i,t.inline)&&Wo(i,s)&&s.parentElement===e.getBody())return hE(e,s,t),lr.removed();if(!t.ceFalseOverride&&s&&r.getContentEditableParent(s)==="false"||s&&!oc(r,s,t)&&!PF(s,t))return lr.keep();const l=s,c=t.preserve_attributes;if(xt(t)&&t.remove==="all"&&et(c)){const f=ve(r.getAttribs(l),u=>We(c,u.name.toLowerCase()));if(r.removeAllAttribs(l),$(f,u=>r.setAttrib(l,u.name,u.value)),f.length>0)return lr.rename("span")}if(t.remove!=="all"){CE(r,l,t,n,o),cm(t.attributes,(u,d)=>{const{name:b,value:E}=bE(d,u,n);if(t.remove_similar||Lt(E)||!Z(o)||rc(r.getAttrib(o,b),E)){if(b==="class"){const g=r.getAttrib(l,b);if(g){let y="";if($(g.split(/\s+/),w=>{/mce\-\w+/.test(w)&&(y+=(y?" ":"")+w)}),y){r.setAttrib(l,b,y);return}}}if(DF.test(b)&&l.removeAttribute("data-mce-"+b),b==="style"&&es(["li"])(l)&&r.getStyle(l,"list-style-type")==="none"){l.removeAttribute(b),r.setStyle(l,"list-style-type","none");return}b==="class"&&l.removeAttribute("className"),l.removeAttribute(b)}}),cm(t.classes,u=>{u=po(u,n),(!Z(o)||r.hasClass(o,u))&&r.removeClass(l,u)});const f=r.getAttribs(l);for(let u=0;u<f.length;u++){const d=f[u].nodeName;if(!a.isAttributeInternal(d))return lr.keep()}}return t.remove!=="none"?(hE(e,l,t),lr.removed()):lr.keep()},BF=(e,t,n,s,o)=>{let r;return t.parentNode&&$(Hl(e.dom,t.parentNode).reverse(),a=>{if(!r&&Z(a)&&a.id!=="_start"&&a.id!=="_end"){const i=Ns(e,a,n,s,o);i&&i.split!==!1&&(r=a)}}),r},IF=(e,t,n,s)=>yE(e,t,n,s,s).fold(Y(s),o=>(e.dom.createFragment().appendChild(s),e.dom.rename(s,o)),Y(null)),LF=(e,t,n,s,o,r,a,i)=>{var l,c;let f,u;const d=e.dom;if(n){const b=n.parentNode;for(let E=s.parentNode;E&&E!==b;E=E.parentNode){let g=d.clone(E,!1);for(let y=0;y<t.length&&(g=IF(e,t[y],i,g),g!==null);y++);g&&(f&&g.appendChild(f),u||(u=g),f=g)}r&&(!a.mixed||!d.isBlock(n))&&(s=(l=d.split(n,s))!==null&&l!==void 0?l:s),f&&u&&((c=o.parentNode)===null||c===void 0||c.insertBefore(f,o),u.appendChild(o),xt(a)&&cE(e,a,i,f))}return s},FF=(e,t,n,s,o)=>{const r=e.formatter.get(t),a=r[0],i=e.dom,l=e.selection,c=g=>{const y=BF(e,g,t,n,o);return LF(e,r,y,g,g,!0,a,n)},f=g=>On(g)&&Z(g)&&(g.id==="_start"||g.id==="_end"),u=g=>gt(r,y=>Si(e,y,n,g,g)),d=g=>{const y=sn(g.childNodes),_=u(g)||gt(r,I=>oc(i,g,I)),x=g.parentNode;if(!_&&K(x)&&ad(a)&&u(x),a.deep&&y.length)for(let I=0;I<y.length;I++)d(y[I]);$(["underline","line-through","overline"],I=>{Z(g)&&e.dom.getStyle(g,"text-decoration")===I&&g.parentNode&&Hv(i,g.parentNode)===I&&Si(e,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:I}},void 0,g)})},b=g=>{const y=i.get(g?"_start":"_end");if(y){let w=y[g?"firstChild":"lastChild"];return f(w)&&(w=w[g?"firstChild":"lastChild"]),z(w)&&w.data.length===0&&(w=g?y.previousSibling||y.nextSibling:y.nextSibling||y.previousSibling),i.remove(y,!0),w}else return null},E=g=>{let y,w,_=tr(i,g,r,g.collapsed);if(a.split){if(_=Yl(_),y=mE(e,_,!0),w=mE(e,_),y!==w){if(y=pE(y,!0),w=pE(w,!1),dE(i,y,w)){const N=m.from(y.firstChild).getOr(y);c(gE(i,N,!0,"span",{id:"_start","data-mce-type":"bookmark"})),b(!0);return}if(dE(i,w,y)){const N=m.from(w.lastChild).getOr(w);c(gE(i,N,!1,"span",{id:"_end","data-mce-type":"bookmark"})),b(!1);return}y=um(i,y,"span",{id:"_start","data-mce-type":"bookmark"}),w=um(i,w,"span",{id:"_end","data-mce-type":"bookmark"});const x=i.createRng();x.setStartAfter(y),x.setEndBefore(w),fi(i,x,N=>{$(N,I=>{!On(I)&&!On(I.parentNode)&&c(I)})}),c(y),c(w),y=b(!0),w=b()}else y=w=c(y);_.startContainer=y.parentNode?y.parentNode:y,_.startOffset=i.nodeIndex(y),_.endContainer=w.parentNode?w.parentNode:w,_.endOffset=i.nodeIndex(w)+1}fi(i,_,x=>{$(x,d)})};if(s){if(ui(s)){const g=i.createRng();g.setStartBefore(s),g.setEndAfter(s),E(g)}else E(s);oC(e,t,s,n);return}!l.isCollapsed()||!xt(a)||Gr(e).length?(Mv(e,()=>Jf(e,E),g=>xt(a)&&nm(e,t,n,g)),e.nodeChanged()):bF(e,t,n,o),OF(e,t,n),oC(e,t,s,n)},EE=(e,t,n,s,o)=>{(s||e.selection.isEditable())&&FF(e,t,n,s,o)},Si=(e,t,n,s,o)=>yE(e,t,n,s,o).fold(ot,r=>(e.dom.rename(s,r),!0),yt),SE=V.each,$F=(e,t,n,s)=>{const o=r=>{if(Z(r)&&Z(r.parentNode)&&er(r)){const a=Hv(e,r.parentNode);e.getStyle(r,"color")&&a?e.setStyle(r,"text-decoration",a):e.getStyle(r,"text-decoration")===a&&e.setStyle(r,"text-decoration",null)}};t.styles&&(t.styles.color||t.styles.textDecoration)&&(V.walk(s,o,"childNodes"),o(s))},MF=(e,t,n,s)=>{if(t.styles&&t.styles.backgroundColor){const o=uE(e,"fontSize");lm(s,r=>o(r)&&er(r),fE(e,"backgroundColor",po(t.styles.backgroundColor,n)))}},UF=(e,t,n,s)=>{if(xt(t)&&(t.inline==="sub"||t.inline==="sup")){const o=uE(e,"fontSize");lm(s,a=>o(a)&&er(a),fE(e,"fontSize",""));const r=ve(e.select(t.inline==="sup"?"sub":"sup",s),er);e.remove(r,!0)}},zF=(e,t,n,s)=>{SE(t,o=>{xt(o)&&SE(e.dom.select(o.inline,s),r=>{im(r)&&Si(e,o,n,r,o.exact?r:null)}),TF(e.dom,o,s)})},HF=(e,t,n,s,o)=>{const r=o.parentNode;Ns(e,r,n,s)&&Si(e,t,s,o)||t.merge_with_parents&&r&&e.dom.getParent(r,a=>Ns(e,a,n,s)?(Si(e,t,s,o),!0):!1)},ac=V.each,WF=(e,t,n,s)=>{if(gR(e)&&xt(t)&&n.parentNode){const o=Jh(e.schema),r=rF(S.fromDom(n),a=>Gn(a.dom));return xr(o,s)&&bt(S.fromDom(n.parentNode),!1)&&!r}else return!1},wE=(e,t,n,s)=>{if(ac(n.styles,(o,r)=>{e.setStyle(t,r,po(o,s))}),n.styles){const o=e.getAttrib(t,"style");o&&e.setAttrib(t,"data-mce-style",o)}},VF=(e,t,n,s)=>{const o=e.formatter.get(t),r=o[0],a=!s&&e.selection.isCollapsed(),i=e.dom,l=e.selection,c=(E,g=r)=>{Ie(g.onformat)&&g.onformat(E,g,n,s),wE(i,E,g,n),ac(g.attributes,(y,w)=>{i.setAttrib(E,w,po(y,n))}),ac(g.classes,y=>{const w=po(y,n);i.hasClass(E,w)||i.addClass(E,w)})},f=(E,g)=>{let y=!1;return ac(E,w=>Bn(w)?i.getContentEditable(g)==="false"&&!w.ceFalseOverride||K(w.collapsed)&&w.collapsed!==a?!0:i.is(g,w.selector)&&!Gn(g)?(c(g,w),y=!0,!1):!0:!1),y},u=E=>{if(le(E)){const g=i.create(E);return c(g),g}else return null},d=(E,g,y)=>{const w=[];let _=!0;const x=r.inline||r.block,N=u(x),I=D=>fP(r)&&Ns(e,D,t,n),oe=(D,O,q)=>{const j=dP(r)&&td(e.schema,D)&&Yr(e,O,x);return q&&j},L=(D,O,q,j)=>{const J=D.nodeName.toLowerCase(),ge=Yr(e,x,J)&&Yr(e,O,x),me=!y&&z(D)&&gl(D.data),Ne=Gn(D),Re=!xt(r)||!E.isBlock(D);return(q||j)&&ge&&!me&&!Ne&&Re};fi(E,g,D=>{let O;const q=j=>{let J=!1,ge=_,me=!1;const Ne=j.parentNode,Re=Ne.nodeName.toLowerCase(),nt=E.getContentEditable(j);K(nt)&&(ge=_,_=nt==="true",J=!0,me=zv(e,j));const Bt=_&&!J;if(ft(j)&&!WF(e,r,j,Re)){O=null,ks(r)&&E.remove(j);return}if(I(j)){O=null;return}if(oe(j,Re,Bt)){const vt=E.rename(j,x);c(vt),w.push(vt),O=null;return}if(Bn(r)){let vt=f(o,j);if(!vt&&K(Ne)&&ad(r)&&(vt=f(o,Ne)),!xt(r)||vt){O=null;return}}K(N)&&L(j,Re,Bt,me)?(O||(O=E.clone(N,!1),Ne.insertBefore(O,j),w.push(O)),me&&J&&(_=ge),O.appendChild(j)):(O=null,$(sn(j.childNodes),q),J&&(_=ge),O=null)};$(D,q)}),r.links===!0&&$(w,D=>{const O=q=>{q.nodeName==="A"&&c(q,r),$(sn(q.childNodes),O)};O(D)}),$(w,D=>{const O=J=>{let ge=0;return $(J.childNodes,me=>{!iP(me)&&!On(me)&&ge++}),ge},q=J=>wt(J.childNodes,ed).filter(me=>E.getContentEditable(me)!=="false"&&oc(E,me,r)).map(me=>{const Ne=E.clone(me,!1);return c(Ne),E.replace(Ne,J,!0),E.remove(me,!0),Ne}).getOr(J),j=O(D);if((w.length>1||!E.isBlock(D))&&j===0){E.remove(D,!0);return}(xt(r)||ks(r)&&r.wrapper)&&(!r.exact&&j===1&&(D=q(D)),zF(e,o,n,D),HF(e,r,t,n,D),MF(E,r,n,D),$F(E,r,n,D),UF(E,r,n,D),cE(e,r,n,D))})},b=ui(s)?s:l.getNode();if(i.getContentEditable(b)==="false"&&!zv(e,b)){s=b,f(o,s),sC(e,t,s,n);return}if(r){if(s)if(ui(s)){if(!f(o,s)){const E=i.createRng();E.setStartBefore(s),E.setEndAfter(s),d(i,tr(i,E,o),!0)}}else d(i,s,!0);else!a||!xt(r)||Gr(e).length?(l.setRng(Yd(l.getRng())),Mv(e,()=>{Jf(e,(E,g)=>{const y=g?E:tr(i,E,o);d(i,y,!1)})},yt),e.nodeChanged()):hF(e,t,n),nE(e.formatter,t).each(E=>{$(NF(e.selection),g=>wE(i,g,E,n))});wF(t,e)}sC(e,t,s,n)},_E=(e,t,n,s)=>{(s||e.selection.isEditable())&&VF(e,t,n,s)},xE=e=>ye(e,"vars"),qF=(e,t)=>{e.set({}),t.on("NodeChange",n=>{AE(t,n.element,e.get())}),t.on("FormatApply FormatRemove",n=>{const s=m.from(n.node).map(o=>ui(o)?o:o.startContainer).bind(o=>Z(o)?m.some(o):m.from(o.parentElement)).getOrThunk(()=>kE(t));AE(t,s,e.get())})},kE=e=>e.selection.getStart(),NE=(e,t,n,s,o)=>dg(t,i=>{const l=e.formatter.matchNode(i,n,o??{},s);return!St(l)},i=>Vy(e,i,n)?!0:s?!1:K(e.formatter.matchNode(i,n,o,!0))),TE=(e,t)=>{const n=t??kE(e);return ve(Hl(e.dom,n),s=>Z(s)&&!Uo(s))},AE=(e,t,n)=>{const s=TE(e,t);Ye(n,(o,r)=>{const a=i=>{const l=NE(e,s,r,i.similar,xE(i)?i.vars:void 0),c=l.isSome();if(i.state.get()!==c){i.state.set(c);const f=l.getOr(t);xE(i)?i.callback(c,{node:f,format:r,parents:s}):$(i.callbacks,u=>u(c,{node:f,format:r,parents:s}))}};$([o.withSimilar,o.withoutSimilar],a),$(o.withVars,a)})},jF=(e,t,n,s,o,r)=>{const a=t.get();$(n.split(","),i=>{const l=Qe(a,i).getOrThunk(()=>{const f={withSimilar:{state:At(!1),similar:!0,callbacks:[]},withoutSimilar:{state:At(!1),similar:!1,callbacks:[]},withVars:[]};return a[i]=f,f}),c=()=>{const f=TE(e);return NE(e,f,i,o,r).isSome()};if(St(r)){const f=o?l.withSimilar:l.withoutSimilar;f.callbacks.push(s),f.callbacks.length===1&&f.state.set(c())}else l.withVars.push({state:At(c()),similar:o,vars:r,callback:s})}),t.set(a)},KF=(e,t,n)=>{const s=e.get();$(t.split(","),o=>Qe(s,o).each(r=>{s[o]={withSimilar:{...r.withSimilar,callbacks:ve(r.withSimilar.callbacks,a=>a!==n)},withoutSimilar:{...r.withoutSimilar,callbacks:ve(r.withoutSimilar.callbacks,a=>a!==n)},withVars:ve(r.withVars,a=>a.callback!==n)}})),e.set(s)},GF=(e,t,n,s,o,r)=>(jF(e,t,n,s,o,r),{unbind:()=>KF(t,n,s)}),YF=(e,t,n,s)=>{const o=e.formatter.get(t);o&&(nm(e,t,n,s)&&(!("toggle"in o[0])||o[0].toggle)?EE(e,t,n,s):_E(e,t,n,s))},DE=V.explode,RE=()=>{const e={};return{addFilter:(o,r)=>{$(DE(o),a=>{ye(e,a)||(e[a]={name:a,callbacks:[]}),e[a].callbacks.push(r)})},getFilters:()=>Pu(e),removeFilter:(o,r)=>{$(DE(o),a=>{if(ye(e,a))if(K(r)){const i=e[a],l=ve(i.callbacks,c=>c!==r);l.length>0?i.callbacks=l:delete e[a]}else delete e[a]})}}},XF=(e,t)=>{$(t,n=>{e.attr(n,null)})},ZF=(e,t,n)=>{e.addNodeFilter("font",s=>{$(s,o=>{const r=t.parse(o.attr("style")),a=o.attr("color"),i=o.attr("face"),l=o.attr("size");a&&(r.color=a),i&&(r["font-family"]=i),l&&tl(l).each(c=>{r["font-size"]=n[c-1]}),o.name="span",o.attr("style",t.serialize(r)),XF(o,["color","face","size"])})})},QF=(e,t,n)=>{e.addNodeFilter("strike",s=>{const o=t.type!=="html4";$(s,r=>{if(o)r.name="s";else{const a=n.parse(r.attr("style"));a["text-decoration"]="line-through",r.name="span",r.attr("style",n.serialize(a))}})})},JF=(e,t,n)=>{var s;const o=vf();t.convert_fonts_to_spans&&ZF(e,o,V.explode((s=t.font_size_legacy_values)!==null&&s!==void 0?s:"")),QF(e,n,o)},e$=(e,t,n)=>{t.inline_styles&&JF(e,t,n)},PE=(e,t)=>{e.addNodeFilter("br",(n,s,o)=>{const r=V.extend({},t.getBlockElements()),a=t.getNonEmptyElements(),i=t.getWhitespaceElements();r.body=1;const l=c=>c.name in r&&uA(t,c);for(let c=0,f=n.length;c<f;c++){let u=n[c],d=u.parent;if(d&&r[d.name]&&u===d.lastChild){let b=u.prev;for(;b;){const E=b.name;if(E!=="span"||b.attr("data-mce-type")!=="bookmark"){E==="br"&&(u=null);break}b=b.prev}if(u&&(u.remove(),yi(t,a,i,d))){const E=t.getElementRule(d.name);E&&(E.removeEmpty?d.remove():E.paddEmpty&&jd(o,l,d))}}else{let b=u;for(;d&&d.firstChild===b&&d.lastChild===b&&(b=d,!r[d.name]);)d=d.parent;if(b===d){const E=new cn("#text",3);E.value=Tt,u.replace(E)}}}})},t$=e=>fetch(e).then(t=>t.ok?t.blob():Promise.reject()).catch(()=>Promise.reject({message:`Cannot convert ${e} to Blob. Resource might not exist or is inaccessible.`,uriType:"blob"})),n$=e=>{const t=/([a-z0-9+\/=\s]+)/i.exec(e);return t?t[1]:""},fm=e=>{const[t,...n]=e.split(","),s=n.join(","),o=/data:([^/]+\/[^;]+)(;.+)?/.exec(t);if(o){const r=o[2]===";base64",a=r?n$(s):decodeURIComponent(s);return m.some({type:o[1],data:a,base64Encoded:r})}else return m.none()},OE=(e,t,n=!0)=>{let s=t;if(n)try{s=atob(t)}catch{return m.none()}const o=new Uint8Array(s.length);for(let r=0;r<o.length;r++)o[r]=s.charCodeAt(r);return m.some(new Blob([o],{type:e}))},s$=e=>new Promise((t,n)=>{fm(e).bind(({type:s,data:o,base64Encoded:r})=>OE(s,o,r)).fold(()=>n("Invalid data URI"),t)}),o$=e=>Ft(e,"blob:")?t$(e):Ft(e,"data:")?s$(e):Promise.reject("Unknown URI format"),BE=e=>new Promise((t,n)=>{const s=new FileReader;s.onloadend=()=>{t(s.result)},s.onerror=()=>{var o;n((o=s.error)===null||o===void 0?void 0:o.message)},s.readAsDataURL(e)});let r$=0;const a$=e=>(e||"blobid")+r$++,IE=(e,t,n)=>fm(e).bind(({data:s,type:o,base64Encoded:r})=>{if(t&&!r)return m.none();{const a=r?s:btoa(s);return n(a,o)}}),LE=(e,t,n)=>{const s=e.create(a$(),t,n);return e.add(s),s},FE=(e,t,n=!1)=>IE(t,n,(s,o)=>m.from(e.getByData(s,o)).orThunk(()=>OE(o,s).map(r=>LE(e,r,s)))),i$=(e,t)=>{const n=()=>Promise.reject("Invalid data URI");if(Ft(t,"blob:")){const s=e.getByUri(t);return K(s)?Promise.resolve(s):o$(t).then(o=>BE(o).then(r=>IE(r,!1,a=>m.some(LE(e,o,a))).getOrThunk(n)))}else return Ft(t,"data:")?FE(e,t).fold(n,s=>Promise.resolve(s)):Promise.reject("Unknown image data format")},l$=e=>K(e.attr("data-mce-bogus")),c$=e=>e.attr("src")===Oe.transparentSrc||K(e.attr("data-mce-placeholder")),u$=(e,t)=>{const{blob_cache:n}=t;if(n){const s=o=>{const r=o.attr("src");c$(o)||l$(o)||ut(r)||FE(n,r,!0).each(a=>{o.attr("src",a.blobUri())})};e.addAttributeFilter("src",o=>$(o,s))}},f$=(e,t)=>{const n=e.schema;t.remove_trailing_brs&&PE(e,n),e.addAttributeFilter("href",o=>{let r=o.length;const a=l=>l.split(" ").filter(f=>f.length>0).concat(["noopener"]).sort().join(" "),i=l=>{const c=l?V.trim(l):"";return/\b(noopener)\b/g.test(c)?c:a(c)};if(!t.allow_unsafe_link_target)for(;r--;){const l=o[r];l.name==="a"&&l.attr("target")==="_blank"&&l.attr("rel",i(l.attr("rel")))}}),t.allow_html_in_named_anchor||e.addAttributeFilter("id,name",o=>{let r=o.length,a,i,l,c;for(;r--;)if(c=o[r],c.name==="a"&&c.firstChild&&!c.attr("href"))for(l=c.parent,a=c.lastChild;a&&l;)i=a.prev,l.insert(a,c),a=i}),t.fix_list_elements&&e.addNodeFilter("ul,ol",o=>{let r=o.length,a,i;for(;r--;)if(a=o[r],i=a.parent,i&&(i.name==="ul"||i.name==="ol"))if(a.prev&&a.prev.name==="li")a.prev.append(a);else{const l=new cn("li",1);l.attr("style","list-style-type: none"),a.wrap(l)}});const s=n.getValidClasses();t.validate&&s&&e.addAttributeFilter("class",o=>{var r;let a=o.length;for(;a--;){const i=o[a],l=(r=i.attr("class"))!==null&&r!==void 0?r:"",c=V.explode(l," ");let f="";for(let u=0;u<c.length;u++){const d=c[u];let b=!1,E=s["*"];E&&E[d]&&(b=!0),E=s[i.name],!b&&E&&E[d]&&(b=!0),b&&(f&&(f+=" "),f+=d)}f.length||(f=null),i.attr("class",f)}}),u$(e,t)};function cr(e){"@babel/helpers - typeof";return cr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cr(e)}function dm(e,t){return dm=Object.setPrototypeOf||function(s,o){return s.__proto__=o,s},dm(e,t)}function d$(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function ic(e,t,n){return d$()?ic=Reflect.construct:ic=function(o,r,a){var i=[null];i.push.apply(i,r);var l=Function.bind.apply(o,i),c=new l;return a&&dm(c,a.prototype),c},ic.apply(null,arguments)}function os(e){return m$(e)||p$(e)||g$(e)||h$()}function m$(e){if(Array.isArray(e))return mm(e)}function p$(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function g$(e,t){if(e){if(typeof e=="string")return mm(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return mm(e,t)}}function mm(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function h$(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var b$=Object.hasOwnProperty,$E=Object.setPrototypeOf,v$=Object.isFrozen,C$=Object.getPrototypeOf,y$=Object.getOwnPropertyDescriptor,gn=Object.freeze,Ts=Object.seal,E$=Object.create,ME=typeof Reflect<"u"&&Reflect,lc=ME.apply,pm=ME.construct;lc||(lc=function(t,n,s){return t.apply(n,s)}),gn||(gn=function(t){return t}),Ts||(Ts=function(t){return t}),pm||(pm=function(t,n){return ic(t,os(n))});var S$=rs(Array.prototype.forEach),w$=rs(Array.prototype.pop),wi=rs(Array.prototype.push),cc=rs(String.prototype.toLowerCase),_$=rs(String.prototype.match),yo=rs(String.prototype.replace),x$=rs(String.prototype.indexOf),k$=rs(String.prototype.trim),hn=rs(RegExp.prototype.test),gm=N$(TypeError);function rs(e){return function(t){for(var n=arguments.length,s=new Array(n>1?n-1:0),o=1;o<n;o++)s[o-1]=arguments[o];return lc(e,t,s)}}function N$(e){return function(){for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];return pm(e,n)}}function ze(e,t){$E&&$E(e,null);for(var n=t.length;n--;){var s=t[n];if(typeof s=="string"){var o=cc(s);o!==s&&(v$(t)||(t[n]=o),s=o)}e[s]=!0}return e}function ur(e){var t=E$(null),n;for(n in e)lc(b$,e,[n])&&(t[n]=e[n]);return t}function uc(e,t){for(;e!==null;){var n=y$(e,t);if(n){if(n.get)return rs(n.get);if(typeof n.value=="function")return rs(n.value)}e=C$(e)}function s(o){return console.warn("fallback value for",o),null}return s}var UE=gn(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),hm=gn(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),bm=gn(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),T$=gn(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),vm=gn(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),A$=gn(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),zE=gn(["#text"]),HE=gn(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),Cm=gn(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),WE=gn(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),fc=gn(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),D$=Ts(/\{\{[\w\W]*|[\w\W]*\}\}/gm),R$=Ts(/<%[\w\W]*|[\w\W]*%>/gm),P$=Ts(/^data-[\-\w.\u00B7-\uFFFF]/),O$=Ts(/^aria-[\-\w]+$/),B$=Ts(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),I$=Ts(/^(?:\w+script|data):/i),L$=Ts(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),F$=Ts(/^html$/i),$$=function(){return typeof window>"u"?null:window},M$=function(t,n){if(cr(t)!=="object"||typeof t.createPolicy!="function")return null;var s=null,o="data-tt-policy-suffix";n.currentScript&&n.currentScript.hasAttribute(o)&&(s=n.currentScript.getAttribute(o));var r="dompurify"+(s?"#"+s:"");try{return t.createPolicy(r,{createHTML:function(i){return i}})}catch{return console.warn("TrustedTypes policy "+r+" could not be created."),null}};function VE(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:$$(),t=function(R){return VE(R)};if(t.version="2.3.8",t.removed=[],!e||!e.document||e.document.nodeType!==9)return t.isSupported=!1,t;var n=e.document,s=e.document,o=e.DocumentFragment,r=e.HTMLTemplateElement,a=e.Node,i=e.Element,l=e.NodeFilter,c=e.NamedNodeMap,f=c===void 0?e.NamedNodeMap||e.MozNamedAttrMap:c,u=e.HTMLFormElement,d=e.DOMParser,b=e.trustedTypes,E=i.prototype,g=uc(E,"cloneNode"),y=uc(E,"nextSibling"),w=uc(E,"childNodes"),_=uc(E,"parentNode");if(typeof r=="function"){var x=s.createElement("template");x.content&&x.content.ownerDocument&&(s=x.content.ownerDocument)}var N=M$(b,n),I=N?N.createHTML(""):"",oe=s,L=oe.implementation,D=oe.createNodeIterator,O=oe.createDocumentFragment,q=oe.getElementsByTagName,j=n.importNode,J={};try{J=ur(s).documentMode?s.documentMode:{}}catch{}var ge={};t.isSupported=typeof _=="function"&&L&&typeof L.createHTMLDocument<"u"&&J!==9;var me=D$,Ne=R$,Re=P$,nt=O$,Bt=I$,vt=L$,H=B$,re=null,Te=ze({},[].concat(os(UE),os(hm),os(bm),os(vm),os(zE))),xe=null,ae=ze({},[].concat(os(HE),os(Cm),os(WE),os(fc))),ie=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),U=null,pe=null,_e=!0,Le=!0,je=!1,he=!1,Ae=!1,lt=!1,He=!1,Je=!1,rt=!1,Ge=!1,dt=!0,Mn=!0,It=!1,cs={},wn=null,br=ze({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),vr=null,us=ze({},["audio","video","img","source","image","track"]),Yn=null,pt=ze({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Un="http://www.w3.org/1998/Math/MathML",fs="http://www.w3.org/2000/svg",zn="http://www.w3.org/1999/xhtml",Hn=zn,Ps=!1,Ht,Zs=["application/xhtml+xml","text/html"],Os="text/html",Xn,wo=null,cu=s.createElement("form"),Kp=function(R){return R instanceof RegExp||R instanceof Function},uu=function(R){wo&&wo===R||((!R||cr(R)!=="object")&&(R={}),R=ur(R),re="ALLOWED_TAGS"in R?ze({},R.ALLOWED_TAGS):Te,xe="ALLOWED_ATTR"in R?ze({},R.ALLOWED_ATTR):ae,Yn="ADD_URI_SAFE_ATTR"in R?ze(ur(pt),R.ADD_URI_SAFE_ATTR):pt,vr="ADD_DATA_URI_TAGS"in R?ze(ur(us),R.ADD_DATA_URI_TAGS):us,wn="FORBID_CONTENTS"in R?ze({},R.FORBID_CONTENTS):br,U="FORBID_TAGS"in R?ze({},R.FORBID_TAGS):{},pe="FORBID_ATTR"in R?ze({},R.FORBID_ATTR):{},cs="USE_PROFILES"in R?R.USE_PROFILES:!1,_e=R.ALLOW_ARIA_ATTR!==!1,Le=R.ALLOW_DATA_ATTR!==!1,je=R.ALLOW_UNKNOWN_PROTOCOLS||!1,he=R.SAFE_FOR_TEMPLATES||!1,Ae=R.WHOLE_DOCUMENT||!1,Je=R.RETURN_DOM||!1,rt=R.RETURN_DOM_FRAGMENT||!1,Ge=R.RETURN_TRUSTED_TYPE||!1,He=R.FORCE_BODY||!1,dt=R.SANITIZE_DOM!==!1,Mn=R.KEEP_CONTENT!==!1,It=R.IN_PLACE||!1,H=R.ALLOWED_URI_REGEXP||H,Hn=R.NAMESPACE||zn,R.CUSTOM_ELEMENT_HANDLING&&Kp(R.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(ie.tagNameCheck=R.CUSTOM_ELEMENT_HANDLING.tagNameCheck),R.CUSTOM_ELEMENT_HANDLING&&Kp(R.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(ie.attributeNameCheck=R.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),R.CUSTOM_ELEMENT_HANDLING&&typeof R.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(ie.allowCustomizedBuiltInElements=R.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Ht=Zs.indexOf(R.PARSER_MEDIA_TYPE)===-1?Ht=Os:Ht=R.PARSER_MEDIA_TYPE,Xn=Ht==="application/xhtml+xml"?function(ne){return ne}:cc,he&&(Le=!1),rt&&(Je=!0),cs&&(re=ze({},os(zE)),xe=[],cs.html===!0&&(ze(re,UE),ze(xe,HE)),cs.svg===!0&&(ze(re,hm),ze(xe,Cm),ze(xe,fc)),cs.svgFilters===!0&&(ze(re,bm),ze(xe,Cm),ze(xe,fc)),cs.mathMl===!0&&(ze(re,vm),ze(xe,WE),ze(xe,fc))),R.ADD_TAGS&&(re===Te&&(re=ur(re)),ze(re,R.ADD_TAGS)),R.ADD_ATTR&&(xe===ae&&(xe=ur(xe)),ze(xe,R.ADD_ATTR)),R.ADD_URI_SAFE_ATTR&&ze(Yn,R.ADD_URI_SAFE_ATTR),R.FORBID_CONTENTS&&(wn===br&&(wn=ur(wn)),ze(wn,R.FORBID_CONTENTS)),Mn&&(re["#text"]=!0),Ae&&ze(re,["html","head","body"]),re.table&&(ze(re,["tbody"]),delete U.tbody),gn&&gn(R),wo=R)},Gp=ze({},["mi","mo","mn","ms","mtext"]),Yp=ze({},["foreignobject","desc","title","annotation-xml"]),tk=ze({},["title","style","font","a","script"]),ds=ze({},hm);ze(ds,bm),ze(ds,T$);var ma=ze({},vm);ze(ma,A$);var T=function(R){var ne=_(R);(!ne||!ne.tagName)&&(ne={namespaceURI:zn,tagName:"template"});var be=cc(R.tagName),at=cc(ne.tagName);return R.namespaceURI===fs?ne.namespaceURI===zn?be==="svg":ne.namespaceURI===Un?be==="svg"&&(at==="annotation-xml"||Gp[at]):!!ds[be]:R.namespaceURI===Un?ne.namespaceURI===zn?be==="math":ne.namespaceURI===fs?be==="math"&&Yp[at]:!!ma[be]:R.namespaceURI===zn?ne.namespaceURI===fs&&!Yp[at]||ne.namespaceURI===Un&&!Gp[at]?!1:!ma[be]&&(tk[be]||!ds[be]):!1},A=function(R){wi(t.removed,{element:R});try{R.parentNode.removeChild(R)}catch{try{R.outerHTML=I}catch{R.remove()}}},W=function(R,ne){try{wi(t.removed,{attribute:ne.getAttributeNode(R),from:ne})}catch{wi(t.removed,{attribute:null,from:ne})}if(ne.removeAttribute(R),R==="is"&&!xe[R])if(Je||rt)try{A(ne)}catch{}else try{ne.setAttribute(R,"")}catch{}},F=function(R){var ne,be;if(He)R="<remove></remove>"+R;else{var at=_$(R,/^[\r\n\t ]+/);be=at&&at[0]}Ht==="application/xhtml+xml"&&(R='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+R+"</body></html>");var _n=N?N.createHTML(R):R;if(Hn===zn)try{ne=new d().parseFromString(_n,Ht)}catch{}if(!ne||!ne.documentElement){ne=L.createDocument(Hn,"template",null);try{ne.documentElement.innerHTML=Ps?"":_n}catch{}}var fn=ne.body||ne.documentElement;return R&&be&&fn.insertBefore(s.createTextNode(be),fn.childNodes[0]||null),Hn===zn?q.call(ne,Ae?"html":"body")[0]:Ae?ne.documentElement:fn},fe=function(R){return D.call(R.ownerDocument||R,R,l.SHOW_ELEMENT|l.SHOW_COMMENT|l.SHOW_TEXT,null,!1)},ke=function(R){return R instanceof u&&(typeof R.nodeName!="string"||typeof R.textContent!="string"||typeof R.removeChild!="function"||!(R.attributes instanceof f)||typeof R.removeAttribute!="function"||typeof R.setAttribute!="function"||typeof R.namespaceURI!="string"||typeof R.insertBefore!="function")},Ke=function(R){return cr(a)==="object"?R instanceof a:R&&cr(R)==="object"&&typeof R.nodeType=="number"&&typeof R.nodeName=="string"},kt=function(R,ne,be){ge[R]&&S$(ge[R],function(at){at.call(t,ne,be,wo)})},Rt=function(R){var ne;if(kt("beforeSanitizeElements",R,null),ke(R)||hn(/[\u0080-\uFFFF]/,R.nodeName))return A(R),!0;var be=Xn(R.nodeName);if(kt("uponSanitizeElement",R,{tagName:be,allowedTags:re}),R.hasChildNodes()&&!Ke(R.firstElementChild)&&(!Ke(R.content)||!Ke(R.content.firstElementChild))&&hn(/<[/\w]/g,R.innerHTML)&&hn(/<[/\w]/g,R.textContent)||be==="select"&&hn(/<template/i,R.innerHTML))return A(R),!0;if(!re[be]||U[be]){if(!U[be]&&Wi(be)&&(ie.tagNameCheck instanceof RegExp&&hn(ie.tagNameCheck,be)||ie.tagNameCheck instanceof Function&&ie.tagNameCheck(be)))return!1;if(Mn&&!wn[be]){var at=_(R)||R.parentNode,_n=w(R)||R.childNodes;if(_n&&at)for(var fn=_n.length,en=fn-1;en>=0;--en)at.insertBefore(g(_n[en],!0),y(R))}return A(R),!0}return R instanceof i&&!T(R)||(be==="noscript"||be==="noembed")&&hn(/<\/no(script|embed)/i,R.innerHTML)?(A(R),!0):(he&&R.nodeType===3&&(ne=R.textContent,ne=yo(ne,me," "),ne=yo(ne,Ne," "),R.textContent!==ne&&(wi(t.removed,{element:R.cloneNode()}),R.textContent=ne)),kt("afterSanitizeElements",R,null),!1)},Hi=function(R,ne,be){if(dt&&(ne==="id"||ne==="name")&&(be in s||be in cu))return!1;if(!(Le&&!pe[ne]&&hn(Re,ne))){if(!(_e&&hn(nt,ne))){if(!xe[ne]||pe[ne]){if(!(Wi(R)&&(ie.tagNameCheck instanceof RegExp&&hn(ie.tagNameCheck,R)||ie.tagNameCheck instanceof Function&&ie.tagNameCheck(R))&&(ie.attributeNameCheck instanceof RegExp&&hn(ie.attributeNameCheck,ne)||ie.attributeNameCheck instanceof Function&&ie.attributeNameCheck(ne))||ne==="is"&&ie.allowCustomizedBuiltInElements&&(ie.tagNameCheck instanceof RegExp&&hn(ie.tagNameCheck,be)||ie.tagNameCheck instanceof Function&&ie.tagNameCheck(be))))return!1}else if(!Yn[ne]){if(!hn(H,yo(be,vt,""))){if(!((ne==="src"||ne==="xlink:href"||ne==="href")&&R!=="script"&&x$(be,"data:")===0&&vr[R])){if(!(je&&!hn(Bt,yo(be,vt,"")))){if(be)return!1}}}}}}return!0},Wi=function(R){return R.indexOf("-")>0},nk=function(R){var ne,be,at,_n;kt("beforeSanitizeAttributes",R,null);var fn=R.attributes;if(fn){var en={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:xe};for(_n=fn.length;_n--;){ne=fn[_n];var fu=ne,tn=fu.name,sk=fu.namespaceURI;be=tn==="value"?ne.value:k$(ne.value),at=Xn(tn);var O4=be;if(en.attrName=at,en.attrValue=be,en.keepAttr=!0,en.forceKeepAttr=void 0,kt("uponSanitizeAttribute",R,en),be=en.attrValue,!en.forceKeepAttr){if(!en.keepAttr){W(tn,R);continue}if(hn(/\/>/i,be)){W(tn,R);continue}he&&(be=yo(be,me," "),be=yo(be,Ne," "));var B4=Xn(R.nodeName);if(!Hi(B4,at,be)){W(tn,R);continue}if(be!==O4)try{sk?R.setAttributeNS(sk,tn,be):R.setAttribute(tn,be)}catch{W(tn,R)}}}kt("afterSanitizeAttributes",R,null)}},P4=function Ee(R){var ne,be=fe(R);for(kt("beforeSanitizeShadowDOM",R,null);ne=be.nextNode();)kt("uponSanitizeShadowNode",ne,null),!Rt(ne)&&(ne.content instanceof o&&Ee(ne.content),nk(ne));kt("afterSanitizeShadowDOM",R,null)};return t.sanitize=function(Ee,R){var ne,be,at,_n,fn;if(Ps=!Ee,Ps&&(Ee="<!-->"),typeof Ee!="string"&&!Ke(Ee)){if(typeof Ee.toString!="function")throw gm("toString is not a function");if(Ee=Ee.toString(),typeof Ee!="string")throw gm("dirty is not a string, aborting")}if(!t.isSupported){if(cr(e.toStaticHTML)==="object"||typeof e.toStaticHTML=="function"){if(typeof Ee=="string")return e.toStaticHTML(Ee);if(Ke(Ee))return e.toStaticHTML(Ee.outerHTML)}return Ee}if(lt||uu(R),t.removed=[],typeof Ee=="string"&&(It=!1),It){if(Ee.nodeName){var en=Xn(Ee.nodeName);if(!re[en]||U[en])throw gm("root node is forbidden and cannot be sanitized in-place")}}else if(Ee instanceof a)ne=F("<!---->"),be=ne.ownerDocument.importNode(Ee,!0),be.nodeType===1&&be.nodeName==="BODY"||be.nodeName==="HTML"?ne=be:ne.appendChild(be);else{if(!Je&&!he&&!Ae&&Ee.indexOf("<")===-1)return N&&Ge?N.createHTML(Ee):Ee;if(ne=F(Ee),!ne)return Je?null:Ge?I:""}ne&&He&&A(ne.firstChild);for(var fu=fe(It?Ee:ne);at=fu.nextNode();)at.nodeType===3&&at===_n||Rt(at)||(at.content instanceof o&&P4(at.content),nk(at),_n=at);if(_n=null,It)return Ee;if(Je){if(rt)for(fn=O.call(ne.ownerDocument);ne.firstChild;)fn.appendChild(ne.firstChild);else fn=ne;return xe.shadowroot&&(fn=j.call(n,fn,!0)),fn}var tn=Ae?ne.outerHTML:ne.innerHTML;return Ae&&re["!doctype"]&&ne.ownerDocument&&ne.ownerDocument.doctype&&ne.ownerDocument.doctype.name&&hn(F$,ne.ownerDocument.doctype.name)&&(tn="<!DOCTYPE "+ne.ownerDocument.doctype.name+`>
`+tn),he&&(tn=yo(tn,me," "),tn=yo(tn,Ne," ")),N&&Ge?N.createHTML(tn):tn},t.setConfig=function(Ee){uu(Ee),lt=!0},t.clearConfig=function(){wo=null,lt=!1},t.isValidAttribute=function(Ee,R,ne){wo||uu({});var be=Xn(Ee),at=Xn(R);return Hi(be,at,ne)},t.addHook=function(Ee,R){typeof R=="function"&&(ge[Ee]=ge[Ee]||[],wi(ge[Ee],R))},t.removeHook=function(Ee){if(ge[Ee])return w$(ge[Ee])},t.removeHooks=function(Ee){ge[Ee]&&(ge[Ee]=[])},t.removeAllHooks=function(){ge={}},t}var U$=VE();const qE=V.each,z$=V.trim,H$=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],W$={ftp:21,http:80,https:443,mailto:25},V$=["img","video"],q$=(e,t)=>K(e)?!e:K(t)?!We(V$,t):!0,j$=e=>{try{return decodeURIComponent(e)}catch{return unescape(e)}},jE=(e,t,n)=>{const s=j$(t).replace(/\s/g,"");return e.allow_script_urls?!1:/((java|vb)script|mhtml):/i.test(s)?!0:e.allow_html_data_urls?!1:/^data:image\//i.test(s)?q$(e.allow_svg_data_urls,n)&&/^data:image\/svg\+xml/i.test(s):/^data:/i.test(s)};class as{static parseDataUri(t){let n;const s=decodeURIComponent(t).split(","),o=/data:([^;]+)/.exec(s[0]);return o&&(n=o[1]),{type:n,data:s[1]}}static isDomSafe(t,n,s={}){if(s.allow_script_urls)return!0;{const o=io.decode(t).replace(/[\s\u0000-\u001F]+/g,"");return!jE(s,o,n)}}static getDocumentBaseUrl(t){var n;let s;return t.protocol.indexOf("http")!==0&&t.protocol!=="file:"?s=(n=t.href)!==null&&n!==void 0?n:"":s=t.protocol+"//"+t.host+t.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(s)&&(s=s.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(s)||(s+="/")),s}constructor(t,n={}){this.path="",this.directory="",t=z$(t),this.settings=n;const s=n.base_uri,o=this;if(/^([\w\-]+):([^\/]{2})/i.test(t)||/^\s*#/.test(t)){o.source=t;return}const r=t.indexOf("//")===0;if(t.indexOf("/")===0&&!r&&(t=(s&&s.protocol||"http")+"://mce_host"+t),!/^[\w\-]*:?\/\//.test(t)){const i=s?s.path:new as(document.location.href).directory;if((s==null?void 0:s.protocol)==="")t="//mce_host"+o.toAbsPath(i,t);else{const l=/([^#?]*)([#?]?.*)/.exec(t);l&&(t=(s&&s.protocol||"http")+"://mce_host"+o.toAbsPath(i,l[1])+l[2])}}t=t.replace(/@@/g,"(mce_at)");const a=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?(\[[a-zA-Z0-9:.%]+\]|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(t);a&&qE(H$,(i,l)=>{let c=a[l];c&&(c=c.replace(/\(mce_at\)/g,"@@")),o[i]=c}),s&&(o.protocol||(o.protocol=s.protocol),o.userInfo||(o.userInfo=s.userInfo),!o.port&&o.host==="mce_host"&&(o.port=s.port),(!o.host||o.host==="mce_host")&&(o.host=s.host),o.source=""),r&&(o.protocol="")}setPath(t){const n=/^(.*?)\/?(\w+)?$/.exec(t);n&&(this.path=n[0],this.directory=n[1],this.file=n[2]),this.source="",this.getURI()}toRelative(t){if(t==="./")return t;const n=new as(t,{base_uri:this});if(n.host!=="mce_host"&&this.host!==n.host&&n.host||this.port!==n.port||this.protocol!==n.protocol&&n.protocol!=="")return n.getURI();const s=this.getURI(),o=n.getURI();if(s===o||s.charAt(s.length-1)==="/"&&s.substr(0,s.length-1)===o)return s;let r=this.toRelPath(this.path,n.path);return n.query&&(r+="?"+n.query),n.anchor&&(r+="#"+n.anchor),r}toAbsolute(t,n){const s=new as(t,{base_uri:this});return s.getURI(n&&this.isSameOrigin(s))}isSameOrigin(t){if(this.host==t.host&&this.protocol==t.protocol){if(this.port==t.port)return!0;const n=this.protocol?W$[this.protocol]:null;if(n&&(this.port||n)==(t.port||n))return!0}return!1}toRelPath(t,n){let s=0,o="",r,a;const i=t.substring(0,t.lastIndexOf("/")).split("/"),l=n.split("/");if(i.length>=l.length){for(r=0,a=i.length;r<a;r++)if(r>=l.length||i[r]!==l[r]){s=r+1;break}}if(i.length<l.length){for(r=0,a=l.length;r<a;r++)if(r>=i.length||i[r]!==l[r]){s=r+1;break}}if(s===1)return n;for(r=0,a=i.length-(s-1);r<a;r++)o+="../";for(r=s-1,a=l.length;r<a;r++)r!==s-1?o+="/"+l[r]:o+=l[r];return o}toAbsPath(t,n){let s=0;const o=/\/$/.test(n)?"/":"",r=t.split("/"),a=n.split("/"),i=[];qE(r,u=>{u&&i.push(u)});const l=[];for(let u=a.length-1;u>=0;u--)if(!(a[u].length===0||a[u]===".")){if(a[u]===".."){s++;continue}if(s>0){s--;continue}l.push(a[u])}const c=i.length-s;let f;return c<=0?f=_a(l).join("/"):f=i.slice(0,c).join("/")+"/"+_a(l).join("/"),f.indexOf("/")!==0&&(f="/"+f),o&&f.lastIndexOf("/")!==f.length-1&&(f+=o),f}getURI(t=!1){let n;return(!this.source||t)&&(n="",t||(this.protocol?n+=this.protocol+"://":n+="//",this.userInfo&&(n+=this.userInfo+"@"),this.host&&(n+=this.host),this.port&&(n+=":"+this.port)),this.path&&(n+=this.path),this.query&&(n+="?"+this.query),this.anchor&&(n+="#"+this.anchor),this.source=n),this.source}}const K$=V.makeMap("src,href,data,background,action,formaction,poster,xlink:href"),ym="data-mce-type";let KE=0;const GE=(e,t,n,s)=>{var o,r,a,i;const l=t.validate,c=n.getSpecialElements();e.nodeType===qg&&!t.allow_conditional_comments&&/^\[if/i.test((o=e.nodeValue)!==null&&o!==void 0?o:"")&&(e.nodeValue=" "+e.nodeValue);const f=(r=s==null?void 0:s.tagName)!==null&&r!==void 0?r:e.nodeName.toLowerCase();if(e.nodeType!==Aa||f==="body")return;const u=S.fromDom(e),d=sl(u,ym),b=An(u,"data-mce-bogus");if(!d&&le(b)){b==="all"?tt(u):Ws(u);return}const E=n.getElementRule(f);if(l&&!E){ye(c,f)?tt(u):Ws(u);return}else K(s)&&(s.allowedTags[f]=!0);if(l&&E&&!d){if($((a=E.attributesForced)!==null&&a!==void 0?a:[],g=>{Pt(u,g.name,g.value==="{$uid}"?`mce_${KE++}`:g.value)}),$((i=E.attributesDefault)!==null&&i!==void 0?i:[],g=>{sl(u,g.name)||Pt(u,g.name,g.value==="{$uid}"?`mce_${KE++}`:g.value)}),E.attributesRequired&&!gt(E.attributesRequired,g=>sl(u,g))){Ws(u);return}if(E.removeEmptyAttrs&&SN(u)){Ws(u);return}E.outputName&&E.outputName!==f&&pb(u,E.outputName)}},YE=(e,t,n,s,o)=>!(s in K$&&jE(e,o,n))&&(!e.validate||t.isValid(n,s)||Ft(s,"data-")||Ft(s,"aria-")),XE=(e,t)=>e.hasAttribute(ym)&&(t==="id"||t==="class"||t==="style"),ZE=(e,t)=>e in t.getBoolAttrs(),G$=(e,t,n)=>{const{attributes:s}=e;for(let o=s.length-1;o>=0;o--){const r=s[o],a=r.name,i=r.value;!YE(t,n,e.tagName.toLowerCase(),a,i)&&!XE(e,a)?e.removeAttribute(a):ZE(a,n)&&e.setAttribute(a,a)}},Y$=(e,t)=>{const n=U$();return n.addHook("uponSanitizeElement",(s,o)=>{GE(s,e,t,o)}),n.addHook("uponSanitizeAttribute",(s,o)=>{const r=s.tagName.toLowerCase(),{attrName:a,attrValue:i}=o;o.keepAttr=YE(e,t,r,a,i),o.keepAttr?(o.allowedAttributes[a]=!0,ZE(a,t)&&(o.attrValue=a),e.allow_svg_data_urls&&Ft(i,"data:image/svg+xml")&&(o.forceKeepAttr=!0)):XE(s,a)&&(o.forceKeepAttr=!0)}),n},X$=(e,t)=>{const s={...{IN_PLACE:!0,ALLOW_UNKNOWN_PROTOCOLS:!0,ALLOWED_TAGS:["#comment","#cdata-section","body"],ALLOWED_ATTR:[]}};return s.PARSER_MEDIA_TYPE=t,e.allow_script_urls?s.ALLOWED_URI_REGEXP=/.*/:e.allow_html_data_urls&&(s.ALLOWED_URI_REGEXP=/^(?!(\w+script|mhtml):)/i),s},Z$=(e,t)=>{if(e.sanitize){const n=Y$(e,t);return(s,o)=>{n.sanitize(s,X$(e,o)),n.removed=[]}}else return(n,s)=>{const o=document.createNodeIterator(n,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT|NodeFilter.SHOW_TEXT);let r;for(;r=o.nextNode();)GE(r,e,t),Z(r)&&G$(r,e,t)}},QE=V.makeMap,JE=V.extend,eS=(e,t,n)=>{const s=e.name,o=s in n&&s!=="title"&&s!=="textarea",r=t.childNodes;for(let a=0,i=r.length;a<i;a++){const l=r[a],c=new cn(l.nodeName.toLowerCase(),l.nodeType);if(Z(l)){const f=l.attributes;for(let u=0,d=f.length;u<d;u++){const b=f[u];c.attr(b.name,b.value)}}else z(l)?(c.value=l.data,o&&(c.raw=!0)):(so(l)||cT(l)||uT(l))&&(c.value=l.data);eS(c,l,n),e.append(c)}},Q$=(e,t,n)=>{const s=[];for(let o=e,r=o;o;r=o,o=o.walk()){const a=o;$(t,i=>i(a)),ut(a.parent)&&a!==e?o=r:s.push(a)}for(let o=s.length-1;o>=0;o--){const r=s[o];$(n,a=>a(r))}},J$=(e,t,n,s)=>{const o=n.validate,r=t.getNonEmptyElements(),a=t.getWhitespaceElements(),i=JE(QE("script,style,head,html,body,title,meta,param"),t.getBlockElements()),l=Jh(t),c=/[ \t\r\n]+/g,f=/^[ \t\r\n]+/,u=/[ \t\r\n]+$/,d=_=>{let x=_.parent;for(;K(x);){if(x.name in a)return!0;x=x.parent}return!1},b=_=>{let x=_;for(;K(x);){if(x.name in l)return yi(t,r,a,x);x=x.parent}return!1},E=_=>_.name in i||zh(t,_),g=(_,x)=>{const N=x?_.prev:_.next;return K(N)||ut(_.parent)?!1:E(_.parent)&&(_.parent!==e||s.isRootContent===!0)};return[_=>{var x;if(_.type===3&&!d(_)){let N=(x=_.value)!==null&&x!==void 0?x:"";N=N.replace(c," "),(gL(_.prev,E)||g(_,!0))&&(N=N.replace(f,"")),N.length===0?_.remove():_.value=N}},_=>{var x;if(_.type===1){const N=t.getElementRule(_.name);if(o&&N){const I=yi(t,r,a,_);N.paddInEmptyBlock&&I&&b(_)?jd(s,E,_):N.removeEmpty&&I?E(_)?_.remove():_.unwrap():N.paddEmpty&&(I||mL(_))&&jd(s,E,_)}}else if(_.type===3&&!d(_)){let N=(x=_.value)!==null&&x!==void 0?x:"";(_.next&&E(_.next)||g(_,!1))&&(N=N.replace(u,"")),N.length===0?_.remove():_.value=N}}]},eM=(e,t)=>{var n;const s=(n=t.forced_root_block)!==null&&n!==void 0?n:e.forced_root_block;return s===!1?"":s===!0?"p":s},ea=(e={},t=lo())=>{const n=RE(),s=RE(),o={validate:!0,root_name:"body",sanitize:!0,...e},r=new DOMParser,a=Z$(o,t),i=(x,N,I="html")=>{const oe=I==="xhtml"?"application/xhtml+xml":"text/html",L=ye(t.getSpecialElements(),N.toLowerCase()),D=L?`<${N}>${x}</${N}>`:x,O=I==="xhtml"?`<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>${D}</body></html>`:`<body>${D}</body>`,q=r.parseFromString(O,oe).body;return a(q,oe),L?q.firstChild:q},l=n.addFilter,c=n.getFilters,f=n.removeFilter,u=s.addFilter,d=s.getFilters,b=s.removeFilter,E=(x,N)=>{zy(t,x)&&N.push(x)},g=(x,N)=>{const I=le(N.attr(ym)),oe=N.type===1&&!ye(x,N.name)&&!zh(t,N);return N.type===3||oe&&!I},y=(x,N)=>{const I=JE(QE("script,style,head,html,body,title,meta,param"),t.getBlockElements()),oe=/^[ \t\r\n]+/,L=/[ \t\r\n]+$/;let D=x.firstChild,O=null;const q=j=>{var J,ge;j&&(D=j.firstChild,D&&D.type===3&&(D.value=(J=D.value)===null||J===void 0?void 0:J.replace(oe,"")),D=j.lastChild,D&&D.type===3&&(D.value=(ge=D.value)===null||ge===void 0?void 0:ge.replace(L,"")))};if(t.isValidChild(x.name,N.toLowerCase())){for(;D;){const j=D.next;g(I,D)?(O||(O=new cn(N,1),O.attr(o.forced_root_block_attrs),x.insert(O,D)),O.append(D)):(q(O),O=null),D=j}q(O)}},_={schema:t,addAttributeFilter:u,getAttributeFilters:d,removeAttributeFilter:b,addNodeFilter:l,getNodeFilters:c,removeNodeFilter:f,parse:(x,N={})=>{var I;const oe=o.validate,L=(I=N.context)!==null&&I!==void 0?I:o.root_name,D=i(x,L,N.format);uf(t,D);const O=new cn(L,11);eS(O,D,t.getSpecialElements()),D.innerHTML="";const[q,j]=J$(O,t,o,N),J=[],ge=oe?nt=>E(nt,J):Se,me={nodes:{},attributes:{}},Ne=nt=>Fy(c(),d(),nt,me);if(Q$(O,[q,Ne],[j,ge]),J.reverse(),oe&&J.length>0)if(N.context){const{pass:nt,fail:Bt}=Ea(J,vt=>vt.parent===O);Gd(Bt,t,O,Ne),N.invalid=nt.length>0}else Gd(J,t,O,Ne);const Re=eM(o,N);return Re&&(O.name==="body"||N.isRootContent)&&y(O,Re),N.invalid||$y(me,N),O}};return f$(_,o),e$(_,o,t),_},tM=e=>sc(e)?go({validate:!1}).serialize(e):e,tS=(e,t,n)=>{const s=tM(e),o=t(s);if(o.isDefaultPrevented())return o;if(sc(e))if(o.content!==s){const r=ea({validate:!1,forced_root_block:!1,sanitize:n}).parse(o.content,{context:e.name});return{...o,content:r}}else return{...o,content:e};else return o},nS=(e,t)=>{if(t.no_events)return rn.value(t);{const n=FP(e,t);return n.isDefaultPrevented()?rn.error(aC(e,{content:"",...n}).content):rn.value(n)}},sS=(e,t,n)=>n.no_events?t:tS(t,o=>aC(e,{...n,content:o}),$f(e)).content,Em=(e,t)=>{if(t.no_events)return rn.value(t);{const n=tS(t.content,s=>LP(e,{...t,content:s}),$f(e));return n.isDefaultPrevented()?(rC(e,n),rn.error(void 0)):rn.value(n)}},Sm=(e,t,n)=>{n.no_events||rC(e,{...n,content:t})},wm=(e,t,n)=>({element:e,width:t,rows:n}),oS=(e,t)=>({element:e,cells:t}),nM=(e,t)=>({x:e,y:t}),rS=(e,t)=>Ms(e,t).bind(tl).getOr(1),sM=(e,t,n,s,o)=>{const r=rS(o,"rowspan"),a=rS(o,"colspan"),i=e.rows;for(let l=n;l<n+r;l++){i[l]||(i[l]=oS(mb(s),[]));for(let c=t;c<t+a;c++){const f=i[l].cells;f[c]=l===n&&c===t?o:Ko(o)}}},oM=(e,t,n)=>{const s=e.rows;return!!(s[n]?s[n].cells:[])[t]},rM=(e,t,n)=>{for(;oM(e,t,n);)t++;return t},aS=e=>vn(e,(t,n)=>n.cells.length>t?n.cells.length:t,0),iS=(e,t)=>{const n=e.rows;for(let s=0;s<n.length;s++){const o=n[s].cells;for(let r=0;r<o.length;r++)if(Ue(o[r],t))return m.some(nM(r,s))}return m.none()},lS=(e,t,n,s,o)=>{const r=[],a=e.rows;for(let i=n;i<=o;i++){const l=a[i].cells,c=t<s?l.slice(t,s+1):l.slice(s,t+1);r.push(oS(a[i].element,c))}return r},aM=(e,t,n)=>{const s=t.x,o=t.y,r=n.x,a=n.y,i=o<a?lS(e,s,o,r,a):lS(e,s,a,r,o);return wm(e.element,aS(i),i)},iM=(e,t)=>{const n=Ko(e.element),s=S.fromTag("tbody");return $o(s,t),ht(n,s),n},lM=e=>Fe(e.rows,t=>{const n=Fe(t.cells,o=>{const r=mb(o);return $t(r,"colspan"),$t(r,"rowspan"),r}),s=Ko(t.element);return $o(s,n),s}),cM=e=>{const t=wm(Ko(e),0,[]);return $(jt(e,"tr"),(n,s)=>{$(jt(n,"td,th"),(o,r)=>{sM(t,rM(t,r,s),s,n,o)})}),wm(t.element,aS(t.rows),t.rows)},uM=e=>iM(e,lM(e)),fM=(e,t,n)=>iS(e,t).bind(s=>iS(e,n).map(o=>aM(e,s,o))),dM=e=>wt(e,t=>Xe(t)==="ul"||Xe(t)==="ol"),mM=(e,t)=>wt(e,n=>Xe(n)==="li"&&Zf(n,t)).fold(Y([]),n=>dM(e).map(s=>{const o=S.fromTag(Xe(s)),r=xa(ph(s),(a,i)=>Ft(i,"list-style"));return ol(o,r),[S.fromTag("li"),o]}).getOr([])),pM=(e,t)=>{const n=vn(t,(s,o)=>(ht(o,s),o),e);return t.length>0?ud([n]):n},gM=e=>Ma(e)?qn(e).filter(sf).fold(Y([]),t=>[e,t]):sf(e)?[e]:[],hM=(e,t)=>{const n=S.fromDom(t.commonAncestorContainer),s=Gs(n,e),o=ve(s,TT),r=mM(s,t),a=o.concat(r.length?r:gM(n));return Fe(a,Ko)},cS=()=>ud([]),bM=(e,t)=>pM(S.fromDom(t.cloneContents()),hM(e,t)),vM=(e,t)=>Ba(t,"table",te(Ue,e)),CM=(e,t)=>vM(e,t[0]).bind(n=>{const s=t[0],o=t[t.length-1],r=cM(n);return fM(r,s,o).map(a=>ud([uM(a)]))}).getOrThunk(cS),yM=(e,t)=>t.length>0&&t[0].collapsed?cS():bM(e,t[0]),EM=(e,t)=>{const n=Lv(t,e);return n.length>0?CM(e,n):yM(e,t)},dc=(e,t)=>t>=0&&t<e.length&&Kr(e.charAt(t)),uS=e=>qs(e.innerText),SM=e=>e.map(t=>t.nodeName).getOr("div").toLowerCase(),wM=e=>m.from(e.selection.getRng()).map(t=>{var n;const s=m.from(e.dom.getParent(t.commonAncestorContainer,e.dom.isBlock)),o=e.getBody(),r=SM(s),a=S.fromDom(t.cloneContents());VC(a),qC(a);const i=e.dom.add(o,r,{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},a.dom),l=uS(i),c=qs((n=i.textContent)!==null&&n!==void 0?n:"");if(e.dom.remove(i),dc(c,0)||dc(c,c.length-1)){const f=s.getOr(o),u=uS(f),d=u.indexOf(l);if(d===-1)return l;{const b=dc(u,d-1),E=dc(u,d+l.length);return(b?" ":"")+l+(E?" ":"")}}else return l}).getOr(""),_M=(e,t)=>{const n=e.selection.getRng(),s=e.dom.create("body"),o=e.selection.getSel(),r=wd(e,Yf(o)),a=t.contextual?EM(S.fromDom(e.getBody()),r).dom:n.cloneContents();return a&&s.appendChild(a),e.selection.serializer.serialize(s,t)},xM=(e,t)=>{if(t.format==="text")return wM(e);{const n=_M(e,t);return t.format==="tree"?n:e.selection.isCollapsed()?"":n}},kM=(e,t)=>({...e,format:t,get:!0,selection:!0,getInner:!0}),NM=(e,t,n={})=>{const s=kM(n,t);return nS(e,s).fold(Vt,o=>{const r=xM(e,o);return sS(e,r,o)})},_m=0,fS=1,dS=2,TM=(e,t)=>{const n=e.length+t.length+2,s=new Array(n),o=new Array(n),r=(f,u,d)=>({start:f,end:u,diag:d}),a=(f,u,d,b,E)=>{const g=l(f,u,d,b);if(g===null||g.start===u&&g.diag===u-b||g.end===f&&g.diag===f-d){let y=f,w=d;for(;y<u||w<b;)y<u&&w<b&&e[y]===t[w]?(E.push([_m,e[y]]),++y,++w):u-f>b-d?(E.push([dS,e[y]]),++y):(E.push([fS,t[w]]),++w)}else{a(f,g.start,d,g.start-g.diag,E);for(let y=g.start;y<g.end;++y)E.push([_m,e[y]]);a(g.end,u,g.end-g.diag,b,E)}},i=(f,u,d,b)=>{let E=f;for(;E-u<b&&E<d&&e[E]===t[E-u];)++E;return r(f,E,u)},l=(f,u,d,b)=>{const E=u-f,g=b-d;if(E===0||g===0)return null;const y=E-g,w=g+E,_=(w%2===0?w:w+1)/2;s[1+_]=f,o[1+_]=u+1;let x,N,I,oe,L;for(x=0;x<=_;++x){for(N=-x;N<=x;N+=2){for(I=N+_,N===-x||N!==x&&s[I-1]<s[I+1]?s[I]=s[I+1]:s[I]=s[I-1]+1,oe=s[I],L=oe-f+d-N;oe<u&&L<b&&e[oe]===t[L];)s[I]=++oe,++L;if(y%2!==0&&y-x<=N&&N<=y+x&&o[I-y]<=s[I])return i(o[I-y],N+f-d,u,b)}for(N=y-x;N<=y+x;N+=2){for(I=N+_-y,N===y-x||N!==y+x&&o[I+1]<=o[I-1]?o[I]=o[I+1]-1:o[I]=o[I-1],oe=o[I]-1,L=oe-f+d-N;oe>=f&&L>=d&&e[oe]===t[L];)o[I]=oe--,L--;if(y%2===0&&-x<=N&&N<=x&&o[I]<=s[I+y])return i(o[I],N+f-d,u,b)}}return null},c=[];return a(0,e.length,0,t.length,c),c},mS=e=>Z(e)?e.outerHTML:z(e)?io.encodeRaw(e.data,!1):so(e)?"<!--"+e.data+"-->":"",AM=e=>{let t;const n=document.createElement("div"),s=document.createDocumentFragment();for(e&&(n.innerHTML=e);t=n.firstChild;)s.appendChild(t);return s},DM=(e,t,n)=>{const s=AM(t);if(e.hasChildNodes()&&n<e.childNodes.length){const o=e.childNodes[n];e.insertBefore(s,o)}else e.appendChild(s)},RM=(e,t)=>{if(e.hasChildNodes()&&t<e.childNodes.length){const n=e.childNodes[t];e.removeChild(n)}},PM=(e,t)=>{let n=0;$(e,s=>{s[0]===_m?n++:s[0]===fS?(DM(t,s[1],n),n++):s[0]===dS&&RM(t,n)})},OM=e=>ve(Fe(sn(e.childNodes),mS),t=>t.length>0),BM=(e,t)=>{const n=Fe(sn(t.childNodes),mS);return PM(TM(n,e),t),t},IM=Oo(()=>document.implementation.createHTMLDocument("undo")),LM=e=>e.indexOf("</iframe>")!==-1,FM=e=>({type:"fragmented",fragments:e,content:"",bookmark:null,beforeBookmark:null}),$M=e=>({type:"complete",fragments:null,content:e,bookmark:null,beforeBookmark:null}),mc=e=>{const t=OM(e.getBody()),n=gs(t,o=>{const r=WC(e.serializer,o);return r.length>0?[r]:[]}),s=n.join("");return LM(s)?FM(n):$M(s)},xm=(e,t,n)=>{const s=n?t.beforeBookmark:t.bookmark;t.type==="fragmented"?BM(t.fragments,e.getBody()):e.setContent(t.content,{format:"raw",no_selection:K(s)&&Av(s)?!s.isFakeCaret:!0}),s&&(e.selection.moveToBookmark(s),e.selection.scrollIntoView())},km=e=>e.type==="fragmented"?e.fragments.join(""):e.content,pS=e=>{const t=S.fromTag("body",IM());return al(t,km(e)),$(jt(t,"*[data-mce-bogus]"),Ws),vh(t)},MM=(e,t)=>km(e)===km(t),UM=(e,t)=>pS(e)===pS(t),Nm=(e,t)=>!e||!t?!1:MM(e,t)?!0:UM(e,t),Tm=e=>e.get()===0,pc=(e,t,n)=>{Tm(n)&&(e.typing=t)},gS=(e,t)=>{e.typing&&(pc(e,!1,t),e.add())},zM=e=>{e.typing&&(e.typing=!1,e.add())},HM=(e,t,n)=>{Tm(t)&&n.set(Pf(e.selection))},WM=(e,t,n,s,o,r,a)=>{const i=mc(e),l=V.extend(r||{},i);if(!Tm(s)||e.removed)return null;const c=t.data[n.get()];if(e.dispatch("BeforeAddUndo",{level:l,lastLevel:c,originalEvent:a}).isDefaultPrevented()||c&&Nm(c,l))return null;t.data[n.get()]&&o.get().each(d=>{t.data[n.get()].beforeBookmark=d});const f=SR(e);if(f&&t.data.length>f){for(let d=0;d<t.data.length-1;d++)t.data[d]=t.data[d+1];t.data.length--,n.set(t.data.length)}l.bookmark=Pf(e.selection),n.get()<t.data.length-1&&(t.data.length=n.get()+1),t.data.push(l),n.set(t.data.length-1);const u={level:l,lastLevel:c,originalEvent:a};return n.get()>0?(e.setDirty(!0),e.dispatch("AddUndo",u),e.dispatch("change",u)):e.dispatch("AddUndo",u),l},VM=(e,t,n)=>{t.data=[],n.set(0),t.typing=!1,e.dispatch("ClearUndos")},qM=(e,t,n,s,o)=>{if(t.transact(s)){const r=t.data[n.get()].bookmark,a=t.data[n.get()-1];xm(e,a,!0),t.transact(o)&&(t.data[n.get()-1].beforeBookmark=r)}},jM=(e,t,n)=>{let s;return t.get()<n.length-1&&(t.set(t.get()+1),s=n[t.get()],xm(e,s,!1),e.setDirty(!0),e.dispatch("Redo",{level:s})),s},KM=(e,t,n,s)=>{let o;return t.typing&&(t.add(),t.typing=!1,pc(t,!1,n)),s.get()>0&&(s.set(s.get()-1),o=t.data[s.get()],xm(e,o,!0),e.setDirty(!0),e.dispatch("Undo",{level:o})),o},GM=e=>{e.clear(),e.add()},YM=(e,t,n)=>n.get()>0||t.typing&&t.data[0]&&!Nm(mc(e),t.data[0]),XM=(e,t)=>t.get()<e.data.length-1&&!e.typing,ZM=(e,t,n)=>(gS(e,t),e.beforeChange(),e.ignore(n),e.add()),QM=(e,t)=>{try{e.set(e.get()+1),t()}finally{e.set(e.get()-1)}},JM=(e,t)=>{const n=e.dom,s=K(t)?t:e.getBody();$(n.select("table,a",s),o=>{switch(o.nodeName){case"TABLE":const r=TR(e),a=n.getAttrib(o,"border");(!a||a==="0")&&e.hasVisual?n.addClass(o,r):n.removeClass(o,r);break;case"A":if(!n.getAttrib(o,"href")){const i=n.getAttrib(o,"name")||o.id,l=ov(e);i&&e.hasVisual?n.addClass(o,l):n.removeClass(o,l)}break}}),e.dispatch("VisualAid",{element:t,hasVisual:e.hasVisual})},hS=e=>({init:{bindEvents:Se},undoManager:{beforeChange:(t,n)=>HM(e,t,n),add:(t,n,s,o,r,a)=>WM(e,t,n,s,o,r,a),undo:(t,n,s)=>KM(e,t,n,s),redo:(t,n)=>jM(e,t,n),clear:(t,n)=>VM(e,t,n),reset:t=>GM(t),hasUndo:(t,n)=>YM(e,t,n),hasRedo:(t,n)=>XM(t,n),transact:(t,n,s)=>ZM(t,n,s),ignore:(t,n)=>QM(t,n),extra:(t,n,s,o)=>qM(e,t,n,s,o)},formatter:{match:(t,n,s,o)=>nm(e,t,n,s,o),matchAll:(t,n)=>iF(e,t,n),matchNode:(t,n,s,o)=>Ns(e,t,n,s,o),canApply:t=>cF(e,t),closest:t=>lF(e,t),apply:(t,n,s)=>_E(e,t,n,s),remove:(t,n,s,o)=>EE(e,t,n,s,o),toggle:(t,n,s)=>YF(e,t,n,s),formatChanged:(t,n,s,o,r)=>GF(e,t,n,s,o,r)},editor:{getContent:t=>FB(e,t),setContent:(t,n)=>sF(e,t,n),insertContent:(t,n)=>JL(e,t,n),addVisual:t=>JM(e,t)},selection:{getContent:(t,n)=>NM(e,t,n)},autocompleter:{addDecoration:t=>xB(e,t),removeDecoration:()=>NB(e,S.fromDom(e.getBody()))},raw:{getModel:()=>m.none()}}),eU=e=>{const t=c=>it(c)?c:{},{init:n,undoManager:s,formatter:o,editor:r,selection:a,autocompleter:i,raw:l}=e;return{init:{bindEvents:n.bindEvents},undoManager:{beforeChange:s.beforeChange,add:s.add,undo:s.undo,redo:s.redo,clear:s.clear,reset:s.reset,hasUndo:s.hasUndo,hasRedo:s.hasRedo,transact:(c,f,u)=>s.transact(u),ignore:(c,f)=>s.ignore(f),extra:(c,f,u,d)=>s.extra(u,d)},formatter:{match:(c,f,u,d)=>o.match(c,t(f),d),matchAll:o.matchAll,matchNode:o.matchNode,canApply:c=>o.canApply(c),closest:c=>o.closest(c),apply:(c,f,u)=>o.apply(c,t(f)),remove:(c,f,u,d)=>o.remove(c,t(f)),toggle:(c,f,u)=>o.toggle(c,t(f)),formatChanged:(c,f,u,d,b)=>o.formatChanged(f,u,d,b)},editor:{getContent:c=>r.getContent(c),setContent:(c,f)=>({content:r.setContent(c,f),html:""}),insertContent:(c,f)=>(r.insertContent(c),""),addVisual:r.addVisual},selection:{getContent:(c,f)=>a.getContent(f)},autocompleter:{addDecoration:i.addDecoration,removeDecoration:i.removeDecoration},raw:{getModel:()=>m.some(l.getRawModel())}}},tU=()=>{const e=Y(null),t=Y("");return{init:{bindEvents:Se},undoManager:{beforeChange:Se,add:e,undo:e,redo:e,clear:Se,reset:Se,hasUndo:ot,hasRedo:ot,transact:e,ignore:Se,extra:Se},formatter:{match:ot,matchAll:Y([]),matchNode:Y(void 0),canApply:ot,closest:t,apply:Se,remove:Se,toggle:Se,formatChanged:Y({unbind:Se})},editor:{getContent:t,setContent:Y({content:"",html:""}),insertContent:Y(""),addVisual:Se},selection:{getContent:t},autocompleter:{addDecoration:Se,removeDecoration:Se},raw:{getModel:Y(m.none())}}},As=e=>ye(e.plugins,"rtc"),nU=e=>Qe(e.plugins,"rtc").bind(t=>m.from(t.setup)),sU=e=>{const t=e;return nU(e).fold(()=>(t.rtcInstance=hS(e),m.none()),n=>(t.rtcInstance=tU(),m.some(()=>n().then(s=>(t.rtcInstance=eU(s),s.rtc.isRemote)))))},Am=e=>e.rtcInstance?e.rtcInstance:hS(e),mt=e=>{const t=e.rtcInstance;if(t)return t;throw new Error("Failed to get RTC instance not yet initialized.")},oU=(e,t,n)=>{mt(e).undoManager.beforeChange(t,n)},rU=(e,t,n,s,o,r,a)=>mt(e).undoManager.add(t,n,s,o,r,a),aU=(e,t,n,s)=>mt(e).undoManager.undo(t,n,s),iU=(e,t,n)=>mt(e).undoManager.redo(t,n),lU=(e,t,n)=>{mt(e).undoManager.clear(t,n)},cU=(e,t)=>{mt(e).undoManager.reset(t)},uU=(e,t,n)=>mt(e).undoManager.hasUndo(t,n),fU=(e,t,n)=>mt(e).undoManager.hasRedo(t,n),dU=(e,t,n,s)=>mt(e).undoManager.transact(t,n,s),mU=(e,t,n)=>{mt(e).undoManager.ignore(t,n)},pU=(e,t,n,s,o)=>{mt(e).undoManager.extra(t,n,s,o)},gU=(e,t,n,s,o)=>mt(e).formatter.match(t,n,s,o),hU=(e,t,n)=>mt(e).formatter.matchAll(t,n),bU=(e,t,n,s,o)=>mt(e).formatter.matchNode(t,n,s,o),vU=(e,t)=>mt(e).formatter.canApply(t),CU=(e,t)=>mt(e).formatter.closest(t),yU=(e,t,n,s)=>{mt(e).formatter.apply(t,n,s)},EU=(e,t,n,s,o)=>{mt(e).formatter.remove(t,n,s,o)},SU=(e,t,n,s)=>{mt(e).formatter.toggle(t,n,s)},wU=(e,t,n,s,o,r)=>mt(e).formatter.formatChanged(t,n,s,o,r),_U=(e,t)=>Am(e).editor.getContent(t),xU=(e,t,n)=>Am(e).editor.setContent(t,n),kU=(e,t,n)=>Am(e).editor.insertContent(t,n),NU=(e,t,n)=>mt(e).selection.getContent(t,n),TU=(e,t)=>mt(e).editor.addVisual(t),bS=e=>mt(e).init.bindEvents(),AU=(e,t)=>mt(e).autocompleter.addDecoration(t),DU=e=>mt(e).autocompleter.removeDecoration(),RU=(e,t={})=>{const n=t.format?t.format:"html";return NU(e,n,t)},vS=e=>e.dom.length===0?(tt(e),m.none()):m.some(e),PU=(e,t)=>e.filter(n=>di.isBookmarkNode(n.dom)).bind(t?Oa:Io),OU=(e,t,n,s)=>{const o=e.dom,r=t.dom,a=s?o.length:r.length;s?(Bd(o,r,!1,!s),n.setStart(r,a)):(Bd(r,o,!1,!s),n.setEnd(r,a))},BU=(e,t)=>{qn(e).each(n=>{const s=e.dom;t&&bi(n,P(s,0))?Jl(s,0):!t&&vi(n,P(s,s.length))&&Od(s,s.length)})},CS=(e,t,n,s)=>{e.bind(o=>((s?Od:Jl)(o.dom,s?o.dom.length:0),t.filter(Tn).map(a=>OU(o,a,n,s)))).orThunk(()=>PU(t,s).or(t).filter(Tn).map(r=>BU(r,s)))},IU=(e,t)=>{const n=m.from(t.firstChild).map(S.fromDom),s=m.from(t.lastChild).map(S.fromDom);e.deleteContents(),e.insertNode(t);const o=n.bind(Io).filter(Tn).bind(vS),r=s.bind(Oa).filter(Tn).bind(vS);CS(o,n,e,!0),CS(r,s,e,!1),e.collapse(!1)},LU=(e,t)=>({format:"html",...e,set:!0,selection:!0,content:t}),FU=(e,t)=>{if(t.format!=="raw"){const n=e.selection.getRng(),s=e.dom.getParent(n.commonAncestorContainer,e.dom.isBlock),o=s?{context:s.nodeName.toLowerCase()}:{},r=e.parser.parse(t.content,{forced_root_block:!1,...o,...t});return go({validate:!1},e.schema).serialize(r)}else return t.content},$U=(e,t,n={})=>{const s=LU(n,t);Em(e,s).each(o=>{const r=FU(e,o),a=e.selection.getRng();IU(a,a.createContextualFragment(r)),e.selection.setRng(a),pi(e,a),Sm(e,r,o)})},yS=(e,t,n)=>{if(ye(e,t)){const s=ve(e[t],o=>o!==n);s.length===0?delete e[t]:e[t]=s}};var MU=(e,t)=>{let n,s;const o=(i,l)=>wt(l,c=>e.is(c,i)),r=i=>e.getParents(i,void 0,e.getRoot()),a=()=>{n={},s={},t.on("NodeChange",i=>{const l=i.element,c=r(l),f={};Ye(n,(u,d)=>{o(d,c).each(b=>{s[d]||($(u,E=>{E(!0,{node:b,selector:d,parents:c})}),s[d]=u),f[d]=u})}),Ye(s,(u,d)=>{f[d]||(delete s[d],$(u,b=>{b(!1,{node:l,selector:d,parents:c})}))})})};return{selectorChangedWithUnbind:(i,l)=>(n||a(),n[i]||(n[i]=[]),n[i].push(l),o(i,r(t.selection.getStart())).each(()=>{s[i]=n[i]}),{unbind:()=>{yS(n,i,l),yS(s,i,l)}})}};const ES=e=>!!(e&&e.ownerDocument)&&Us(S.fromDom(e.ownerDocument),S.fromDom(e)),UU=e=>e?ES(e.startContainer)&&ES(e.endContainer):!1,SS=(e,t,n,s)=>{let o,r;const{selectorChangedWithUnbind:a}=MU(e,s),i=(H,re)=>{const Te=e.createRng();K(H)&&K(re)?(Te.setStart(H,re),Te.setEnd(H,re),N(Te),w(!1)):(Qf(e,Te,s.getBody(),!0),N(Te))},l=H=>RU(s,H),c=(H,re)=>$U(s,H,re),f=H=>IC(s.getBody(),x(),H),u=H=>LC(s.getBody(),x(),H),d=(H,re)=>Bt.getBookmark(H,re),b=H=>Bt.moveToBookmark(H),E=(H,re)=>(bB(e,H,re).each(N),H),g=()=>{const H=x(),re=_();return!H||H.item?!1:H.compareEndPoints?H.compareEndPoints("StartToEnd",H)===0:!re||H.collapsed},y=()=>{const H=x(),re=s.getBody().querySelectorAll('[data-mce-selected="1"]');return re.length>0?Js(re,Te=>e.isEditable(Te.parentElement)):H.startContainer===H.endContainer?e.isEditable(H.startContainer):e.isEditable(H.startContainer)&&e.isEditable(H.endContainer)},w=H=>{const re=x();re.collapse(!!H),N(re)},_=()=>t.getSelection?t.getSelection():t.document.selection,x=()=>{let H;const re=(xe,ae,ie)=>{try{return ae.compareBoundaryPoints(xe,ie)}catch{return-1}},Te=t.document;if(K(s.bookmark)&&!or(s)){const xe=bd(s);if(xe.isSome())return xe.map(ae=>wd(s,[ae])[0]).getOr(Te.createRange())}try{const xe=_();xe&&!ll(xe.anchorNode)&&(xe.rangeCount>0?H=xe.getRangeAt(0):H=Te.createRange(),H=wd(s,[H])[0])}catch{}if(H||(H=Te.createRange()),$a(H.startContainer)&&H.collapsed){const xe=e.getRoot();H.setStart(xe,0),H.setEnd(xe,0)}return o&&r&&(re(H.START_TO_START,H,o)===0&&re(H.END_TO_END,H,o)===0?H=r:(o=null,r=null)),H},N=(H,re)=>{if(!UU(H))return;const Te=_();if(H=s.dispatch("SetSelectionRange",{range:H,forward:re}).range,Te){r=H;try{Te.removeAllRanges(),Te.addRange(H)}catch{}re===!1&&Te.extend&&(Te.collapse(H.endContainer,H.endOffset),Te.extend(H.startContainer,H.startOffset)),o=Te.rangeCount>0?Te.getRangeAt(0):null}if(!H.collapsed&&H.startContainer===H.endContainer&&(Te!=null&&Te.setBaseAndExtent)&&H.endOffset-H.startOffset<2&&H.startContainer.hasChildNodes()){const ae=H.startContainer.childNodes[H.startOffset];ae&&ae.nodeName==="IMG"&&(Te.setBaseAndExtent(H.startContainer,H.startOffset,H.endContainer,H.endOffset),(Te.anchorNode!==H.startContainer||Te.focusNode!==H.endContainer)&&Te.setBaseAndExtent(ae,0,ae,1))}s.dispatch("AfterSetSelectionRange",{range:H,forward:re})},I=H=>(c(e.getOuterHTML(H)),H),oe=()=>gB(s.getBody(),x()),L=(H,re)=>hB(e,x(),H,re),D=()=>{const H=_(),re=H==null?void 0:H.anchorNode,Te=H==null?void 0:H.focusNode;if(!H||!re||!Te||ll(re)||ll(Te))return!0;const xe=e.createRng(),ae=e.createRng();try{xe.setStart(re,H.anchorOffset),xe.collapse(!0),ae.setStart(Te,H.focusOffset),ae.collapse(!0)}catch{return!0}return xe.compareBoundaryPoints(xe.START_TO_START,ae)<=0},nt={dom:e,win:t,serializer:n,editor:s,expand:(H={type:"word"})=>N(sr(e).expand(x(),H)),collapse:w,setCursorLocation:i,getContent:l,setContent:c,getBookmark:d,moveToBookmark:b,select:E,isCollapsed:g,isEditable:y,isForward:D,setNode:I,getNode:oe,getSel:_,setRng:N,getRng:x,getStart:f,getEnd:u,getSelectedBlocks:L,normalize:()=>{const H=x(),re=_();if(!eP(re)&&Ul(s)){const Te=Kl(e,H);return Te.each(xe=>{N(xe,D())}),Te.getOr(H)}return H},selectorChanged:(H,re)=>(a(H,re),nt),selectorChangedWithUnbind:a,getScrollContainer:()=>{let H,re=e.getRoot();for(;re&&re.nodeName!=="BODY";){if(re.scrollHeight>re.clientHeight){H=re;break}re=re.parentNode}return H},scrollIntoView:(H,re)=>{K(H)?$O(s,H,re):pi(s,x(),re)},placeCaretAt:(H,re)=>N(pC(H,re,s.getDoc())),getBoundingClientRect:()=>{const H=x();return H.collapsed?P.fromRangeStart(H).getClientRects()[0]:H.getBoundingClientRect()},destroy:()=>{t=o=r=null,vt.destroy()}},Bt=di(nt),vt=cC(nt,s);return nt.bookmarkManager=Bt,nt.controlSelection=vt,nt},zU=(e,t,n)=>{e.addAttributeFilter("data-mce-tabindex",(s,o)=>{let r=s.length;for(;r--;){const a=s[r];a.attr("tabindex",a.attr("data-mce-tabindex")),a.attr(o,null)}}),e.addAttributeFilter("src,href,style",(s,o)=>{const r="data-mce-"+o,a=t.url_converter,i=t.url_converter_scope;let l=s.length;for(;l--;){const c=s[l];let f=c.attr(r);f!==void 0?(c.attr(o,f.length>0?f:null),c.attr(r,null)):(f=c.attr(o),o==="style"?f=n.serializeStyle(n.parseStyle(f),c.name):a&&(f=a.call(i,f,o,c.name)),c.attr(o,f.length>0?f:null))}}),e.addAttributeFilter("class",s=>{let o=s.length;for(;o--;){const r=s[o];let a=r.attr("class");a&&(a=a.replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),r.attr("class",a.length>0?a:null))}}),e.addAttributeFilter("data-mce-type",(s,o,r)=>{let a=s.length;for(;a--;){const i=s[a];i.attr("data-mce-type")==="bookmark"&&!r.cleanup&&(m.from(i.firstChild).exists(c=>{var f;return!gl((f=c.value)!==null&&f!==void 0?f:"")})?i.unwrap():i.remove())}}),e.addNodeFilter("noscript",s=>{var o;let r=s.length;for(;r--;){const a=s[r].firstChild;a&&(a.value=io.decode((o=a.value)!==null&&o!==void 0?o:""))}}),e.addNodeFilter("script,style",(s,o)=>{var r;const a=l=>l.replace(/(<!--\[CDATA\[|\]\]-->)/g,`
`).replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"");let i=s.length;for(;i--;){const l=s[i],c=l.firstChild,f=(r=c==null?void 0:c.value)!==null&&r!==void 0?r:"";if(o==="script"){const u=l.attr("type");u&&l.attr("type",u==="mce-no/type"?null:u.replace(/^mce\-/,"")),t.element_format==="xhtml"&&c&&f.length>0&&(c.value=`// <![CDATA[
`+a(f)+`
// ]]>`)}else t.element_format==="xhtml"&&c&&f.length>0&&(c.value=`<!--
`+a(f)+`
-->`)}}),e.addNodeFilter("#comment",s=>{let o=s.length;for(;o--;){const r=s[o],a=r.value;t.preserve_cdata&&(a==null?void 0:a.indexOf("[CDATA["))===0?(r.name="#cdata",r.type=4,r.value=n.decode(a.replace(/^\[CDATA\[|\]\]$/g,""))):(a==null?void 0:a.indexOf("mce:protected "))===0&&(r.name="#text",r.type=3,r.raw=!0,r.value=unescape(a).substr(14))}}),e.addNodeFilter("xml:namespace,input",(s,o)=>{let r=s.length;for(;r--;){const a=s[r];a.type===7?a.remove():a.type===1&&o==="input"&&!a.attr("type")&&a.attr("type","text")}}),e.addAttributeFilter("data-mce-type",s=>{$(s,o=>{o.attr("data-mce-type")==="format-caret"&&(o.isEmpty(e.schema.getNonEmptyElements())?o.remove():o.unwrap())})}),e.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-block,data-mce-type,data-mce-resize,data-mce-placeholder",(s,o)=>{let r=s.length;for(;r--;)s[r].attr(o,null)}),t.remove_trailing_brs&&PE(e,e.schema)},HU=e=>{const t=s=>(s==null?void 0:s.name)==="br",n=e.lastChild;if(t(n)){const s=n.prev;t(s)&&(n.remove(),s.remove())}},WU=(e,t,n)=>{let s;const o=e.dom;let r=t.cloneNode(!0);const a=document.implementation;if(a.createHTMLDocument){const i=a.createHTMLDocument("");V.each(r.nodeName==="BODY"?r.childNodes:[r],l=>{i.body.appendChild(i.importNode(l,!0))}),r.nodeName!=="BODY"?r=i.body.firstChild:r=i.body,s=o.doc,o.doc=i}return xP(e,{...n,node:r}),s&&(o.doc=s),r},VU=(e,t)=>K(e)&&e.hasEventListeners("PreProcess")&&!t.no_events,qU=(e,t,n)=>VU(e,n)?WU(e,t,n):t,jU=(e,t,n)=>{V.inArray(t,n)===-1&&(e.addAttributeFilter(n,(s,o)=>{let r=s.length;for(;r--;)s[r].attr(o,null)}),t.push(n))},KU=(e,t,n)=>!t.no_events&&e?kP(e,{...t,content:n}).content:n,GU=(e,t,n)=>{const s=qs(n.getInner?t.innerHTML:e.getOuterHTML(t));return n.selection||ml(S.fromDom(t))?s:V.trim(s)},YU=(e,t,n)=>{const s=n.selection?{forced_root_block:!1,...n}:n,o=e.parse(t,s);return HU(o),o},XU=(e,t,n)=>go(e,t).serialize(n),ZU=(e,t,n,s,o)=>{const r=XU(t,n,s);return KU(e,o,r)},QU=(e,t)=>{const n=["data-mce-selected"],s={entity_encoding:"named",remove_trailing_brs:!0,...e},o=t&&t.dom?t.dom:qe.DOM,r=t&&t.schema?t.schema:lo(s),a=ea(s,r);zU(a,s,o);const i=(l,c={})=>{const f={format:"html",...c},u=qU(t,l,f),d=GU(o,u,f),b=YU(a,d,f);return f.format==="tree"?b:ZU(t,s,r,b,f)};return{schema:r,addNodeFilter:a.addNodeFilter,addAttributeFilter:a.addAttributeFilter,serialize:i,addRules:r.addValidElements,setRules:r.setValidElements,addTempAttr:te(jU,a,n),getTempAttrs:Y(n),getNodeFilters:a.getNodeFilters,getAttributeFilters:a.getAttributeFilters,removeNodeFilter:a.removeNodeFilter,removeAttributeFilter:a.removeAttributeFilter}},wS=(e,t)=>{const n=QU(e,t);return{schema:n.schema,addNodeFilter:n.addNodeFilter,addAttributeFilter:n.addAttributeFilter,serialize:n.serialize,addRules:n.addRules,setRules:n.setRules,addTempAttr:n.addTempAttr,getTempAttrs:n.getTempAttrs,getNodeFilters:n.getNodeFilters,getAttributeFilters:n.getAttributeFilters,removeNodeFilter:n.removeNodeFilter,removeAttributeFilter:n.removeAttributeFilter}},JU="html",ez=(e,t)=>({...e,format:t,get:!0,getInner:!0}),tz=(e,t={})=>{const n=t.format?t.format:JU,s=ez(t,n);return nS(e,s).fold(Vt,o=>{const r=_U(e,o);return sS(e,r,o)})},nz="html",sz=(e,t)=>({format:nz,...e,set:!0,content:t}),Dm=(e,t,n={})=>{const s=sz(n,t);return Em(e,s).map(o=>{const r=xU(e,o.content,o);return Sm(e,r.html,o),r.content}).getOr(t)},oz="autoresize_on_init,content_editable_state,padd_empty_with_br,block_elements,boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,tab_focus,tabfocus_elements,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,paste_enable_default_filters,paste_filter_drop,paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists".split(","),rz="template_cdate_classes,template_mdate_classes,template_selected_content_classes,template_preview_replace_values,template_replace_values,templates,template_cdate_format,template_mdate_format".split(","),az="bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,textcolor".split(","),_S=[{name:"template",replacedWith:"Advanced Template"},{name:"rtc"}],xS=(e,t)=>{const n=ve(t,s=>ye(e,s));return Do(n)},iz=e=>{const t=xS(e,oz),n=e.forced_root_block;return(n===!1||n==="")&&t.push("forced_root_block (false only)"),Do(t)},lz=e=>xS(e,rz),kS=(e,t)=>{const n=V.makeMap(e.plugins," "),o=ve(t,r=>ye(n,r));return Do(o)},cz=e=>kS(e,az),uz=e=>kS(e,_S.map(t=>t.name)),fz=(e,t)=>{const n=iz(e),s=cz(t),o=s.length>0,r=n.length>0,a=t.theme==="mobile";if(o||r||a){const i=`
- `,l=a?`

Themes:${i}mobile`:"",c=o?`

Plugins:${i}${s.join(i)}`:"",f=r?`

Options:${i}${n.join(i)}`:"";console.warn("The following deprecated features are currently enabled and have been removed in TinyMCE 6.0. These features will no longer work and should be removed from the TinyMCE configuration. See https://www.tiny.cloud/docs/tinymce/6/migration-from-5x/ for more information."+l+c+f)}},dz=e=>wt(_S,t=>t.name===e).fold(()=>e,t=>t.replacedWith?`${e}, replaced by ${t.replacedWith}`:e),mz=(e,t)=>{const n=lz(e),s=uz(t),o=s.length>0,r=n.length>0;if(o||r){const a=`
- `,i=o?`

Plugins:${a}${s.map(dz).join(a)}`:"",l=r?`

Options:${a}${n.join(a)}`:"";console.warn("The following deprecated features are currently enabled but will be removed soon."+i+l)}},pz=(e,t)=>{fz(e,t),mz(e,t)},gc=qe.DOM,gz=e=>{gc.setStyle(e.id,"display",e.orgDisplay)},hc=e=>m.from(e).each(t=>t.destroy()),hz=e=>{const t=e;t.contentAreaContainer=t.formElement=t.container=t.editorContainer=null,t.bodyElement=t.contentDocument=t.contentWindow=null,t.iframeElement=t.targetElm=null;const n=e.selection;if(n){const s=n.dom;t.selection=n.win=n.dom=s.doc=null}},bz=e=>{const t=e.formElement;t&&(t._mceOldSubmit&&(t.submit=t._mceOldSubmit,delete t._mceOldSubmit),gc.unbind(t,"submit reset",e.formEventDelegate))},vz=e=>{if(!e.removed){const{_selectionOverrides:t,editorUpload:n}=e,s=e.getBody(),o=e.getElement();s&&e.save({is_removing:!0}),e.removed=!0,e.unbindAllNativeEvents(),e.hasHiddenInput&&K(o==null?void 0:o.nextSibling)&&gc.remove(o.nextSibling),NP(e),e.editorManager.remove(e),!e.inline&&s&&gz(e),TP(e),gc.remove(e.getContainer()),hc(t),hc(n),e.destroy()}},Cz=(e,t)=>{const{selection:n,dom:s}=e;if(!e.destroyed){if(!t&&!e.removed){e.remove();return}t||(e.editorManager.off("beforeunload",e._beforeUnload),e.theme&&e.theme.destroy&&e.theme.destroy(),hc(n),hc(s)),bz(e),hz(e),e.destroyed=!0}},bc=(()=>{const e={};return{add:(o,r)=>{e[o]=r},get:o=>e[o]?e[o]:{icons:{}},has:o=>ye(e,o)}})(),ta=Xt.ModelManager,NS=(e,t)=>t.dom[e],TS=(e,t)=>parseInt(ys(t,e),10),yz=te(NS,"clientWidth"),Ez=te(NS,"clientHeight"),Sz=te(TS,"margin-top"),wz=te(TS,"margin-left"),_z=e=>e.dom.getBoundingClientRect(),xz=(e,t,n)=>{const s=yz(e),o=Ez(e);return t>=0&&n>=0&&t<=s&&n<=o},kz=(e,t,n,s)=>{const o=_z(t),r=e?o.left+t.dom.clientLeft+wz(t):0,a=e?o.top+t.dom.clientTop+Sz(t):0,i=n-r,l=s-a;return{x:i,y:l}},Nz=(e,t,n)=>{const s=S.fromDom(e.getBody()),o=e.inline?s:PN(s),r=kz(e.inline,o,t,n);return xz(o,r.x,r.y)},Tz=e=>m.from(e).map(S.fromDom),Az=e=>{const t=e.inline?e.getBody():e.getContentAreaContainer();return Tz(t).map(Pr).getOr(!1)};var Dz=()=>{const e=()=>{throw new Error("Theme did not provide a NotificationManager implementation.")};return{open:e,close:e,getArgs:e}};const AS=e=>{const t=[],n=()=>{const d=e.theme;return d&&d.getNotificationManagerImpl?d.getNotificationManagerImpl():Dz()},s=()=>m.from(t[0]),o=(d,b)=>d.type===b.type&&d.text===b.text&&!d.progressBar&&!d.timeout&&!b.progressBar&&!b.timeout,r=()=>{$(t,d=>{d.reposition()})},a=d=>{t.push(d)},i=d=>{wa(t,b=>b===d).each(b=>{t.splice(b,1)})},l=(d,b=!0)=>e.removed||!Az(e)?{}:(b&&e.dispatch("BeforeOpenNotification",{notification:d}),wt(t,E=>o(n().getArgs(E),d)).getOrThunk(()=>{e.editorManager.setActive(e);const E=n().open(d,()=>{i(E),r(),s().fold(()=>e.focus(),g=>NC(S.fromDom(g.getEl())))});return a(E),r(),e.dispatch("OpenNotification",{notification:{...E}}),E})),c=()=>{s().each(d=>{n().close(d),i(d),r()})},f=Y(t);return(d=>{d.on("SkinLoaded",()=>{const b=uR(d);b&&l({text:b,type:"warning",timeout:0},!1),r()}),d.on("show ResizeEditor ResizeWindow NodeChange",()=>{requestAnimationFrame(r)}),d.on("remove",()=>{$(t.slice(),b=>{n().close(b)})})})(e),{open:l,close:c,getNotifications:f}},na=Xt.PluginManager,fr=Xt.ThemeManager;var Rz=()=>{const e=()=>{throw new Error("Theme did not provide a WindowManager implementation.")};return{open:e,openUrl:e,alert:e,confirm:e,close:e}};const DS=e=>{let t=[];const n=()=>{const g=e.theme;return g&&g.getWindowManagerImpl?g.getWindowManagerImpl():Rz()},s=(g,y)=>(...w)=>y?y.apply(g,w):void 0,o=g=>{e.dispatch("OpenWindow",{dialog:g})},r=g=>{e.dispatch("CloseWindow",{dialog:g})},a=g=>{t.push(g),o(g)},i=g=>{r(g),t=ve(t,y=>y!==g),t.length===0&&e.focus()},l=()=>m.from(t[t.length-1]),c=g=>{e.editorManager.setActive(e),hd(e),e.ui.show();const y=g();return a(y),y},f=(g,y)=>c(()=>n().open(g,y,i)),u=g=>c(()=>n().openUrl(g,i)),d=(g,y,w)=>{const _=n();_.alert(g,s(w||_,y))},b=(g,y,w)=>{const _=n();_.confirm(g,s(w||_,y))},E=()=>{l().each(g=>{n().close(g),i(g)})};return e.on("remove",()=>{$(t,g=>{n().close(g)})}),{open:f,openUrl:u,alert:d,confirm:b,close:E}},RS=(e,t)=>{e.notificationManager.open({type:"error",text:t})},vc=(e,t)=>{e._skinLoaded?RS(e,t):e.on("SkinLoaded",()=>{RS(e,t)})},Pz=(e,t)=>{vc(e,ns.translate(["Failed to upload image: {0}",t]))},_i=(e,t,n)=>{nC(e,t,{message:n}),console.error(n)},xi=(e,t,n)=>n?`Failed to load ${e}: ${n} from url ${t}`:`Failed to load ${e} url: ${t}`,Oz=(e,t,n)=>{_i(e,"PluginLoadError",xi("plugin",t,n))},Bz=(e,t,n)=>{_i(e,"IconsLoadError",xi("icons",t,n))},Iz=(e,t,n)=>{_i(e,"LanguageLoadError",xi("language",t,n))},Lz=(e,t,n)=>{_i(e,"ThemeLoadError",xi("theme",t,n))},Fz=(e,t,n)=>{_i(e,"ModelLoadError",xi("model",t,n))},$z=(e,t,n)=>{const s=ns.translate(["Failed to initialize plugin: {0}",t]);nC(e,"PluginLoadError",{message:s}),Cc(s,n),vc(e,s)},Cc=(e,...t)=>{const n=window.console;n&&(n.error?n.error(e,...t):n.log(e,...t))},Mz=e=>/^[a-z0-9\-]+$/i.test(e),Uz=e=>PS(e,oR(e)),zz=e=>PS(e,Jb(e)),PS=(e,t)=>{const n=e.editorManager.baseURL+"/skins/content",o=`content${e.editorManager.suffix}.css`;return Fe(t,r=>Mz(r)&&!e.inline?`${n}/${r}/${o}`:e.documentBaseURI.toAbsolute(r))},Hz=e=>{e.contentCSS=e.contentCSS.concat(Uz(e),zz(e))},Wz=e=>e?sn(e.getElementsByTagName("img")):[],Vz=(e,t)=>{const n={};return{findAll:(o,r=yt)=>{const a=ve(Wz(o),l=>{const c=l.src;return l.hasAttribute("data-mce-bogus")||l.hasAttribute("data-mce-placeholder")||!c||c===Oe.transparentSrc?!1:Ft(c,"blob:")?!e.isUploaded(c)&&r(l):Ft(c,"data:")?r(l):!1}),i=Fe(a,l=>{const c=l.src;if(ye(n,c))return n[c].then(f=>le(f)?f:{image:l,blobInfo:f.blobInfo});{const f=i$(t,c).then(u=>(delete n[c],{image:l,blobInfo:u})).catch(u=>(delete n[c],u));return n[c]=f,f}});return Promise.all(i)}}},OS=()=>{let n={};const s=(d,b)=>({status:d,resultUri:b}),o=d=>d in n;return{hasBlobUri:o,getResultUri:d=>{const b=n[d];return b?b.resultUri:null},isPending:d=>o(d)?n[d].status===1:!1,isUploaded:d=>o(d)?n[d].status===2:!1,markPending:d=>{n[d]=s(1,null)},markUploaded:(d,b)=>{n[d]=s(2,b)},removeFailed:d=>{delete n[d]},destroy:()=>{n={}}}};let qz=0;const jz=()=>{const e=()=>Math.round(Math.random()*4294967295).toString(36);return"s"+new Date().getTime().toString(36)+e()+e()+e()},Kz=e=>e+qz+++jz(),Gz=()=>{let e=[];const t=u=>({"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png","image/apng":"apng","image/avif":"avif","image/svg+xml":"svg","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"})[u.toLowerCase()]||"dat",n=(u,d,b,E,g)=>{if(le(u))return s({id:u,name:E,filename:g,blob:d,base64:b});if(it(u))return s(u);throw new Error("Unknown input type")},s=u=>{if(!u.blob||!u.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");const d=u.id||Kz("blobid"),b=u.name||d,E=u.blob;return{id:Y(d),name:Y(b),filename:Y(u.filename||b+"."+t(E.type)),blob:Y(E),base64:Y(u.base64),blobUri:Y(u.blobUri||URL.createObjectURL(E)),uri:Y(u.uri)}},o=u=>{a(u.id())||e.push(u)},r=u=>wt(e,u).getOrUndefined(),a=u=>r(d=>d.id()===u);return{create:n,add:o,get:a,getByUri:u=>r(d=>d.blobUri()===u),getByData:(u,d)=>r(b=>b.base64()===u&&b.blob().type===d),findFirst:r,removeByUri:u=>{e=ve(e,d=>d.blobUri()===u?(URL.revokeObjectURL(d.blobUri()),!1):!0)},destroy:()=>{$(e,u=>{URL.revokeObjectURL(u.blobUri())}),e=[]}}},Yz=(e,t)=>{const n={},s=(g,y)=>g?g.replace(/\/$/,"")+"/"+y.replace(/^\//,""):y,o=(g,y)=>new Promise((w,_)=>{const x=new XMLHttpRequest;x.open("POST",t.url),x.withCredentials=t.credentials,x.upload.onprogress=I=>{y(I.loaded/I.total*100)},x.onerror=()=>{_("Image upload failed due to a XHR Transport error. Code: "+x.status)},x.onload=()=>{if(x.status<200||x.status>=300){_("HTTP Error: "+x.status);return}const I=JSON.parse(x.responseText);if(!I||!le(I.location)){_("Invalid JSON: "+x.responseText);return}w(s(t.basePath,I.location))};const N=new FormData;N.append("file",g.blob(),g.filename()),x.send(N)}),r=Ie(t.handler)?t.handler:o,a=()=>new Promise(g=>{g([])}),i=(g,y)=>({url:y,blobInfo:g,status:!0}),l=(g,y)=>({url:"",blobInfo:g,status:!1,error:y}),c=(g,y)=>{V.each(n[g],w=>{w(y)}),delete n[g]},f=(g,y,w)=>(e.markPending(g.blobUri()),new Promise(_=>{let x,N;try{const I=()=>{x&&(x.close(),N=Se)},oe=D=>{I(),e.markUploaded(g.blobUri(),D),c(g.blobUri(),i(g,D)),_(i(g,D))},L=D=>{I(),e.removeFailed(g.blobUri()),c(g.blobUri(),l(g,D)),_(l(g,D))};N=D=>{D<0||D>100||m.from(x).orThunk(()=>m.from(w).map(Nu)).each(O=>{x=O,O.progressBar.value(D)})},y(g,N).then(oe,D=>{L(le(D)?{message:D}:D)})}catch(I){_(l(g,I))}})),u=g=>g===o,d=g=>{const y=g.blobUri();return new Promise(w=>{n[y]=n[y]||[],n[y].push(w)})},b=(g,y)=>(g=V.grep(g,w=>!e.isUploaded(w.blobUri())),Promise.all(V.map(g,w=>e.isPending(w.blobUri())?d(w):f(w,r,y))));return{upload:(g,y)=>!t.url&&u(r)?a():b(g,y)}},BS=e=>()=>e.notificationManager.open({text:e.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0}),IS=(e,t)=>Yz(t,{url:ZD(e),basePath:QD(e),credentials:JD(e),handler:eR(e)}),Xz=e=>{const t=OS(),n=IS(e,t);return{upload:(s,o=!0)=>n.upload(s,o?BS(e):void 0)}},Zz=(e,t)=>e.dom.isEmpty(t.dom)&&K(e.schema.getTextBlockElements()[Xe(t)]),Qz=e=>t=>{Zz(e,t)&&ht(t,S.fromHtml('<br data-mce-bogus="1" />'))},Jz=e=>{const t=Gz();let n,s;const o=OS(),r=[],a=x=>N=>e.selection?x(N):[],i=x=>x+(x.indexOf("?")===-1?"?":"&")+new Date().getTime(),l=(x,N,I)=>{let oe=0;do oe=x.indexOf(N,oe),oe!==-1&&(x=x.substring(0,oe)+I+x.substr(oe+N.length),oe+=I.length-N.length+1);while(oe!==-1);return x},c=(x,N,I)=>{const oe=`src="${I}"${I===Oe.transparentSrc?' data-mce-placeholder="1"':""}`;return x=l(x,`src="${N}"`,oe),x=l(x,'data-mce-src="'+N+'"','data-mce-src="'+I+'"'),x},f=(x,N)=>{$(e.undoManager.data,I=>{I.type==="fragmented"?I.fragments=Fe(I.fragments,oe=>c(oe,x,N)):I.content=c(I.content,x,N)})},u=(x,N)=>{const I=e.convertURL(N,"src");f(x.src,N),eo(S.fromDom(x),{src:Yb(e)?i(N):N,"data-mce-src":I})},d=()=>(n||(n=IS(e,o)),y().then(a(x=>{const N=Fe(x,I=>I.blobInfo);return n.upload(N,BS(e)).then(a(I=>{const oe=[];let L=!1;const D=Fe(I,(O,q)=>{const{blobInfo:j,image:J}=x[q];let ge=!1;return O.status&&YD(e)?(O.url&&!qt(J.src,O.url)&&(L=!0),t.removeByUri(J.src),As(e)||u(J,O.url)):O.error&&(O.error.remove&&(f(J.src,Oe.transparentSrc),oe.push(J),ge=!0),Pz(e,O.error.message)),{element:J,status:O.status,uploadUri:O.url,blobInfo:j,removed:ge}});return oe.length>0&&!As(e)?e.undoManager.transact(()=>{$(Xu(oe),O=>{const q=qn(O);tt(O),q.each(Qz(e)),t.removeByUri(O.dom.src)})}):L&&e.undoManager.dispatchChange(),D}))}))),b=()=>Gb(e)?d():Promise.resolve([]),E=x=>Js(r,N=>N(x)),g=x=>{r.push(x)},y=()=>(s||(s=Vz(o,t)),s.findAll(e.getBody(),E).then(a(x=>{const N=ve(x,I=>le(I)?(vc(e,I),!1):I.uriType!=="blob");return As(e)||$(N,I=>{f(I.image.src,I.blobInfo.blobUri()),I.image.src=I.blobInfo.blobUri(),I.image.removeAttribute("data-mce-src")}),N}))),w=()=>{t.destroy(),o.destroy(),s=n=null},_=x=>x.replace(/src="(blob:[^"]+)"/g,(N,I)=>{const oe=o.getResultUri(I);if(oe)return'src="'+oe+'"';let L=t.getByUri(I);return L||(L=vn(e.editorManager.get(),(D,O)=>D||O.editorUpload&&O.editorUpload.blobCache.getByUri(I),void 0)),L?'src="data:'+L.blob().type+";base64,"+L.base64()+'"':N});return e.on("SetContent",()=>{Gb(e)?b():y()}),e.on("RawSaveContent",x=>{x.content=_(x.content)}),e.on("GetContent",x=>{x.source_view||x.format==="raw"||x.format==="tree"||(x.content=_(x.content))}),e.on("PostRender",()=>{e.parser.addNodeFilter("img",x=>{$(x,N=>{const I=N.attr("src");if(!I||t.getByUri(I))return;const oe=o.getResultUri(I);oe&&N.attr("src",oe)})})}),{blobCache:t,addFilter:g,uploadImages:d,uploadImagesAuto:b,scanForImages:y,destroy:w}},eH=e=>{const t=e.dom,n=e.schema.type,s={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"left"},inherit:!1,preview:!1},{selector:"img,audio,video",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginLeft:"0px",marginRight:"auto"},onformat:o=>{t.setStyle(o,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"},{selector:".mce-preview-object",ceFalseOverride:!0,styles:{display:"table",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{marginLeft:"auto",marginRight:"auto"},preview:!1}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginRight:"0px",marginLeft:"auto"},onformat:o=>{t.setStyle(o,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"right"},preview:!1}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"justify"},inherit:!1,preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:(()=>{const o={inline:"span",styles:{textDecoration:"line-through"},exact:!0},r={inline:"strike",remove:"all",preserve_attributes:["class","style"]},a={inline:"s",remove:"all",preserve_attributes:["class","style"]};return n!=="html4"?[a,o,r]:[o,a,r]})(),forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",styles:{lineHeight:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:(o,r,a)=>Z(o)&&o.hasAttribute("href"),onformat:(o,r,a)=>{V.each(a,(i,l)=>{t.setAttrib(o,l,i)})}},lang:{inline:"span",clear_child_styles:!0,remove_similar:!0,attributes:{lang:"%value","data-mce-lang":o=>{var r;return(r=o==null?void 0:o.customValue)!==null&&r!==void 0?r:null}}},removeformat:[{selector:"b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return V.each("p h1 h2 h3 h4 h5 h6 div address pre dt dd samp".split(/\s/),o=>{s[o]={block:o,remove:"all"}}),s},LS={remove_similar:!0,inherit:!1},sa={selector:"td,th",...LS},tH={tablecellbackgroundcolor:{styles:{backgroundColor:"%value"},...sa},tablecellverticalalign:{styles:{"vertical-align":"%value"},...sa},tablecellbordercolor:{styles:{borderColor:"%value"},...sa},tablecellclass:{classes:["%value"],...sa},tableclass:{selector:"table",classes:["%value"],...LS},tablecellborderstyle:{styles:{borderStyle:"%value"},...sa},tablecellborderwidth:{styles:{borderWidth:"%value"},...sa}},nH=Y(tH),sH=e=>{const t={},n=a=>K(a)?t[a]:t,s=a=>ye(t,a),o=(a,i)=>{a&&(le(a)?(et(i)||(i=[i]),$(i,l=>{St(l.deep)&&(l.deep=!Bn(l)),St(l.split)&&(l.split=!Bn(l)||xt(l)),St(l.remove)&&Bn(l)&&!xt(l)&&(l.remove="none"),Bn(l)&&xt(l)&&(l.mixed=!0,l.block_expand=!0),le(l.classes)&&(l.classes=l.classes.split(/\s+/))}),t[a]=i):Ye(a,(l,c)=>{o(c,l)}))},r=a=>(a&&t[a]&&delete t[a],t);return o(eH(e)),o(nH()),o(mR(e)),{get:n,has:s,register:o,unregister:r}},yc=V.each,Fn=qe.DOM,Rm=e=>K(e)&&it(e),FS=(e,t)=>{const n=t&&t.schema||lo({}),s=(l,c)=>{c.classes.length>0&&Fn.addClass(l,c.classes.join(" ")),Fn.setAttribs(l,c.attrs)},o=l=>{const c=le(l)?{name:l,classes:[],attrs:{}}:l,f=Fn.create(c.name);return s(f,c),f},r=(l,c)=>{const f=n.getElementRule(l.nodeName.toLowerCase()),u=f==null?void 0:f.parentsRequired;return u&&u.length?c&&We(u,c)?c:u[0]:!1},a=(l,c,f)=>{let u;const d=c[0],b=Rm(d)?d.name:void 0,E=r(l,b);if(E)b===E?(u=d,c=c.slice(1)):u=E;else if(d)u=d,c=c.slice(1);else if(!f)return l;const g=u?o(u):Fn.create("div");g.appendChild(l),f&&V.each(f,w=>{const _=o(w);g.insertBefore(_,l)});const y=Rm(u)?u.siblings:void 0;return a(g,c,y)},i=Fn.create("div");if(e.length>0){const l=e[0],c=o(l),f=Rm(l)?l.siblings:void 0;i.appendChild(a(c,e.slice(1),f))}return i},oH=e=>{e=V.trim(e);let t="div";const n={name:t,classes:[],attrs:{},selector:e};return e!=="*"&&(t=e.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,(s,o,r,a,i)=>{switch(o){case"#":n.attrs.id=r;break;case".":n.classes.push(r);break;case":":V.inArray("checked disabled enabled read-only required".split(" "),r)!==-1&&(n.attrs[r]=r);break}if(a==="["){const l=i.match(/([\w\-]+)(?:\=\"([^\"]+))?/);l&&(n.attrs[l[1]]=l[2])}return""})),n.name=t||"div",n},rH=e=>le(e)?(e=e.split(/\s*,\s*/)[0],e=e.replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),V.map(e.split(/(?:>|\s+(?![^\[\]]+\]))/),t=>{const n=V.map(t.split(/(?:~\+|~|\+)/),oH),s=n.pop();return n.length&&(s.siblings=n),s}).reverse()):[],aH=(e,t)=>{let n="",s=pR(e);if(s==="")return"";const o=d=>le(d)?d.replace(/%(\w+)/g,""):"",r=(d,b)=>Fn.getStyle(b??e.getBody(),d,!0);if(le(t)){const d=e.formatter.get(t);if(!d)return"";t=d[0]}if("preview"in t){const d=t.preview;if(d===!1)return"";s=d||s}let a=t.block||t.inline||"span",i;const l=rH(t.selector);l.length>0?(l[0].name||(l[0].name=a),a=t.selector,i=FS(l,e)):i=FS([a],e);const c=Fn.select(a,i)[0]||i.firstChild;yc(t.styles,(d,b)=>{const E=o(d);E&&Fn.setStyle(c,b,E)}),yc(t.attributes,(d,b)=>{const E=o(d);E&&Fn.setAttrib(c,b,E)}),yc(t.classes,d=>{const b=o(d);Fn.hasClass(c,b)||Fn.addClass(c,b)}),e.dispatch("PreviewFormats"),Fn.setStyles(i,{position:"absolute",left:-65535}),e.getBody().appendChild(i);const f=r("fontSize"),u=/px$/.test(f)?parseInt(f,10):0;return yc(s.split(" "),d=>{let b=r(d,c);if(!(d==="background-color"&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(b)&&(b=r(d),Ml(b).toLowerCase()==="#ffffff"))&&!(d==="color"&&Ml(b).toLowerCase()==="#000000")){if(d==="font-size"&&/em|%$/.test(b)){if(u===0)return;b=parseFloat(b)/(/%$/.test(b)?100:1)*u+"px"}d==="border"&&b&&(n+="padding:0 2px;"),n+=d+":"+b+";"}}),e.dispatch("AfterPreviewFormats"),Fn.remove(i),n},iH=e=>{e.addShortcut("meta+b","","Bold"),e.addShortcut("meta+i","","Italic"),e.addShortcut("meta+u","","Underline");for(let t=1;t<=6;t++)e.addShortcut("access+"+t,"",["FormatBlock",!1,"h"+t]);e.addShortcut("access+7","",["FormatBlock",!1,"p"]),e.addShortcut("access+8","",["FormatBlock",!1,"div"]),e.addShortcut("access+9","",["FormatBlock",!1,"address"])},$S=e=>{const t=sH(e),n=At({});return iH(e),yF(e),As(e)||qF(n,e),{get:t.get,has:t.has,register:t.register,unregister:t.unregister,apply:(s,o,r)=>{yU(e,s,o,r)},remove:(s,o,r,a)=>{EU(e,s,o,r,a)},toggle:(s,o,r)=>{SU(e,s,o,r)},match:(s,o,r,a)=>gU(e,s,o,r,a),closest:s=>CU(e,s),matchAll:(s,o)=>hU(e,s,o),matchNode:(s,o,r,a)=>bU(e,s,o,r,a),canApply:s=>vU(e,s),formatChanged:(s,o,r,a)=>wU(e,n,s,o,r,a),getCssText:te(aH,e)}},MS=e=>{switch(e.toLowerCase()){case"undo":case"redo":case"mcefocus":return!0;default:return!1}},lH=(e,t,n)=>{const s=At(!1),o=l=>{pc(t,!1,n),t.add({},l)};e.on("init",()=>{t.add()}),e.on("BeforeExecCommand",l=>{const c=l.command;MS(c)||(gS(t,n),t.beforeChange())}),e.on("ExecCommand",l=>{const c=l.command;MS(c)||o(l)}),e.on("ObjectResizeStart cut",()=>{t.beforeChange()}),e.on("SaveContent ObjectResized blur",o),e.on("dragend",o),e.on("keyup",l=>{const c=l.keyCode;if(l.isDefaultPrevented())return;const f=Oe.os.isMacOS()&&l.key==="Meta";(c>=33&&c<=36||c>=37&&c<=40||c===45||l.ctrlKey||f)&&(o(),e.nodeChanged()),(c===46||c===8)&&e.nodeChanged(),s.get()&&t.typing&&!Nm(mc(e),t.data[0])&&(e.isDirty()||e.setDirty(!0),e.dispatch("TypingUndo"),s.set(!1),e.nodeChanged())}),e.on("keydown",l=>{const c=l.keyCode;if(l.isDefaultPrevented())return;if(c>=33&&c<=36||c>=37&&c<=40||c===45){t.typing&&o(l);return}const f=l.ctrlKey&&!l.altKey||l.metaKey;if((c<16||c>20)&&c!==224&&c!==91&&!t.typing&&!f){t.beforeChange(),pc(t,!0,n),t.add({},l),s.set(!0);return}(Oe.os.isMacOS()?l.metaKey:l.ctrlKey&&!l.altKey)&&t.beforeChange()}),e.on("mousedown",l=>{t.typing&&o(l)});const r=l=>l.inputType==="insertReplacementText",a=l=>l.inputType==="insertText"&&l.data===null,i=l=>l.inputType==="insertFromPaste"||l.inputType==="insertFromDrop";e.on("input",l=>{l.inputType&&(r(l)||a(l)||i(l))&&o(l)}),e.on("AddUndo Undo Redo ClearUndos",l=>{l.isDefaultPrevented()||e.nodeChanged()})},cH=e=>{e.addShortcut("meta+z","","Undo"),e.addShortcut("meta+y,meta+shift+z","","Redo")},US=e=>{const t=co(),n=At(0),s=At(0),o={data:[],typing:!1,beforeChange:()=>{oU(e,n,t)},add:(r,a)=>rU(e,o,s,n,t,r,a),dispatchChange:()=>{e.setDirty(!0);const r=mc(e);r.bookmark=Pf(e.selection),e.dispatch("change",{level:r,lastLevel:Zi(o.data,s.get()).getOrUndefined()})},undo:()=>aU(e,o,n,s),redo:()=>iU(e,s,o.data),clear:()=>{lU(e,o,s)},reset:()=>{cU(e,o)},hasUndo:()=>uU(e,o,s),hasRedo:()=>fU(e,o,s),transact:r=>dU(e,o,n,r),ignore:r=>{mU(e,n,r)},extra:(r,a)=>{pU(e,o,s,r,a)}};return As(e)||lH(e,o,n),cH(e),o},uH=[9,27,ee.HOME,ee.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,ee.DOWN,ee.UP,ee.LEFT,ee.RIGHT].concat(Oe.browser.isFirefox()?[224]:[]),zS="data-mce-placeholder",HS=e=>e.type==="keydown"||e.type==="keyup",WS=e=>{const t=e.keyCode;return t===ee.BACKSPACE||t===ee.DELETE},fH=e=>{if(HS(e)){const t=e.keyCode;return!WS(e)&&(ee.metaKeyPressed(e)||e.altKey||t>=112&&t<=123||We(uH,t))}else return!1},dH=e=>HS(e)&&!(WS(e)||e.type==="keyup"&&e.keyCode===229),mH=(e,t,n)=>{if(bt(S.fromDom(t),!1)){const s=t.firstElementChild;return s?e.getStyle(t.firstElementChild,"padding-left")||e.getStyle(t.firstElementChild,"padding-right")?!1:n===s.nodeName.toLowerCase():!0}else return!1},pH=e=>{var t;const n=e.dom,s=an(e),o=(t=cR(e))!==null&&t!==void 0?t:"",r=(a,i)=>{if(fH(a))return;const l=e.getBody(),c=dH(a)?!1:mH(n,l,s);(n.getAttrib(l,zS)!==""!==c||i)&&(n.setAttrib(l,zS,c?o:null),n.setAttrib(l,"aria-placeholder",c?o:null),IP(e,c),e.on(c?"keydown":"keyup",r),e.off(c?"keyup":"keydown",r))};hs(o)&&e.on("init",a=>{r(a,!0),e.on("change SetContent ExecCommand",r),e.on("paste",i=>In.setEditorTimeout(e,()=>r(i)))})},gH=(e,t)=>({block:e,position:t}),hH=(e,t)=>({from:e,to:t}),Pm=(e,t)=>{const n=S.fromDom(e),s=S.fromDom(t.container());return ec(n,s).map(o=>gH(o,t))},bH=e=>!Ue(e.from.block,e.to.block),VS=(e,t)=>Lo(t,o=>Ua(o)||ts(o.dom),o=>Ue(o,e)).filter(pn).getOr(e),vH=(e,t)=>{const n=S.fromDom(e);return Ue(VS(n,t.from.block),VS(n,t.to.block))},CH=e=>Ze(e.from.block.dom)===!1&&Ze(e.to.block.dom)===!1,yH=e=>{const t=n=>Dh(n)||ff(n.dom);return t(e.from.block)&&t(e.to.block)},EH=(e,t,n)=>ft(n.position.getNode())&&!bt(n.block)?jr(!1,n.block.dom).bind(s=>s.isEqual(n.position)?Pn(t,e,s).bind(o=>Pm(e,o)):m.some(n)).getOr(n):n,SH=(e,t,n)=>{const s=Pm(e,P.fromRangeStart(n)),o=s.bind(r=>Pn(t,e,r.position).bind(a=>Pm(e,a).map(i=>EH(e,t,i))));return on(s,o,hH).filter(r=>bH(r)&&vH(e,r)&&CH(r)&&yH(r))},wH=(e,t,n)=>n.collapsed?SH(e,t,n):m.none(),_H=e=>{const t=Mt(e);return wa(t,Dn).fold(Y(t),n=>t.slice(0,n))},qS=e=>{const t=_H(e);return $(t,tt),t},jS=(e,t)=>{const n=Gs(t,e);return wt(n.reverse(),s=>bt(s)).each(tt)},xH=e=>ve(ah(e),t=>!bt(t)).length===0,kH=(e,t,n,s)=>{if(bt(n))return ro(n),Qt(n.dom);xH(s)&&bt(t)&&yn(s,S.fromTag("br"));const o=ln(n.dom,P.before(s.dom));return $(qS(t),r=>{yn(s,r)}),jS(e,t),o},NH=(e,t,n)=>{if(bt(n)){if(bt(t)){const r=Sa((a=>{const i=(l,c)=>qu(l).fold(()=>c,f=>dl(f)?i(f,c.concat(Ko(f))):c);return i(a,[])})(n),(a,i)=>(bh(a,i),i),pl());Br(t),ht(t,r)}return tt(n),Qt(t.dom)}const s=Kn(n.dom);return $(qS(t),o=>{ht(n,o)}),jS(e,t),s},TH=(e,t)=>{const n=Gs(t,e);return m.from(n[n.length-1])},AH=(e,t)=>Us(t,e)?TH(t,e):m.none(),KS=(e,t)=>{jr(e,t.dom).bind(n=>m.from(n.getNode())).map(S.fromDom).filter(zo).each(tt)},GS=(e,t,n)=>(KS(!0,t),KS(!1,n),AH(t,n).fold(te(NH,e,t,n),te(kH,e,t,n))),YS=(e,t,n,s)=>t?GS(e,s,n):GS(e,n,s),Om=(e,t)=>{const n=S.fromDom(e.getBody());return wH(n.dom,t,e.selection.getRng()).map(o=>()=>{YS(n,t,o.from.block,o.to.block).each(r=>{e.selection.setRng(r.toRange())})})},DH=(e,t)=>{const n=t.getRng();return on(ec(e,S.fromDom(n.startContainer)),ec(e,S.fromDom(n.endContainer)),(s,o)=>Ue(s,o)?m.none():m.some(()=>{n.deleteContents(),YS(e,!0,s,o).each(r=>{t.setRng(r.toRange())})})).getOr(m.none())},XS=(e,t)=>{const n=S.fromDom(t),s=te(Ue,e);return Hs(n,Ua,s).isSome()},RH=(e,t)=>XS(e,t.startContainer)||XS(e,t.endContainer),PH=(e,t)=>{const n=ln(e.dom,P.fromRangeStart(t)).isNone(),s=Zt(e.dom,P.fromRangeEnd(t)).isNone();return!RH(e,t)&&n&&s},OH=e=>m.some(()=>{e.setContent(""),e.selection.setCursorLocation()}),BH=e=>{const t=S.fromDom(e.getBody()),n=e.selection.getRng();return PH(t,n)?OH(e):DH(t,e.selection)},Bm=(e,t)=>e.selection.isCollapsed()?m.none():BH(e),Ys=(e,t,n,s,o)=>m.from(t._selectionOverrides.showCaret(e,n,s,o)),IH=e=>{const t=e.ownerDocument.createRange();return t.selectNode(e),t},ki=(e,t)=>e.dispatch("BeforeObjectSelected",{target:t}).isDefaultPrevented()?m.none():m.some(IH(t)),LH=(e,t,n)=>{const s=zf(1,e.getBody(),t),o=P.fromRangeStart(s),r=o.getNode();if(ni(r))return Ys(1,e,r,!o.isAtEnd(),!1);const a=o.getNode(!0);if(ni(a))return Ys(1,e,a,!1,!1);const i=ir(e.dom.getRoot(),o.getNode());return ni(i)?Ys(1,e,i,!1,n):m.none()},Im=(e,t,n)=>t.collapsed?LH(e,t,n).getOr(t):t,FH=e=>bo(e)||gi(e),$H=e=>vo(e)||hi(e),MH=(e,t)=>{z(t)&&t.data.length===0&&e.remove(t)},ZS=(e,t,n,s,o,r)=>{Ys(s,e,r.getNode(!o),o,!0).each(a=>{if(t.collapsed){const i=t.cloneRange();o?i.setEnd(a.startContainer,a.startOffset):i.setStart(a.endContainer,a.endOffset),i.deleteContents()}else t.deleteContents();e.selection.setRng(a)}),MH(e.dom,n)},UH=(e,t)=>{const n=e.selection.getRng();if(!z(n.commonAncestorContainer))return m.none();const s=t?Dt.Forwards:Dt.Backwards,o=xs(e.getBody()),r=te(Hf,t?o.next:o.prev),a=t?FH:$H,i=ii(s,e.getBody(),n),l=r(i),c=l&&Ln(t,l);if(!c||!Il(i,c))return m.none();if(a(c))return m.some(()=>ZS(e,n,i.getNode(),s,t,c));const f=r(c);return f&&a(f)&&Il(c,f)?m.some(()=>ZS(e,n,i.getNode(),s,t,f)):m.none()},Lm=(e,t)=>UH(e,t),Fm=(e,t)=>{const n=e.getBody();return t?Qt(n).filter(bo):Kn(n).filter(vo)},$m=e=>{const t=e.selection.getRng();return!t.collapsed&&(Fm(e,!0).exists(n=>n.isEqual(P.fromRangeStart(t)))||Fm(e,!1).exists(n=>n.isEqual(P.fromRangeEnd(t))))},zH=e=>K(e)&&(Ua(S.fromDom(e))||Ma(S.fromDom(e))),En=Ss.generate([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),HH=(e,t)=>{const n=t.getNode(!e),s=e?"after":"before";return Z(n)&&n.getAttribute("data-mce-caret")===s},WH=(e,t,n,s)=>{const o=r=>dl(S.fromDom(r))&&!ws(n,s,e);return Cv(!t,n).fold(()=>Cv(t,s).fold(ot,o),o)},QS=(e,t,n,s)=>{const o=s.getNode(!t);return ec(S.fromDom(e),S.fromDom(n.getNode())).map(r=>bt(r)?En.remove(r.dom):En.moveToElement(o)).orThunk(()=>m.some(En.moveToElement(o)))},JS=(e,t,n)=>Pn(t,e,n).bind(s=>zH(s.getNode())||WH(e,t,n,s)?m.none():t&&Ze(s.getNode())||!t&&Ze(s.getNode(!0))?QS(e,t,n,s):t&&vo(n)||!t&&bo(n)?m.some(En.moveToPosition(s)):m.none()),VH=(e,t)=>ut(t)?m.none():e&&Ze(t.nextSibling)?m.some(En.moveToElement(t.nextSibling)):!e&&Ze(t.previousSibling)?m.some(En.moveToElement(t.previousSibling)):m.none(),qH=(e,t,n)=>n.fold(s=>m.some(En.remove(s)),s=>m.some(En.moveToElement(s)),s=>ws(t,s,e)?m.none():m.some(En.moveToPosition(s))),jH=(e,t,n)=>HH(t,n)?VH(t,n.getNode(!t)).orThunk(()=>JS(e,t,n)):JS(e,t,n).bind(s=>qH(e,n,s)),KH=(e,t,n)=>{const s=zf(t?1:-1,e,n),o=P.fromRangeStart(s),r=S.fromDom(e);return!t&&vo(o)?m.some(En.remove(o.getNode(!0))):t&&bo(o)?m.some(En.remove(o.getNode())):!t&&bo(o)&&Dd(r,o)?XB(r,o).map(a=>En.remove(a.getNode())):t&&vo(o)&&Ad(r,o)?ZB(r,o).map(a=>En.remove(a.getNode())):jH(e,t,o)},GH=(e,t)=>n=>(e._selectionOverrides.hideFakeCaret(),rr(e,t,S.fromDom(n)),!0),YH=(e,t)=>n=>{const s=t?P.before(n):P.after(n);return e.selection.setRng(s.toRange()),!0},XH=e=>t=>(e.selection.setRng(t.toRange()),!0),e0=(e,t)=>m.from(ir(e.getBody(),t)),ZH=(e,t)=>{const n=e.selection.getNode();return e0(e,n).filter(Ze).fold(()=>KH(e.getBody(),t,e.selection.getRng()).map(s=>()=>s.fold(GH(e,t),YH(e,t),XH(e))),()=>m.some(Se))},QH=e=>{$(jt(e,".mce-offscreen-selection"),tt)},JH=(e,t)=>{const n=e.selection.getNode();return Ze(n)&&!ul(n)?e0(e,n.parentNode).filter(Ze).fold(()=>m.some(()=>{QH(S.fromDom(e.getBody())),rr(e,t,S.fromDom(e.selection.getNode())),Ld(e)}),()=>m.some(Se)):$m(e)?m.some(()=>{ky(e,e.selection.getRng(),S.fromDom(e.getBody()))}):m.none()},t0=e=>{const t=e.dom,n=e.selection,s=ir(e.getBody(),n.getNode());if(ts(s)&&t.isBlock(s)&&t.isEmpty(s)){const o=t.create("br",{"data-mce-bogus":"1"});t.setHTML(s,""),s.appendChild(o),n.setRng(P.before(o).toRange())}return!0},Mm=(e,t)=>e.selection.isCollapsed()?ZH(e,t):JH(e,t),e2=(e,t)=>{const n=P.fromRangeStart(e.selection.getRng());return Pn(t,e.getBody(),n).filter(s=>t?WB(s):VB(s)).bind(s=>Uf(t?0:-1,s)).map(s=>()=>e.selection.select(s))},Um=(e,t)=>e.selection.isCollapsed()?e2(e,t):m.none(),oa=z,n0=e=>oa(e)&&e.data[0]===Ut,s0=e=>oa(e)&&e.data[e.data.length-1]===Ut,o0=e=>{var t;return((t=e.ownerDocument)!==null&&t!==void 0?t:document).createTextNode(Ut)},t2=e=>{var t;if(oa(e.previousSibling))return s0(e.previousSibling)||e.previousSibling.appendData(Ut),e.previousSibling;if(oa(e))return n0(e)||e.insertData(0,Ut),e;{const n=o0(e);return(t=e.parentNode)===null||t===void 0||t.insertBefore(n,e),n}},n2=e=>{var t,n;if(oa(e.nextSibling))return n0(e.nextSibling)||e.nextSibling.insertData(0,Ut),e.nextSibling;if(oa(e))return s0(e)||e.appendData(Ut),e;{const s=o0(e);return e.nextSibling?(t=e.parentNode)===null||t===void 0||t.insertBefore(s,e.nextSibling):(n=e.parentNode)===null||n===void 0||n.appendChild(s),s}},Ec=(e,t)=>e?t2(t):n2(t),s2=te(Ec,!0),o2=te(Ec,!1),r0=(e,t)=>z(e.container())?Ec(t,e.container()):Ec(t,e.getNode()),a0=(e,t)=>{const n=t.get();return n&&e.container()===n&&ao(n)},zm=(e,t)=>t.fold(n=>{Zo(e.get());const s=s2(n);return e.set(s),m.some(P(s,s.length-1))},n=>Qt(n).map(s=>{if(a0(s,e)){const o=e.get();return P(o,1)}else{Zo(e.get());const o=r0(s,!0);return e.set(o),P(o,1)}}),n=>Kn(n).map(s=>{if(a0(s,e)){const o=e.get();return P(o,o.length-1)}else{Zo(e.get());const o=r0(s,!1);return e.set(o),P(o,o.length-1)}}),n=>{Zo(e.get());const s=o2(n);return e.set(s),m.some(P(s,1))}),i0=(e,t)=>{for(let n=0;n<e.length;n++){const s=e[n].apply(null,t);if(s.isSome())return s}return m.none()},Jt=Ss.generate([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),l0=(e,t)=>{const n=mo(t,e);return n||e},r2=(e,t,n)=>{const s=Ey(n),o=l0(t,s.container());return Co(e,o,s).fold(()=>Zt(o,s).bind(te(Co,e,o)).map(r=>Jt.before(r)),m.none)},a2=(e,t)=>Jo(e,t)===null,c0=(e,t,n)=>Co(e,t,n).filter(te(a2,t)),i2=(e,t,n)=>{const s=Sy(n);return c0(e,t,s).bind(o=>ln(o,s).isNone()?m.some(Jt.start(o)):m.none())},l2=(e,t,n)=>{const s=Ey(n);return c0(e,t,s).bind(o=>Zt(o,s).isNone()?m.some(Jt.end(o)):m.none())},c2=(e,t,n)=>{const s=Sy(n),o=l0(t,s.container());return Co(e,o,s).fold(()=>ln(o,s).bind(te(Co,e,o)).map(r=>Jt.after(r)),m.none)},u0=e=>!yy(Hm(e)),Ds=(e,t,n)=>i0([r2,i2,l2,c2],[e,t,n]).filter(u0),Hm=e=>e.fold(Vt,Vt,Vt,Vt),f0=e=>e.fold(Y("before"),Y("start"),Y("end"),Y("after")),Sc=e=>e.fold(Jt.before,Jt.before,Jt.after,Jt.after),Wm=e=>e.fold(Jt.start,Jt.start,Jt.end,Jt.end),u2=(e,t)=>f0(e)===f0(t)&&Hm(e)===Hm(t),f2=(e,t,n,s,o,r)=>on(Co(t,n,s),Co(t,n,o),(a,i)=>a!==i&&AI(n,a,i)?Jt.after(e?a:i):r).getOr(r),d2=(e,t)=>e.fold(yt,n=>!u2(n,t)),m2=(e,t,n,s,o)=>{const r=Ln(e,o);return Pn(e,n,r).map(te(Ln,e)).fold(()=>s.map(Sc),l=>Ds(t,n,l).map(te(f2,e,t,n,r,l)).filter(te(d2,s))).filter(u0)},p2=(e,t)=>e?t.fold(Nn(m.some,Jt.start),m.none,Nn(m.some,Jt.after),m.none):t.fold(m.none,Nn(m.some,Jt.before),m.none,Nn(m.some,Jt.end)),g2=(e,t,n,s)=>{const o=Ln(e,s),r=Ds(t,n,o);return Ds(t,n,o).bind(te(p2,e)).orThunk(()=>m2(e,t,n,r,s))},h2=e=>Ie(e.selection.getSel().modify),d0=(e,t,n)=>{const s=e?1:-1;return t.setRng(P(n.container(),n.offset()+s).toRange()),t.getSel().modify("move",e?"forward":"backward","word"),!0},b2=(e,t)=>{const n=t.selection.getRng(),s=e?P.fromRangeEnd(n):P.fromRangeStart(n);return h2(t)?e&&of(s)?d0(!0,t.selection,s):!e&&rf(s)?d0(!1,t.selection,s):!1:!1};var Rs;(function(e){e[e.Br=0]="Br",e[e.Block=1]="Block",e[e.Wrap=2]="Wrap",e[e.Eol=3]="Eol"})(Rs||(Rs={}));const wc=(e,t)=>e===Dt.Backwards?_a(t):t,v2=(e,t,n)=>e===Dt.Forwards?t.next(n):t.prev(n),C2=(e,t,n,s)=>ft(s.getNode(t===Dt.Forwards))?Rs.Br:ws(n,s)===!1?Rs.Block:Rs.Wrap,m0=(e,t,n,s)=>{const o=xs(n);let r=s;const a=[];for(;r;){const i=v2(t,o,r);if(!i)break;if(ft(i.getNode(!1)))return t===Dt.Forwards?{positions:wc(t,a).concat([i]),breakType:Rs.Br,breakAt:m.some(i)}:{positions:wc(t,a),breakType:Rs.Br,breakAt:m.some(i)};if(!i.isVisible()){r=i;continue}if(e(r,i)){const l=C2(n,t,r,i);return{positions:wc(t,a),breakType:l,breakAt:m.some(i)}}a.push(i),r=i}return{positions:wc(t,a),breakType:Rs.Eol,breakAt:m.none()}},p0=(e,t,n,s)=>t(n,s).breakAt.map(o=>{const r=t(n,o).positions;return e===Dt.Backwards?r.concat(o):[o].concat(r)}).getOr([]),Vm=(e,t)=>vn(e,(n,s)=>n.fold(()=>m.some(s),o=>on(mn(o.getClientRects()),mn(s.getClientRects()),(r,a)=>{const i=Math.abs(t-r.left);return Math.abs(t-a.left)<=i?s:o}).or(n)),m.none()),_c=(e,t)=>mn(t.getClientRects()).bind(n=>Vm(e,n.left)),Ni=te(m0,P.isAbove,-1),Ti=te(m0,P.isBelow,1),g0=te(p0,-1,Ni),h0=te(p0,1,Ti),y2=(e,t)=>Ni(e,t).breakAt.isNone(),E2=(e,t)=>Ti(e,t).breakAt.isNone(),S2=e=>Qt(e).map(t=>[t].concat(Ti(e,t).positions)).getOr([]),w2=e=>Kn(e).map(t=>Ni(e,t).positions.concat(t)).getOr([]),_2=(e,t)=>_c(g0(e,t),t),x2=(e,t)=>_c(h0(e,t),t),k2=Ze,b0=(e,t)=>Math.abs(e.left-t),v0=(e,t)=>Math.abs(e.right-t),N2=e=>xr(e,"node"),C0=(e,t)=>el(e,(n,s)=>{const o=Math.min(b0(n,t),v0(n,t)),r=Math.min(b0(s,t),v0(s,t));return r===o&&N2(s)&&k2(s.node)||r<o?s:n}),T2=e=>{const t=n=>Fe(n,s=>{const o=Yo(s);return o.node=e,o});if(Z(e))return t(e.getClientRects());if(z(e)){const n=e.ownerDocument.createRange();return n.setStart(e,0),n.setEnd(e,e.data.length),t(n.getClientRects())}else return[]},y0=e=>gs(e,T2);var Ai;(function(e){e[e.Up=-1]="Up",e[e.Down=1]="Down"})(Ai||(Ai={}));const A2=(e,t,n,s)=>{let o=s;for(;o=oi(o,e,Ih,t);)if(n(o))return},E0=(e,t,n,s,o,r)=>{let a=0;const i=[],l=u=>{let d=y0([u]);e===-1&&(d=d.reverse());for(let b=0;b<d.length;b++){const E=d[b];if(!n(E,c)){if(i.length>0&&t(E,Po(i))&&a++,E.line=a,o(E))return!0;i.push(E)}}return!1},c=Po(r.getClientRects());if(!c)return i;const f=r.getNode();return f&&(l(f),A2(e,s,l,f)),i},D2=(e,t)=>t.line>e,R2=(e,t)=>t.line===e,P2=te(E0,Ai.Up,Xa,Za),O2=te(E0,Ai.Down,Za,Xa),S0=e=>Po(e.getClientRects()),B2=(e,t,n,s)=>{const o=xs(t);let r,a,i,l;const c=[];let f=0;e===1?(r=o.next,a=Za,i=Xa,l=P.after(s)):(r=o.prev,a=Xa,i=Za,l=P.before(s));const u=S0(l);do{if(!l.isVisible())continue;const d=S0(l);if(i(d,u))continue;c.length>0&&a(d,Po(c))&&f++;const b=Yo(d);if(b.position=l,b.line=f,n(b))return c;c.push(b)}while(l=r(l));return c},w0=e=>t=>D2(e,t),qm=e=>t=>R2(e,t),Xs=(e,t)=>{e.selection.setRng(t),pi(e,e.selection.getRng())},jm=(e,t,n)=>m.some(Im(e,t,n)),_0=(e,t,n,s,o,r)=>{const a=t===Dt.Forwards,i=xs(e.getBody()),l=te(Hf,a?i.next:i.prev),c=a?s:o;if(!n.collapsed){const E=Nl(n);if(r(E))return Ys(t,e,E,t===Dt.Backwards,!1);if($m(e)){const g=n.cloneRange();return g.collapse(t===Dt.Backwards),m.from(g)}}const f=ii(t,e.getBody(),n);if(c(f))return ki(e,f.getNode(!a));let u=l(f);const d=Ph(n);if(u)u=Ln(a,u);else return d?m.some(n):m.none();if(c(u))return Ys(t,e,u.getNode(!a),a,!1);const b=l(u);return b&&c(b)&&Il(u,b)?Ys(t,e,b.getNode(!a),a,!1):d?jm(e,u.toRange(),!1):m.none()},x0=(e,t,n,s,o,r)=>{const a=ii(t,e.getBody(),n),i=Po(a.getClientRects()),l=t===Ai.Down,c=e.getBody();if(!i)return m.none();if($m(e)){const y=l?P.fromRangeEnd(n):P.fromRangeStart(n);return(l?x2:_2)(c,y).orThunk(()=>m.from(y)).map(_=>_.toRange())}const u=(l?O2:P2)(c,w0(1),a),d=ve(u,qm(1)),b=i.left,E=C0(d,b);if(E&&r(E.node)){const y=Math.abs(b-E.left),w=Math.abs(b-E.right);return Ys(t,e,E.node,y<w,!1)}let g;if(s(a)?g=a.getNode():o(a)?g=a.getNode(!0):g=Nl(n),g){const y=B2(t,c,w0(1),g);let w=C0(ve(y,qm(1)),b);if(w||(w=Po(ve(y,qm(0))),w))return jm(e,w.position.toRange(),!1)}return d.length===0?Km(e,l).filter(l?o:s).map(y=>Im(e,y.toRange(),!1)):m.none()},Km=(e,t)=>{const n=e.selection.getRng(),s=t?P.fromRangeEnd(n):P.fromRangeStart(n),o=_1(s.container(),e.getBody());if(t){const r=Ti(o,s);return Ro(r.positions)}else{const r=Ni(o,s);return mn(r.positions)}},k0=(e,t,n)=>Km(e,t).filter(n).exists(s=>(e.selection.setRng(s.toRange()),!0)),xc=(e,t)=>{const n=e.dom.createRng();n.setStart(t.container(),t.offset()),n.setEnd(t.container(),t.offset()),e.selection.setRng(n)},N0=(e,t)=>{e?t.setAttribute("data-mce-selected","inline-boundary"):t.removeAttribute("data-mce-selected")},T0=(e,t,n)=>zm(t,n).map(s=>(xc(e,s),n)),I2=(e,t,n)=>{const s=P.fromRangeStart(e);if(e.collapsed)return s;{const o=P.fromRangeEnd(e);return n?ln(t,o).getOr(o):Zt(t,s).getOr(s)}},L2=(e,t,n)=>{const s=e.getBody(),o=I2(e.selection.getRng(),s,n),r=te(ar,e);return g2(n,r,s,o).bind(i=>T0(e,t,i))},F2=(e,t,n)=>{const s=Fe(jt(S.fromDom(t.getRoot()),'*[data-mce-selected="inline-boundary"]'),a=>a.dom),o=ve(s,e),r=ve(n,e);$(Xi(o,r),te(N0,!1)),$(Xi(r,o),te(N0,!0))},$2=(e,t)=>{const n=t.get();if(e.selection.isCollapsed()&&!e.composing&&n){const s=P.fromRangeStart(e.selection.getRng());P.isTextPosition(s)&&!DI(s)&&(xc(e,d1(n,s)),t.set(null))}},M2=(e,t,n,s)=>{if(t.selection.isCollapsed()){const o=ve(s,e);$(o,r=>{const a=P.fromRangeStart(t.selection.getRng());Ds(e,t.getBody(),a).bind(i=>T0(t,n,i))})}},A0=(e,t,n)=>ti(e)?L2(e,t,n).isSome():!1,D0=(e,t,n)=>ti(t)?b2(e,t):!1,U2=e=>{const t=At(null),n=te(ar,e);return e.on("NodeChange",s=>{ti(e)&&(F2(n,e.dom,s.parents),$2(e,t),M2(n,e,t,s.parents))}),t},z2=te(D0,!0),H2=te(D0,!1),kc=(e,t,n)=>{if(ti(e)){const s=Km(e,t).getOrThunk(()=>{const o=e.selection.getRng();return t?P.fromRangeEnd(o):P.fromRangeStart(o)});return Ds(te(ar,e),e.getBody(),s).exists(o=>{const r=Sc(o);return zm(n,r).exists(a=>(xc(e,a),!0))})}else return!1},W2=(e,t)=>{const n=document.createRange();return n.setStart(e.container(),e.offset()),n.setEnd(t.container(),t.offset()),n},V2=e=>on(Qt(e),Kn(e),(t,n)=>{const s=Ln(!0,t),o=Ln(!1,n);return Zt(e,s).forall(r=>r.isEqual(o))}).getOr(!0),R0=(e,t)=>n=>zm(t,n).map(s=>()=>xc(e,s)),P0=(e,t,n,s)=>{const o=e.getBody(),r=te(ar,e);e.undoManager.ignore(()=>{e.selection.setRng(W2(n,s)),Id(e),Ds(r,o,P.fromRangeStart(e.selection.getRng())).map(Wm).bind(R0(e,t)).each(ya)}),e.nodeChanged()},q2=(e,t)=>{const n=mo(t,e);return n||e},j2=(e,t,n,s)=>{const o=q2(e.getBody(),s.container()),r=te(ar,e),a=Ds(r,o,s);return a.bind(l=>n?l.fold(Y(m.some(Wm(l))),m.none,Y(m.some(Sc(l))),m.none):l.fold(m.none,Y(m.some(Sc(l))),m.none,Y(m.some(Wm(l))))).map(R0(e,t)).getOrThunk(()=>{const l=li(n,o,s),c=l.bind(f=>Ds(r,o,f));return on(a,c,()=>Co(r,o,s).bind(f=>V2(f)?m.some(()=>{rr(e,n,S.fromDom(f))}):m.none())).getOrThunk(()=>c.bind(()=>l.map(f=>()=>{n?P0(e,t,s,f):P0(e,t,f,s)})))})},Gm=(e,t,n)=>{if(e.selection.isCollapsed()&&ti(e)){const s=P.fromRangeStart(e.selection.getRng());return j2(e,t,n,s)}return m.none()},K2=e=>Ku(e)>1,O0=(e,t)=>{const n=S.fromDom(e.getBody()),s=S.fromDom(e.selection.getStart()),o=Gs(s,n);return wa(o,t).fold(Y(o),r=>o.slice(0,r))},G2=e=>Ku(e)===1,Y2=e=>O0(e,t=>Dn(t)||K2(t)),X2=e=>O0(e,Dn),B0=(e,t)=>{const n=te(Qy,e);return gs(t,s=>n(s)?[s.dom]:[])},I0=e=>{const t=X2(e);return B0(e,t)},Z2=(e,t,n,s)=>{const o=B0(t,s);if(o.length===0)rr(t,e,n);else{const r=Zy(n.dom,o);t.selection.setRng(r.toRange())}},Q2=(e,t)=>{const n=ve(Y2(e),G2);return Ro(n).bind(s=>{const o=P.fromRangeStart(e.selection.getRng());return _y(t,o,s.dom)&&!Jy(s)?m.some(()=>Z2(t,e,s,n)):m.none()})},J2=(e,t)=>{const n=t.parentElement;return ft(t)&&!Lt(n)&&e.dom.isEmpty(n)},eW=e=>Jy(S.fromDom(e)),L0=(e,t)=>{const n=e.selection.getStart(),s=J2(e,n)||eW(n)?Zy(n,t):EF(e.selection.getRng(),t);e.selection.setRng(s.toRange())},tW=(e,t)=>{const n=Xi(t,I0(e));n.length>0&&L0(e,n)},F0=e=>z(e.startContainer),nW=e=>e.startOffset===0&&F0(e),sW=(e,t)=>{const n=t.startContainer.parentElement;return!Lt(n)&&Qy(e,S.fromDom(n))},oW=e=>{const t=e.startContainer.parentNode,n=e.endContainer.parentNode;return!Lt(t)&&!Lt(n)&&t.isEqualNode(n)},rW=e=>{const t=e.endContainer;return e.endOffset===(z(t)?t.length:t.childNodes.length)},aW=e=>oW(e)&&rW(e),iW=e=>!e.endContainer.isEqualNode(e.commonAncestorContainer),lW=e=>aW(e)||iW(e),cW=e=>{const t=e.selection.getRng();return nW(t)&&sW(e,t)&&lW(t)},uW=e=>{if(cW(e)){const t=I0(e);return m.some(()=>{Id(e),tW(e,t)})}else return m.none()},Ym=(e,t)=>e.selection.isCollapsed()?Q2(e,t):uW(e),fW=e=>oF(e,t=>Gn(t.dom),Dn),dW=e=>fW(S.fromDom(e.selection.getStart())),mW=e=>{const t=e.selection.getRng();return t.collapsed&&(F0(t)||e.dom.isEmpty(t.startContainer))&&!dW(e)},Di=e=>(mW(e)&&L0(e,[]),!0),Xm=(e,t,n)=>K(n)?m.some(()=>{e._selectionOverrides.hideFakeCaret(),rr(e,t,S.fromDom(n))}):m.none(),pW=(e,t)=>{const n=t?gi:hi,s=t?Dt.Forwards:Dt.Backwards,o=ii(s,e.getBody(),e.selection.getRng());return n(o)?Xm(e,t,o.getNode(!t)):m.from(Ln(t,o)).filter(r=>n(r)&&Il(o,r)).bind(r=>Xm(e,t,r.getNode(!t)))},gW=(e,t)=>{const n=e.selection.getNode();return Es(n)?Xm(e,t,n):m.none()},Zm=(e,t)=>e.selection.isCollapsed()?pW(e,t):gW(e,t),hW=e=>Lo(e,t=>ts(t.dom)||Ze(t.dom)).exists(t=>ts(t.dom)),Qm=e=>tl(e??"").getOr(0),$0=(e,t)=>{const n=e||xT(t)?"margin":"padding",s=ys(t,"direction")==="rtl"?"-right":"-left";return n+s},bW=(e,t,n,s,o,r)=>{const a=$0(n,S.fromDom(r)),i=Qm(e.getStyle(r,a));if(t==="outdent"){const l=Math.max(0,i-s);e.setStyle(r,a,l?l+o:"")}else{const l=i+s+o;e.setStyle(r,a,l)}},vW=(e,t)=>Js(t,n=>{const s=$0(Qb(e),n),o=rl(n,s).map(Qm).getOr(0);return e.dom.getContentEditable(n.dom)!=="false"&&o>0}),M0=e=>{const t=z0(e);return!e.mode.isReadOnly()&&(t.length>1||vW(e,t))},U0=e=>sf(e)||Ma(e),CW=e=>qn(e).exists(U0),z0=e=>ve(Xu(e.selection.getSelectedBlocks()),t=>!U0(t)&&!CW(t)&&hW(t)),H0=(e,t)=>{var n,s;const{dom:o}=e,r=sR(e),a=(s=(n=/[a-z%]+$/i.exec(r))===null||n===void 0?void 0:n[0])!==null&&s!==void 0?s:"px",i=Qm(r),l=Qb(e);$(z0(e),c=>{bW(o,t,l,i,a,c.dom)})},yW=e=>H0(e,"indent"),W0=e=>H0(e,"outdent"),V0=e=>{if(e.selection.isCollapsed()&&M0(e)){const t=e.dom,n=e.selection.getRng(),s=P.fromRangeStart(n),o=t.getParent(n.startContainer,t.isBlock);if(o!==null&&Td(S.fromDom(o),s))return m.some(()=>W0(e))}return m.none()},q0=(e,t,n)=>_r([V0,Mm,Lm,(s,o)=>Gm(s,t,o),Om,Vd,Um,Zm,Bm,Ym],s=>s(e,n)).filter(s=>e.selection.isEditable()),EW=(e,t)=>{q0(e,t,!1).fold(()=>{Id(e),Ld(e)},ya)},SW=(e,t)=>{q0(e,t,!0).fold(()=>PI(e),ya)},wW=(e,t)=>{e.addCommand("delete",()=>{EW(e,t)}),e.addCommand("forwardDelete",()=>{SW(e,t)})},j0=5,_W=400,K0=e=>e.touches===void 0||e.touches.length!==1?m.none():m.some(e.touches[0]),xW=(e,t)=>{const n=Math.abs(e.clientX-t.x),s=Math.abs(e.clientY-t.y);return n>j0||s>j0},kW=e=>{const t=co(),n=At(!1),s=_f(o=>{e.dispatch("longpress",{...o,type:"longpress"}),n.set(!0)},_W);e.on("touchstart",o=>{K0(o).each(r=>{s.cancel();const a={x:r.clientX,y:r.clientY,target:o.target};s.throttle(o),n.set(!1),t.set(a)})},!0),e.on("touchmove",o=>{s.cancel(),K0(o).each(r=>{t.on(a=>{xW(r,a)&&(t.clear(),n.set(!1),e.dispatch("longpresscancel"))})})},!0),e.on("touchend touchcancel",o=>{s.cancel(),o.type!=="touchcancel"&&t.get().filter(r=>r.target.isEqualNode(o.target)).each(()=>{n.get()?o.preventDefault():e.dispatch("tap",{...o,type:"tap"})})},!0)},Jm=(e,t)=>ye(e,t.nodeName),NW=(e,t)=>z(t)?!0:Z(t)?!Jm(e.getBlockElements(),t)&&!On(t)&&!Wo(e,t):!1,TW=(e,t,n)=>gt(ty(S.fromDom(n),S.fromDom(t)),s=>Jm(e,s.dom)),AW=(e,t)=>{if(z(t)){if(t.data.length===0)return!0;if(/^\s+$/.test(t.data)&&(!t.nextSibling||Jm(e,t.nextSibling)))return!0}return!1},G0=e=>e.dom.create(an(e),ei(e)),DW=e=>{const t=e.dom,n=e.selection,s=e.schema,o=s.getBlockElements(),r=n.getStart(),a=e.getBody();let i,l,c=!1;const f=an(e);if(!r||!Z(r))return;const u=a.nodeName.toLowerCase();if(!s.isValidChild(u,f.toLowerCase())||TW(o,a,r))return;const d=n.getRng(),{startContainer:b,startOffset:E,endContainer:g,endOffset:y}=d,w=or(e);let _=a.firstChild;for(;_;)if(Z(_)&&iA(s,_),NW(s,_)){if(AW(o,_)){l=_,_=_.nextSibling,t.remove(l);continue}i||(i=G0(e),a.insertBefore(i,_),c=!0),l=_,_=_.nextSibling,i.appendChild(l)}else i=null,_=_.nextSibling;c&&w&&(d.setStart(b,E),d.setEnd(g,y),n.setRng(d),e.nodeChanged())},Y0=(e,t,n)=>{const s=S.fromDom(G0(e)),o=pl();ht(s,o),n(t,s);const r=document.createRange();return r.setStartBefore(o.dom),r.setEndBefore(o.dom),r},RW=e=>{e.on("NodeChange",te(DW,e))},X0=e=>t=>(" "+t.attr("class")+" ").indexOf(e)!==-1,PW=(e,t,n)=>function(s){const o=arguments,r=o[o.length-2],a=r>0?t.charAt(r-1):"";if(a==='"')return s;if(a===">"){const i=t.lastIndexOf("<",r);if(i!==-1&&t.substring(i,r).indexOf('contenteditable="false"')!==-1)return s}return'<span class="'+n+'" data-mce-content="'+e.dom.encode(o[0])+'">'+e.dom.encode(typeof o[1]=="string"?o[1]:o[0])+"</span>"},OW=(e,t,n)=>{let s=t.length,o=n.content;if(n.format!=="raw"){for(;s--;)o=o.replace(t[s],PW(e,o,rv(e)));n.content=o}},BW=e=>{const t="contenteditable",n=" "+V.trim(YR(e))+" ",s=" "+V.trim(rv(e))+" ",o=X0(n),r=X0(s),a=XR(e);a.length>0&&e.on("BeforeSetContent",i=>{OW(e,a,i)}),e.parser.addAttributeFilter("class",i=>{let l=i.length;for(;l--;){const c=i[l];o(c)?c.attr(t,"true"):r(c)&&c.attr(t,"false")}}),e.serializer.addAttributeFilter(t,i=>{let l=i.length;for(;l--;){const c=i[l];!o(c)&&!r(c)||(a.length>0&&c.attr("data-mce-content")?(c.name="#text",c.type=3,c.raw=!0,c.value=c.attr("data-mce-content")):c.attr(t,null))}})},IW=e=>Ia(S.fromDom(e.getBody()),"*[data-mce-caret]").map(t=>t.dom).getOrNull(),Z0=(e,t)=>{t.hasAttribute("data-mce-caret")&&(af(t),e.selection.setRng(e.selection.getRng()),e.selection.scrollIntoView(t))},LW=(e,t)=>{const n=IW(e);if(n){if(t.type==="compositionstart"){t.preventDefault(),t.stopPropagation(),Z0(e,n);return}Rh(n)&&(Z0(e,n),e.undoManager.add())}},FW=e=>{e.on("keyup compositionstart",te(LW,e))},Q0=Ze,$W=(e,t,n)=>_0(t,e,n,bo,vo,Q0),MW=(e,t,n)=>x0(t,e,n,r=>bo(r)||JC(r),r=>vo(r)||ey(r),Q0),UW=e=>{const t=e.dom.create(an(e));return t.innerHTML='<br data-mce-bogus="1">',t},J0=(e,t,n)=>{const s=xs(e.getBody()),o=te(Hf,t===1?s.next:s.prev);if(n.collapsed){const r=e.dom.getParent(n.startContainer,"PRE");if(!r)return;if(!o(P.fromRangeStart(n))){const i=S.fromDom(UW(e));t===1?no(S.fromDom(r),i):yn(S.fromDom(r),i),e.selection.select(i.dom,!0),e.selection.collapse()}}},zW=(e,t)=>{const n=t?Dt.Forwards:Dt.Backwards,s=e.selection.getRng();return $W(n,e,s).orThunk(()=>(J0(e,n,s),m.none()))},HW=(e,t)=>{const n=t?1:-1,s=e.selection.getRng();return MW(n,e,s).orThunk(()=>(J0(e,n,s),m.none()))},WW=(e,t)=>{const n=t?e.getEnd(!0):e.getStart(!0);return yy(n)?!t:t},ew=(e,t)=>zW(e,WW(e.selection,t)).exists(n=>(Xs(e,n),!0)),tw=(e,t)=>HW(e,t).exists(n=>(Xs(e,n),!0)),nw=(e,t)=>k0(e,t,t?vo:bo),Nc=(e,t)=>Fm(e,!t).map(n=>{const s=n.toRange(),o=e.selection.getRng();return t?s.setStart(o.startContainer,o.startOffset):s.setEnd(o.endContainer,o.endOffset),s}).exists(n=>(Xs(e,n),!0)),VW=e=>We(["figcaption"],Xe(e)),qW=(e,t)=>{const n=te(Ue,t);return Lo(S.fromDom(e.container()),Dn,n).filter(VW)},jW=(e,t,n)=>t?E2(e.dom,n):y2(e.dom,n),KW=(e,t)=>{const n=S.fromDom(e.getBody()),s=P.fromRangeStart(e.selection.getRng());return qW(s,n).exists(()=>{if(jW(n,t,s)){const r=Y0(e,n,t?ht:hh);return e.selection.setRng(r),!0}else return!1})},sw=(e,t)=>e.selection.isCollapsed()?KW(e,t):!1,ow={shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0},GW=e=>Fe(e,t=>({...ow,...t})),YW=e=>Fe(e,t=>({...ow,...t})),rw=(e,t)=>t.keyCode===e.keyCode&&t.shiftKey===e.shiftKey&&t.altKey===e.altKey&&t.ctrlKey===e.ctrlKey&&t.metaKey===e.metaKey,XW=(e,t)=>gs(GW(e),n=>rw(n,t)?[n]:[]),ZW=(e,t)=>gs(YW(e),n=>rw(n,t)?[n]:[]),Ce=(e,...t)=>()=>e.apply(null,t),Ri=(e,t)=>wt(XW(e,t),n=>n.action()),aw=(e,t)=>_r(ZW(e,t),n=>n.action()),iw=(e,t)=>{const n=t?Dt.Forwards:Dt.Backwards,s=e.selection.getRng();return _0(e,n,s,gi,hi,Es).exists(o=>(Xs(e,o),!0))},lw=(e,t)=>{const n=t?1:-1,s=e.selection.getRng();return x0(e,n,s,gi,hi,Es).exists(o=>(Xs(e,o),!0))},cw=(e,t)=>k0(e,t,t?hi:gi),uw=Ss.generate([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),Pi={...uw,none:e=>uw.none(e)},QW=(e,t)=>fw(e,t,yt),fw=(e,t,n)=>gs(Mt(e),s=>Jn(s,t)?n(s)?[s]:[]:fw(s,t,n)),JW=(e,t,n=ot)=>{if(n(t))return m.none();if(We(e,Xe(t)))return m.some(t);const s=o=>Jn(o,"table")||n(o);return Ba(t,e.join(","),s)},e3=(e,t)=>JW(["td","th"],e,t),t3=e=>QW(e,"th,td"),dw=(e,t)=>Fo(e,"table",t),ep=(e,t,n,s,o=yt)=>{const r=s===1;if(!r&&n<=0)return Pi.first(e[0]);if(r&&n>=e.length-1)return Pi.last(e[e.length-1]);{const a=n+s,i=e[a];return o(i)?Pi.middle(t,i):ep(e,t,a,s,o)}},mw=(e,t)=>dw(e,t).bind(n=>{const s=t3(n);return wa(s,r=>Ue(e,r)).map(r=>({index:r,all:s}))}),n3=(e,t,n)=>mw(e,n).fold(()=>Pi.none(e),o=>ep(o.all,e,o.index,1,t)),s3=(e,t,n)=>mw(e,n).fold(()=>Pi.none(),o=>ep(o.all,e,o.index,-1,t)),o3=(e,t)=>({left:e.left-t,top:e.top-t,right:e.right+t*2,bottom:e.bottom+t*2,width:e.width+t,height:e.height+t}),r3=(e,t)=>gs(t,n=>{const s=o3(Yo(n.getBoundingClientRect()),-1);return[{x:s.left,y:e(s),cell:n},{x:s.right,y:e(s),cell:n}]}),a3=(e,t,n)=>vn(e,(s,o)=>s.fold(()=>m.some(o),r=>{const a=Math.sqrt(Math.abs(r.x-t)+Math.abs(r.y-n)),i=Math.sqrt(Math.abs(o.x-t)+Math.abs(o.y-n));return m.some(i<a?o:r)}),m.none()),pw=(e,t,n,s,o)=>{const r=jt(S.fromDom(n),"td,th,caption").map(i=>i.dom),a=ve(r3(e,r),i=>t(i,o));return a3(a,s,o).map(i=>i.cell)},i3=e=>e.bottom,l3=e=>e.top,c3=(e,t)=>e.y<t,u3=(e,t)=>e.y>t,f3=te(pw,i3,c3),d3=te(pw,l3,u3),m3=(e,t)=>mn(t.getClientRects()).bind(n=>f3(e,n.left,n.top)).bind(n=>_c(w2(n),t)),p3=(e,t)=>Ro(t.getClientRects()).bind(n=>d3(e,n.left,n.top)).bind(n=>_c(S2(n),t)),g3=(e,t,n)=>n.breakAt.exists(s=>e(t,s).breakAt.isSome()),h3=e=>e.breakType===Rs.Wrap&&e.positions.length===0,b3=e=>e.breakType===Rs.Br&&e.positions.length===1,gw=(e,t,n)=>{const s=e(t,n);return h3(s)||!ft(n.getNode())&&b3(s)?!g3(e,t,s):s.breakAt.isNone()},v3=te(gw,Ni),C3=te(gw,Ti),y3=(e,t,n)=>{const s=P.fromRangeStart(t);return jr(!e,n).exists(o=>o.isEqual(s))},E3=(e,t,n,s)=>{const o=e.selection.getRng(),r=t?1:-1;return mv()&&y3(t,o,n)?(Ys(r,e,n,!t,!1).each(a=>{Xs(e,a)}),!0):!1},S3=(e,t,n)=>m3(t,n).orThunk(()=>mn(n.getClientRects()).bind(s=>Vm(g0(e,P.before(t)),s.left))).getOr(P.before(t)),w3=(e,t,n)=>p3(t,n).orThunk(()=>mn(n.getClientRects()).bind(s=>Vm(h0(e,P.after(t)),s.left))).getOr(P.after(t)),hw=(e,t)=>{const n=t.getNode(e);return Vs(n)?m.some(n):m.none()},_3=(e,t,n)=>{t.undoManager.transact(()=>{const s=e?no:yn,o=Y0(t,S.fromDom(n),s);Xs(t,o)})},bw=(e,t,n)=>{const s=hw(!!t,n),o=t===!1;s.fold(()=>Xs(e,n.toRange()),r=>jr(o,e.getBody()).filter(a=>a.isEqual(n)).fold(()=>Xs(e,n.toRange()),a=>_3(t,e,r)))},x3=(e,t,n,s)=>{const o=e.selection.getRng(),r=P.fromRangeStart(o),a=e.getBody();if(!t&&v3(s,r)){const i=S3(a,n,r);return bw(e,t,i),!0}else if(t&&C3(s,r)){const i=w3(a,n,r);return bw(e,t,i),!0}else return!1},vw=(e,t,n)=>m.from(e.dom.getParent(e.selection.getNode(),"td,th")).bind(s=>m.from(e.dom.getParent(s,"table")).map(o=>n(e,t,o,s))).getOr(!1),Cw=(e,t)=>vw(e,t,E3),yw=(e,t)=>vw(e,t,x3),k3=e=>{const t=Zr.exact(e,0,e,0);return gO(t)},Ew=(e,t,n)=>n.fold(m.none,m.none,(s,o)=>SB(o).map(r=>k3(r)),s=>(e.execCommand("mceTableInsertRowAfter"),Sw(e,t,s))),Sw=(e,t,n)=>Ew(e,t,n3(n,Or)),N3=(e,t,n)=>Ew(e,t,s3(n,Or)),ww=(e,t)=>{const n=["table","li","dl"],s=S.fromDom(e.getBody()),o=i=>{const l=Xe(i);return Ue(i,s)||We(n,l)},r=e.selection.getRng(),a=S.fromDom(t?r.endContainer:r.startContainer);return e3(a,o).map(i=>(dw(i,o).each(f=>{e.model.table.clearSelectedCells(f.dom)}),e.selection.collapse(!t),(t?Sw:N3)(e,o,i).each(f=>{e.selection.setRng(f)}),!0)).getOr(!1)},T3=(e,t,n)=>{const s=Oe.os.isMacOS()||Oe.os.isiOS();Ri([{keyCode:ee.RIGHT,action:Ce(ew,e,!0)},{keyCode:ee.LEFT,action:Ce(ew,e,!1)},{keyCode:ee.UP,action:Ce(tw,e,!1)},{keyCode:ee.DOWN,action:Ce(tw,e,!0)},...s?[{keyCode:ee.UP,action:Ce(Nc,e,!1),metaKey:!0,shiftKey:!0},{keyCode:ee.DOWN,action:Ce(Nc,e,!0),metaKey:!0,shiftKey:!0}]:[],{keyCode:ee.RIGHT,action:Ce(Cw,e,!0)},{keyCode:ee.LEFT,action:Ce(Cw,e,!1)},{keyCode:ee.UP,action:Ce(yw,e,!1)},{keyCode:ee.DOWN,action:Ce(yw,e,!0)},{keyCode:ee.RIGHT,action:Ce(iw,e,!0)},{keyCode:ee.LEFT,action:Ce(iw,e,!1)},{keyCode:ee.UP,action:Ce(lw,e,!1)},{keyCode:ee.DOWN,action:Ce(lw,e,!0)},{keyCode:ee.RIGHT,action:Ce(A0,e,t,!0)},{keyCode:ee.LEFT,action:Ce(A0,e,t,!1)},{keyCode:ee.RIGHT,ctrlKey:!s,altKey:s,action:Ce(z2,e,t)},{keyCode:ee.LEFT,ctrlKey:!s,altKey:s,action:Ce(H2,e,t)},{keyCode:ee.UP,action:Ce(sw,e,!1)},{keyCode:ee.DOWN,action:Ce(sw,e,!0)}],n).each(o=>{n.preventDefault()})},A3=(e,t)=>{e.on("keydown",n=>{n.isDefaultPrevented()||T3(e,t,n)})},is=(e,t)=>({container:e,offset:t}),Tc=qe.DOM,Ac=e=>t=>e===t?-1:0,D3=e=>t=>e.isBlock(t)||We(["BR","IMG","HR","INPUT"],t.nodeName)||e.getContentEditable(t)==="false",tp=(e,t,n)=>{if(z(e)&&t>=0)return m.some(is(e,t));{const s=Go(Tc);return m.from(s.backwards(e,t,Ac(e),n)).map(o=>is(o.container,o.container.data.length))}},R3=(e,t,n)=>{if(z(e)&&t>=e.length)return m.some(is(e,t));{const s=Go(Tc);return m.from(s.forwards(e,t,Ac(e),n)).map(o=>is(o.container,0))}},np=(e,t,n)=>{if(!z(e))return m.none();const s=e.data;if(t>=0&&t<=s.length)return m.some(is(e,t));{const o=Go(Tc);return m.from(o.backwards(e,t,Ac(e),n)).bind(r=>{const a=r.container.data;return np(r.container,t+a.length,n)})}},_w=(e,t,n)=>{if(!z(e))return m.none();const s=e.data;if(t<=s.length)return m.some(is(e,t));{const o=Go(Tc);return m.from(o.forwards(e,t,Ac(e),n)).bind(r=>_w(r.container,t-s.length,n))}},sp=(e,t,n,s,o)=>{const r=Go(e,D3(e));return m.from(r.backwards(t,n,s,o))},P3=e=>e.collapsed&&z(e.startContainer),xw=e=>qs(e.toString().replace(/\u00A0/g," ")),kw=e=>e!==""&&`  \f
\r	\v`.indexOf(e)!==-1,op=(e,t)=>e.substring(t.length),O3=(e,t,n)=>{let s;const o=n.charAt(0);for(s=t-1;s>=0;s--){const r=e.charAt(s);if(kw(r))return m.none();if(o===r&&qt(e,n,s,t))break}return m.some(s)},B3=(e,t,n,s=0)=>{if(!P3(t))return m.none();const o={text:"",offset:0},r=(i,l,c)=>(o.text=c+o.text,o.offset+=l,O3(o.text,o.offset,n).getOr(l)),a=e.getParent(t.startContainer,e.isBlock)||e.getRoot();return sp(e,t.startContainer,t.startOffset,r,a).bind(i=>{const l=t.cloneRange();if(l.setStart(i.container,i.offset),l.setEnd(t.endContainer,t.endOffset),l.collapsed)return m.none();const c=xw(l);return c.lastIndexOf(n)!==0||op(c,n).length<s?m.none():m.some({text:op(c,n),range:l,trigger:n})})},Nw=(e,t,n,s=0)=>kB(S.fromDom(t.startContainer)).fold(()=>B3(e,t,n,s),o=>{const r=e.createRng();r.selectNode(o.dom);const a=xw(r);return m.some({range:r,text:op(a,n),trigger:n})}),I3=e=>e.nodeType===Gg,L3=e=>e.nodeType===Aa,Tw=e=>{if(I3(e))return is(e,e.data.length);{const t=e.childNodes;return t.length>0?Tw(t[t.length-1]):is(e,t.length)}},Aw=(e,t)=>{const n=e.childNodes;return n.length>0&&t<n.length?Aw(n[t],0):n.length>0&&L3(e)&&n.length===t?Tw(n[n.length-1]):is(e,t)},F3=(e,t)=>{var n;const s=(n=e.getParent(t.container,e.isBlock))!==null&&n!==void 0?n:e.getRoot();return sp(e,t.container,t.offset,(o,r)=>r===0?-1:r,s).filter(o=>{const r=o.container.data.charAt(o.offset-1);return!kw(r)}).isSome()},$3=e=>t=>{const n=Aw(t.startContainer,t.startOffset);return!F3(e,n)},M3=(e,t,n)=>_r(n.triggers,s=>Nw(e,t,s)),U3=(e,t)=>{const n=t(),s=e.selection.getRng();return M3(e.dom,s,n).bind(o=>Dw(e,t,o))},Dw=(e,t,n,s={})=>{var o;const r=t(),i=(o=e.selection.getRng().startContainer.nodeValue)!==null&&o!==void 0?o:"",l=ve(r.lookupByTrigger(n.trigger),f=>n.text.length>=f.minChars&&f.matches.getOrThunk(()=>$3(e.dom))(n.range,i,n.text));if(l.length===0)return m.none();const c=Promise.all(Fe(l,f=>f.fetch(n.text,f.maxResults,s).then(d=>({matchText:n.text,items:d,columns:f.columns,onAction:f.onAction,highlightOn:f.highlightOn}))));return m.some({lookupData:c,context:n})};var ls;(function(e){e[e.Error=0]="Error",e[e.Value=1]="Value"})(ls||(ls={}));const rp=(e,t,n)=>e.stype===ls.Error?t(e.serror):n(e.svalue),z3=e=>{const t=[],n=[];return $(e,s=>{rp(s,o=>n.push(o),o=>t.push(o))}),{values:t,errors:n}},H3=(e,t)=>e.stype===ls.Error?{stype:ls.Error,serror:t(e.serror)}:e,W3=(e,t)=>e.stype===ls.Value?{stype:ls.Value,svalue:t(e.svalue)}:e,V3=(e,t)=>e.stype===ls.Value?t(e.svalue):e,q3=(e,t)=>e.stype===ls.Error?t(e.serror):e,Rw=e=>({stype:ls.Value,svalue:e}),Pw=e=>({stype:ls.Error,serror:e}),Ot={fromResult:e=>e.fold(Pw,Rw),toResult:e=>rp(e,rn.error,rn.value),svalue:Rw,partition:z3,serror:Pw,bind:V3,bindError:q3,map:W3,mapError:H3,fold:rp},ap=e=>it(e)&&Cn(e).length>100?" removed due to size":JSON.stringify(e,null,2),j3=e=>{const t=e.length>10?e.slice(0,10).concat([{path:[],getErrorInfo:Y("... (only showing first ten failures)")}]):e;return Fe(t,n=>"Failed path: ("+n.path.join(" > ")+`)
`+n.getErrorInfo())},Dc=(e,t)=>Ot.serror([{path:e,getErrorInfo:t}]),K3=(e,t,n)=>Dc(e,()=>'Could not find valid *required* value for "'+t+'" in '+ap(n)),G3=(e,t)=>Dc(e,()=>'Choice schema did not contain choice key: "'+t+'"'),Y3=(e,t,n)=>Dc(e,()=>'The chosen schema: "'+n+'" did not exist in branches: '+ap(t)),X3=(e,t)=>Dc(e,Y(t)),Z3=(e,t,n,s)=>Qe(n,s).fold(()=>Y3(e,n,s),r=>r.extract(e.concat(["branch: "+s]),t)),Q3=(e,t)=>({extract:(o,r)=>Qe(r,e).fold(()=>G3(o,e),i=>Z3(o,r,t,i)),toString:()=>"chooseOn("+e+"). Possible values: "+Cn(t)}),J3=(e,t)=>t,eV=(e,t)=>Sr(e)&&Sr(t)?Rc(e,t):t,Ow=e=>(...t)=>{if(t.length===0)throw new Error("Can't merge zero objects");const n={};for(let s=0;s<t.length;s++){const o=t[s];for(const r in o)ye(o,r)&&(n[r]=e(n[r],o[r]))}return n},Rc=Ow(eV),tV=Ow(J3),Bw=()=>({tag:"required",process:{}}),nV=e=>({tag:"defaultedThunk",process:e}),Iw=e=>nV(Y(e)),sV=()=>({tag:"option",process:{}}),oV=(e,t)=>e.length>0?Ot.svalue(Rc(t,tV.apply(void 0,e))):Ot.svalue(t),Lw=e=>Nn(Ot.serror,mg)(e),rV={consolidateObj:(e,t)=>{const n=Ot.partition(e);return n.errors.length>0?Lw(n.errors):oV(n.values,t)},consolidateArr:e=>{const t=Ot.partition(e);return t.errors.length>0?Lw(t.errors):Ot.svalue(t.values)}},aV=(e,t,n,s)=>({tag:"field",key:e,newKey:t,presence:n,prop:s}),iV=(e,t)=>({tag:"custom",newKey:e,instantiator:t}),Fw=(e,t,n)=>{switch(e.tag){case"field":return t(e.key,e.newKey,e.presence,e.prop);case"custom":return n(e.newKey,e.instantiator)}},ip=e=>{const t=(s,o)=>Ot.bindError(e(o),r=>X3(s,r)),n=Y("val");return{extract:t,toString:n}},lV=ip(Ot.svalue),cV=(e,t,n,s)=>Qe(t,n).fold(()=>K3(e,n,t),s),$w=(e,t,n,s)=>{const o=Qe(e,t).getOrThunk(()=>n(e));return s(o)},uV=(e,t,n)=>n(Qe(e,t)),fV=(e,t,n,s)=>{const o=Qe(e,t).map(r=>r===!0?n(e):r);return s(o)},dV=(e,t,n,s,o)=>{const r=i=>o.extract(t.concat([s]),i),a=i=>i.fold(()=>Ot.svalue(m.none()),l=>{const c=o.extract(t.concat([s]),l);return Ot.map(c,m.some)});switch(e.tag){case"required":return cV(t,n,s,r);case"defaultedThunk":return $w(n,s,e.process,r);case"option":return uV(n,s,a);case"defaultedOptionThunk":return fV(n,s,e.process,a);case"mergeWithThunk":return $w(n,s,Y({}),i=>{const l=Rc(e.process(n),i);return r(l)})}},mV=(e,t,n)=>{const s={},o=[];for(const r of n)Fw(r,(a,i,l,c)=>{const f=dV(l,e,t,a,c);Ot.fold(f,u=>{o.push(...u)},u=>{s[i]=u})},(a,i)=>{s[a]=i(t)});return o.length>0?Ot.serror(o):Ot.svalue(s)},lp=e=>({extract:(s,o)=>mV(s,o,e),toString:()=>`obj{
`+Fe(e,o=>Fw(o,(r,a,i,l)=>r+" -> "+l.toString(),(r,a)=>"state("+r+")")).join(`
`)+"}"}),Mw=e=>({extract:(s,o)=>{const r=Fe(o,(a,i)=>e.extract(s.concat(["["+i+"]"]),a));return rV.consolidateArr(r)},toString:()=>"array("+e.toString()+")"}),pV=e=>ip(t=>e(t).fold(Ot.serror,Ot.svalue)),gV=(e,t,n)=>{const s=t.extract([e],n);return Ot.mapError(s,o=>({input:n,errors:o}))},hV=(e,t,n)=>Ot.toResult(gV(e,t,n)),bV=e=>`Errors: 
`+j3(e.errors).join(`
`)+`

Input object: `+ap(e.input),Uw=(e,t)=>Q3(e,Qi(t,lp)),vV=Y(lV),Pc=(e,t)=>ip(n=>{const s=typeof n;return e(n)?Ot.svalue(n):Ot.serror(`Expected type: ${t} but got: ${s}`)}),CV=Pc(Yt,"number"),Oc=Pc(le,"string"),yV=Pc(Ls,"boolean"),cp=Pc(Ie,"function"),Oi=aV,zw=iV,EV=e=>pV(t=>We(e,t)?rn.value(t):rn.error(`Unsupported value: "${t}", choose one of "${e.join(", ")}".`)),Hw=(e,t)=>Oi(e,e,Bw(),t),Ww=e=>Hw(e,Oc),Vw=e=>Hw(e,cp),SV=(e,t)=>Oi(e,e,Bw(),Mw(t)),up=(e,t)=>Oi(e,e,sV(),t),Bc=e=>up(e,Oc),wV=e=>up(e,cp),_V=(e,t)=>Oi(e,e,Iw(t),vV()),ra=(e,t,n)=>Oi(e,e,Iw(t),n),qw=(e,t)=>ra(e,t,CV),xV=(e,t)=>ra(e,t,Oc),jw=(e,t,n)=>ra(e,t,EV(n)),fp=(e,t)=>ra(e,t,yV),dp=(e,t)=>ra(e,t,cp),kV=(e,t,n)=>ra(e,t,Mw(n)),NV=Ww("type"),TV=Vw("fetch"),mp=Vw("onAction"),AV=dp("onSetup",()=>Se),DV=Bc("text"),RV=Bc("icon"),PV=Bc("tooltip"),OV=Bc("label"),BV=fp("active",!1),IV=fp("enabled",!0),Kw=fp("primary",!1),LV=e=>_V("columns",e),Bi=e=>xV("type",e),FV=lp([NV,Ww("trigger"),qw("minChars",1),LV(1),qw("maxResults",10),wV("matches"),TV,mp,kV("highlightOn",[],Oc)]),$V=e=>hV("Autocompleter",FV,{trigger:e.ch,...e}),pp=[IV,PV,RV,DV,AV],Gw=[BV].concat(pp),MV=[dp("predicate",ot),jw("scope","node",["node","editor"]),jw("position","selection",["node","selection","line"])],UV=pp.concat([Bi("contextformbutton"),Kw,mp,zw("original",Vt)]),zV=Gw.concat([Bi("contextformbutton"),Kw,mp,zw("original",Vt)]),HV=pp.concat([Bi("contextformbutton")]),WV=Gw.concat([Bi("contextformtogglebutton")]),VV=Uw("type",{contextformbutton:UV,contextformtogglebutton:zV});lp([Bi("contextform"),dp("initValue",Y("")),OV,SV("commands",VV),up("launch",Uw("type",{contextformbutton:HV,contextformtogglebutton:WV}))].concat(MV));const qV=e=>{const t=e.ui.registry.getAll().popups,n=Qi(t,a=>$V(a).fold(i=>{throw new Error(bV(i))},Vt)),s=gg(Ru(n,a=>a.trigger)),o=Pu(n);return{dataset:n,triggers:s,lookupByTrigger:a=>ve(o,i=>i.trigger===a)}},jV=(e,t)=>{const n=_f(t.load,50);e.on("keypress compositionend",s=>{s.which!==27&&n.throttle()}),e.on("keydown",s=>{const o=s.which;o===8?n.throttle():o===27&&t.cancelIfNecessary()}),e.on("remove",n.cancel)},KV=e=>{const t=co(),n=At(!1),s=t.isSet,o=()=>{s()&&(DU(e),UP(e),n.set(!1),t.clear())},r=c=>{s()||(AU(e,c.range),t.set({trigger:c.trigger,matchLength:c.text.length}))},a=Oo(()=>qV(e)),i=c=>t.get().map(f=>Nw(e.dom,e.selection.getRng(),f.trigger).bind(u=>Dw(e,a,u,c))).getOrThunk(()=>U3(e,a)),l=c=>{i(c).fold(o,f=>{r(f.context),f.lookupData.then(u=>{t.get().map(d=>{const b=f.context;d.trigger===b.trigger&&(b.text.length-d.matchLength>=10?o():(t.set({...d,matchLength:b.text.length}),n.get()?MP(e,{lookupData:u}):(n.set(!0),$P(e,{lookupData:u}))))})})})};e.addCommand("mceAutocompleterReload",(c,f)=>{const u=it(f)?f.fetchOptions:{};l(u)}),e.addCommand("mceAutocompleterClose",o),jV(e,{cancelIfNecessary:o,load:l})},Yw=e=>(t,n,s={})=>{const o=t.getBody(),r={bubbles:!0,composed:!0,data:null,isComposing:!1,detail:0,view:null,target:o,currentTarget:o,eventPhase:Event.AT_TARGET,originalTarget:o,explicitOriginalTarget:o,isTrusted:!1,srcElement:o,cancelable:!1,preventDefault:Se,inputType:n},a=eb(new InputEvent(e));return t.dispatch(e,{...a,...r,...s})},Ic=Yw("input"),Lc=Yw("beforeinput"),GV=(e,t,n)=>{const s=n.keyCode===ee.BACKSPACE?"deleteContentBackward":"deleteContentForward";aw([{keyCode:ee.BACKSPACE,action:Ce(V0,e)},{keyCode:ee.BACKSPACE,action:Ce(Mm,e,!1)},{keyCode:ee.DELETE,action:Ce(Mm,e,!0)},{keyCode:ee.BACKSPACE,action:Ce(Lm,e,!1)},{keyCode:ee.DELETE,action:Ce(Lm,e,!0)},{keyCode:ee.BACKSPACE,action:Ce(Gm,e,t,!1)},{keyCode:ee.DELETE,action:Ce(Gm,e,t,!0)},{keyCode:ee.BACKSPACE,action:Ce(Vd,e,!1)},{keyCode:ee.DELETE,action:Ce(Vd,e,!0)},{keyCode:ee.BACKSPACE,action:Ce(Um,e,!1)},{keyCode:ee.DELETE,action:Ce(Um,e,!0)},{keyCode:ee.BACKSPACE,action:Ce(Zm,e,!1)},{keyCode:ee.DELETE,action:Ce(Zm,e,!0)},{keyCode:ee.BACKSPACE,action:Ce(Bm,e,!1)},{keyCode:ee.DELETE,action:Ce(Bm,e,!0)},{keyCode:ee.BACKSPACE,action:Ce(Om,e,!1)},{keyCode:ee.DELETE,action:Ce(Om,e,!0)},{keyCode:ee.BACKSPACE,action:Ce(Ym,e,!1)},{keyCode:ee.DELETE,action:Ce(Ym,e,!0)}],n).filter(o=>e.selection.isEditable()).each(o=>{n.preventDefault(),Lc(e,s).isDefaultPrevented()||(o(),Ic(e,s))})},YV=(e,t,n)=>{const s=bs(),o=s.os,r=s.browser,a=o.isMacOS()?[{keyCode:ee.BACKSPACE,altKey:!0,action:Ce(Di,e)},{keyCode:ee.DELETE,altKey:!0,action:Ce(Di,e)}]:[{keyCode:ee.BACKSPACE,ctrlKey:!0,action:Ce(Di,e)},{keyCode:ee.DELETE,ctrlKey:!0,action:Ce(Di,e)}];o.isMacOS()&&n&&a.push({keyCode:r.isFirefox()?224:91,action:Ce(Di,e)}),Ri([{keyCode:ee.BACKSPACE,action:Ce(t0,e)},{keyCode:ee.DELETE,action:Ce(t0,e)},...a],t)},XV=(e,t)=>{let n=!1;e.on("keydown",s=>{n=s.keyCode===ee.BACKSPACE,s.isDefaultPrevented()||GV(e,t,s)}),e.on("keyup",s=>{s.isDefaultPrevented()||YV(e,s,n),n=!1})},ZV=e=>{for(;e;){if(Z(e)||z(e)&&e.data&&/[\r\n\s]/.test(e.data))return e;e=e.nextSibling}return null},aa=(e,t)=>{const n=e.dom,s=e.schema.getMoveCaretBeforeOnEnterElements();if(!t)return;if(/^(LI|DT|DD)$/.test(t.nodeName)){const r=ZV(t.firstChild);r&&/^(UL|OL|DL)$/.test(r.nodeName)&&t.insertBefore(n.doc.createTextNode(Tt),t.firstChild)}const o=n.createRng();if(t.normalize(),t.hasChildNodes()){const r=new _t(t,t);let a=t,i;for(;i=r.current();){if(z(i)){o.setStart(i,0),o.setEnd(i,0);break}if(s[i.nodeName.toLowerCase()]){o.setStartBefore(i),o.setEndBefore(i);break}a=i,i=r.next()}i||(o.setStart(a,0),o.setEnd(a,0))}else ft(t)?t.nextSibling&&n.isBlock(t.nextSibling)?(o.setStartBefore(t),o.setEndBefore(t)):(o.setStartAfter(t),o.setEndAfter(t)):(o.setStart(t,0),o.setEnd(t,0));e.selection.setRng(o),pi(e,o)},Fc=(e,t)=>{const n=e.getRoot();let s,o=t;for(;o!==n&&o&&e.getContentEditable(o)!=="false";)e.getContentEditable(o)==="true"&&(s=o),o=o.parentNode;return o!==n?s:n},gp=e=>m.from(e.dom.getParent(e.selection.getStart(!0),e.dom.isBlock)),QV=e=>gp(e).fold(Y(""),t=>t.nodeName.toUpperCase()),JV=e=>gp(e).filter(t=>Ma(S.fromDom(t))).isSome(),eq=(e,t)=>e.dom.getParent(t,Th),tq=(e,t,n)=>{let s=t;for(;s&&s!==e&&Lt(s.nextSibling);){const o=s.parentElement;if(!o||!n(o))return Th(o);s=o}return!1},nq=(e,t,n)=>!t&&n.nodeName.toLowerCase()===an(e)&&e.dom.isEmpty(n)&&tq(e.getBody(),n,s=>ye(e.schema.getTextBlockElements(),s.nodeName.toLowerCase())),sq=(e,t,n)=>{var s,o,r;const a=t(an(e)),i=eq(e,n);i&&(e.dom.insertAfter(a,i),aa(e,a),((r=(o=(s=n.parentElement)===null||s===void 0?void 0:s.childNodes)===null||o===void 0?void 0:o.length)!==null&&r!==void 0?r:0)>1&&e.dom.remove(n))},oq=(e,t)=>e.firstChild&&e.firstChild.nodeName===t,rq=e=>{var t;return((t=e.parentNode)===null||t===void 0?void 0:t.firstChild)===e},Xw=(e,t)=>{const n=e==null?void 0:e.parentNode;return K(n)&&n.nodeName===t},Zw=e=>K(e)&&/^(OL|UL|LI)$/.test(e.nodeName),aq=e=>K(e)&&/^(LI|DT|DD)$/.test(e.nodeName),iq=e=>Zw(e)&&Zw(e.parentNode),$c=e=>{const t=e.parentNode;return aq(t)?t:e},Mc=(e,t,n)=>{let s=e[n?"firstChild":"lastChild"];for(;s&&!Z(s);)s=s[n?"nextSibling":"previousSibling"];return s===t},lq=(e,t,n,s,o)=>{const r=e.dom,a=e.selection.getRng(),i=n.parentNode;if(n===e.getBody()||!i)return;iq(n)&&(o="LI");let l=t(o);if(Mc(n,s,!0)&&Mc(n,s,!1))if(Xw(n,"LI")){const c=$c(n);r.insertAfter(l,c),rq(n)?r.remove(c):r.remove(n)}else r.replace(l,n);else if(Mc(n,s,!0))Xw(n,"LI")?(r.insertAfter(l,$c(n)),l.appendChild(r.doc.createTextNode(" ")),l.appendChild(n)):i.insertBefore(l,n),r.remove(s);else if(Mc(n,s,!1))r.insertAfter(l,$c(n)),r.remove(s);else{n=$c(n);const c=a.cloneRange();c.setStartAfter(s),c.setEndAfter(n);const f=c.extractContents();o==="LI"&&oq(f,"LI")?(l=f.firstChild,r.insertAfter(f,n)):(r.insertAfter(f,n),r.insertAfter(l,n)),r.remove(s)}aa(e,l)},cq=e=>{$(wh(S.fromDom(e),Tn),t=>{const n=t.dom;n.nodeValue=qs(n.data)})},uq=(e,t)=>{const n=e.dom.getParent(t,"ol,ul,dl");return n!==null&&e.dom.getContentEditableParent(n)==="false"},fq=(e,t)=>t&&t.nodeName==="A"&&e.isEmpty(t),hp=e=>{e.innerHTML='<br data-mce-bogus="1">'},bp=(e,t)=>e.nodeName===t||e.previousSibling&&e.previousSibling.nodeName===t,vp=(e,t)=>K(t)&&e.isBlock(t)&&!/^(TD|TH|CAPTION|FORM)$/.test(t.nodeName)&&!/^(fixed|absolute)/i.test(t.style.position)&&e.isEditable(t.parentNode)&&e.getContentEditable(t)!=="false",dq=(e,t,n)=>{var s;const o=[];if(!n)return;let r=n;for(;r=r.firstChild;){if(e.isBlock(r))return;Z(r)&&!t[r.nodeName.toLowerCase()]&&o.push(r)}let a=o.length;for(;a--;)r=o[a],(!r.hasChildNodes()||r.firstChild===r.lastChild&&((s=r.firstChild)===null||s===void 0?void 0:s.nodeValue)===""||fq(e,r))&&e.remove(r)},Cp=(e,t,n)=>z(t)?e?n===1&&t.data.charAt(n-1)===Ut?0:n:n===t.data.length-1&&t.data.charAt(n)===Ut?t.data.length:n:n,mq=e=>{const t=e.cloneRange();return t.setStart(e.startContainer,Cp(!0,e.startContainer,e.startOffset)),t.setEnd(e.endContainer,Cp(!1,e.endContainer,e.endOffset)),t},pq=e=>{let t=e;do z(t)&&(t.data=t.data.replace(/^[\r\n]+/,"")),t=t.firstChild;while(t)},gq=(e,t,n)=>{const s=e.dom;m.from(n.style).map(s.parseStyle).each(l=>{const f={...ph(S.fromDom(t)),...l};s.setStyles(t,f)});const o=m.from(n.class).map(l=>l.split(/\s+/)),r=m.from(t.className).map(l=>ve(l.split(/\s+/),c=>c!==""));on(o,r,(l,c)=>{const f=ve(c,d=>!We(l,d)),u=[...l,...f];s.setAttrib(t,"class",u.join(" "))});const a=["style","class"],i=xa(n,(l,c)=>!We(a,c));s.setAttribs(t,i)},Ii=(e,t)=>{if(an(e).toLowerCase()===t.tagName.toLowerCase()){const s=ei(e);gq(e,t,s)}},hq=(e,t,n,s,o)=>{var r,a;const i=e.dom,l=(r=Fc(i,s))!==null&&r!==void 0?r:i.getRoot();let c=i.getParent(s,i.isBlock);if(!c||!vp(i,c)){if(c=c||l,!c.hasChildNodes()){const b=i.create(t);return Ii(e,b),c.appendChild(b),n.setStart(b,0),n.setEnd(b,0),b}let f=s;for(;f&&f.parentNode!==c;)f=f.parentNode;let u;for(;f&&!i.isBlock(f);)u=f,f=f.previousSibling;const d=(a=u==null?void 0:u.parentElement)===null||a===void 0?void 0:a.nodeName;if(u&&d&&e.schema.isValidChild(d,t.toLowerCase())){const b=u.parentNode,E=i.create(t);for(Ii(e,E),b.insertBefore(E,u),f=u;f&&!i.isBlock(f);){const g=f.nextSibling;E.appendChild(f),f=g}n.setStart(s,o),n.setEnd(s,o)}}return s},bq=(e,t)=>{t.normalize();const n=t.lastChild;(!n||Z(n)&&/^(left|right)$/gi.test(e.getStyle(n,"float",!0)))&&e.add(t,"br")},vq=(e,t)=>{const n=GD(e);return ut(t)?!1:le(n)?We(V.explode(n),t.nodeName.toLowerCase()):n},Qw={insert:(e,t)=>{let n,s,o,r,a=!1;const i=e.dom,l=e.schema,c=l.getNonEmptyElements(),f=e.selection.getRng(),u=an(e),d=f.collapsed&&f.startContainer===e.dom.getRoot(),b=S.fromDom(f.startContainer),E=Rr(b,f.startOffset),g=E.exists(j=>Uu(j)&&!Or(j)),y=d&&g,w=j=>{let J=n;const ge=l.getTextInlineElements();let me;j||o==="TABLE"||o==="HR"?me=i.create(j||u):me=L.cloneNode(!1);let Ne=me;if(KD(e)===!1)i.setAttrib(me,"style",null),i.setAttrib(me,"class",null);else do if(ge[J.nodeName]){if(Gn(J)||On(J))continue;const Re=J.cloneNode(!1);i.setAttrib(Re,"id",""),me.hasChildNodes()?(Re.appendChild(me.firstChild),me.appendChild(Re)):(Ne=Re,me.appendChild(Re))}while((J=J.parentNode)&&J!==oe);return Ii(e,me),hp(Ne),me},_=j=>{const J=Cp(j,n,s);if(z(n)&&(j?J>0:J<n.data.length))return!1;if(n.parentNode===L&&a&&!j||j&&Z(n)&&n===L.firstChild)return!0;if(bp(n,"TABLE")||bp(n,"HR"))return a&&!j||!a&&j;const ge=new _t(n,L);z(n)&&(j&&J===0?ge.prev():!j&&J===n.data.length&&ge.next());let me;for(;me=ge.current();){if(Z(me)){if(!me.getAttribute("data-mce-bogus")){const Ne=me.nodeName.toLowerCase();if(c[Ne]&&Ne!=="br")return!1}}else if(z(me)&&!Ho(me.data))return!1;j?ge.prev():ge.next()}return!0},x=()=>{let j;return/^(H[1-6]|PRE|FIGURE)$/.test(o)&&D!=="HGROUP"?j=w(u):j=w(),vq(e,r)&&vp(i,r)&&i.isEmpty(L,void 0,{includeZwsp:!0})?j=i.split(r,L):i.insertAfter(j,L),aa(e,j),j};Kl(i,f).each(j=>{f.setStart(j.startContainer,j.startOffset),f.setEnd(j.endContainer,j.endOffset)}),n=f.startContainer,s=f.startOffset;const N=!!(t&&t.shiftKey),I=!!(t&&t.ctrlKey);Z(n)&&n.hasChildNodes()&&!y&&(a=s>n.childNodes.length-1,n=n.childNodes[Math.min(s,n.childNodes.length-1)]||n,a&&z(n)?s=n.data.length:s=0);const oe=Fc(i,n);if(!oe||uq(e,n))return;N||(n=hq(e,u,f,n,s));let L=i.getParent(n,i.isBlock)||i.getRoot();r=K(L==null?void 0:L.parentNode)?i.getParent(L.parentNode,i.isBlock):null,o=L?L.nodeName.toUpperCase():"";const D=r?r.nodeName.toUpperCase():"";if(D==="LI"&&!I){const j=r;L=j,r=j.parentNode,o=D}if(Z(r)&&nq(e,N,L))return sq(e,w,L);if(/^(LI|DT|DD)$/.test(o)&&Z(r)&&i.isEmpty(L)){lq(e,w,r,L,u);return}if(!y&&(L===e.getBody()||!vp(i,L)))return;const O=L.parentNode;let q;if(y)q=w(u),E.fold(()=>{ht(b,S.fromDom(q))},j=>{yn(j,S.fromDom(q))}),e.selection.setCursorLocation(q,0);else if($r(L))q=af(L),i.isEmpty(L)&&hp(L),Ii(e,q),aa(e,q);else if(_(!1))q=x();else if(_(!0)&&O){q=O.insertBefore(w(),L);const j=BN(S.fromDom(f.startContainer))&&f.collapsed;aa(e,bp(L,"HR")||j?q:L)}else{const j=mq(f).cloneRange();j.setEndAfter(L);const J=j.extractContents();cq(J),pq(J),q=J.firstChild,i.insertAfter(J,L),dq(i,c,q),bq(i,L),i.isEmpty(L)&&hp(L),q.normalize(),i.isEmpty(q)?(i.remove(q),x()):(Ii(e,q),aa(e,q))}i.setAttrib(q,"id",""),e.dispatch("NewBlock",{newBlock:q})},fakeEventName:"insertParagraph"},Cq=(e,t,n)=>{const s=new _t(t,n);let o;const r=e.getNonEmptyElements();for(;o=s.next();)if(r[o.nodeName.toLowerCase()]||z(o)&&o.length>0)return!0;return!1},Jw=(e,t,n)=>{const s=e.dom.createRng();n?(s.setStartBefore(t),s.setEndBefore(t)):(s.setStartAfter(t),s.setEndAfter(t)),e.selection.setRng(s),pi(e,s)},yq=(e,t)=>{const n=e.selection,s=e.dom,o=n.getRng();let r,a=!1;Kl(s,o).each(b=>{o.setStart(b.startContainer,b.startOffset),o.setEnd(b.endContainer,b.endOffset)});let i=o.startOffset,l=o.startContainer;if(Z(l)&&l.hasChildNodes()){const b=i>l.childNodes.length-1;l=l.childNodes[Math.min(i,l.childNodes.length-1)]||l,b&&z(l)?i=l.data.length:i=0}let c=s.getParent(l,s.isBlock);const f=c&&c.parentNode?s.getParent(c.parentNode,s.isBlock):null,u=f?f.nodeName.toUpperCase():"",d=!!(t&&t.ctrlKey);u==="LI"&&!d&&(c=f),z(l)&&i>=l.data.length&&(Cq(e.schema,l,c||s.getRoot())||(r=s.create("br"),o.insertNode(r),o.setStartAfter(r),o.setEndAfter(r),a=!0)),r=s.create("br"),Af(s,o,r),Jw(e,r,a),e.undoManager.add()},Eq=(e,t)=>{const n=S.fromTag("br");yn(S.fromDom(t),n),e.undoManager.add()},Sq=(e,t)=>{_q(e.getBody(),t)||no(S.fromDom(t),S.fromTag("br"));const n=S.fromTag("br");no(S.fromDom(t),n),Jw(e,n.dom,!1),e.undoManager.add()},wq=e=>ft(e.getNode()),_q=(e,t)=>wq(P.after(t))?!0:Zt(e,P.after(t)).map(n=>ft(n.getNode())).getOr(!1),e_=e=>e&&e.nodeName==="A"&&"href"in e,xq=e=>e.fold(ot,e_,e_,ot),kq=e=>{const t=te(ar,e),n=P.fromRangeStart(e.selection.getRng());return Ds(t,e.getBody(),n).filter(xq)},Nq=(e,t)=>{t.fold(Se,te(Eq,e),te(Sq,e),Se)},t_={insert:(e,t)=>{const n=kq(e);n.isSome()?n.each(te(Nq,e)):yq(e,t)},fakeEventName:"insertLineBreak"},n_=(e,t)=>gp(e).filter(n=>t.length>0&&Jn(S.fromDom(n),t)).isSome(),Tq=e=>n_(e,qD(e)),Aq=e=>n_(e,jD(e)),Sn=Ss.generate([{br:[]},{block:[]},{none:[]}]),Dq=(e,t)=>Aq(e),s_=e=>(t,n)=>JV(t)===e,o_=(e,t)=>(n,s)=>QV(n)===e.toUpperCase()===t,Rq=e=>{const t=Fc(e.dom,e.selection.getStart());return ut(t)},Li=e=>o_("pre",e),Pq=()=>o_("summary",!0),Uc=e=>(t,n)=>WD(t)===e,Oq=(e,t)=>Tq(e),zc=(e,t)=>t,Bq=e=>{const t=an(e),n=Fc(e.dom,e.selection.getStart());return K(n)&&e.schema.isValidChild(n.nodeName,t)},Iq=e=>{const t=e.selection.getRng(),n=t.collapsed&&t.startContainer===e.dom.getRoot(),s=S.fromDom(t.startContainer),r=Rr(s,t.startOffset).map(a=>Uu(a)&&!Or(a));return n&&r.getOr(!0)},$n=(e,t)=>(n,s)=>vn(e,(r,a)=>r&&a(n,s),!0)?m.some(t):m.none(),Lq=(e,t)=>i0([$n([Dq],Sn.none()),$n([Li(!0),Rq],Sn.none()),$n([Pq()],Sn.br()),$n([Li(!0),Uc(!1),zc],Sn.br()),$n([Li(!0),Uc(!1)],Sn.block()),$n([Li(!0),Uc(!0),zc],Sn.block()),$n([Li(!0),Uc(!0)],Sn.br()),$n([s_(!0),zc],Sn.br()),$n([s_(!0)],Sn.block()),$n([Oq],Sn.br()),$n([zc],Sn.br()),$n([Bq],Sn.block()),$n([Iq],Sn.block())],[e,!!(t&&t.shiftKey)]).getOr(Sn.none()),Hc=(e,t,n)=>{t.selection.isCollapsed()||RI(t),!(K(n)&&Lc(t,e.fakeEventName).isDefaultPrevented())&&(e.insert(t,n),K(n)&&Ic(t,e.fakeEventName))},r_=(e,t)=>{const n=()=>Hc(t_,e,t),s=()=>Hc(Qw,e,t),o=Lq(e,t);switch(VD(e)){case"linebreak":o.fold(n,n,Se);break;case"block":o.fold(s,s,Se);break;case"invert":o.fold(s,n,Se);break;default:o.fold(n,s,Se);break}},a_=bs(),Fq=a_.os.isiOS()&&a_.browser.isSafari(),i_=(e,t)=>{t.isDefaultPrevented()||(t.preventDefault(),zM(e.undoManager),e.undoManager.transact(()=>{r_(e,t)}))},$q=e=>{if(!e.collapsed)return!1;const t=e.startContainer;if(z(t)){const n=/^[\uAC00-\uD7AF\u1100-\u11FF\u3130-\u318F\uA960-\uA97F\uD7B0-\uD7FF]$/,s=t.data.charAt(e.startOffset-1);return n.test(s)}else return!1},Mq=e=>{let t=m.none();const n=o=>{t=m.some(o.selection.getBookmark()),o.undoManager.add()},s=(o,r)=>{o.undoManager.undo(),t.fold(Se,a=>o.selection.moveToBookmark(a)),i_(o,r),t=m.none()};e.on("keydown",o=>{o.keyCode===ee.ENTER&&(Fq&&$q(e.selection.getRng())?n(e):i_(e,o))}),e.on("keyup",o=>{o.keyCode===ee.ENTER&&t.each(()=>s(e,o))})},Uq=(e,t,n)=>{const s=Oe.os.isMacOS()||Oe.os.isiOS();Ri([{keyCode:ee.END,action:Ce(nw,e,!0)},{keyCode:ee.HOME,action:Ce(nw,e,!1)},...s?[]:[{keyCode:ee.HOME,action:Ce(Nc,e,!1),ctrlKey:!0,shiftKey:!0},{keyCode:ee.END,action:Ce(Nc,e,!0),ctrlKey:!0,shiftKey:!0}],{keyCode:ee.END,action:Ce(cw,e,!0)},{keyCode:ee.HOME,action:Ce(cw,e,!1)},{keyCode:ee.END,action:Ce(kc,e,!0,t)},{keyCode:ee.HOME,action:Ce(kc,e,!1,t)}],n).each(o=>{n.preventDefault()})},zq=(e,t)=>{e.on("keydown",n=>{n.isDefaultPrevented()||Uq(e,t,n)})},Hq=e=>{e.on("input",t=>{t.isComposing||uI(e)})},Wq=bs(),Vq=(e,t,n)=>{Ri([{keyCode:ee.PAGE_UP,action:Ce(kc,e,!1,t)},{keyCode:ee.PAGE_DOWN,action:Ce(kc,e,!0,t)}],n)},l_=e=>e.stopImmediatePropagation(),c_=e=>e.keyCode===ee.PAGE_UP||e.keyCode===ee.PAGE_DOWN,u_=(e,t,n)=>{n&&!e.get()?t.on("NodeChange",l_,!0):!n&&e.get()&&t.off("NodeChange",l_),e.set(n)},qq=(e,t)=>{if(Wq.os.isMacOS())return;const n=At(!1);e.on("keydown",s=>{c_(s)&&u_(n,e,!0)}),e.on("keyup",s=>{s.isDefaultPrevented()||Vq(e,t,s),c_(s)&&n.get()&&(u_(n,e,!1),e.nodeChanged())})},f_=(e,t)=>{const n=t.container(),s=t.offset();return z(n)?(n.insertData(s,e),m.some(P(n,s+e.length))):Bl(t).map(o=>{const r=S.fromText(e);return t.isAtEnd()?no(o,r):yn(o,r),P(r.dom,e.length)})},d_=te(f_,Tt),m_=te(f_," "),jq=(e,t)=>fy(e,t)?d_(t):m_(t),Kq=e=>t=>t.fold(n=>ln(e.dom,P.before(n)),n=>Qt(n),n=>Kn(n),n=>Zt(e.dom,P.after(n))),Gq=(e,t)=>n=>fy(e,n)?d_(t):m_(t),p_=e=>t=>{e.selection.setRng(t.toRange()),e.nodeChanged()},Yq=(e,t)=>e.isEditable(e.getParent(t,"summary")),Xq=e=>{const t=P.fromRangeStart(e.selection.getRng()),n=S.fromDom(e.getBody());if(e.selection.isCollapsed()){const s=te(ar,e),o=P.fromRangeStart(e.selection.getRng());return Ds(s,e.getBody(),o).bind(Kq(n)).map(r=>()=>Gq(n,t)(r).each(p_(e)))}else return m.none()},Zq=e=>{const t=()=>{const n=S.fromDom(e.getBody());e.selection.isCollapsed()||e.getDoc().execCommand("Delete");const s=P.fromRangeStart(e.selection.getRng());jq(n,s).each(p_(e))};return Tr(Oe.browser.isFirefox()&&e.selection.isEditable()&&Yq(e.dom,e.selection.getRng().startContainer),t)},Qq=(e,t)=>{aw([{keyCode:ee.SPACEBAR,action:Ce(Xq,e)},{keyCode:ee.SPACEBAR,action:Ce(Zq,e)}],t).each(n=>{t.preventDefault(),Lc(e,"insertText",{data:" "}).isDefaultPrevented()||(n(),Ic(e,"insertText",{data:" "}))})},Jq=e=>{e.on("keydown",t=>{t.isDefaultPrevented()||Qq(e,t)})},ej=e=>o1(e)?[{keyCode:ee.TAB,action:Ce(ww,e,!0)},{keyCode:ee.TAB,shiftKey:!0,action:Ce(ww,e,!1)}]:[],tj=(e,t)=>{Ri([...ej(e)],t).each(n=>{t.preventDefault()})},nj=e=>{e.on("keydown",t=>{t.isDefaultPrevented()||tj(e,t)})},sj=e=>{if(e.addShortcut("Meta+P","","mcePrint"),KV(e),As(e))return At(null);{const t=U2(e);return FW(e),A3(e,t),XV(e,t),Mq(e),Jq(e),Hq(e),nj(e),zq(e,t),qq(e,t),t}};class oj{constructor(t){this.lastPath=[],this.editor=t;let n;const s=this;"onselectionchange"in t.getDoc()||t.on("NodeChange click mouseup keyup focus",o=>{const r=t.selection.getRng(),a={startContainer:r.startContainer,startOffset:r.startOffset,endContainer:r.endContainer,endOffset:r.endOffset};(o.type==="nodechange"||!fd(a,n))&&t.dispatch("SelectionChange"),n=a}),t.on("contextmenu",()=>{t.dispatch("SelectionChange")}),t.on("SelectionChange",()=>{const o=t.selection.getStart(!0);o&&Ul(t)&&!s.isSameElementPath(o)&&t.dom.isChildOf(o,t.getBody())&&t.nodeChanged({selectionChange:!0})}),t.on("mouseup",o=>{!o.isDefaultPrevented()&&Ul(t)&&(t.selection.getNode().nodeName==="IMG"?In.setEditorTimeout(t,()=>{t.nodeChanged()}):t.nodeChanged())})}nodeChanged(t={}){const n=this.editor.selection;let s;if(this.editor.initialized&&n&&!wR(this.editor)&&!this.editor.mode.isReadOnly()){const o=this.editor.getBody();s=n.getStart(!0)||o,(s.ownerDocument!==this.editor.getDoc()||!this.editor.dom.isChildOf(s,o))&&(s=o);const r=[];this.editor.dom.getParent(s,a=>a===o?!0:(r.push(a),!1)),this.editor.dispatch("NodeChange",{...t,element:s,parents:r})}}isSameElementPath(t){let n;const s=this.editor,o=_a(s.dom.getParents(t,yt,s.getBody()));if(o.length===this.lastPath.length){for(n=o.length;n>=0&&o[n]===this.lastPath[n];n--);if(n===-1)return this.lastPath=o,!0}return this.lastPath=o,!1}}const g_=Ya("image"),rj=e=>{const t=e;return m.from(t[g_])},aj=(e,t)=>{const n=e;n[g_]=t},yp=Ya("event"),ij=e=>{const t=e;return m.from(t[yp])},Wc=e=>t=>{const n=t;n[yp]=e},lj=(e,t)=>Wc(t)(e),h_=Wc(0),cj=Wc(2),uj=Wc(1),fj=(e=>t=>{const n=t;return m.from(n[yp]).exists(s=>s===e)})(0),dj=()=>Object.freeze({length:0,item:e=>null}),Ep=Ya("mode"),mj=e=>{const t=e;return m.from(t[Ep])},Vc=e=>t=>{const n=t;n[Ep]=e},b_=(e,t)=>Vc(t)(e),v_=Vc(0),Sp=Vc(2),pj=Vc(1),C_=e=>t=>{const n=t;return m.from(n[Ep]).exists(s=>s===e)},ia=C_(0),y_=C_(1),gj=(e,t)=>({...t,get length(){return t.length},add:(n,s)=>{if(ia(e))if(le(n)){if(!St(s))return t.add(n,s)}else return t.add(n);return null},remove:n=>{ia(e)&&t.remove(n)},clear:()=>{ia(e)&&t.clear()}}),hj=["none","copy","link","move"],bj=["none","copy","copyLink","copyMove","link","linkMove","move","all","uninitialized"],wp=()=>{const e=new window.DataTransfer;let t="move",n="all";const s={get dropEffect(){return t},set dropEffect(o){We(hj,o)&&(t=o)},get effectAllowed(){return n},set effectAllowed(o){fj(s)&&We(bj,o)&&(n=o)},get items(){return gj(s,e.items)},get files(){return y_(s)?dj():e.files},get types(){return e.types},setDragImage:(o,r,a)=>{ia(s)&&(aj(s,{image:o,x:r,y:a}),e.setDragImage(o,r,a))},getData:o=>y_(s)?"":e.getData(o),setData:(o,r)=>{ia(s)&&e.setData(o,r)},clearData:o=>{ia(s)&&e.clearData(o)}};return v_(s),s},vj=e=>{const t=wp(),n=mj(e);return Sp(e),h_(t),t.dropEffect=e.dropEffect,t.effectAllowed=e.effectAllowed,rj(e).each(s=>t.setDragImage(s.image,s.x,s.y)),$(e.types,s=>{s!=="Files"&&t.setData(s,e.getData(s))}),$(e.files,s=>t.items.add(s)),ij(e).each(s=>{lj(t,s)}),n.each(s=>{b_(e,s),b_(t,s)}),t},Cj=e=>{const t=e.getData("text/html");return t===""?m.none():m.some(t)},E_=(e,t)=>e.setData("text/html",t),S_="x-tinymce/html",qc=Y(S_),_p="<!-- "+S_+" -->",yj=e=>_p+e,Ej=e=>e.replace(_p,""),w_=e=>e.indexOf(_p)!==-1,Sj=e=>!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(e),wj=(e,t)=>{let n="<"+e;const s=Ru(t,(o,r)=>r+'="'+io.encodeAllRaw(o)+'"');return s.length&&(n+=" "+s.join(" ")),n+">"},_j=(e,t,n)=>{const s=e.split(/\n\n/),o=wj(t,n),r="</"+t+">",a=Fe(s,l=>l.split(/\n/).join("<br />")),i=l=>o+l+r;return a.length===1?a[0]:Fe(a,i).join("")},__="%MCEPASTEBIN%",xj=(e,t)=>{const{dom:n,selection:s}=e,o=e.getBody();t.set(s.getRng());const r=n.add(e.getBody(),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},__);Oe.browser.isFirefox()&&n.setStyle(r,"left",n.getStyle(o,"direction",!0)==="rtl"?65535:-65535),n.bind(r,"beforedeactivate focusin focusout",a=>{a.stopPropagation()}),r.focus(),s.select(r,!0)},kj=(e,t)=>{const n=e.dom;if(xp(e)){let s;const o=t.get();for(;s=xp(e);)n.remove(s),n.unbind(s);o&&e.selection.setRng(o)}t.set(null)},xp=e=>e.dom.get("mcepastebin"),Nj=e=>K(e)&&e.id==="mcepastebin",Tj=e=>{const t=e.dom,n=(a,i)=>{a.appendChild(i),t.remove(i,!0)},[s,...o]=ve(e.getBody().childNodes,Nj);$(o,a=>{n(s,a)});const r=t.select("div[id=mcepastebin]",s);for(let a=r.length-1;a>=0;a--){const i=t.create("div");s.insertBefore(i,r[a]),n(i,r[a])}return s?s.innerHTML:""},x_=e=>e===__,Aj=e=>{const t=At(null);return{create:()=>xj(e,t),remove:()=>kj(e,t),getEl:()=>xp(e),getHtml:()=>Tj(e),getLastRng:t.get}},k_=(e,t)=>(V.each(t,n=>{Wt(n,RegExp)?e=e.replace(n,""):e=e.replace(n[0],n[1])}),e),Dj=e=>{const t=lo(),n=ea({},t);let s="";const o=t.getVoidElements(),r=V.makeMap("script noscript style textarea video audio iframe object"," "),a=t.getBlockElements(),i=l=>{const c=l.name,f=l;if(c==="br"){s+=`
`;return}if(c!=="wbr"){if(o[c]&&(s+=" "),r[c]){s+=" ";return}if(l.type===3&&(s+=l.value),!(l.name in t.getVoidElements())){let u=l.firstChild;if(u)do i(u);while(u=u.next)}a[c]&&f.next&&(s+=`
`,c==="p"&&(s+=`
`))}};return e=k_(e,[/<!\[[^\]]+\]>/g]),i(n.parse(e)),s},N_=e=>(e=k_(e,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/ig,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,(n,s,o)=>!s&&!o?" ":Tt],/<br class="Apple-interchange-newline">/g,/<br>$/i]),e),Rj=e=>{let t=0;return()=>e+t++},Pj=e=>{const t=e.toLowerCase(),n={jpg:"jpeg",jpe:"jpeg",jfi:"jpeg",jif:"jpeg",jfif:"jpeg",pjpeg:"jpeg",pjp:"jpeg",svg:"svg+xml"};return V.hasOwn(n,t)?"image/"+n[t]:"image/"+t},Oj=(e,t)=>{const n=ea({sanitize:$f(e)},e.schema);n.addNodeFilter("meta",o=>{V.each(o,r=>{r.remove()})});const s=n.parse(t,{forced_root_block:!1,isRootContent:!0});return go({validate:!0},e.schema).serialize(s)},T_=(e,t)=>({content:e,cancelled:t}),Bj=(e,t,n)=>{const s=e.dom.create("div",{style:"display:none"},t),o=HP(e,s,n);return T_(o.node.innerHTML,o.isDefaultPrevented())},Ij=(e,t,n)=>{const s=zP(e,t,n),o=Oj(e,s.content);return e.hasEventListeners("PastePostProcess")&&!s.isDefaultPrevented()?Bj(e,o,n):T_(o,s.isDefaultPrevented())},Lj=(e,t,n)=>Ij(e,t,n),kp=(e,t)=>(e.insertContent(t,{merge:HR(e),paste:!0}),!0),Np=e=>/^https?:\/\/[\w\-\/+=.,!;:&%@^~(){}?#]+$/i.test(e),Fj=(e,t)=>Np(t)&&gt(av(e),n=>Lu(t.toLowerCase(),`.${n.toLowerCase()}`)),$j=(e,t,n)=>(e.undoManager.extra(()=>{n(e,t)},()=>{e.insertContent('<img src="'+t+'">')}),!0),Mj=(e,t,n)=>(e.undoManager.extra(()=>{n(e,t)},()=>{e.execCommand("mceInsertLink",!1,t)}),!0),Uj=(e,t,n)=>!e.selection.isCollapsed()&&Np(t)?Mj(e,t,n):!1,zj=(e,t,n)=>Fj(e,t)?$j(e,t,n):!1,Hj=(e,t)=>{V.each([Uj,zj,kp],n=>!n(e,t,kp))},Wj=(e,t,n)=>{n||!WR(e)?kp(e,t):Hj(e,t)},Vj=Rj("mceclip"),qj=e=>{const t=wp();return E_(t,e),Sp(t),t},A_=(e,t,n,s,o)=>{const r=Lj(e,t,n);if(!r.cancelled){const a=r.content,i=()=>Wj(e,a,s);o?Lc(e,"insertFromPaste",{dataTransfer:qj(a)}).isDefaultPrevented()||(i(),Ic(e,"insertFromPaste")):i()}},jc=(e,t,n,s)=>{const o=n||w_(t);A_(e,Ej(t),o,!1,s)},Tp=(e,t,n)=>{const s=e.dom.encode(t).replace(/\r\n/g,`
`),o=Fh(s,qR(e)),r=_j(o,an(e),ei(e));A_(e,r,!1,!0,n)},D_=e=>{const t={};if(e&&e.types)for(let n=0;n<e.types.length;n++){const s=e.types[n];try{t[s]=e.getData(s)}catch{t[s]=""}}return t},Eo=(e,t)=>t in e&&e[t].length>0,R_=e=>Eo(e,"text/html")||Eo(e,"text/plain"),jj=(e,t)=>{const n=t.match(/([\s\S]+?)(?:\.[a-z0-9.]+)$/i);return K(n)?e.dom.encode(n[1]):void 0},Kj=(e,t,n,s)=>{const o=Vj(),r=Yb(e)&&K(n.name),a=r?jj(e,n.name):o,i=r?n.name:void 0,l=t.create(o,n,s,a,i);return t.add(l),l},Gj=(e,t)=>{fm(t.uri).each(({data:n,type:s,base64Encoded:o})=>{const r=o?n:btoa(n),a=t.file,i=e.editorUpload.blobCache,l=i.getByData(r,s),c=l??Kj(e,i,a,r);jc(e,`<img src="${c.blobUri()}">`,!1,!0)})},Yj=e=>e.type==="paste",Xj=e=>Promise.all(Fe(e,t=>BE(t).then(n=>({file:t,uri:n})))),Zj=e=>{const t=av(e);return n=>Ft(n.type,"image/")&&gt(t,s=>Pj(s)===n.type)},Qj=(e,t)=>{const n=t.items?gs(sn(t.items),o=>o.kind==="file"?[o.getAsFile()]:[]):[],s=t.files?sn(t.files):[];return ve(n.length>0?n:s,Zj(e))},P_=(e,t,n)=>{const s=Yj(t)?t.clipboardData:t.dataTransfer;if(Pl(e)&&s){const o=Qj(e,s);if(o.length>0)return t.preventDefault(),Xj(o).then(r=>{n&&e.selection.setRng(n),$(r,a=>{Gj(e,a)})}),!0}return!1},Jj=e=>{var t,n;return Oe.os.isAndroid()&&((n=(t=e.clipboardData)===null||t===void 0?void 0:t.items)===null||n===void 0?void 0:n.length)===0},e8=e=>ee.metaKeyPressed(e)&&e.keyCode===86||e.shiftKey&&e.keyCode===45,Ap=(e,t,n,s,o)=>{let r=N_(n);const a=Eo(t,qc())||w_(n),i=!a&&Sj(r),l=Np(r);(x_(r)||!r.length||i&&!l)&&(s=!0),(s||l)&&(Eo(t,"text/plain")&&i?r=t["text/plain"]:r=Dj(r)),!x_(r)&&(s?Tp(e,r,o):jc(e,r,a,o))},t8=(e,t,n)=>{let s;const o=()=>t.getLastRng()||e.selection.getRng();e.on("keydown",r=>{e8(r)&&!r.isDefaultPrevented()&&(s=r.shiftKey&&r.keyCode===86)}),e.on("paste",r=>{if(r.isDefaultPrevented()||Jj(r))return;const a=n.get()==="text"||s;s=!1;const i=D_(r.clipboardData);!R_(i)&&P_(e,r,o())||(Eo(i,"text/html")?(r.preventDefault(),Ap(e,i,i["text/html"],a,!0)):Eo(i,"text/plain")&&Eo(i,"text/uri-list")?(r.preventDefault(),Ap(e,i,i["text/plain"],a,!0)):(t.create(),In.setEditorTimeout(e,()=>{const l=t.getHtml();t.remove(),Ap(e,i,l,a,!1)},0)))})},n8=e=>{const t=o=>Ft(o,"webkit-fake-url"),n=o=>Ft(o,"data:"),s=o=>{var r;return((r=o.data)===null||r===void 0?void 0:r.paste)===!0};e.parser.addNodeFilter("img",(o,r,a)=>{if(!Pl(e)&&s(a))for(const i of o){const l=i.attr("src");le(l)&&!i.attr("data-mce-object")&&l!==Oe.transparentSrc&&(t(l)||!jR(e)&&n(l))&&i.remove()}})},s8=(e,t,n)=>{t8(e,t,n),n8(e)},o8=(e,t)=>{t.get()==="text"?(t.set("html"),iC(e,!1)):(t.set("text"),iC(e,!0)),e.focus()},r8=(e,t)=>{e.addCommand("mceTogglePlainTextPaste",()=>{o8(e,t)}),e.addCommand("mceInsertClipboardContent",(n,s)=>{s.html&&jc(e,s.html,s.internal,!1),s.text&&Tp(e,s.text,!1)})},a8=(e,t,n)=>{if(e)try{return e.clearData(),e.setData("text/html",t),e.setData("text/plain",n),e.setData(qc(),t),!0}catch{return!1}else return!1},O_=(e,t,n,s)=>{a8(e.clipboardData,t.html,t.text)?(e.preventDefault(),s()):n(t.html,s)},B_=e=>(t,n)=>{const{dom:s,selection:o}=e,r=s.create("div",{contenteditable:"false","data-mce-bogus":"all"}),a=s.create("div",{contenteditable:"true"},t);s.setStyles(r,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),r.appendChild(a),s.add(e.getBody(),r);const i=o.getRng();a.focus();const l=s.createRng();l.selectNodeContents(a),o.setRng(l),In.setEditorTimeout(e,()=>{o.setRng(i),s.remove(r),n()},0)},I_=e=>({html:yj(e.selection.getContent({contextual:!0})),text:e.selection.getContent({format:"text"})}),i8=e=>!!e.dom.getParent(e.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",e.getBody()),L_=e=>!e.selection.isCollapsed()||i8(e),l8=e=>t=>{!t.isDefaultPrevented()&&L_(e)&&O_(t,I_(e),B_(e),()=>{if(Oe.browser.isChromium()||Oe.browser.isFirefox()){const n=e.selection.getRng();In.setEditorTimeout(e,()=>{e.selection.setRng(n),e.execCommand("Delete")},0)}else e.execCommand("Delete")})},c8=e=>t=>{!t.isDefaultPrevented()&&L_(e)&&O_(t,I_(e),B_(e),Se)},u8=e=>{e.on("cut",l8(e)),e.on("copy",c8(e))},F_=(e,t)=>{var n,s;return sr.getCaretRangeFromPoint((n=t.clientX)!==null&&n!==void 0?n:0,(s=t.clientY)!==null&&s!==void 0?s:0,e.getDoc())},f8=e=>{const t=e["text/plain"];return t?t.indexOf("file://")===0:!1},$_=(e,t)=>{e.focus(),t&&e.selection.setRng(t)},d8=e=>gt(e.files,t=>/^image\//.test(t.type)),m8=(e,t,n,s)=>{const o=e.getParent(n,r=>Wo(t,r));if(o&&ye(s,"text/html")){const r=new DOMParser().parseFromString(s["text/html"],"text/html").body;return!Lt(r.querySelector(o.nodeName.toLowerCase()))}else return!1},p8=(e,t)=>{LR(e)&&e.on("dragend dragover draggesture dragdrop drop drag",n=>{n.preventDefault(),n.stopPropagation()}),Pl(e)||e.on("drop",n=>{const s=n.dataTransfer;s&&d8(s)&&n.preventDefault()}),e.on("drop",n=>{if(n.isDefaultPrevented())return;const s=F_(e,n);if(ut(s))return;const o=D_(n.dataTransfer),r=Eo(o,qc());if((!R_(o)||f8(o))&&P_(e,n,s))return;const a=o[qc()],i=a||o["text/html"]||o["text/plain"],l=m8(e.dom,e.schema,s.startContainer,o);t.get()&&!l||i&&(n.preventDefault(),In.setEditorTimeout(e,()=>{e.undoManager.transact(()=>{a&&e.execCommand("Delete"),$_(e,s);const c=N_(i);o["text/html"]?jc(e,c,r,!0):Tp(e,c,!0)})}))}),e.on("dragstart",n=>{t.set(!0)}),e.on("dragover dragend",n=>{Pl(e)&&!t.get()&&(n.preventDefault(),$_(e,F_(e,n))),n.type==="dragend"&&t.set(!1)})},g8=e=>{const t=o=>r=>{o(e,r)},n=FR(e);Ie(n)&&e.on("PastePreProcess",t(n));const s=$R(e);Ie(s)&&e.on("PastePostProcess",t(s))},h8=(e,t)=>{e.on("PastePreProcess",n=>{n.content=t(e,n.content,n.internal)})},b8=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,M_=e=>V.trim(e).replace(b8,Ml).toLowerCase(),v8=(e,t,n)=>{const s=UR(e);if(n||s==="all"||!zR(e))return t;const o=s?s.split(/[, ]/):[];if(o&&s!=="none"){const r=e.dom,a=e.selection.getNode();t=t.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,(i,l,c,f)=>{const u=r.parseStyle(r.decode(c)),d={};for(let E=0;E<o.length;E++){const g=u[o[E]];let y=g,w=r.getStyle(a,o[E],!0);/color/.test(o[E])&&(y=M_(y),w=M_(w)),w!==y&&(d[o[E]]=g)}const b=r.serializeStyle(d,"span");return b?l+' style="'+b+'"'+f:l+f})}else t=t.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return t=t.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,(r,a,i,l)=>a+' style="'+i+'"'+l),t},C8=e=>{(Oe.browser.isChromium()||Oe.browser.isSafari())&&h8(e,v8)},y8=e=>{const t=At(!1),n=At(VR(e)?"text":"html"),s=Aj(e);C8(e),r8(e,n),g8(e),e.on("PreInit",()=>{u8(e),p8(e,t),s8(e,s,n)})},E8=e=>{e.on("click",t=>{e.dom.getParent(t.target,"details")&&t.preventDefault()})},S8=e=>{e.parser.addNodeFilter("details",t=>{const n=r1(e);$(t,s=>{n==="expanded"?s.attr("open","open"):n==="collapsed"&&s.attr("open",null)})}),e.serializer.addNodeFilter("details",t=>{const n=a1(e);$(t,s=>{n==="expanded"?s.attr("open","open"):n==="collapsed"&&s.attr("open",null)})})},U_=e=>ro(S.fromDom(e)),z_=(e,t)=>{const n=t.getNode();St(n)||e.selection.setCursorLocation(n,t.offset())},H_=(e,t)=>{var n;return e.startOffset===0&&e.endOffset===((n=t.textContent)===null||n===void 0?void 0:n.length)},W_=bs(),w8=W_.browser,V_=W_.os,_8=w8.isSafari(),q_=V_.isMacOS()||V_.isiOS(),x8=(e,t)=>Qt(t).exists(n=>n.isEqual(e)),k8=(e,t)=>Kn(t).exists(n=>ft(n.getNode())&&ln(t,n).exists(s=>s.isEqual(e))||n.isEqual(e)),N8=(e,t)=>{const n=m.from(e.getParent(t.startContainer,"details")),s=m.from(e.getParent(t.endContainer,"details"));if(n.isSome()||s.isSome()){const o=n.bind(r=>m.from(e.select("summary",r)[0]));return m.some({startSummary:o,startDetails:n,endDetails:s})}else return m.none()},T8=(e,t)=>{const n=l=>l.contains(e.startContainer),s=l=>l.contains(e.endContainer),o=t.startSummary.exists(n),r=t.startSummary.exists(s),a=t.startDetails.forall(l=>t.endDetails.forall(c=>l!==c));return(o||r)&&!(o&&r)||a},A8=(e,t)=>t.startSummary.exists(n=>x8(e,n)),D8=(e,t)=>t.startSummary.exists(n=>k8(e,n)),R8=(e,t)=>t.startDetails.exists(n=>ln(n,e).forall(s=>t.startSummary.exists(o=>!o.contains(e.container())&&o.contains(s.container())))),P8=(e,t,n)=>n.startDetails.exists(s=>Zt(e,t).forall(o=>!s.contains(o.container()))),Dp=(e,t)=>K(e.getParent(t.container(),"details")),j_=(e,t)=>{const n=e.dom.getParent(t.container(),"details");if(n&&!n.open){const s=e.dom.select("summary",n)[0];s&&Kn(s).each(o=>z_(e,o))}else z_(e,t)},O8=(e,t)=>{const{dom:n,selection:s}=e,o=e.getBody();if(e.selection.isCollapsed()){const r=P.fromRangeStart(s.getRng()),a=n.getParent(r.container(),n.isBlock);if(a&&n.isEmpty(a)){if(Lt(a.nextSibling)){const i=ln(o,r).filter(l=>Dp(n,l));if(i.isSome())return i.each(l=>{t||j_(e,l)}),!0}else if(Lt(a.previousSibling)&&Zt(o,r).filter(l=>Dp(n,l)))return!0}return li(t,o,r).fold(ot,i=>Dp(n,i)?(a&&n.isEmpty(a)&&e.dom.remove(a),t||j_(e,i),!0):!1)}else return!1},B8=(e,t,n)=>{const s=e.selection,o=s.getNode(),r=s.getRng(),a=n.keyCode===ee.BACKSPACE,i=n.keyCode===ee.DELETE,l=e.selection.isCollapsed(),c=P.fromRangeStart(r),f=e.getBody();return!l&&T8(r,t)||l&&a&&A8(c,t)||l&&i&&D8(c,t)||l&&a&&R8(c,t)||l&&i&&P8(f,c,t)?!0:_8&&mT(o)?(!l&&H_(r,o)||_y(i,c,o)?U_(o):e.undoManager.transact(()=>{const u=s.getSel();let{anchorNode:d,anchorOffset:b,focusNode:E,focusOffset:g}=u??{};const y=()=>{K(d)&&K(b)&&K(E)&&K(g)&&(u==null||u.setBaseAndExtent(d,b,E,g))},w=()=>{d=u==null?void 0:u.anchorNode,b=u==null?void 0:u.anchorOffset,E=u==null?void 0:u.focusNode,g=u==null?void 0:u.focusOffset},_=(N,I)=>{$(N.childNodes,oe=>{ui(oe)&&I.appendChild(oe)})},x=e.dom.create("span",{"data-mce-bogus":"all"});_(o,x),o.appendChild(x),y(),l&&(q_&&(n.altKey||a&&n.metaKey)||!q_&&n.ctrlKey)&&(u==null||u.modify("extend",a?"left":"right",n.metaKey?"line":"word")),!s.isCollapsed()&&H_(s.getRng(),x)?U_(o):(e.execCommand(a?"Delete":"ForwardDelete"),w(),_(x,o),y()),e.dom.remove(x)}),!0):!1},I8=e=>{e.on("keydown",t=>{(t.keyCode===ee.BACKSPACE||t.keyCode===ee.DELETE)&&N8(e.dom,e.selection.getRng()).fold(()=>{O8(e,t.keyCode===ee.DELETE)&&t.preventDefault()},n=>{B8(e,n,t)&&t.preventDefault()})})},L8=e=>{E8(e),S8(e),I8(e)},F8=ft,K_=z,$8=e=>Ze(e.dom),M8=e=>ts(e.dom),G_=e=>t=>Ue(S.fromDom(e),t),U8=(e,t)=>Lo(S.fromDom(e),n=>M8(n)||Dn(n),G_(t)).getOr(S.fromDom(t)).dom,Y_=(e,t)=>Lo(S.fromDom(e),$8,G_(t)),X_=(e,t,n)=>{const s=new _t(e,t),o=n?s.next.bind(s):s.prev.bind(s);let r=e;for(let a=n?e:o();a&&!F8(a);a=o())jn(a)&&(r=a);return r},z8=(e,t)=>{const s=P.fromRangeStart(e).getNode(),o=U8(s,t),r=X_(s,o,!1),a=X_(s,o,!0),i=document.createRange();return Y_(r,o).fold(()=>{K_(r)?i.setStart(r,0):i.setStartBefore(r)},l=>i.setStartBefore(l.dom)),Y_(a,o).fold(()=>{K_(a)?i.setEnd(a,a.data.length):i.setEndAfter(a)},l=>i.setEndAfter(l.dom)),i},H8=e=>{const t=z8(e.selection.getRng(),e.getBody());e.selection.setRng(Yd(t))},W8=e=>{e.on("mousedown",t=>{t.detail>=3&&(t.preventDefault(),H8(e))})};var la;(function(e){e.Before="before",e.After="after"})(la||(la={}));const V8=(e,t)=>Math.abs(e.left-t),q8=(e,t)=>Math.abs(e.right-t),j8=(e,t)=>e>=t.top&&e<=t.bottom,K8=(e,t)=>e.top<t.bottom&&e.bottom>t.top,G8=(e,t)=>{const n=oD(e,t)/Math.min(e.height,t.height);return K8(e,t)&&n>.5},Y8=(e,t)=>{const n=ve(e,s=>j8(t,s));return sD(n).fold(()=>[[],e],s=>{const{pass:o,fail:r}=Ea(e,a=>G8(a,s));return[o,r]})},X8=(e,t)=>({node:e.node,position:V8(e,t)<q8(e,t)?la.Before:la.After}),Z8=(e,t,n)=>t>e.left&&t<e.right?0:Math.min(Math.abs(e.left-t),Math.abs(e.right-t)),Rp=(e,t,n)=>{const s=f=>jn(f.node)?m.some(f):Z(f.node)?Rp(sn(f.node.childNodes),t,n):m.none(),o=(f,u)=>{if(f.length>=2){const d=s(f[0]).getOr(f[0]),b=s(f[1]).getOr(f[1]);if(Math.abs(u(d,t,n)-u(b,t,n))<2){if(z(d.node))return m.some(d);if(z(b.node))return m.some(b)}}return m.none()},r=(f,u)=>{const d=Do(f,(b,E)=>u(b,t,n)-u(E,t,n));return o(d,u).orThunk(()=>_r(d,s))},[a,i]=Y8(y0(e),n),{pass:l,fail:c}=Ea(i,f=>f.top<n);return r(a,Z8).orThunk(()=>r(c,vb)).orThunk(()=>r(l,vb))},Q8=(e,t,n,s)=>{const o=(r,a)=>{const i=c=>Z(c)&&c.classList.contains("mce-drag-container"),l=ve(r.dom.childNodes,wr(i));return a.fold(()=>Rp(l,n,s),c=>{const f=ve(l,u=>u!==c.dom);return Rp(f,n,s)}).orThunk(()=>(Ue(r,e)?m.none():Vu(r)).bind(f=>o(f,m.some(r))))};return o(t,m.none())},J8=(e,t,n)=>{const s=S.fromDom(e),o=zs(s),a=S.fromPoint(o,t,n).filter(i=>Us(s,i)).getOr(s);return Q8(s,a,t,n)},Z_=(e,t,n)=>J8(e,t,n).filter(s=>si(s.node)).map(s=>X8(s,t)),Q_=e=>{var t,n;const s=e.getBoundingClientRect(),o=e.ownerDocument,r=o.documentElement,a=o.defaultView;return{top:s.top+((t=a==null?void 0:a.scrollY)!==null&&t!==void 0?t:0)-r.clientTop,left:s.left+((n=a==null?void 0:a.scrollX)!==null&&n!==void 0?n:0)-r.clientLeft}},e6=e=>e.inline?Q_(e.getBody()):{left:0,top:0},t6=e=>{const t=e.getBody();return e.inline?{left:t.scrollLeft,top:t.scrollTop}:{left:0,top:0}},n6=e=>{const t=e.getBody(),n=e.getDoc().documentElement,s={left:t.scrollLeft,top:t.scrollTop},o={left:t.scrollLeft||n.scrollLeft,top:t.scrollTop||n.scrollTop};return e.inline?s:o},s6=(e,t)=>{if(t.target.ownerDocument!==e.getDoc()){const n=Q_(e.getContentAreaContainer()),s=n6(e);return{left:t.pageX-n.left+s.left,top:t.pageY-n.top+s.top}}return{left:t.pageX,top:t.pageY}},o6=(e,t,n)=>({pageX:n.left-e.left+t.left,pageY:n.top-e.top+t.top}),r6=(e,t)=>o6(e6(e),t6(e),s6(e,t)),J_=e=>({target:e,srcElement:e}),a6=(e,t,n,s)=>({...t,dataTransfer:s,type:e,...J_(n)}),i6=(e,t,n)=>{const s=cg("Function not supported on simulated event.");return{bubbles:!0,cancelBubble:!1,cancelable:!0,composed:!1,currentTarget:null,defaultPrevented:!1,eventPhase:0,isTrusted:!0,returnValue:!1,timeStamp:0,type:e,composedPath:s,initEvent:s,preventDefault:Se,stopImmediatePropagation:Se,stopPropagation:Se,AT_TARGET:window.Event.AT_TARGET,BUBBLING_PHASE:window.Event.BUBBLING_PHASE,CAPTURING_PHASE:window.Event.CAPTURING_PHASE,NONE:window.Event.NONE,altKey:!1,button:0,buttons:0,clientX:0,clientY:0,ctrlKey:!1,metaKey:!1,movementX:0,movementY:0,offsetX:0,offsetY:0,pageX:0,pageY:0,relatedTarget:null,screenX:0,screenY:0,shiftKey:!1,x:0,y:0,detail:0,view:null,which:0,initUIEvent:s,initMouseEvent:s,getModifierState:s,dataTransfer:n,...J_(t)}},l6=(e,t)=>{const n=vj(e);return t==="dragstart"?(h_(n),v_(n)):t==="drop"?(cj(n),Sp(n)):(uj(n),pj(n)),n},c6=(e,t,n,s)=>{const o=l6(n,e);return St(s)?i6(e,t,o):a6(e,s,t,o)},Kc=32,u6=100,Gc=8,Yc=16,ex=Ze,f6=lD(ex,ts),d6=(e,t,n)=>ex(n)&&n!==t&&e.isEditable(n.parentElement),m6=(e,t,n)=>ut(t)||t===n||e.dom.isChildOf(t,n)?!1:e.dom.isEditable(t),p6=(e,t,n,s)=>{const o=e.dom,r=t.cloneNode(!0);o.setStyles(r,{width:n,height:s}),o.setAttrib(r,"data-mce-selected",null);const a=o.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return o.setStyles(a,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:n,height:s}),o.setStyles(r,{margin:0,boxSizing:"border-box"}),a.appendChild(r),a},g6=(e,t)=>{e.parentNode!==t&&t.appendChild(e)},Xc=(e,t)=>n=>()=>{const s=e==="left"?n.scrollX:n.scrollY;n.scroll({[e]:s+t,behavior:"smooth"})},tx=Xc("left",-Kc),nx=Xc("left",Kc),sx=Xc("top",-Kc),ox=Xc("top",Kc),h6=(e,t,n,s,o,r,a,i,l,c,f,u)=>{let d=0,b=0;e.style.left=t.pageX+"px",e.style.top=t.pageY+"px",t.pageX+n>o&&(d=t.pageX+n-o),t.pageY+s>r&&(b=t.pageY+s-r),e.style.width=n-d+"px",e.style.height=s-b+"px";const E=l.clientHeight,g=l.clientWidth,y=a+l.getBoundingClientRect().top,w=i+l.getBoundingClientRect().left;f.on(_=>{_.intervalId.clear(),_.dragging&&u&&(a+Gc>=E?_.intervalId.set(ox(c)):a-Gc<=0?_.intervalId.set(sx(c)):i+Gc>=g?_.intervalId.set(nx(c)):i-Gc<=0?_.intervalId.set(tx(c)):y+Yc>=window.innerHeight?_.intervalId.set(ox(window)):y-Yc<=0?_.intervalId.set(sx(window)):w+Yc>=window.innerWidth?_.intervalId.set(nx(window)):w-Yc<=0&&_.intervalId.set(tx(window)))})},rx=e=>{e&&e.parentNode&&e.parentNode.removeChild(e)},b6=(e,t)=>{const n=e.getParent(t.parentNode,e.isBlock);rx(t),n&&n!==e.getRoot()&&e.isEmpty(n)&&ro(S.fromDom(n))},v6=e=>e.button===0,C6=(e,t)=>({pageX:t.pageX-e.relX,pageY:t.pageY+5}),y6=(e,t)=>n=>{if(v6(n)){const s=wt(t.dom.getParents(n.target),f6).getOr(null);if(K(s)&&d6(t.dom,t.getBody(),s)){const o=t.dom.getPos(s),r=t.getBody(),a=t.getDoc().documentElement;e.set({element:s,dataTransfer:wp(),dragging:!1,screenX:n.screenX,screenY:n.screenY,maxX:(t.inline?r.scrollWidth:a.offsetWidth)-2,maxY:(t.inline?r.scrollHeight:a.offsetHeight)-2,relX:n.pageX-o.x,relY:n.pageY-o.y,width:s.offsetWidth,height:s.offsetHeight,ghost:p6(t,s,s.offsetWidth,s.offsetHeight),intervalId:KA(u6)})}}},E6=(e,t,n)=>{e._selectionOverrides.hideFakeCaret(),Z_(e.getBody(),t,n).fold(()=>e.selection.placeCaretAt(t,n),s=>{const o=e._selectionOverrides.showCaret(1,s.node,s.position===la.Before,!1);o?e.selection.setRng(o):e.selection.placeCaretAt(t,n)})},Fi=(e,t,n,s,o)=>{t==="dragstart"&&E_(s,e.dom.getOuterHTML(n));const r=c6(t,n,s,o);return e.dispatch(t,r)},S6=(e,t)=>{const n=kl((o,r)=>E6(t,o,r),0);t.on("remove",n.cancel);const s=e;return o=>e.on(r=>{const a=Math.max(Math.abs(o.screenX-r.screenX),Math.abs(o.screenY-r.screenY));if(!r.dragging&&a>10){const i=Fi(t,"dragstart",r.element,r.dataTransfer,o);if(K(i.dataTransfer)&&(r.dataTransfer=i.dataTransfer),i.isDefaultPrevented())return;r.dragging=!0,t.focus()}if(r.dragging){const i=o.currentTarget===t.getDoc().documentElement,l=C6(r,r6(t,o));g6(r.ghost,t.getBody()),h6(r.ghost,l,r.width,r.height,r.maxX,r.maxY,o.clientY,o.clientX,t.getContentAreaContainer(),t.getWin(),s,i),n.throttle(o.clientX,o.clientY)}})},w6=e=>{const t=e.getSel();if(K(t)){const s=t.getRangeAt(0).startContainer;return z(s)?s.parentNode:s}else return null},_6=(e,t)=>n=>{e.on(s=>{var o;if(s.intervalId.clear(),s.dragging){if(m6(t,w6(t.selection),s.element)){const r=(o=t.getDoc().elementFromPoint(n.clientX,n.clientY))!==null&&o!==void 0?o:t.getBody();Fi(t,"drop",r,s.dataTransfer,n).isDefaultPrevented()||t.undoManager.transact(()=>{b6(t.dom,s.element),Cj(s.dataTransfer).each(i=>t.insertContent(i)),t._selectionOverrides.hideFakeCaret()})}Fi(t,"dragend",t.getBody(),s.dataTransfer,n)}}),ix(e)},ax=(e,t,n)=>{e.on(s=>{s.intervalId.clear(),s.dragging&&n.fold(()=>Fi(t,"dragend",s.element,s.dataTransfer),o=>Fi(t,"dragend",s.element,s.dataTransfer,o))}),ix(e)},x6=(e,t)=>n=>ax(e,t,m.some(n)),ix=e=>{e.on(t=>{t.intervalId.clear(),rx(t.ghost)}),e.clear()},k6=e=>{const t=co(),n=qe.DOM,s=document,o=y6(t,e),r=S6(t,e),a=_6(t,e),i=x6(t,e);e.on("mousedown",o),e.on("mousemove",r),e.on("mouseup",a),n.bind(s,"mousemove",r),n.bind(s,"mouseup",i),e.on("remove",()=>{n.unbind(s,"mousemove",r),n.unbind(s,"mouseup",i)}),e.on("keydown",l=>{l.keyCode===ee.ESC&&ax(t,e,m.none())})},N6=e=>{const t=o=>{if(!o.isDefaultPrevented()){const r=o.dataTransfer;r&&(We(r.types,"Files")||r.files.length>0)&&(o.preventDefault(),o.type==="drop"&&vc(e,"Dropped file type is not supported"))}},n=o=>{Xl(e,o.target)&&t(o)},s=()=>{const o=qe.DOM,r=e.dom,a=document,i=e.inline?e.getBody():e.getDoc(),l=["drop","dragover"];$(l,c=>{o.bind(a,c,n),r.bind(i,c,t)}),e.on("remove",()=>{$(l,c=>{o.unbind(a,c,n),r.unbind(i,c,t)})})};e.on("init",()=>{In.setEditorTimeout(e,s,0)})},T6=e=>{k6(e),kR(e)&&N6(e)},A6=e=>{const t=kl(()=>{if(!e.removed&&e.getBody().contains(document.activeElement)){const n=e.selection.getRng();if(n.collapsed){const s=Im(e,n,!1);e.selection.setRng(s)}}},0);e.on("focus",()=>{t.throttle()}),e.on("blur",()=>{t.cancel()})},D6=e=>{e.on("init",()=>{e.on("focusin",t=>{const n=t.target;if(Es(n)){const s=ir(e.getBody(),n),o=Ze(s)?s:n;e.selection.getNode()!==o&&ki(e,o).each(r=>e.selection.setRng(r))}})})},$i=Ze,lx=(e,t)=>ir(e.getBody(),t),R6=e=>{const t=e.selection,n=e.dom,s=e.getBody(),o=v1(e,s,n.isBlock,()=>or(e)),r="sel-"+n.uniqueId(),a="data-mce-selected";let i;const l=L=>K(L)&&n.hasClass(L,"mce-offscreen-selection"),c=L=>L!==s&&($i(L)||Es(L))&&n.isChildOf(L,s)&&n.isEditable(L.parentNode),f=L=>{L&&t.setRng(L)},u=(L,D,O,q=!0)=>e.dispatch("ShowCaret",{target:D,direction:L,before:O}).isDefaultPrevented()?null:(q&&t.scrollIntoView(D,L===-1),o.show(O,D)),d=L=>{L.hasAttribute("data-mce-caret")&&(af(L),t.scrollIntoView(L))},b=()=>{e.on("click",D=>{n.isEditable(D.target)||(D.preventDefault(),e.focus())}),e.on("blur NewBlock",N),e.on("ResizeWindow FullscreenStateChanged",o.reposition),e.on("tap",D=>{const O=D.target,q=lx(e,O);$i(q)?(D.preventDefault(),ki(e,q).each(x)):c(O)&&ki(e,O).each(x)},!0),e.on("mousedown",D=>{const O=D.target;if(O!==s&&O.nodeName!=="HTML"&&!n.isChildOf(O,s)||!Nz(e,D.clientX,D.clientY))return;N(),oe();const q=lx(e,O);$i(q)?(D.preventDefault(),ki(e,q).each(x)):Z_(s,D.clientX,D.clientY).each(j=>{D.preventDefault();const J=u(1,j.node,j.position===la.Before,!1);f(J),Z(q)?q.focus():e.getBody().focus()})}),e.on("keypress",D=>{ee.modifierPressed(D)||$i(t.getNode())&&D.preventDefault()}),e.on("GetSelectionRange",D=>{let O=D.range;if(i){if(!i.parentNode){i=null;return}O=O.cloneRange(),O.selectNode(i),D.range=O}}),e.on("SetSelectionRange",D=>{D.range=y(D.range);const O=x(D.range,D.forward);O&&(D.range=O)});const L=D=>Z(D)&&D.id==="mcepastebin";e.on("AfterSetSelectionRange",D=>{const O=D.range,q=O.startContainer.parentElement;!g(O)&&!L(q)&&oe(),l(q)||N()}),T6(e),A6(e),D6(e)},E=L=>Rn(L)||hl(L)||bl(L),g=L=>E(L.startContainer)||E(L.endContainer),y=L=>{const D=e.schema.getVoidElements(),O=n.createRng(),q=L.startContainer,j=L.startOffset,J=L.endContainer,ge=L.endOffset;return ye(D,q.nodeName.toLowerCase())?j===0?O.setStartBefore(q):O.setStartAfter(q):O.setStart(q,j),ye(D,J.nodeName.toLowerCase())?ge===0?O.setEndBefore(J):O.setEndAfter(J):O.setEnd(J,ge),O},w=(L,D)=>{const O=S.fromDom(e.getBody()),q=e.getDoc(),j=Ia(O,"#"+r).getOrThunk(()=>{const me=S.fromHtml('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>',q);return Pt(me,"id",r),ht(O,me),me}),J=n.createRng();Br(j),$o(j,[S.fromText(Tt,q),S.fromDom(D),S.fromText(Tt,q)]),J.setStart(j.dom.firstChild,1),J.setEnd(j.dom.lastChild,0),ol(j,{top:n.getPos(L,e.getBody()).y+"px"}),NC(j);const ge=t.getSel();return ge&&(ge.removeAllRanges(),ge.addRange(J)),J},_=L=>{const D=L.cloneNode(!0),O=e.dispatch("ObjectSelected",{target:L,targetClone:D});if(O.isDefaultPrevented())return null;const q=w(L,O.targetClone),j=S.fromDom(L);return $(jt(S.fromDom(e.getBody()),`*[${a}]`),J=>{Ue(j,J)||$t(J,a)}),n.getAttrib(L,a)||L.setAttribute(a,"1"),i=L,oe(),q},x=(L,D)=>{if(!L)return null;if(L.collapsed){if(!g(L)){const J=D?1:-1,ge=ii(J,s,L),me=ge.getNode(!D);if(K(me)){if(si(me))return u(J,me,D?!ge.isAtEnd():!1,!1);if(ao(me)&&Ze(me.nextSibling)){const Re=n.createRng();return Re.setStart(me,0),Re.setEnd(me,0),Re}}const Ne=ge.getNode(D);if(K(Ne)){if(si(Ne))return u(J,Ne,D?!1:!ge.isAtEnd(),!1);if(ao(Ne)&&Ze(Ne.previousSibling)){const Re=n.createRng();return Re.setStart(Ne,1),Re.setEnd(Ne,1),Re}}}return null}let O=L.startContainer,q=L.startOffset;const j=L.endOffset;if(z(O)&&q===0&&$i(O.parentNode)&&(O=O.parentNode,q=n.nodeIndex(O),O=O.parentNode),!Z(O))return null;if(j===q+1&&O===L.endContainer){const J=O.childNodes[q];if(c(J))return _(J)}return null},N=()=>{i&&i.removeAttribute(a),Ia(S.fromDom(e.getBody()),"#"+r).each(tt),i=null},I=()=>{o.destroy(),i=null},oe=()=>{o.hide()};return As(e)||b(),{showCaret:u,showBlockCaretContainer:d,hideFakeCaret:oe,destroy:I}},P6=(e,t)=>{let n=t;for(let s=e.previousSibling;z(s);s=s.previousSibling)n+=s.data.length;return n},cx=(e,t,n,s,o)=>{if(z(n)&&(s<0||s>n.data.length))return[];const r=o&&z(n)?[P6(n,s)]:[s];let a=n;for(;a!==t&&a.parentNode;)r.push(e.nodeIndex(a,o)),a=a.parentNode;return a===t?r.reverse():[]},Pp=(e,t,n,s,o,r,a=!1)=>{const i=cx(e,t,n,s,a),l=cx(e,t,o,r,a);return{start:i,end:l}},ux=(e,t)=>{const n=t.slice(),s=n.pop();return Yt(s)?vn(n,(r,a)=>r.bind(i=>m.from(i.childNodes[a])),m.some(e)).bind(r=>z(r)&&(s<0||s>r.data.length)?m.none():m.some({node:r,offset:s})):m.none()},fx=(e,t)=>ux(e,t.start).bind(({node:n,offset:s})=>ux(e,t.end).map(({node:o,offset:r})=>{const a=document.createRange();return a.setStart(n,s),a.setEnd(o,r),a})),O6=(e,t,n,s=!1)=>Pp(e,t,n.startContainer,n.startOffset,n.endContainer,n.endOffset,s),ca=(e,t,n)=>{if(t&&e.isEmpty(t)&&!n(t)){const s=t.parentNode;e.remove(t),ca(e,s,n)}},Zc=(e,t,n,s=!0)=>{const o=t.startContainer.parentNode,r=t.endContainer.parentNode;t.deleteContents(),s&&!n(t.startContainer)&&(z(t.startContainer)&&t.startContainer.data.length===0&&e.remove(t.startContainer),z(t.endContainer)&&t.endContainer.data.length===0&&e.remove(t.endContainer),ca(e,o,n),o!==r&&ca(e,r,n))},Op=(e,t)=>m.from(e.dom.getParent(t.startContainer,e.dom.isBlock)),dx=(e,t,n)=>{const s=e.dynamicPatternsLookup({text:n,block:t});return{...e,blockPatterns:zb(s).concat(e.blockPatterns),inlinePatterns:Hb(s).concat(e.inlinePatterns)}},mx=(e,t,n,s)=>{const o=e.createRng();return o.setStart(t,0),o.setEnd(n,s),o.toString()},B6=e=>/^\s[^\s]/.test(e),px=(e,t,n)=>{R3(t,0,t).each(o=>{const r=o.container;_w(r,n.start.length,t).each(l=>{const c=e.createRng();c.setStart(r,0),c.setEnd(l.container,l.offset),Zc(e,c,f=>f===t)});const a=S.fromDom(r),i=fl(a);B6(i)&&gT(a,i.slice(1))})},I6=(e,t)=>{const n=e.dom,s=t.pattern,o=fx(n.getRoot(),t.range).getOrDie("Unable to resolve path range"),r=(a,i)=>{const l=i.get(a);return et(l)&&mn(l).exists(c=>ye(c,"block"))};return Op(e,o).each(a=>{s.type==="block-format"?r(s.format,e.formatter)&&e.undoManager.transact(()=>{px(e.dom,a,s),e.formatter.apply(s.format)}):s.type==="block-command"&&e.undoManager.transact(()=>{px(e.dom,a,s),e.execCommand(s.cmd,!1,s.value)})}),!0},L6=e=>Do(e,(t,n)=>n.start.length-t.start.length),F6=(e,t)=>{const n=L6(e),s=t.replace(Tt," ");return wt(n,o=>t.indexOf(o.start)===0||s.indexOf(o.start)===0)},$6=(e,t,n,s)=>{var o;const r=e.dom,a=an(e);if(!r.is(t,a))return[];const i=(o=t.textContent)!==null&&o!==void 0?o:"";return F6(n.blockPatterns,i).map(l=>V.trim(i).length===l.start.length?[]:[{pattern:l,range:Pp(r,r.getRoot(),t,0,t,0,s)}]).getOr([])},M6=(e,t)=>{if(t.length===0)return;const n=e.selection.getBookmark();$(t,s=>I6(e,s)),e.selection.moveToBookmark(n)},gx=(e,t)=>e.create("span",{"data-mce-type":"bookmark",id:t}),Qc=(e,t)=>{const n=e.createRng();return n.setStartAfter(t.start),n.setEndBefore(t.end),n},hx=(e,t,n)=>{const s=fx(e.getRoot(),n).getOrDie("Unable to resolve path range"),o=s.startContainer,r=s.endContainer,a=s.endOffset===0?r:r.splitText(s.endOffset),i=s.startOffset===0?o:o.splitText(s.startOffset),l=i.parentNode,c=a.parentNode;return{prefix:t,end:c.insertBefore(gx(e,t+"-end"),a),start:l.insertBefore(gx(e,t+"-start"),i)}},bx=(e,t,n)=>{ca(e,e.get(t.prefix+"-end"),n),ca(e,e.get(t.prefix+"-start"),n)},Bp=e=>e.start.length===0,U6=e=>(t,n)=>{const o=t.data.substring(0,n),r=o.lastIndexOf(e.charAt(e.length-1)),a=o.lastIndexOf(e);return a!==-1?a+e.length:r!==-1?r+1:-1},vx=(e,t,n,s)=>{const o=t.start;return sp(e,s.container,s.offset,U6(o),n).bind(a=>{var i,l;const c=(l=(i=n.textContent)===null||i===void 0?void 0:i.indexOf(o))!==null&&l!==void 0?l:-1;if(c!==-1&&a.offset>=c+o.length){const u=e.createRng();return u.setStart(a.container,a.offset-o.length),u.setEnd(a.container,a.offset),m.some(u)}else{const u=a.offset-o.length;return np(a.container,u,n).map(d=>{const b=e.createRng();return b.setStart(d.container,d.offset),b.setEnd(a.container,a.offset),b}).filter(d=>d.toString()===o).orThunk(()=>vx(e,t,n,is(a.container,0)))}})},z6=(e,t,n,s,o,r=!1)=>{if(t.start.length===0&&!r){const a=e.createRng();return a.setStart(n,s),a.setEnd(n,s),m.some(a)}return tp(n,s,o).bind(a=>vx(e,t,o,a).bind(l=>{var c;if(r){if(l.endContainer===a.container&&l.endOffset===a.offset)return m.none();if(a.offset===0&&((c=l.endContainer.textContent)===null||c===void 0?void 0:c.length)===l.endOffset)return m.none()}return m.some(l)}))},H6=(e,t,n,s)=>{const o=e.dom,r=o.getRoot(),a=n.pattern,i=n.position.container,l=n.position.offset;return np(i,l-n.pattern.end.length,t).bind(c=>{const f=Pp(o,r,c.container,c.offset,i,l,s);if(Bp(a))return m.some({matches:[{pattern:a,startRng:f,endRng:f}],position:c});{const u=Jc(e,n.remainingPatterns,c.container,c.offset,t,s),d=u.getOr({matches:[],position:c}),b=d.position;return z6(o,a,b.container,b.offset,t,u.isNone()).map(g=>{const y=O6(o,r,g,s);return{matches:d.matches.concat([{pattern:a,startRng:y,endRng:f}]),position:is(g.startContainer,g.startOffset)}})}})},Jc=(e,t,n,s,o,r)=>{const a=e.dom;return tp(n,s,a.getRoot()).bind(i=>{const l=mx(a,o,n,s);for(let c=0;c<t.length;c++){const f=t[c];if(!Lu(l,f.end))continue;const u=t.slice();u.splice(c,1);const d=H6(e,o,{pattern:f,remainingPatterns:u,position:i},r);if(d.isNone()&&s>0)return Jc(e,t,n,s-1,o,r);if(d.isSome())return d}return m.none()})},Cx=(e,t,n)=>{e.selection.setRng(n),t.type==="inline-format"?$(t.format,s=>{e.formatter.apply(s)}):e.execCommand(t.cmd,!1,t.value)},W6=(e,t,n,s)=>{const o=Qc(e.dom,n);Zc(e.dom,o,s),Cx(e,t,o)},V6=(e,t,n,s,o)=>{const r=e.dom,a=Qc(r,s),i=Qc(r,n);Zc(r,i,o),Zc(r,a,o);const l={prefix:n.prefix,start:n.end,end:s.start},c=Qc(r,l);Cx(e,t,c)},q6=(e,t)=>{const n=Ya("mce_textpattern"),s=Sa(t,(o,r)=>{const a=hx(e,n+`_end${o.length}`,r.endRng);return o.concat([{...r,endMarker:a}])},[]);return Sa(s,(o,r)=>{const a=s.length-o.length-1,i=Bp(r.pattern)?r.endMarker:hx(e,n+`_start${a}`,r.startRng);return o.concat([{...r,startMarker:i}])},[])},j6=e=>Do(e,(t,n)=>n.end.length-t.end.length),K6=(e,t)=>{const n=Js(e,s=>gt(t,o=>s.pattern.start===o.pattern.start&&s.pattern.end===o.pattern.end));return e.length===t.length?n?e:t:e.length>t.length?e:t},yx=(e,t,n,s,o,r)=>{const a=Jc(e,o.inlinePatterns,n,s,t,r).fold(()=>[],l=>l.matches),i=Jc(e,j6(o.inlinePatterns),n,s,t,r).fold(()=>[],l=>l.matches);return K6(a,i)},Ex=(e,t)=>{if(t.length===0)return;const n=e.dom,s=e.selection.getBookmark(),o=q6(n,t);$(o,r=>{const a=n.getParent(r.startMarker.start,n.isBlock),i=l=>l===a;Bp(r.pattern)?W6(e,r.pattern,r.endMarker,i):V6(e,r.pattern,r.startMarker,r.endMarker,i),bx(n,r.endMarker,i),bx(n,r.startMarker,i)}),e.selection.moveToBookmark(s)},G6=(e,t)=>{const n=e.selection.getRng();return Op(e,n).map(s=>{var o;const r=Math.max(0,n.startOffset),a=dx(t,s,(o=s.textContent)!==null&&o!==void 0?o:""),i=yx(e,s,n.startContainer,r,a,!0),l=$6(e,s,a,!0);return l.length>0||i.length>0?(e.undoManager.add(),e.undoManager.extra(()=>{e.execCommand("mceInsertNewLine")},()=>{e.insertContent(Lr),Ex(e,i),M6(e,l);const c=e.selection.getRng(),f=tp(c.startContainer,c.startOffset,e.dom.getRoot());e.execCommand("mceInsertNewLine"),f.each(u=>{const d=u.container;d.data.charAt(u.offset-1)===Lr&&(d.deleteData(u.offset-1,1),ca(e.dom,d.parentNode,b=>b===e.dom.getRoot()))})}),!0):!1}).getOr(!1)},Y6=(e,t)=>{const n=e.selection.getRng();Op(e,n).map(s=>{const o=Math.max(0,n.startOffset-1),r=mx(e.dom,s,n.startContainer,o),a=dx(t,s,r),i=yx(e,s,n.startContainer,o,a,!1);i.length>0&&e.undoManager.transact(()=>{Ex(e,i)})})},Sx=(e,t,n)=>{for(let s=0;s<e.length;s++)if(n(e[s],t))return!0;return!1},X6=(e,t)=>Sx(e,t,(n,s)=>n===s.keyCode&&!ee.modifierPressed(s)),Z6=(e,t)=>Sx(e,t,(n,s)=>n.charCodeAt(0)===s.charCode),Q6=e=>{const t=[",",".",";",":","!","?"],n=[32],s=()=>OD(KR(e),GR(e)),o=()=>e1(e);e.on("keydown",a=>{if(a.keyCode===13&&!ee.modifierPressed(a)&&e.selection.isCollapsed()){const i=s();(i.inlinePatterns.length>0||i.blockPatterns.length>0||o())&&G6(e,i)&&a.preventDefault()}},!0);const r=()=>{if(e.selection.isCollapsed()){const a=s();(a.inlinePatterns.length>0||o())&&Y6(e,a)}};e.on("keyup",a=>{X6(n,a)&&r()}),e.on("keypress",a=>{Z6(t,a)&&In.setEditorTimeout(e,r)})},J6=e=>{Q6(e)},e5=e=>{const t=V.each,n=ee.BACKSPACE,s=ee.DELETE,o=e.dom,r=e.selection,a=e.parser,i=Oe.browser,l=i.isFirefox(),c=i.isChromium()||i.isSafari(),f=Oe.deviceType.isiPhone()||Oe.deviceType.isiPad(),u=Oe.os.isMacOS()||Oe.os.isiOS(),d=(ae,ie)=>{try{e.getDoc().execCommand(ae,!1,String(ie))}catch{}},b=ae=>ae.isDefaultPrevented(),E=()=>{const ae=U=>{const pe=o.create("body"),_e=U.cloneContents();return pe.appendChild(_e),r.serializer.serialize(pe,{format:"html"})},ie=U=>{const pe=ae(U),_e=o.createRng();_e.selectNode(e.getBody());const Le=ae(_e);return pe===Le};e.on("keydown",U=>{const pe=U.keyCode;if(!b(U)&&(pe===s||pe===n)&&e.selection.isEditable()){const _e=e.selection.isCollapsed(),Le=e.getBody();if(_e&&!o.isEmpty(Le)||!_e&&!ie(e.selection.getRng()))return;U.preventDefault(),e.setContent(""),Le.firstChild&&o.isBlock(Le.firstChild)?e.selection.setCursorLocation(Le.firstChild,0):e.selection.setCursorLocation(Le,0),e.nodeChanged()}})},g=()=>{e.shortcuts.add("meta+a",null,"SelectAll")},y=()=>{e.inline||o.bind(e.getDoc(),"mousedown mouseup",ae=>{let ie;if(ae.target===e.getDoc().documentElement)if(ie=r.getRng(),e.getBody().focus(),ae.type==="mousedown"){if(Rn(ie.startContainer))return;r.placeCaretAt(ae.clientX,ae.clientY)}else r.setRng(ie)})},w=()=>{e.on("keydown",ae=>{if(!b(ae)&&ae.keyCode===n){if(!e.getBody().getElementsByTagName("hr").length)return;if(r.isCollapsed()&&r.getRng().startOffset===0){const ie=r.getNode(),U=ie.previousSibling;if(ie.nodeName==="HR"){o.remove(ie),ae.preventDefault();return}U&&U.nodeName&&U.nodeName.toLowerCase()==="hr"&&(o.remove(U),ae.preventDefault())}}})},_=()=>{Range.prototype.getClientRects||e.on("mousedown",ae=>{if(!b(ae)&&ae.target.nodeName==="HTML"){const ie=e.getBody();ie.blur(),In.setEditorTimeout(e,()=>{ie.focus()})}})},x=()=>{const ae=ov(e);e.on("click",ie=>{const U=ie.target;/^(IMG|HR)$/.test(U.nodeName)&&o.isEditable(U.parentNode)&&(ie.preventDefault(),e.selection.select(U),e.nodeChanged()),U.nodeName==="A"&&o.hasClass(U,ae)&&U.childNodes.length===0&&o.isEditable(U.parentNode)&&(ie.preventDefault(),r.select(U))})},N=()=>{const ae=()=>{const U=o.getAttribs(r.getStart().cloneNode(!1));return()=>{const pe=r.getStart();pe!==e.getBody()&&(o.setAttrib(pe,"style",null),t(U,_e=>{pe.setAttributeNode(_e.cloneNode(!0))}))}},ie=()=>!r.isCollapsed()&&o.getParent(r.getStart(),o.isBlock)!==o.getParent(r.getEnd(),o.isBlock);e.on("keypress",U=>{let pe;return!b(U)&&(U.keyCode===8||U.keyCode===46)&&ie()?(pe=ae(),e.getDoc().execCommand("delete",!1),pe(),U.preventDefault(),!1):!0}),o.bind(e.getDoc(),"cut",U=>{if(!b(U)&&ie()){const pe=ae();In.setEditorTimeout(e,()=>{pe()})}})},I=()=>{e.on("keydown",ae=>{if(!b(ae)&&ae.keyCode===n&&r.isCollapsed()&&r.getRng().startOffset===0){const ie=r.getNode().previousSibling;if(ie&&ie.nodeName&&ie.nodeName.toLowerCase()==="table")return ae.preventDefault(),!1}return!0})},oe=()=>{e.on("keydown",ae=>{if(b(ae)||ae.keyCode!==ee.BACKSPACE)return;let ie=r.getRng();const U=ie.startContainer,pe=ie.startOffset,_e=o.getRoot();let Le=U;if(!(!ie.collapsed||pe!==0)){for(;Le.parentNode&&Le.parentNode.firstChild===Le&&Le.parentNode!==_e;)Le=Le.parentNode;Le.nodeName==="BLOCKQUOTE"&&(e.formatter.toggle("blockquote",void 0,Le),ie=o.createRng(),ie.setStart(U,0),ie.setEnd(U,0),r.setRng(ie))}})},L=()=>{const ae=()=>{d("StyleWithCSS",!1),d("enableInlineTableEditing",!1),ev(e)||d("enableObjectResizing",!1)};nv(e)||e.on("BeforeExecCommand mousedown",ae)},D=()=>{const ae=()=>{t(o.select("a:not([data-mce-block])"),ie=>{var U;let pe=ie.parentNode;const _e=o.getRoot();if((pe==null?void 0:pe.lastChild)===ie){for(;pe&&!o.isBlock(pe);){if(((U=pe.parentNode)===null||U===void 0?void 0:U.lastChild)!==pe||pe===_e)return;pe=pe.parentNode}o.add(pe,"br",{"data-mce-bogus":1})}})};e.on("SetContent ExecCommand",ie=>{(ie.type==="setcontent"||ie.command==="mceInsertLink")&&ae()})},O=()=>{e.on("init",()=>{d("DefaultParagraphSeparator",an(e))})},q=ae=>{const ie=ae.getBody(),U=ae.selection.getRng();return U.startContainer===U.endContainer&&U.startContainer===ie&&U.startOffset===0&&U.endOffset===ie.childNodes.length},j=()=>{e.on("keyup focusin mouseup",ae=>{!ee.modifierPressed(ae)&&!q(e)&&r.normalize()},!0)},J=()=>{e.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")},ge=()=>{e.inline||e.on("keydown",()=>{document.activeElement===document.body&&e.getWin().focus()})},me=()=>{e.inline||(e.contentStyles.push("body {min-height: 150px}"),e.on("click",ae=>{let ie;ae.target.nodeName==="HTML"&&(ie=e.selection.getRng(),e.getBody().focus(),e.selection.setRng(ie),e.selection.normalize(),e.nodeChanged())}))},Ne=()=>{u&&e.on("keydown",ae=>{ee.metaKeyPressed(ae)&&!ae.shiftKey&&(ae.keyCode===37||ae.keyCode===39)&&(ae.preventDefault(),e.selection.getSel().modify("move",ae.keyCode===37?"backward":"forward","lineboundary"))})},Re=()=>{e.on("click",ae=>{let ie=ae.target;do if(ie.tagName==="A"){ae.preventDefault();return}while(ie=ie.parentNode)}),e.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},nt=()=>{e.on("init",()=>{e.dom.bind(e.getBody(),"submit",ae=>{ae.preventDefault()})})},Bt=()=>{a.addNodeFilter("br",ae=>{let ie=ae.length;for(;ie--;)ae[ie].attr("class")==="Apple-interchange-newline"&&ae[ie].remove()})},vt=Se,H=()=>{if(!l||e.removed)return!1;const ae=e.selection.getSel();return!ae||!ae.rangeCount||ae.rangeCount===0},re=()=>{c&&(y(),x(),nt(),g(),f&&(ge(),me(),Re())),l&&(_(),L(),J(),Ne())},Te=()=>{e.on("drop",ae=>{var ie;const U=(ie=ae.dataTransfer)===null||ie===void 0?void 0:ie.getData("text/html");le(U)&&/^<img[^>]*>$/.test(U)&&e.dispatch("dragend",new window.DragEvent("dragend",ae))})},xe=()=>{oe(),E(),Oe.windowsPhone||j(),c&&(y(),x(),O(),nt(),I(),Bt(),f?(ge(),me(),Re()):g()),l&&(w(),_(),N(),L(),D(),J(),Ne(),I(),Te())};return As(e)?re():xe(),{refreshContentEditable:vt,isHidden:H}},Ip=qe.DOM,t5=(e,t)=>{const n=S.fromDom(e.getBody()),s=Yu(to(n)),o=S.fromTag("style");Pt(o,"type","text/css"),ht(o,S.fromText(t)),ht(s,o),e.on("remove",()=>{tt(o)})},n5=e=>e.inline?e.getElement().nodeName.toLowerCase():void 0,Lp=e=>xa(e,t=>St(t)===!1),wx=e=>{const t=e.options.get,n=e.editorUpload.blobCache;return Lp({allow_conditional_comments:t("allow_conditional_comments"),allow_html_data_urls:t("allow_html_data_urls"),allow_svg_data_urls:t("allow_svg_data_urls"),allow_html_in_named_anchor:t("allow_html_in_named_anchor"),allow_script_urls:t("allow_script_urls"),allow_unsafe_link_target:t("allow_unsafe_link_target"),convert_fonts_to_spans:t("convert_fonts_to_spans"),fix_list_elements:t("fix_list_elements"),font_size_legacy_values:t("font_size_legacy_values"),forced_root_block:t("forced_root_block"),forced_root_block_attrs:t("forced_root_block_attrs"),preserve_cdata:t("preserve_cdata"),inline_styles:t("inline_styles"),root_name:n5(e),sanitize:t("xss_sanitization"),validate:!0,blob_cache:n,document:e.getDoc()})},_x=e=>{const t=e.options.get;return Lp({custom_elements:t("custom_elements"),extended_valid_elements:t("extended_valid_elements"),invalid_elements:t("invalid_elements"),invalid_styles:t("invalid_styles"),schema:t("schema"),valid_children:t("valid_children"),valid_classes:t("valid_classes"),valid_elements:t("valid_elements"),valid_styles:t("valid_styles"),verify_html:t("verify_html"),padd_empty_block_inline_children:t("format_empty_lines")})},s5=e=>{const t=e.options.get;return{...wx(e),..._x(e),...Lp({remove_trailing_brs:t("remove_trailing_brs"),url_converter:t("url_converter"),url_converter_scope:t("url_converter_scope"),element_format:t("element_format"),entities:t("entities"),entity_encoding:t("entity_encoding"),indent:t("indent"),indent_after:t("indent_after"),indent_before:t("indent_before")})}},o5=e=>{const t=ea(wx(e),e.schema);return t.addAttributeFilter("src,href,style,tabindex",(n,s)=>{const o=e.dom,r="data-mce-"+s;let a=n.length;for(;a--;){const i=n[a];let l=i.attr(s);if(l&&!i.attr(r)){if(l.indexOf("data:")===0||l.indexOf("blob:")===0)continue;s==="style"?(l=o.serializeStyle(o.parseStyle(l),i.name),l.length||(l=null),i.attr(r,l),i.attr(s,l)):s==="tabindex"?(i.attr(r,l),i.attr(s,null)):i.attr(r,e.convertURL(l,s,i.name))}}}),t.addNodeFilter("script",n=>{let s=n.length;for(;s--;){const o=n[s],r=o.attr("type")||"no/type";r.indexOf("mce-")!==0&&o.attr("type","mce-"+r)}}),ZR(e)&&t.addNodeFilter("#cdata",n=>{var s;let o=n.length;for(;o--;){const r=n[o];r.type=8,r.name="#comment",r.value="[CDATA["+e.dom.encode((s=r.value)!==null&&s!==void 0?s:"")+"]]"}}),t.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",n=>{let s=n.length;const o=e.schema.getNonEmptyElements();for(;s--;){const r=n[s];r.isEmpty(o)&&r.getAll("br").length===0&&r.append(new cn("br",1))}}),t},r5=e=>{const t=OR(e);t&&In.setEditorTimeout(e,()=>{let n;t===!0?n=e:n=e.editorManager.get(t),n&&!n.destroyed&&(n.focus(),n.selection.scrollIntoView())},100)},a5=e=>{const t=e.dom.getRoot();!e.inline&&(!Ul(e)||e.selection.getStart(!0)===t)&&Qt(t).each(n=>{const s=n.getNode(),o=Vs(s)?Qt(s).getOr(n):n;e.selection.setRng(o.toRange())})},i5=e=>{e.bindPendingEventDelegates(),e.initialized=!0,BP(e),e.focus(!0),a5(e),e.nodeChanged({initial:!0});const t=RR(e);Ie(t)&&t.call(e,e),r5(e)},xx=e=>e.inline?e.ui.styleSheetLoader:e.dom.styleSheetLoader,l5=(e,t,n)=>{const s=[xx(e).loadAll(t)];return e.inline?s:s.concat([e.ui.styleSheetLoader.loadAll(n)])},kx=e=>{const t=xx(e),n=Jb(e),s=e.contentCSS,o=()=>{t.unloadAll(s),e.inline||e.ui.styleSheetLoader.unloadAll(n)},r=()=>{e.removed?o():e.on("remove",o)};if(e.contentStyles.length>0){let l="";V.each(e.contentStyles,c=>{l+=c+`\r
`}),e.dom.addStyle(l)}const a=Promise.all(l5(e,s,n)).then(r).catch(r),i=rR(e);return i&&t5(e,i),a},c5=e=>{const t=e.getDoc(),n=e.getBody();PP(e),BR(e)||(t.body.spellcheck=!1,Ip.setAttrib(n,"spellcheck","false")),e.quirks=e5(e),OP(e);const s=aR(e);s!==void 0&&(n.dir=s);const o=IR(e);o&&e.on("BeforeSetContent",r=>{V.each(o,a=>{r.content=r.content.replace(a,i=>"<!--mce:protected "+escape(i)+"-->")})}),e.on("SetContent",()=>{e.addVisual(e.getBody())}),e.on("compositionstart compositionend",r=>{e.composing=r.type==="compositionstart"})},u5=e=>{As(e)||e.load({initial:!0,format:"html"}),e.startContent=e.getContent({format:"raw"})},Fp=e=>{e.removed!==!0&&(u5(e),i5(e))},Nx=e=>{const t=e.getElement();let n=e.getDoc();e.inline&&(Ip.addClass(t,"mce-content-body"),e.contentDocument=n=document,e.contentWindow=window,e.bodyElement=t,e.contentAreaContainer=t);const s=e.getBody();s.disabled=!0,e.readonly=nv(e),e._editableRoot=_R(e),!e.readonly&&e.hasEditableRoot()&&(e.inline&&Ip.getStyle(s,"position",!0)==="static"&&(s.style.position="relative"),s.contentEditable="true"),s.disabled=!1,e.editorUpload=Jz(e),e.schema=lo(_x(e)),e.dom=qe(n,{keep_values:!0,url_converter:e.convertURL,url_converter_scope:e,update_styles:!0,root_element:e.inline?e.getBody():null,collect:e.inline,schema:e.schema,contentCssCors:tR(e),referrerPolicy:If(e),onSetAttrib:a=>{e.dispatch("SetAttrib",a)}}),e.parser=o5(e),e.serializer=wS(s5(e),e),e.selection=SS(e.dom,e.getWin(),e.serializer,e),e.annotator=eC(e),e.formatter=$S(e),e.undoManager=US(e),e._nodeChangeDispatcher=new oj(e),e._selectionOverrides=R6(e),kW(e),L8(e),BW(e),As(e)||(W8(e),J6(e));const o=sj(e);wW(e,o),RW(e),pH(e),y8(e);const r=sU(e);c5(e),r.fold(()=>{kx(e).then(()=>Fp(e))},a=>{e.setProgressState(!0),kx(e).then(()=>{a().then(i=>{e.setProgressState(!1),Fp(e),bS(e)},i=>{e.notificationManager.open({type:"error",text:String(i)}),Fp(e),bS(e)})})})},f5=yt,d5=(e,t,n)=>tT(e,t,f5,n),$p=qe.DOM,m5=(e,t,n,s)=>{const o=S.fromTag("iframe");return s.each(r=>Pt(o,"tabindex",r)),eo(o,n),eo(o,{id:e+"_ifr",frameBorder:"0",allowTransparency:"true",title:t}),Ar(o,"tox-edit-area__iframe"),o},p5=e=>{let t=UD(e)+"<html><head>";jb(e)!==e.documentBaseUrl&&(t+='<base href="'+e.documentBaseURI.getURI()+'" />'),t+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';const n=zD(e),s=HD(e),o=e.translate(AR(e));return Kb(e)&&(t+='<meta http-equiv="Content-Security-Policy" content="'+Kb(e)+'" />'),t+=`</head><body id="${n}" class="mce-content-body ${s}" data-id="${e.id}" aria-label="${o}"><br></body></html>`,t},g5=(e,t)=>{const n=e.translate("Rich Text Area"),s=Ms(S.fromDom(e.getElement()),"tabindex").bind(tl),o=m5(e.id,n,MD(e),s).dom;o.onload=()=>{o.onload=null,e.dispatch("load")},e.contentAreaContainer=t.iframeContainer,e.iframeElement=o,e.iframeHTML=p5(e),$p.add(t.iframeContainer,o)},h5=e=>{const t=e.iframeElement,n=()=>{e.contentDocument=t.contentDocument,Nx(e)};if(JR(e)||Oe.browser.isFirefox()){const s=e.getDoc();s.open(),s.write(e.iframeHTML),s.close(),n()}else{const s=d5(S.fromDom(t),"load",()=>{s.unbind(),n()});t.srcdoc=e.iframeHTML}},b5=(e,t)=>{g5(e,t),t.editorContainer&&(t.editorContainer.style.display=e.orgDisplay,e.hidden=$p.isHidden(t.editorContainer)),e.getElement().style.display="none",$p.setAttrib(e.id,"aria-hidden","true"),e.getElement().style.visibility=e.orgVisibility,h5(e)},Tx=qe.DOM,v5=(e,t,n)=>{const s=na.get(n),o=na.urls[n]||e.documentBaseUrl.replace(/\/$/,"");if(n=V.trim(n),s&&V.inArray(t,n)===-1){if(e.plugins[n])return;try{const r=s(e,o)||{};e.plugins[n]=r,Ie(r.init)&&(r.init(e,o),t.push(n))}catch(r){$z(e,n,r)}}},C5=e=>e.replace(/^\-/,""),y5=e=>{const t=[];$(Rl(e),n=>{v5(e,t,C5(n))})},E5=e=>{const t=V.trim(Xb(e)),n=e.ui.registry.getAll().icons,s={...bc.get("default").icons,...bc.get(t).icons};Ye(s,(o,r)=>{ye(n,r)||e.ui.registry.addIcon(r,o)})},S5=e=>{const t=Wr(e);if(le(t)){const n=fr.get(t);e.theme=n(e,fr.urls[t])||{},Ie(e.theme.init)&&e.theme.init(e,fr.urls[t]||e.documentBaseUrl.replace(/\/$/,""))}else e.theme={}},w5=e=>{const t=Lf(e),n=ta.get(t);e.model=n(e,ta.urls[t])},_5=e=>{const t=e.theme.renderUI;return t?t():Dx(e)},x5=e=>{const t=e.getElement(),s=Wr(e)(e,t);return s.editorContainer.nodeType&&(s.editorContainer.id=s.editorContainer.id||e.id+"_parent"),s.iframeContainer&&s.iframeContainer.nodeType&&(s.iframeContainer.id=s.iframeContainer.id||e.id+"_iframecontainer"),s.height=s.iframeHeight?s.iframeHeight:t.offsetHeight,s},Ax=(e,t)=>({editorContainer:e,iframeContainer:t,api:{}}),k5=e=>{const t=Tx.create("div");return Tx.insertAfter(t,e),Ax(t,t)},Dx=e=>{const t=e.getElement();return e.inline?Ax(null):k5(t)},N5=e=>{const t=e.getElement();return e.orgDisplay=t.style.display,le(Wr(e))?_5(e):Ie(Wr(e))?x5(e):Dx(e)},T5=(e,t)=>{const n={show:m.from(t.show).getOr(Se),hide:m.from(t.hide).getOr(Se),isEnabled:m.from(t.isEnabled).getOr(yt),setEnabled:s=>{e.mode.isReadOnly()||m.from(t.setEnabled).each(o=>o(s))}};e.ui={...e.ui,...n}},A5=async e=>{e.dispatch("ScriptsLoaded"),E5(e),S5(e),w5(e),y5(e);const t=await N5(e);T5(e,m.from(t.api).getOr({})),e.editorContainer=t.editorContainer,Hz(e),e.inline?Nx(e):b5(e,{editorContainer:t.editorContainer,iframeContainer:t.iframeContainer})},dr=qe.DOM,Rx=e=>e.charAt(0)==="-",D5=(e,t)=>{const n=Zb(t),s=nR(t);if(!ns.hasCode(n)&&n!=="en"){const o=hs(s)?s:`${t.editorManager.baseURL}/langs/${n}.js`;e.add(o).catch(()=>{Iz(t,o,n)})}},R5=(e,t)=>{const n=Wr(e);if(le(n)&&!Rx(n)&&!ye(fr.urls,n)){const s=fR(e),o=s?e.documentBaseURI.toAbsolute(s):`themes/${n}/theme${t}.js`;fr.load(n,o).catch(()=>{Lz(e,o,n)})}},P5=(e,t)=>{const n=Lf(e);if(n!=="plugin"&&!ye(ta.urls,n)){const s=dR(e),o=le(s)?e.documentBaseURI.toAbsolute(s):`models/${n}/model${t}.js`;ta.load(n,o).catch(()=>{Fz(e,o,n)})}},O5=e=>m.from(XD(e)).filter(hs).map(t=>({url:t,name:m.none()})),Px=(e,t,n)=>m.from(t).filter(s=>hs(s)&&!bc.has(s)).map(s=>({url:`${e.editorManager.baseURL}/icons/${s}/icons${n}.js`,name:m.some(s)})),B5=(e,t,n)=>{const s=Px(t,"default",n),o=O5(t).orThunk(()=>Px(t,Xb(t),""));$(uN([s,o]),r=>{e.add(r.url).catch(()=>{Bz(t,r.url,r.name.getOrUndefined())})})},I5=(e,t)=>{const n=(s,o)=>{na.load(s,o).catch(()=>{Oz(e,o,s)})};Ye(xR(e),(s,o)=>{n(o,s),e.options.set("plugins",Rl(e).concat(o))}),$(Rl(e),s=>{s=V.trim(s),s&&!na.urls[s]&&!Rx(s)&&n(s,`plugins/${s}/plugin${t}.js`)})},L5=e=>{const t=Wr(e);return!le(t)||K(fr.get(t))},F5=e=>{const t=Lf(e);return K(ta.get(t))},$5=(e,t)=>{const n=js.ScriptLoader,s=()=>{!e.removed&&L5(e)&&F5(e)&&A5(e)};R5(e,t),P5(e,t),D5(n,e),B5(n,e,t),I5(e,t),n.loadQueue().then(s,s)},M5=(e,t)=>qh.forElement(e,{contentCssCors:sv(t),referrerPolicy:If(t)}),U5=e=>{const t=e.id;ns.setCode(Zb(e));const n=()=>{dr.unbind(window,"ready",n),e.render()};if(!qo.Event.domLoaded){dr.bind(window,"ready",n);return}if(!e.getElement())return;const s=S.fromDom(e.getElement()),o=Zg(s);e.on("remove",()=>{fg(s.dom.attributes,a=>$t(s,a.name)),eo(s,o)}),e.ui.styleSheetLoader=M5(s,e),Ff(e)?e.inline=!0:(e.orgVisibility=e.getElement().style.visibility,e.getElement().style.visibility="hidden");const r=e.getElement().form||dr.getParent(t,"form");r&&(e.formElement=r,vR(e)&&!Ju(e.getElement())&&(dr.insertAfter(dr.create("input",{type:"hidden",name:t}),t),e.hasHiddenInput=!0),e.formEventDelegate=a=>{e.dispatch(a.type,a)},dr.bind(r,"submit reset",e.formEventDelegate),e.on("reset",()=>{e.resetContent()}),CR(e)&&!r.submit.nodeType&&!r.submit.length&&!r._mceOldSubmit&&(r._mceOldSubmit=r.submit,r.submit=()=>(e.editorManager.triggerSave(),e.setDirty(!1),r._mceOldSubmit(r)))),e.windowManager=DS(e),e.notificationManager=AS(e),s1(e)&&e.on("GetContent",a=>{a.save&&(a.content=dr.encode(a.content))}),yR(e)&&e.on("submit",()=>{e.initialized&&e.save()}),ER(e)&&(e._beforeUnload=()=>{e.initialized&&!e.destroyed&&!e.isHidden()&&e.save({format:"raw",no_events:!0,set_dirty:!1})},e.editorManager.on("BeforeUnload",e._beforeUnload)),e.editorManager.add(e),$5(e,e.suffix)},z5=(e,t)=>{e._editableRoot!==t&&(e._editableRoot=t,e.readonly||(e.getBody().contentEditable=String(e.hasEditableRoot()),e.nodeChanged()),WP(e,t))},H5=e=>e._editableRoot,W5=(e,t)=>({sections:Y(e),options:Y(t)}),Ox=bs().deviceType,Bx=Ox.isPhone(),V5=Ox.isTablet(),Mi=e=>{if(ut(e))return[];{const t=et(e)?e:e.split(/[ ,]/),n=Fe(t,kr);return ve(n,hs)}},q5=(e,t)=>{const n=Lk(t,(s,o)=>We(e,o));return W5(n.t,n.f)},j5=(e,t,n={})=>{const s=e.sections(),o=Qe(s,t).getOr({});return V.extend({},n,o)},Mp=(e,t)=>ye(e.sections(),t),K5=(e,t)=>Mp(e,t)?e.sections()[t]:{},G5=(e,t)=>({...{table_grid:!1,object_resizing:!1,resize:!1,toolbar_mode:Qe(e,"toolbar_mode").getOr("scrolling"),toolbar_sticky:!1},...t?{menubar:!1}:{}}),Y5=(e,t)=>{var n;const s=(n=t.external_plugins)!==null&&n!==void 0?n:{};return e&&e.external_plugins?V.extend({},e.external_plugins,s):s},X5=(e,t)=>[...Mi(e),...Mi(t)],Z5=(e,t,n,s)=>e&&Mp(t,"mobile")?s:n,Q5=(e,t,n,s)=>{const o=Mi(n.forced_plugins),r=Mi(s.plugins),a=K5(t,"mobile"),i=a.plugins?Mi(a.plugins):r,l=Z5(e,t,r,i),c=X5(o,l);return V.extend(s,{forced_plugins:o,plugins:c})},J5=(e,t)=>e&&Mp(t,"mobile"),e9=(e,t,n,s,o)=>{var r;const a=e?{mobile:G5((r=o.mobile)!==null&&r!==void 0?r:{},t)}:{},i=q5(["mobile"],Rc(a,o)),l=V.extend(n,s,i.options(),J5(e,i)?j5(i,"mobile"):{},{external_plugins:Y5(s,i.options())});return Q5(e,i,s,l)},t9=(e,t)=>e9(Bx||V5,Bx,t,e,t),n9=(e,t)=>TU(e,t),s9=e=>{const t=(s,o)=>{e.formatter.toggle(s,o),e.nodeChanged()},n=s=>()=>{$("left,center,right,justify".split(","),o=>{s!==o&&e.formatter.remove("align"+o)}),s!=="none"&&t("align"+s)};e.editorCommands.addCommands({JustifyLeft:n("left"),JustifyCenter:n("center"),JustifyRight:n("right"),JustifyFull:n("justify"),JustifyNone:n("none")})},o9=e=>{const t=n=>()=>{const s=e.selection,o=s.isCollapsed()?[e.dom.getParent(s.getNode(),e.dom.isBlock)]:s.getSelectedBlocks();return gt(o,r=>K(e.formatter.matchNode(r,n)))};e.editorCommands.addCommands({JustifyLeft:t("alignleft"),JustifyCenter:t("aligncenter"),JustifyRight:t("alignright"),JustifyFull:t("alignjustify")},"state")},r9=e=>{s9(e),o9(e)},a9=e=>{e.editorCommands.addCommands({"Cut,Copy,Paste":t=>{const n=e.getDoc();let s;try{n.execCommand(t)}catch{s=!0}if(t==="paste"&&!n.queryCommandEnabled(t)&&(s=!0),s||!n.queryCommandSupported(t)){let o=e.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");(Oe.os.isMacOS()||Oe.os.isiOS())&&(o=o.replace(/Ctrl\+/g,"⌘+")),e.notificationManager.open({text:o,type:"error"})}}})},i9=(e,t,n)=>{const s=S.fromDom(e.getRoot());return bi(s,P.fromRangeStart(t))?n=n.replace(/^ /,"&nbsp;"):n=n.replace(/^&nbsp;/," "),vi(s,P.fromRangeEnd(t))?n=n.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;"):n=n.replace(/&nbsp;(<br( \/)?>)?$/," "),n},l9=e=>{if(typeof e!="string"){const t=V.extend({paste:e.paste,data:{paste:e.paste}},e);return{content:e.content,details:t}}return{content:e,details:{}}},c9=(e,t)=>{const n=e.selection,s=e.dom;return/^ | $/.test(t)?i9(s,n.getRng(),t):t},eu=(e,t)=>{if(e.selection.isEditable()){const{content:n,details:s}=l9(t);Em(e,{...s,content:c9(e,n),format:"html",set:!1,selection:!0}).each(o=>{const r=kU(e,o.content,s);Sm(e,r,o),e.addVisual()})}},u9=e=>{e.editorCommands.addCommands({mceCleanup:()=>{const t=e.selection.getBookmark();e.setContent(e.getContent()),e.selection.moveToBookmark(t)},insertImage:(t,n,s)=>{eu(e,e.dom.createHTML("img",{src:s}))},insertHorizontalRule:()=>{e.execCommand("mceInsertContent",!1,"<hr>")},insertText:(t,n,s)=>{eu(e,e.dom.encode(s))},insertHTML:(t,n,s)=>{eu(e,s)},mceInsertContent:(t,n,s)=>{eu(e,s)},mceSetContent:(t,n,s)=>{e.setContent(s)},mceReplaceContent:(t,n,s)=>{e.execCommand("mceInsertContent",!1,s.replace(/\{\$selection\}/g,e.selection.getContent({format:"text"})))},mceNewDocument:()=>{e.setContent(MR(e))}})},f9={"font-size":"size","font-family":"face"},d9=zu("font"),m9=(e,t,n)=>{const s=r=>rl(r,e).orThunk(()=>d9(r)?Qe(f9,e).bind(a=>Ms(r,a)):m.none()),o=r=>Ue(S.fromDom(t),r);return Jd(S.fromDom(n),r=>s(r),o)},p9=e=>e.replace(/[\'\"\\]/g,"").replace(/,\s+/g,","),g9=(e,t)=>m.from(qe.DOM.getStyle(t,e,!0)),Ix=e=>(t,n)=>m.from(n).map(S.fromDom).filter(pn).bind(s=>m9(e,t,s.dom).or(g9(e,s.dom))).getOr(""),h9=Ix("font-size"),b9=Nn(p9,Ix("font-family")),v9=e=>Qt(e.getBody()).bind(t=>{const n=t.container();return m.from(z(n)?n.parentNode:n)}),C9=e=>m.from(e.selection.getRng()).bind(t=>{const n=e.getBody();return t.startContainer===n&&t.startOffset===0?m.none():m.from(e.selection.getStart(!0))}),y9=(e,t)=>C9(e).orThunk(te(v9,e)).map(S.fromDom).filter(pn).bind(t),Up=(e,t)=>y9(e,Ao(m.some,t)),Lx=(e,t)=>{if(/^[0-9.]+$/.test(t)){const n=parseInt(t,10);if(n>=1&&n<=7){const s=t1(e),o=n1(e);return o.length>0?o[n-1]||t:s[n-1]||t}else return t}else return t},E9=e=>{const t=e.split(/\s*,\s*/);return Fe(t,n=>n.indexOf(" ")!==-1&&!(Ft(n,'"')||Ft(n,"'"))?`'${n}'`:n).join(",")},S9=(e,t)=>{const n=Lx(e,t);e.formatter.toggle("fontname",{value:E9(n)}),e.nodeChanged()},w9=e=>Up(e,t=>b9(e.getBody(),t.dom)).getOr(""),_9=(e,t)=>{e.formatter.toggle("fontsize",{value:Lx(e,t)}),e.nodeChanged()},x9=e=>Up(e,t=>h9(e.getBody(),t.dom)).getOr(""),k9=e=>Up(e,t=>{const n=S.fromDom(e.getBody()),s=Jd(t,r=>rl(r,"line-height"),te(Ue,n)),o=()=>{const r=parseFloat(ys(t,"line-height")),a=parseFloat(ys(t,"font-size"));return String(r/a)};return s.getOrThunk(o)}).getOr(""),N9=(e,t)=>{e.formatter.toggle("lineheight",{value:String(t)}),e.nodeChanged()},T9=e=>{const t=(n,s)=>{e.formatter.toggle(n,s),e.nodeChanged()};e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":n=>{t(n)},"ForeColor,HiliteColor":(n,s,o)=>{t(n,{value:o})},BackColor:(n,s,o)=>{t("hilitecolor",{value:o})},FontName:(n,s,o)=>{S9(e,o)},FontSize:(n,s,o)=>{_9(e,o)},LineHeight:(n,s,o)=>{N9(e,o)},Lang:(n,s,o)=>{var r;t(n,{value:o.code,customValue:(r=o.customCode)!==null&&r!==void 0?r:null})},RemoveFormat:n=>{e.formatter.remove(n)},mceBlockQuote:()=>{t("blockquote")},FormatBlock:(n,s,o)=>{t(le(o)?o:"p")},mceToggleFormat:(n,s,o)=>{t(o)}})},A9=e=>{const t=n=>e.formatter.match(n);e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":n=>t(n),mceBlockQuote:()=>t("blockquote")},"state"),e.editorCommands.addQueryValueHandler("FontName",()=>w9(e)),e.editorCommands.addQueryValueHandler("FontSize",()=>x9(e)),e.editorCommands.addQueryValueHandler("LineHeight",()=>k9(e))},D9=e=>{T9(e),A9(e)},R9=e=>{e.editorCommands.addCommands({mceAddUndoLevel:()=>{e.undoManager.add()},mceEndUndoLevel:()=>{e.undoManager.add()},Undo:()=>{e.undoManager.undo()},Redo:()=>{e.undoManager.redo()}})},P9=e=>{e.editorCommands.addCommands({Indent:()=>{yW(e)},Outdent:()=>{W0(e)}}),e.editorCommands.addCommands({Outdent:()=>M0(e)},"state")},O9=e=>{const t=(n,s,o)=>{const r=le(o)?{href:o}:o,a=e.dom.getParent(e.selection.getNode(),"a");it(r)&&le(r.href)&&(r.href=r.href.replace(/ /g,"%20"),(!a||!r.href)&&e.formatter.remove("link"),r.href&&e.formatter.apply("link",r,a))};e.editorCommands.addCommands({unlink:()=>{if(e.selection.isEditable()){if(e.selection.isCollapsed()){const n=e.dom.getParent(e.selection.getStart(),"a");n&&e.dom.remove(n,!0);return}e.formatter.remove("link")}},mceInsertLink:t,createLink:t})},B9=e=>{e.editorCommands.addCommands({"InsertUnorderedList,InsertOrderedList":t=>{e.getDoc().execCommand(t);const n=e.dom.getParent(e.selection.getNode(),"ol,ul");if(n){const s=n.parentNode;if(s&&/^(H[1-6]|P|ADDRESS|PRE)$/.test(s.nodeName)){const o=e.selection.getBookmark();e.dom.split(s,n),e.selection.moveToBookmark(o)}}}})},I9=e=>{e.editorCommands.addCommands({"InsertUnorderedList,InsertOrderedList":t=>{const n=e.dom.getParent(e.selection.getNode(),"ul,ol");return n&&(t==="insertunorderedlist"&&n.tagName==="UL"||t==="insertorderedlist"&&n.tagName==="OL")}},"state")},L9=e=>{B9(e),I9(e)},F9=e=>{e.editorCommands.addCommands({insertParagraph:()=>{Hc(Qw,e)},mceInsertNewLine:(t,n,s)=>{r_(e,s)},InsertLineBreak:(t,n,s)=>{Hc(t_,e)}})},$9=e=>{e.editorCommands.addCommands({mceSelectNodeDepth:(t,n,s)=>{let o=0;e.dom.getParent(e.selection.getNode(),r=>Z(r)&&o++===s?(e.selection.select(r),!1):!0,e.getBody())},mceSelectNode:(t,n,s)=>{e.selection.select(s)},selectAll:()=>{const t=e.dom.getParent(e.selection.getStart(),ts);if(t){const n=e.dom.createRng();n.selectNodeContents(t),e.selection.setRng(n)}}})},M9=e=>{e.editorCommands.addCommands({mceRemoveNode:(t,n,s)=>{const o=s??e.selection.getNode();if(o!==e.getBody()){const r=e.selection.getBookmark();e.dom.remove(o,!0),e.selection.moveToBookmark(r)}},mcePrint:()=>{e.getWin().print()},mceFocus:(t,n,s)=>{pB(e,s===!0)},mceToggleVisualAid:()=>{e.hasVisual=!e.hasVisual,e.addVisual()}})},U9=e=>{r9(e),a9(e),R9(e),$9(e),u9(e),O9(e),P9(e),F9(e),L9(e),D9(e),M9(e)},z9=["toggleview"],Fx=e=>We(z9,e.toLowerCase());class $x{constructor(t){this.commands={state:{},exec:{},value:{}},this.editor=t}execCommand(t,n=!1,s,o){const r=this.editor,a=t.toLowerCase(),i=o==null?void 0:o.skip_focus;if(r.removed||(a!=="mcefocus"&&(!/^(mceAddUndoLevel|mceEndUndoLevel)$/i.test(a)&&!i?r.focus():KO(r)),r.dispatch("BeforeExecCommand",{command:t,ui:n,value:s}).isDefaultPrevented()))return!1;const c=this.commands.exec[a];return Ie(c)?(c(a,n,s),r.dispatch("ExecCommand",{command:t,ui:n,value:s}),!0):!1}queryCommandState(t){if(!Fx(t)&&this.editor.quirks.isHidden()||this.editor.removed)return!1;const n=t.toLowerCase(),s=this.commands.state[n];return Ie(s)?s(n):!1}queryCommandValue(t){if(!Fx(t)&&this.editor.quirks.isHidden()||this.editor.removed)return"";const n=t.toLowerCase(),s=this.commands.value[n];return Ie(s)?s(n):""}addCommands(t,n="exec"){const s=this.commands;Ye(t,(o,r)=>{$(r.toLowerCase().split(","),a=>{s[n][a]=o})})}addCommand(t,n,s){const o=t.toLowerCase();this.commands.exec[o]=(r,a,i)=>n.call(s??this.editor,a,i)}queryCommandSupported(t){const n=t.toLowerCase();return!!this.commands.exec[n]}addQueryStateHandler(t,n,s){this.commands.state[t.toLowerCase()]=()=>n.call(s??this.editor)}addQueryValueHandler(t,n,s){this.commands.value[t.toLowerCase()]=()=>n.call(s??this.editor)}}const mr="data-mce-contenteditable",H9=(e,t,n)=>{Wu(e,t)&&!n?Dr(e,t):n&&Ar(e,t)},zp=(e,t,n)=>{try{e.getDoc().execCommand(t,!1,String(n))}catch{}},tu=(e,t)=>{e.dom.contentEditable=t?"true":"false"},W9=e=>{$(jt(e,'*[contenteditable="true"]'),t=>{Pt(t,mr,"true"),tu(t,!1)})},V9=e=>{$(jt(e,`*[${mr}="true"]`),t=>{$t(t,mr),tu(t,!0)})},q9=e=>{m.from(e.selection.getNode()).each(t=>{t.removeAttribute("data-mce-selected")})},j9=e=>{e.selection.setRng(e.selection.getRng())},K9=(e,t)=>{const n=S.fromDom(e.getBody());H9(n,"mce-content-readonly",t),t?(e.selection.controlSelection.hideResizeRect(),e._selectionOverrides.hideFakeCaret(),q9(e),e.readonly=!0,tu(n,!1),W9(n)):(e.readonly=!1,e.hasEditableRoot()&&tu(n,!0),V9(n),zp(e,"StyleWithCSS",!1),zp(e,"enableInlineTableEditing",!1),zp(e,"enableObjectResizing",!1),dB(e)&&e.focus(),j9(e),e.nodeChanged())},pr=e=>e.readonly,Mx=e=>{e.parser.addAttributeFilter("contenteditable",t=>{pr(e)&&$(t,n=>{n.attr(mr,n.attr("contenteditable")),n.attr("contenteditable","false")})}),e.serializer.addAttributeFilter(mr,t=>{pr(e)&&$(t,n=>{n.attr("contenteditable",n.attr(mr))})}),e.serializer.addTempAttr(mr)},G9=e=>{e.serializer?Mx(e):e.on("PreInit",()=>{Mx(e)})},Y9=e=>e.type==="click",X9=["copy"],Z9=e=>We(X9,e.type),Q9=(e,t)=>Fo(t,"a",s=>Ue(s,S.fromDom(e.getBody()))).bind(s=>Ms(s,"href")),J9=(e,t)=>{if(Y9(t)&&!ee.metaKeyPressed(t)){const n=S.fromDom(t.target);Q9(e,n).each(s=>{if(t.preventDefault(),/^#/.test(s)){const o=e.dom.select(`${s},[name="${Eg(s,"#")}"]`);o.length&&e.selection.scrollIntoView(o[0],!0)}else window.open(s,"_blank","rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes")})}else Z9(t)&&e.dispatch(t.type,t)},e4=e=>{e.on("ShowCaret",t=>{pr(e)&&t.preventDefault()}),e.on("ObjectSelected",t=>{pr(e)&&t.preventDefault()})},t4=V.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," ");class Hp{static isNative(t){return!!t4[t.toLowerCase()]}constructor(t){this.bindings={},this.settings=t||{},this.scope=this.settings.scope||this,this.toggleEvent=this.settings.toggleEvent||ot}fire(t,n){return this.dispatch(t,n)}dispatch(t,n){const s=t.toLowerCase(),o=Cf(s,n??{},this.scope);this.settings.beforeFire&&this.settings.beforeFire(o);const r=this.bindings[s];if(r)for(let a=0,i=r.length;a<i;a++){const l=r[a];if(!l.removed){if(l.once&&this.off(s,l.func),o.isImmediatePropagationStopped())return o;if(l.func.call(this.scope,o)===!1)return o.preventDefault(),o}}return o}on(t,n,s,o){if(n===!1&&(n=ot),n){const r={func:n,removed:!1};o&&V.extend(r,o);const a=t.toLowerCase().split(" ");let i=a.length;for(;i--;){const l=a[i];let c=this.bindings[l];c||(c=[],this.toggleEvent(l,!0)),s?c=[r,...c]:c=[...c,r],this.bindings[l]=c}}return this}off(t,n){if(t){const s=t.toLowerCase().split(" ");let o=s.length;for(;o--;){const r=s[o];let a=this.bindings[r];if(!r)return Ye(this.bindings,(i,l)=>{this.toggleEvent(l,!1),delete this.bindings[l]}),this;if(a){if(!n)a.length=0;else{const i=Ea(a,l=>l.func===n);a=i.fail,this.bindings[r]=a,$(i.pass,l=>{l.removed=!0})}a.length||(this.toggleEvent(t,!1),delete this.bindings[r])}}}else Ye(this.bindings,(s,o)=>{this.toggleEvent(o,!1)}),this.bindings={};return this}once(t,n,s){return this.on(t,n,s,{once:!0})}has(t){t=t.toLowerCase();const n=this.bindings[t];return!(!n||n.length===0)}}const Ui=e=>(e._eventDispatcher||(e._eventDispatcher=new Hp({scope:e,toggleEvent:(t,n)=>{Hp.isNative(t)&&e.toggleNativeEvent&&e.toggleNativeEvent(t,n)}})),e._eventDispatcher),Wp={fire(e,t,n){return this.dispatch(e,t,n)},dispatch(e,t,n){const s=this;if(s.removed&&e!=="remove"&&e!=="detach")return Cf(e.toLowerCase(),t??{},s);const o=Ui(s).dispatch(e,t);if(n!==!1&&s.parent){let r=s.parent();for(;r&&!o.isPropagationStopped();)r.dispatch(e,o,!1),r=r.parent?r.parent():void 0}return o},on(e,t,n){return Ui(this).on(e,t,n)},off(e,t){return Ui(this).off(e,t)},once(e,t){return Ui(this).once(e,t)},hasEventListeners(e){return Ui(this).has(e)}},nu=qe.DOM;let gr;const su=(e,t)=>{if(t==="selectionchange")return e.getDoc();if(!e.inline&&/^(?:mouse|touch|click|contextmenu|drop|dragover|dragend)/.test(t))return e.getDoc().documentElement;const n=tv(e);return n?(e.eventRoot||(e.eventRoot=nu.select(n)[0]),e.eventRoot):e.getBody()},n4=e=>!e.hidden&&!pr(e),Ux=(e,t,n)=>{n4(e)?e.dispatch(t,n):pr(e)&&J9(e,n)},zx=(e,t)=>{if(e.delegates||(e.delegates={}),e.delegates[t]||e.removed)return;const n=su(e,t);if(tv(e)){if(gr||(gr={},e.editorManager.on("removeEditor",()=>{e.editorManager.activeEditor||gr&&(Ye(gr,(o,r)=>{e.dom.unbind(su(e,r))}),gr=null)})),gr[t])return;const s=o=>{const r=o.target,a=e.editorManager.get();let i=a.length;for(;i--;){const l=a[i].getBody();(l===r||nu.isChildOf(r,l))&&Ux(a[i],t,o)}};gr[t]=s,nu.bind(n,t,s)}else{const s=o=>{Ux(e,t,o)};nu.bind(n,t,s),e.delegates[t]=s}},Hx={...Wp,bindPendingEventDelegates(){const e=this;V.each(e._pendingNativeEvents,t=>{zx(e,t)})},toggleNativeEvent(e,t){const n=this;e==="focus"||e==="blur"||n.removed||(t?n.initialized?zx(n,e):n._pendingNativeEvents?n._pendingNativeEvents.push(e):n._pendingNativeEvents=[e]:n.initialized&&n.delegates&&(n.dom.unbind(su(n,e),e,n.delegates[e]),delete n.delegates[e]))},unbindAllNativeEvents(){const e=this,t=e.getBody(),n=e.dom;e.delegates&&(Ye(e.delegates,(s,o)=>{e.dom.unbind(su(e,o),o,s)}),delete e.delegates),!e.inline&&t&&n&&(t.onload=null,n.unbind(e.getWin()),n.unbind(e.getDoc())),n&&(n.unbind(t),n.unbind(e.getContainer()))}},s4=e=>le(e)?{value:e.split(/[ ,]/),valid:!0}:Fs(e,le)?{value:e,valid:!0}:{valid:!1,message:"The value must be a string[] or a comma/space separated string."},o4=e=>{const t=(()=>{switch(e){case"array":return et;case"boolean":return Ls;case"function":return Ie;case"number":return Yt;case"object":return it;case"string":return le;case"string[]":return s4;case"object[]":return n=>Fs(n,it);case"regexp":return n=>Wt(n,RegExp);default:return yt}})();return n=>Vp(n,t,`The value must be a ${e}.`)},r4=e=>le(e.processor),Wx=(e,t)=>{const n=Ta(t.message)?"":`. ${t.message}`;return e+n},Vx=e=>e.valid,Vp=(e,t,n="")=>{const s=t(e);return Ls(s)?s?{value:e,valid:!0}:{valid:!1,message:n}:s},a4=(e,t,n)=>{if(!St(t)){const s=Vp(t,n);if(Vx(s))return s.value;console.error(Wx(`Invalid default value passed for the "${e}" option`,s))}},i4=(e,t)=>{const n={},s={},o=(u,d,b)=>{const E=Vp(d,b);return Vx(E)?(s[u]=E.value,!0):(console.warn(Wx(`Invalid value passed for the ${u} option`,E)),!1)},r=(u,d)=>{const b=r4(d)?o4(d.processor):d.processor,E=a4(u,d.default,b);n[u]={...d,default:E,processor:b},Qe(s,u).orThunk(()=>Qe(t,u)).each(y=>o(u,y,b))},a=u=>ye(n,u);return{register:r,isRegistered:a,get:u=>Qe(s,u).orThunk(()=>Qe(n,u).map(d=>d.default)).getOrUndefined(),set:(u,d)=>{if(a(u)){const b=n[u];return b.immutable?(console.error(`"${u}" is an immutable option and cannot be updated`),!1):o(u,d,b.processor)}else return console.warn(`"${u}" is not a registered option. Ensure the option has been registered before setting a value.`),!1},unset:u=>{const d=a(u);return d&&delete s[u],d},isSet:u=>ye(s,u)}},l4=["design","readonly"],qx=(e,t,n,s)=>{const o=n[t.get()],r=n[s];try{r.activate()}catch(a){console.error(`problem while activating editor mode ${s}:`,a);return}o.deactivate(),o.editorReadOnly!==r.editorReadOnly&&K9(e,r.editorReadOnly),t.set(s),AP(e,s)},c4=(e,t,n,s)=>{if(s!==n.get()){if(!ye(t,s))throw new Error(`Editor mode '${s}' is invalid`);e.initialized?qx(e,n,t,s):e.on("init",()=>qx(e,n,t,s))}},u4=(e,t,n)=>{if(We(l4,t))throw new Error(`Cannot override default mode ${t}`);return{...e,[t]:{...n,deactivate:()=>{try{n.deactivate()}catch(s){console.error(`problem while deactivating editor mode ${t}:`,s)}}}}},f4=e=>{const t=At("design"),n=At({design:{activate:Se,deactivate:Se,editorReadOnly:!1},readonly:{activate:Se,deactivate:Se,editorReadOnly:!0}});return G9(e),e4(e),{isReadOnly:()=>pr(e),set:s=>c4(e,n.get(),t,s),get:()=>t.get(),register:(s,o)=>{n.set(u4(n.get(),s,o))}}},qp=V.each,jp=V.explode,d4={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},jx=V.makeMap("alt,ctrl,shift,meta,access"),m4=e=>e in jx,p4=e=>{const t={},n=Oe.os.isMacOS()||Oe.os.isiOS();qp(jp(e.toLowerCase(),"+"),r=>{m4(r)?t[r]=!0:/^[0-9]{2,}$/.test(r)?t.keyCode=parseInt(r,10):(t.charCode=r.charCodeAt(0),t.keyCode=d4[r]||r.toUpperCase().charCodeAt(0))});const s=[t.keyCode];let o;for(o in jx)t[o]?s.push(o):t[o]=!1;return t.id=s.join(","),t.access&&(t.alt=!0,n?t.ctrl=!0:t.shift=!0),t.meta&&(n?t.meta=!0:(t.ctrl=!0,t.meta=!1)),t};class Kx{constructor(t){this.shortcuts={},this.pendingPatterns=[],this.editor=t;const n=this;t.on("keyup keypress keydown",s=>{(n.hasModifier(s)||n.isFunctionKey(s))&&!s.isDefaultPrevented()&&(qp(n.shortcuts,o=>{n.matchShortcut(s,o)&&(n.pendingPatterns=o.subpatterns.slice(0),s.type==="keydown"&&n.executeShortcutAction(o))}),n.matchShortcut(s,n.pendingPatterns[0])&&(n.pendingPatterns.length===1&&s.type==="keydown"&&n.executeShortcutAction(n.pendingPatterns[0]),n.pendingPatterns.shift()))})}add(t,n,s,o){const r=this,a=r.normalizeCommandFunc(s);return qp(jp(V.trim(t)),i=>{const l=r.createShortcut(i,n,a,o);r.shortcuts[l.id]=l}),!0}remove(t){const n=this.createShortcut(t);return this.shortcuts[n.id]?(delete this.shortcuts[n.id],!0):!1}normalizeCommandFunc(t){const n=this,s=t;return typeof s=="string"?()=>{n.editor.execCommand(s,!1,null)}:V.isArray(s)?()=>{n.editor.execCommand(s[0],s[1],s[2])}:s}createShortcut(t,n,s,o){const r=V.map(jp(t,">"),p4);return r[r.length-1]=V.extend(r[r.length-1],{func:s,scope:o||this.editor}),V.extend(r[0],{desc:this.editor.translate(n),subpatterns:r.slice(1)})}hasModifier(t){return t.altKey||t.ctrlKey||t.metaKey}isFunctionKey(t){return t.type==="keydown"&&t.keyCode>=112&&t.keyCode<=123}matchShortcut(t,n){return!n||n.ctrl!==t.ctrlKey||n.meta!==t.metaKey||n.alt!==t.altKey||n.shift!==t.shiftKey?!1:t.keyCode===n.keyCode||t.charCode&&t.charCode===n.charCode?(t.preventDefault(),!0):!1}executeShortcutAction(t){return t.func?t.func.call(t.scope):null}}const g4=()=>{const e={},t={},n={},s={},o={},r={},a={},i={},l=(f,u)=>(d,b)=>{f[d.toLowerCase()]={...b,type:u}},c=(f,u)=>s[f.toLowerCase()]=u;return{addButton:l(e,"button"),addGroupToolbarButton:l(e,"grouptoolbarbutton"),addToggleButton:l(e,"togglebutton"),addMenuButton:l(e,"menubutton"),addSplitButton:l(e,"splitbutton"),addMenuItem:l(t,"menuitem"),addNestedMenuItem:l(t,"nestedmenuitem"),addToggleMenuItem:l(t,"togglemenuitem"),addAutocompleter:l(n,"autocompleter"),addContextMenu:l(o,"contextmenu"),addContextToolbar:l(r,"contexttoolbar"),addContextForm:l(r,"contextform"),addSidebar:l(a,"sidebar"),addView:l(i,"views"),addIcon:c,getAll:()=>({buttons:e,menuItems:t,icons:s,popups:n,contextMenus:o,contextToolbars:r,sidebars:a,views:i})}},h4=()=>{const e=g4();return{addAutocompleter:e.addAutocompleter,addButton:e.addButton,addContextForm:e.addContextForm,addContextMenu:e.addContextMenu,addContextToolbar:e.addContextToolbar,addIcon:e.addIcon,addMenuButton:e.addMenuButton,addMenuItem:e.addMenuItem,addNestedMenuItem:e.addNestedMenuItem,addSidebar:e.addSidebar,addSplitButton:e.addSplitButton,addToggleButton:e.addToggleButton,addGroupToolbarButton:e.addGroupToolbarButton,addToggleMenuItem:e.addToggleMenuItem,addView:e.addView,getAll:e.getAll}},hr=qe.DOM,Gx=V.extend,b4=V.each;class ou{constructor(t,n,s){this.plugins={},this.contentCSS=[],this.contentStyles=[],this.loadedCSS={},this.isNotDirty=!1,this.composing=!1,this.destroyed=!1,this.hasHiddenInput=!1,this.iframeElement=null,this.initialized=!1,this.readonly=!1,this.removed=!1,this.startContent="",this._pendingNativeEvents=[],this._skinLoaded=!1,this._editableRoot=!0,this.editorManager=s,this.documentBaseUrl=s.documentBaseURL,Gx(this,Hx);const o=this;this.id=t,this.hidden=!1;const r=t9(s.defaultOptions,n);this.options=i4(o,r),$D(o);const a=this.options.get;a("deprecation_warnings")&&pz(n,r);const i=a("suffix");i&&(s.suffix=i),this.suffix=s.suffix;const l=a("base_url");l&&s._setBaseUrl(l),this.baseUri=s.baseURI;const c=If(o);c&&(js.ScriptLoader._setReferrerPolicy(c),qe.DOM.styleSheetLoader._setReferrerPolicy(c));const f=sv(o);K(f)&&qe.DOM.styleSheetLoader._setContentCssCors(f),Xt.languageLoad=a("language_load"),Xt.baseURL=s.baseURL,this.setDirty(!1),this.documentBaseURI=new as(jb(o),{base_uri:this.baseUri}),this.baseURI=this.baseUri,this.inline=Ff(o),this.hasVisual=NR(o),this.shortcuts=new Kx(this),this.editorCommands=new $x(this),U9(this);const u=a("cache_suffix");u&&(Oe.cacheSuffix=u.replace(/^[\?\&]+/,"")),this.ui={registry:h4(),styleSheetLoader:void 0,show:Se,hide:Se,setEnabled:Se,isEnabled:yt},this.mode=f4(o),s.dispatch("SetupEditor",{editor:this});const d=DR(o);Ie(d)&&d.call(o,o)}render(){U5(this)}focus(t){this.execCommand("mceFocus",!1,t)}hasFocus(){return or(this)}translate(t){return ns.translate(t)}getParam(t,n,s){const o=this.options;return o.isRegistered(t)||(K(s)?o.register(t,{processor:s,default:n}):o.register(t,{processor:yt,default:n})),!o.isSet(t)&&!St(n)?n:o.get(t)}hasPlugin(t,n){return We(Rl(this),t)?n?na.get(t)!==void 0:!0:!1}nodeChanged(t){this._nodeChangeDispatcher.nodeChanged(t)}addCommand(t,n,s){this.editorCommands.addCommand(t,n,s)}addQueryStateHandler(t,n,s){this.editorCommands.addQueryStateHandler(t,n,s)}addQueryValueHandler(t,n,s){this.editorCommands.addQueryValueHandler(t,n,s)}addShortcut(t,n,s,o){this.shortcuts.add(t,n,s,o)}execCommand(t,n,s,o){return this.editorCommands.execCommand(t,n,s,o)}queryCommandState(t){return this.editorCommands.queryCommandState(t)}queryCommandValue(t){return this.editorCommands.queryCommandValue(t)}queryCommandSupported(t){return this.editorCommands.queryCommandSupported(t)}show(){const t=this;t.hidden&&(t.hidden=!1,t.inline?t.getBody().contentEditable="true":(hr.show(t.getContainer()),hr.hide(t.id)),t.load(),t.dispatch("show"))}hide(){const t=this;t.hidden||(t.save(),t.inline?(t.getBody().contentEditable="false",t===t.editorManager.focusedEditor&&(t.editorManager.focusedEditor=null)):(hr.hide(t.getContainer()),hr.setStyle(t.id,"display",t.orgDisplay)),t.hidden=!0,t.dispatch("hide"))}isHidden(){return this.hidden}setProgressState(t,n){this.dispatch("ProgressState",{state:t,time:n})}load(t={}){const n=this,s=n.getElement();if(n.removed)return"";if(s){const o={...t,load:!0},r=Ju(s)?s.value:s.innerHTML,a=n.setContent(r,o);return o.no_events||n.dispatch("LoadContent",{...o,element:s}),a}else return""}save(t={}){const n=this;let s=n.getElement();if(!s||!n.initialized||n.removed)return"";const o={...t,save:!0,element:s};let r=n.getContent(o);const a={...o,content:r};if(a.no_events||n.dispatch("SaveContent",a),a.format==="raw"&&n.dispatch("RawSaveContent",a),r=a.content,Ju(s))s.value=r;else{(t.is_removing||!n.inline)&&(s.innerHTML=r);const i=hr.getParent(n.id,"form");i&&b4(i.elements,l=>l.name===n.id?(l.value=r,!1):!0)}return a.element=o.element=s=null,a.set_dirty!==!1&&n.setDirty(!1),r}setContent(t,n){return Dm(this,t,n)}getContent(t){return tz(this,t)}insertContent(t,n){n&&(t=Gx({content:t},n)),this.execCommand("mceInsertContent",!1,t)}resetContent(t){t===void 0?Dm(this,this.startContent,{format:"raw"}):Dm(this,t),this.undoManager.reset(),this.setDirty(!1),this.nodeChanged()}isDirty(){return!this.isNotDirty}setDirty(t){const n=!this.isNotDirty;this.isNotDirty=!t,t&&t!==n&&this.dispatch("dirty")}getContainer(){const t=this;return t.container||(t.container=t.editorContainer||hr.get(t.id+"_parent")),t.container}getContentAreaContainer(){return this.contentAreaContainer}getElement(){return this.targetElm||(this.targetElm=hr.get(this.id)),this.targetElm}getWin(){const t=this;if(!t.contentWindow){const n=t.iframeElement;n&&(t.contentWindow=n.contentWindow)}return t.contentWindow}getDoc(){const t=this;if(!t.contentDocument){const n=t.getWin();n&&(t.contentDocument=n.document)}return t.contentDocument}getBody(){var t,n;const s=this.getDoc();return(n=(t=this.bodyElement)!==null&&t!==void 0?t:s==null?void 0:s.body)!==null&&n!==void 0?n:null}convertURL(t,n,s){const o=this,r=o.options.get,a=PR(o);return Ie(a)?a.call(o,t,s,!0,n):!r("convert_urls")||s==="link"||it(s)&&s.nodeName==="LINK"||t.indexOf("file:")===0||t.length===0?t:r("relative_urls")?o.documentBaseURI.toRelative(t):(t=o.documentBaseURI.toAbsolute(t,r("remove_script_host")),t)}addVisual(t){n9(this,t)}setEditableRoot(t){z5(this,t)}hasEditableRoot(){return H5(this)}remove(){vz(this)}destroy(t){Cz(this,t)}uploadImages(){return this.editorUpload.uploadImages()}_scanForImages(){return this.editorUpload.scanForImages()}}const ua=qe.DOM,ru=V.each;let Yx=!1,au,un=[];const iu=e=>{const t=e.type;ru(So.get(),n=>{switch(t){case"scroll":n.dispatch("ScrollWindow",e);break;case"resize":n.dispatch("ResizeWindow",e);break}})},Xx=e=>{if(e!==Yx){const t=qe.DOM;e?(t.bind(window,"resize",iu),t.bind(window,"scroll",iu)):(t.unbind(window,"resize",iu),t.unbind(window,"scroll",iu)),Yx=e}},Zx=e=>{const t=un;return un=ve(un,n=>e!==n),So.activeEditor===e&&(So.activeEditor=un.length>0?un[0]:null),So.focusedEditor===e&&(So.focusedEditor=null),t.length!==un.length},v4=e=>{e&&e.initialized&&!(e.getContainer()||e.getBody()).parentNode&&(Zx(e),e.unbindAllNativeEvents(),e.destroy(!0),e.removed=!0)},C4=document.compatMode!=="CSS1Compat",So={...Wp,baseURI:null,baseURL:null,defaultOptions:{},documentBaseURL:null,suffix:null,majorVersion:"6",minorVersion:"6.0",releaseDate:"2023-07-12",i18n:ns,activeEditor:null,focusedEditor:null,setup(){const e=this;let t="",n="",s=as.getDocumentBaseUrl(document.location);/^[^:]+:\/\/\/?[^\/]+\//.test(s)&&(s=s.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(s)||(s+="/"));const o=window.tinymce||window.tinyMCEPreInit;if(o)t=o.base||o.baseURL,n=o.suffix;else{const r=document.getElementsByTagName("script");for(let a=0;a<r.length;a++){const i=r[a].src||"";if(i==="")continue;const l=i.substring(i.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(i)){l.indexOf(".min")!==-1&&(n=".min"),t=i.substring(0,i.lastIndexOf("/"));break}}if(!t&&document.currentScript){const a=document.currentScript.src;a.indexOf(".min")!==-1&&(n=".min"),t=a.substring(0,a.lastIndexOf("/"))}}e.baseURL=new as(s).toAbsolute(t),e.documentBaseURL=s,e.baseURI=new as(e.baseURL),e.suffix=n,oB(e)},overrideDefaults(e){const t=e.base_url;t&&this._setBaseUrl(t);const n=e.suffix;n&&(this.suffix=n),this.defaultOptions=e;const s=e.plugin_base_urls;s!==void 0&&Ye(s,(o,r)=>{Xt.PluginManager.urls[r]=o})},init(e){const t=this;let n;const s=V.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," "),o=(f,u)=>f.inline&&u.tagName.toLowerCase()in s,r=f=>{let u=f.id;return u||(u=Qe(f,"name").filter(d=>!ua.get(d)).getOrThunk(ua.uniqueId),f.setAttribute("id",u)),u},a=f=>{const u=e[f];if(u)return u.apply(t,[])},i=f=>Oe.browser.isIE()||Oe.browser.isEdge()?(Cc("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tiny.cloud/docs/tinymce/6/support/#supportedwebbrowsers"),[]):C4?(Cc("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode."),[]):le(f.selector)?ua.select(f.selector):K(f.target)?[f.target]:[];let l=f=>{n=f};const c=()=>{let f=0;const u=[];let d;const b=(E,g,y)=>{const w=new ou(E,g,t);u.push(w),w.on("init",()=>{++f===d.length&&l(u)}),w.targetElm=w.targetElm||y,w.render()};ua.unbind(window,"ready",c),a("onpageload"),d=Ok(i(e)),V.each(d,E=>{v4(t.get(E.id))}),d=V.grep(d,E=>!t.get(E.id)),d.length===0?l([]):ru(d,E=>{o(e,E)?Cc("Could not initialize inline editor on invalid inline target element",E):b(r(E),e,E)})};return ua.bind(window,"ready",c),new Promise(f=>{n?f(n):l=u=>{f(u)}})},get(e){return arguments.length===0?un.slice(0):le(e)?wt(un,t=>t.id===e).getOr(null):Yt(e)&&un[e]?un[e]:null},add(e){const t=this,n=t.get(e.id);return n===e||(n===null&&un.push(e),Xx(!0),t.activeEditor=e,t.dispatch("AddEditor",{editor:e}),au||(au=s=>{const o=t.dispatch("BeforeUnload");if(o.returnValue)return s.preventDefault(),s.returnValue=o.returnValue,o.returnValue},window.addEventListener("beforeunload",au))),e},createEditor(e,t){return this.add(new ou(e,t,this))},remove(e){const t=this;let n;if(!e){for(let s=un.length-1;s>=0;s--)t.remove(un[s]);return}if(le(e)){ru(ua.select(e),s=>{n=t.get(s.id),n&&t.remove(n)});return}return n=e,Lt(t.get(n.id))?null:(Zx(n)&&t.dispatch("RemoveEditor",{editor:n}),un.length===0&&window.removeEventListener("beforeunload",au),n.remove(),Xx(un.length>0),n)},execCommand(e,t,n){var s;const o=this,r=it(n)?(s=n.id)!==null&&s!==void 0?s:n.index:n;switch(e){case"mceAddEditor":{if(!o.get(r)){const a=n.options;new ou(r,a,o).render()}return!0}case"mceRemoveEditor":{const a=o.get(r);return a&&a.remove(),!0}case"mceToggleEditor":{const a=o.get(r);return a?(a.isHidden()?a.show():a.hide(),!0):(o.execCommand("mceAddEditor",!1,n),!0)}}return o.activeEditor?o.activeEditor.execCommand(e,t,n):!1},triggerSave:()=>{ru(un,e=>{e.save()})},addI18n:(e,t)=>{ns.add(e,t)},translate:e=>ns.translate(e),setActive(e){const t=this.activeEditor;this.activeEditor!==e&&(t&&t.dispatch("deactivate",{relatedTarget:e}),e.dispatch("activate",{relatedTarget:t})),this.activeEditor=e},_setBaseUrl(e){this.baseURL=new as(this.documentBaseURL).toAbsolute(e.replace(/\/+$/,"")),this.baseURI=new as(this.baseURL)}};So.setup();const y4=(()=>{const e=co(),t=r=>({items:r,types:Cn(r),getType:a=>Qe(r,a).getOrUndefined()}),n=r=>{e.set(r)},s=()=>e.get().getOrUndefined(),o=e.clear;return{FakeClipboardItem:t,write:n,read:s,clear:o}})(),Qx=Math.min,fa=Math.max,lu=Math.round,Jx=(e,t,n)=>{let s=t.x,o=t.y;const r=e.w,a=e.h,i=t.w,l=t.h,c=(n||"").split("");return c[0]==="b"&&(o+=l),c[1]==="r"&&(s+=i),c[0]==="c"&&(o+=lu(l/2)),c[1]==="c"&&(s+=lu(i/2)),c[3]==="b"&&(o-=a),c[4]==="r"&&(s-=r),c[3]==="c"&&(o-=lu(a/2)),c[4]==="c"&&(s-=lu(r/2)),da(s,o,r,a)},E4=(e,t,n,s)=>{for(let o=0;o<s.length;o++){const r=Jx(e,t,s[o]);if(r.x>=n.x&&r.x+r.w<=n.w+n.x&&r.y>=n.y&&r.y+r.h<=n.h+n.y)return s[o]}return null},S4=(e,t,n)=>da(e.x-t,e.y-n,e.w+t*2,e.h+n*2),w4=(e,t)=>{const n=fa(e.x,t.x),s=fa(e.y,t.y),o=Qx(e.x+e.w,t.x+t.w),r=Qx(e.y+e.h,t.y+t.h);return o-n<0||r-s<0?null:da(n,s,o-n,r-s)},_4=(e,t,n)=>{let s=e.x,o=e.y,r=e.x+e.w,a=e.y+e.h;const i=t.x+t.w,l=t.y+t.h,c=fa(0,t.x-s),f=fa(0,t.y-o),u=fa(0,r-i),d=fa(0,a-l);return s+=c,o+=f,n&&(r+=c,a+=f,s-=u,o-=d),r-=u,a-=d,da(s,o,r-s,a-o)},da=(e,t,n,s)=>({x:e,y:t,w:n,h:s}),x4={inflate:S4,relativePosition:Jx,findBestRelativePosition:E4,intersect:w4,clamp:_4,create:da,fromClientRect:e=>da(e.left,e.top,e.width,e.height)},k4=(e,t,n=1e3)=>{let s=!1,o=null;const r=c=>(...f)=>{s||(s=!0,o!==null&&(clearTimeout(o),o=null),c.apply(null,f))},a=r(e),i=r(t);return{start:(...c)=>{!s&&o===null&&(o=setTimeout(()=>i.apply(null,c),n))},resolve:a,reject:i}},N4=(()=>{const e={},t={};return{load:(r,a)=>{const i=`Script at URL "${a}" failed to load`,l=`Script at URL "${a}" did not call \`tinymce.Resource.add('${r}', data)\` within 1 second`;if(e[r]!==void 0)return e[r];{const c=new Promise((f,u)=>{const d=k4(f,u);t[r]=d.resolve,js.ScriptLoader.loadScript(a).then(()=>d.start(l),()=>d.reject(i))});return e[r]=c,c}},add:(r,a)=>{t[r]!==void 0&&(t[r](a),delete t[r]),e[r]=Promise.resolve(a)},unload:r=>{delete e[r]}}})(),T4=()=>(()=>{let e={},t=[];const n={getItem:s=>{const o=e[s];return o||null},setItem:(s,o)=>{t.push(s),e[s]=String(o)},key:s=>t[s],removeItem:s=>{t=t.filter(o=>o===s),delete e[s]},clear:()=>{t=[],e={}},length:0};return Object.defineProperty(n,"length",{get:()=>t.length,configurable:!1,enumerable:!1}),n})();let zi;try{const e="__storage_test__";zi=window.localStorage,zi.setItem(e,e),zi.removeItem(e)}catch{zi=T4()}var A4=zi;const D4={geom:{Rect:x4},util:{Delay:In,Tools:V,VK:ee,URI:as,EventDispatcher:Hp,Observable:Wp,I18n:ns,LocalStorage:A4,ImageUploader:Xz},dom:{EventUtils:qo,TreeWalker:_t,TextSeeker:Go,DOMUtils:qe,ScriptLoader:js,RangeUtils:sr,Serializer:wS,StyleSheetLoader:Vh,ControlSelection:cC,BookmarkManager:di,Selection:SS,Event:qo.Event},html:{Styles:vf,Entities:io,Node:cn,Schema:lo,DomParser:ea,Writer:KC,Serializer:go},Env:Oe,AddOnManager:Xt,Annotator:eC,Formatter:$S,UndoManager:US,EditorCommands:$x,WindowManager:DS,NotificationManager:AS,EditorObservable:Hx,Shortcuts:Kx,Editor:ou,FocusManager:PC,EditorManager:So,DOM:qe.DOM,ScriptLoader:js.ScriptLoader,PluginManager:na,ThemeManager:fr,ModelManager:ta,IconManager:bc,Resource:N4,FakeClipboard:y4,trim:V.trim,isArray:V.isArray,is:V.is,toArray:V.toArray,makeMap:V.makeMap,each:V.each,map:V.map,grep:V.grep,inArray:V.inArray,extend:V.extend,walk:V.walk,resolve:V.resolve,explode:V.explode,_addCacheSuffix:V._addCacheSuffix},ek=V.extend(So,D4),R4=e=>{try{h.exports=e}catch{}};(e=>{window.tinymce=e,window.tinyMCE=e})(ek),R4(ek)})()})(Nk);var l7=Nk.exports;const sg=i7(l7);function Yi(){[...document.getElementById("influactive_form_fields_container").getElementsByClassName("influactive_form_field")].forEach((v,C)=>{const k=["type","label","name","order","required"],B=[...v.getElementsByClassName("option-field")];k.forEach(M=>{const G=v.querySelector(`.${M}`);G&&(M!=="required"||G.value==="1")&&(G.name=`influactive_form_fields[${C}][${M}]`)}),B.length>0&&B.forEach((M,G)=>{["label","value"].forEach(se=>{const ue=M.querySelector(`.${se}`);ue&&(ue.name=`influactive_form_fields[${C}][options][${G}][${se}]`)})})})}function mk(h,p,v,C,k){const B=document.createElement("label");B.textContent=p;const M=document.createElement("input");M.type=C,M.name=v,M.required=!0,M.className=k,B.appendChild(M),h.appendChild(B)}function c7(){const h=document.createElement("div"),p=document.getElementsByClassName("influactive_form_field").length;h.className="influactive_form_field";const v=document.createElement("p"),C=document.createElement("label");C.textContent="Type ";const k=document.createElement("select");k.required=!0,k.className="field_type",k.name=`influactive_form_fields[${p}][type]`,[["text",influactiveFormsTranslations.Text],["email",influactiveFormsTranslations.Email],["number",influactiveFormsTranslations.Number],["textarea",influactiveFormsTranslations.Textarea],["select",influactiveFormsTranslations.Select],["gdpr",influactiveFormsTranslations.GDPR],["free_text",influactiveFormsTranslations.Freetext]].forEach(([de,we])=>{const Ve=document.createElement("option");Ve.value=de,Ve.textContent=we,k.appendChild(Ve)}),C.appendChild(k),v.appendChild(C),mk(v,"Label ",`influactive_form_fields[${p}][label]`,"text","influactive_form_fields_label"),mk(v,"Name ",`influactive_form_fields[${p}][name]`,"text","influactive_form_fields_name");const M=document.createElement("div");M.className="options_container",v.appendChild(M);const G=document.createElement("label");G.textContent="Required ";const X=document.createElement("input");X.type="checkbox",X.name=`influactive_form_fields[${p}][required]`,X.value="1",X.className="influactive_form_fields_required",G.appendChild(X),v.appendChild(G);const se=document.createElement("input");se.type="hidden",se.name=`influactive_form_fields[${p}][order]`,se.className="influactive_form_fields_order",se.value=p,v.appendChild(se);const ue=document.createElement("a");return ue.href="#",ue.className="remove_field",ue.textContent=influactiveFormsTranslations.removeFieldText,v.appendChild(ue),h.appendChild(v),h}function u7(){const h=document.createElement("p");h.className="option-field";const p=document.createElement("label");p.textContent=`${influactiveFormsTranslations.optionLabelLabelText} `;const v=document.createElement("input");v.type="text",v.className="option-label",v.name="influactive_form_fields[][options][][label]",p.appendChild(v),h.appendChild(p),h.appendChild(document.createTextNode(" "));const C=document.createElement("label");C.textContent=`${influactiveFormsTranslations.optionValueLabelText} `;const k=document.createElement("input");k.type="text",k.className="option-value",k.name="influactive_form_fields[][options][][value]",C.appendChild(k),h.appendChild(C),h.appendChild(document.createTextNode(" "));const B=document.createElement("a");return B.href="#",B.className="remove_option",B.textContent=influactiveFormsTranslations.removeOptionText,h.appendChild(B),h}function Tk(h){h.preventDefault(),h.target.closest(".option-field").remove(),Yi()}function ig(h){h.preventDefault();const p=h.target.parentElement.previousElementSibling,v=u7(),C=v.querySelector(".remove_option");C&&C.addEventListener("click",Tk),p.appendChild(v);const k=v.closest(".influactive_form_field").querySelector(".influactive_form_fields_order").value;let B=0;document.getElementsByClassName("option-field").length>0&&(B=document.getElementsByClassName("option-field").length),v.querySelector(".option-label").name=`influactive_form_fields[${k}][options][${B}][label]`,v.querySelector(".option-value").name=`influactive_form_fields[${k}][options][${B}][value]`,Yi()}function Ak(h){return function(v){Yi();const C=v.target.value,k=h.querySelector(".influactive_form_fields_label"),B=h.querySelector(".influactive_form_fields_name"),M=h.querySelector(".influactive_form_fields_required"),G=h.querySelector(".wysiwyg-editor");if(k&&B&&(G&&sg.get(G.id)&&sg.get(G.id).remove(),k.parentElement.remove(),B.parentElement.remove(),M&&M.parentElement.remove(),G&&G.remove()),C==="gdpr"){const ue=document.createElement("label"),de=document.createTextNode(`${influactiveFormsTranslations.Text} `);ue.appendChild(de);const we=document.createElement("input");we.type="text",we.name=`influactive_form_fields[${h.querySelector(".influactive_form_fields_order").value}][label]`,we.className="influactive_form_fields_label",we.dataset.type="gdpr",we.required=!0,ue.appendChild(we);const Ve=document.createElement("label"),$e=document.createElement("input");$e.type="hidden",$e.name=`influactive_form_fields[${h.querySelector(".influactive_form_fields_order").value}][name]`,$e.className="influactive_form_fields_name",$e.value="gdpr",Ve.appendChild($e),h.appendChild(ue),h.appendChild(Ve)}if(C==="free_text"){const ue=document.createElement("textarea");ue.name=`influactive_form_fields[${h.querySelector(".influactive_form_fields_order").value}][label]`,ue.className="influactive_form_fields_label wysiwyg-editor",ue.rows=10,h.appendChild(ue),setTimeout(()=>{sg.init({selector:".wysiwyg-editor",height:215,menubar:!1,plugins:["lists link image charmap","fullscreen","paste"],toolbar:"bold italic underline link unlink undo redo formatselect backcolor alignleft aligncenter alignright alignjustify bullist numlist outdent indent removeformat",content_style:"body { font-family:Helvetica,Arial,sans-serif; font-size:14px }"})},0);const de=document.createElement("label"),we=document.createElement("input");we.type="hidden",we.name=`influactive_form_fields[${h.querySelector(".influactive_form_fields_order").value}][name]`,we.className="influactive_form_fields_name",we.value="free_text",de.appendChild(we),h.appendChild(de)}const X=h.querySelector(".influactive_form_fields_label"),se=h.querySelector(".influactive_form_fields_name");if(!X&&!se){const ue=document.createElement("label");ue.textContent="Label ";const de=document.createElement("input");de.type="text",de.name=`influactive_form_fields[${h.querySelector(".influactive_form_fields_order").value}][label]`,de.className="influactive_form_fields_label",de.required=!0,ue.appendChild(de);const we=document.createElement("label");we.textContent="Name ";const Ve=document.createElement("input");Ve.type="text",Ve.name=`influactive_form_fields[${h.querySelector(".influactive_form_fields_order").value}][name]`,Ve.className="influactive_form_fields_name",Ve.required=!0,we.appendChild(Ve);const $e=document.createElement("label");$e.textContent="Required ";const Me=document.createElement("input");Me.type="checkbox",Me.value="1",Me.name=`influactive_form_fields[${h.querySelector(".influactive_form_fields_order").value}][required]`,Me.className="influactive_form_fields_required",Me.required=!0,$e.appendChild(Me),h.appendChild(ue),h.appendChild(we),h.appendChild($e)}if(C==="select"){const ue=document.createElement("p"),de=document.createElement("a");de.href="#",de.textContent="Add option",de.classList.add("add_option"),ue.appendChild(de),h.appendChild(ue);const we=document.createElement("div");we.classList.add("options_container"),h.appendChild(we),de.addEventListener("click",ig)}else{const ue=h.querySelector(".add_option"),de=h.querySelector(".options_container");ue&&ue.remove(),de&&de.remove()}}}function f7(h){h.preventDefault();const p=c7();document.getElementById("influactive_form_fields_container").appendChild(p),p.querySelector(".field_type").addEventListener("change",Ak(p));const k=p.querySelector(".add_option");k&&k.addEventListener("click",ig),Yi()}function d7(h){h.preventDefault(),h.target.closest(".influactive_form_field").remove(),Yi()}document.addEventListener("DOMContentLoaded",()=>{const h=document.getElementById("influactive_form_fields_container");new Pe(h,{animation:150,handle:".influactive_form_field"}),document.getElementById("add_field").addEventListener("click",f7),Array.from(h.getElementsByClassName("influactive_form_field")).forEach(p=>{const v=p.querySelector(".field_type");if(v.addEventListener("change",Ak(p)),v.value==="select"){const C=p.querySelector(".add_option"),k=p.querySelector(".remove_option");C&&C.addEventListener("click",ig),k&&k.addEventListener("click",Tk)}}),h.addEventListener("click",p=>{p.target&&p.target.classList.contains("remove_field")&&d7(p)})});
